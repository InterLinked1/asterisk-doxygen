<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: chan_misdn.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9662a6a166de1dda18179da17db0f05a.html">channels</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">chan_misdn.c File Reference<div class="ingroups"><a class="el" href="../../d6/df4/group__channel__drivers.html">Module: Asterisk Channel Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>the chan_misdn channel driver for Asterisk  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;arpa/inet.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/file.h&gt;</code><br />
<code>#include &lt;semaphore.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;<a class="el" href="../../de/df7/time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dac/io_8h_source.html">asterisk/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d39/translate_8h_source.html">asterisk/translate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/callerid_8h_source.html">asterisk/callerid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0f/indications_8h_source.html">asterisk/indications.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/features_8h_source.html">asterisk/features.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/term_8h_source.html">asterisk/term.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d14/abstract__jb_8h_source.html">asterisk/abstract_jb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d0a/format_8h_source.html">asterisk/format.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3c/format__cap_8h_source.html">asterisk/format_cap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/dbc/pickup_8h_source.html">asterisk/pickup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html">chan_misdn_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d26/isdn__lib_8h_source.html">isdn_lib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for chan_misdn.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d5a/chan__misdn_8c__incl.png" border="0" usemap="#chan__misdn_8c" alt=""/></div>
<map name="chan__misdn_8c" id="chan__misdn_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="49,304,133,331"/>
<area shape="rect" id="node17" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="475,304,537,331"/>
<area shape="rect" id="node19" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1199,229,1338,256"/>
<area shape="rect" id="node21" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1320,304,1479,331"/>
<area shape="rect" id="node22" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1689,379,1819,405"/>
<area shape="rect" id="node25" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1691,304,1817,331"/>
<area shape="rect" id="node26" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="744,304,871,331"/>
<area shape="rect" id="node27" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="562,304,719,331"/>
<area shape="rect" id="node28" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1867,304,2028,331"/>
<area shape="rect" id="node29" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2843,80,2979,107"/>
<area shape="rect" id="node30" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1071,155,1181,181"/>
<area shape="rect" id="node31" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="947,229,1073,256"/>
<area shape="rect" id="node32" href="../../dc/dac/io_8h.html" title="I/O Management (derived from Cheops&#45;NG) " alt="" coords="1307,155,1406,181"/>
<area shape="rect" id="node33" href="../../db/d39/translate_8h.html" title="Support for translation of data formats. translate.c. " alt="" coords="1735,80,1880,107"/>
<area shape="rect" id="node34" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="1683,155,1859,181"/>
<area shape="rect" id="node35" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="147,80,249,107"/>
<area shape="rect" id="node36" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="169,155,299,181"/>
<area shape="rect" id="node37" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="3004,80,3173,107"/>
<area shape="rect" id="node38" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="1464,229,1575,256"/>
<area shape="rect" id="node39" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="737,155,843,181"/>
<area shape="rect" id="node40" href="../../de/d47/callerid_8h.html" title="CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr..." alt="" coords="2035,229,2169,256"/>
<area shape="rect" id="node41" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="49,229,205,256"/>
<area shape="rect" id="node42" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="653,80,765,107"/>
<area shape="rect" id="node43" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="1121,80,1262,107"/>
<area shape="rect" id="node44" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1430,155,1558,181"/>
<area shape="rect" id="node45" href="../../db/d45/term_8h.html" title="Handy terminal functions for vt* terms. " alt="" coords="3197,80,3316,107"/>
<area shape="rect" id="node46" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="3341,80,3474,107"/>
<area shape="rect" id="node47" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="475,155,662,181"/>
<area shape="rect" id="node48" href="../../dd/dbc/pickup_8h.html" title="Call Pickup API. " alt="" coords="3499,80,3628,107"/>
<area shape="rect" id="node49" href="../../d9/d7e/chan__misdn__config_8h.html" title="Interface to mISDN &#45; Config. " alt="" coords="3652,80,3808,107"/>
<area shape="rect" id="node50" href="../../de/d26/isdn__lib_8h.html" title="Interface to mISDN. " alt="" coords="3832,80,3913,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="326,379,481,405"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="164,379,301,405"/>
<area shape="rect" id="node6" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,379,140,405"/>
<area shape="rect" id="node18" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="561,379,707,405"/>
<area shape="rect" id="node20" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1151,304,1295,331"/>
<area shape="rect" id="node23" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="176,304,311,331"/>
<area shape="rect" id="node24" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1503,304,1667,331"/>
</map>
</div>
</div>
<p><a href="../../d7/d9b/chan__misdn_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d87/structallowed__bearers.html">allowed_bearers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d00/structchan__list.html">chan_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Channel call record structure.  <a href="../../df/d00/structchan__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5b/structhold__info.html">hold_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d60/structrobin__list.html">robin_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d5a/structstate__struct.html">state_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7c2a890d3276dd7527774a08c3d99385"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(obj,  <a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>)&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>((obj), +1, (<a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>))</td></tr>
<tr class="separator:a7c2a890d3276dd7527774a08c3d99385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8e719b0d03a14ebbc97c8c06d7eb016"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(obj,  <a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>)&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>((obj), -1, (<a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>))</td></tr>
<tr class="separator:af8e719b0d03a14ebbc97c8c06d7eb016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4dc54929d9b029eb498a340c1241c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast)&#160;&#160;&#160;<a class="el" href="../../db/de2/channel__internal__api_8c.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast)</td></tr>
<tr class="separator:a0c4dc54929d9b029eb498a340c1241c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33084d9452c895d2cdc1364e28902a9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a>(ast,  <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)&#160;&#160;&#160;<a class="el" href="../../db/de2/channel__internal__api_8c.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(ast, <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:a33084d9452c895d2cdc1364e28902a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29868fa62c0ec0c2e76cae1fa7a67f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ae29868fa62c0ec0c2e76cae1fa7a67f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4b3d4e49a79f6634beed424d5e14b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a8a4b3d4e49a79f6634beed424d5e14b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8d27499c1656c67c670e96ee254524"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#acc8d27499c1656c67c670e96ee254524">TRANSFER_ON_HELD_CALL_HANGUP</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:acc8d27499c1656c67c670e96ee254524"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:afe6ad3e9bb6ccdef7838bc0bbe2cc2e5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5">misdn_chan_state</a> { <br />
&#160;&#160;<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a> = 0, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>, 
<br />
&#160;&#160;<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>
<br />
 }</td></tr>
<tr class="separator:afe6ad3e9bb6ccdef7838bc0bbe2cc2e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d70165673a49458ad6e7cd17dc705db"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705db">misdn_hold_state</a> { <a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65">MISDN_HOLD_TRANSFER</a>, 
<a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a>
 }</td></tr>
<tr class="separator:a2d70165673a49458ad6e7cd17dc705db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f504583b6e79bde5bcc9b34e051e05d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7f504583b6e79bde5bcc9b34e051e05d">_misdn_tasks_add_variable</a> (int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a> callback, const void *data, int variable)</td></tr>
<tr class="separator:a7f504583b6e79bde5bcc9b34e051e05d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831eeaa0477eef4301f6b0d4de977764"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a831eeaa0477eef4301f6b0d4de977764">add_in_calls</a> (int port)</td></tr>
<tr class="separator:a831eeaa0477eef4301f6b0d4de977764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294c6e2d2354b30aac2902ea21a94f0b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a294c6e2d2354b30aac2902ea21a94f0b">add_out_calls</a> (int port)</td></tr>
<tr class="separator:a294c6e2d2354b30aac2902ea21a94f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4256599deebfa7f4e6e546a02607f4f0"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a> (unsigned ast_number_plan)</td></tr>
<tr class="separator:a4256599deebfa7f4e6e546a02607f4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb118af6bdca35689358599c1b579b29"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a> (int presentation)</td></tr>
<tr class="separator:afb118af6bdca35689358599c1b579b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac382817323301fbadbb7f0a5d5025c37"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac382817323301fbadbb7f0a5d5025c37">ast_to_misdn_reason</a> (const enum <a class="el" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a> ast)</td></tr>
<tr class="separator:ac382817323301fbadbb7f0a5d5025c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939a80be7808cdb4e608d121b71b36d4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a> (int screening)</td></tr>
<tr class="separator:a939a80be7808cdb4e608d121b71b36d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3438ef3ff767addb942dab05ef04fd87"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a> (unsigned ast_number_type)</td></tr>
<tr class="separator:a3438ef3ff767addb942dab05ef04fd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad61ca821b2c91e20569e54196167c403"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a> (int cap)</td></tr>
<tr class="separator:ad61ca821b2c91e20569e54196167c403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848ab2a42c0b12ed8c70a194b3c3cf45"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196b">event_response_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a848ab2a42c0b12ed8c70a194b3c3cf45">cb_events</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> <a class="el" href="../../df/d7d/structevent.html">event</a>, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, void *user_data)</td></tr>
<tr class="separator:a848ab2a42c0b12ed8c70a194b3c3cf45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a166333493bb4c2a707f6efc367cf75a7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a166333493bb4c2a707f6efc367cf75a7">chan_list_destructor</a> (void *obj)</td></tr>
<tr class="separator:a166333493bb4c2a707f6efc367cf75a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50699bbbd48dbd7728bfed50b0d00547"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a50699bbbd48dbd7728bfed50b0d00547">chan_list_init</a> (int orig)</td></tr>
<tr class="separator:a50699bbbd48dbd7728bfed50b0d00547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d484a16cc6daf0c6d4b8dc1951f8e19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a5d484a16cc6daf0c6d4b8dc1951f8e19">chan_misdn_jb_empty</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a5d484a16cc6daf0c6d4b8dc1951f8e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19868e68215b587e33ccfffeea3015ae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a> (int level, int port, char *tmpl,...)</td></tr>
<tr class="separator:a19868e68215b587e33ccfffeea3015ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b57a38a097758231e9e04be29a7572f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0b57a38a097758231e9e04be29a7572f">cl_dequeue_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *chan)</td></tr>
<tr class="separator:a0b57a38a097758231e9e04be29a7572f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ace3bd096d1676e348a4ef23a20a7fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a3ace3bd096d1676e348a4ef23a20a7fc">cl_queue_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *chan)</td></tr>
<tr class="separator:a3ace3bd096d1676e348a4ef23a20a7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587673fb51095846ac3555b69500c852"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a587673fb51095846ac3555b69500c852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b42d3fd17449bf47d6d5f539fdcfea"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a09b42d3fd17449bf47d6d5f539fdcfea">complete_debug_port</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a09b42d3fd17449bf47d6d5f539fdcfea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdfbb2708952028d36e77743a6863ca5"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afdfbb2708952028d36e77743a6863ca5">complete_show_config</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:afdfbb2708952028d36e77743a6863ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a908c29953e5e94cf4df5200fbc4ca11f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a908c29953e5e94cf4df5200fbc4ca11f">config_jitterbuffer</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:a908c29953e5e94cf4df5200fbc4ca11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7915b63b76329bbf4c3f434841a8bf41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a> (int port, int numtype, char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:a7915b63b76329bbf4c3f434841a8bf41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a821d90675a82dc5fc7307c141efae6da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a821d90675a82dc5fc7307c141efae6da">dialtone_indicate</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl)</td></tr>
<tr class="separator:a821d90675a82dc5fc7307c141efae6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad02ce087fa60dd9931299f9574700c97"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad02ce087fa60dd9931299f9574700c97">do_immediate_setup</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:ad02ce087fa60dd9931299f9574700c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866c0e96f1c8ddc9d49fb91f5433b529"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a> (int originator, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:a866c0e96f1c8ddc9d49fb91f5433b529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae68199acb58f138dce5b16b0de5c4459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae68199acb58f138dce5b16b0de5c4459">export_ch</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="memdesc:ae68199acb58f138dce5b16b0de5c4459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export parameters to the dialplan environment variables.  <a href="#ae68199acb58f138dce5b16b0de5c4459">More...</a><br /></td></tr>
<tr class="separator:ae68199acb58f138dce5b16b0de5c4459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0eef19925128e2ed1f90431ebe8a4d2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab0eef19925128e2ed1f90431ebe8a4d2">find_chan_by_bc</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:ab0eef19925128e2ed1f90431ebe8a4d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd26a6887b2f69d2ca39077eae6d8e1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afdd26a6887b2f69d2ca39077eae6d8e1">find_hold_active_call</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:afdd26a6887b2f69d2ca39077eae6d8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118093a88a20335df7f60d7f3897f2c9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a118093a88a20335df7f60d7f3897f2c9">find_hold_call</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:a118093a88a20335df7f60d7f3897f2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592599696448ac01e6a442ab2612463c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a> (unsigned long l3_id)</td></tr>
<tr class="separator:a592599696448ac01e6a442ab2612463c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb654d1fbb5b25904cbab043016c887"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a1fb654d1fbb5b25904cbab043016c887">free_robin_list</a> (void)</td></tr>
<tr class="separator:a1fb654d1fbb5b25904cbab043016c887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1d27aae6bd9100e5a4d36c20f84e146"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ab1d27aae6bd9100e5a4d36c20f84e146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5e71fd7d73198e58f64bba83ce22dd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d60/structrobin__list.html">robin_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2c5e71fd7d73198e58f64bba83ce22dd">get_robin_position</a> (char *<a class="el" href="../../d3/d08/structgroup.html">group</a>)</td></tr>
<tr class="separator:a2c5e71fd7d73198e58f64bba83ce22dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8422063dea40ac94c4be4ec41c3531a0"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8422063dea40ac94c4be4ec41c3531a0">handle_cli_misdn_port_block</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a8422063dea40ac94c4be4ec41c3531a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c507187b74a4a48ebd5145657032a9"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad9c507187b74a4a48ebd5145657032a9">handle_cli_misdn_port_down</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ad9c507187b74a4a48ebd5145657032a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6100bdd2088a5299fb7465cee105f3"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8b6100bdd2088a5299fb7465cee105f3">handle_cli_misdn_port_unblock</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a8b6100bdd2088a5299fb7465cee105f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac00d6334df0119e11a59afecda59ca66"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac00d6334df0119e11a59afecda59ca66">handle_cli_misdn_port_up</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac00d6334df0119e11a59afecda59ca66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b564e6f166949ef4be38ede31e6a06d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7b564e6f166949ef4be38ede31e6a06d">handle_cli_misdn_reload</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a7b564e6f166949ef4be38ede31e6a06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac922c20f04e6be23558ccb06bbc34119"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac922c20f04e6be23558ccb06bbc34119">handle_cli_misdn_restart_pid</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac922c20f04e6be23558ccb06bbc34119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487febe127a6feb33e3fca63c2f52fe4"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a487febe127a6feb33e3fca63c2f52fe4">handle_cli_misdn_restart_port</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a487febe127a6feb33e3fca63c2f52fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991a7eec0f5a454d36126dbf1b2969f4"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a991a7eec0f5a454d36126dbf1b2969f4">handle_cli_misdn_send_digit</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a991a7eec0f5a454d36126dbf1b2969f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4f56774e430a5eba0cc9c6320346783"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab4f56774e430a5eba0cc9c6320346783">handle_cli_misdn_send_display</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ab4f56774e430a5eba0cc9c6320346783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0f2b80f48cbb51ff8fbfccc5316ccb"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#adc0f2b80f48cbb51ff8fbfccc5316ccb">handle_cli_misdn_send_facility</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:adc0f2b80f48cbb51ff8fbfccc5316ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af373345bae361170d11185836212d3c0"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#af373345bae361170d11185836212d3c0">handle_cli_misdn_send_restart</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:af373345bae361170d11185836212d3c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088af39453d5a46a5bdedb4e2f3a2d85"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a088af39453d5a46a5bdedb4e2f3a2d85">handle_cli_misdn_set_crypt_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a088af39453d5a46a5bdedb4e2f3a2d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50fd3a696f51032d456c1d98bfca6e6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab50fd3a696f51032d456c1d98bfca6e6">handle_cli_misdn_set_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ab50fd3a696f51032d456c1d98bfca6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c9cecde93e23c09aa13dddfbdff9e1d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a1c9cecde93e23c09aa13dddfbdff9e1d">handle_cli_misdn_set_tics</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a1c9cecde93e23c09aa13dddfbdff9e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cc6b3a80dd616a738acfdba302802ab"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a3cc6b3a80dd616a738acfdba302802ab">handle_cli_misdn_show_channel</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a3cc6b3a80dd616a738acfdba302802ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa200e4b6d6e9cccf37cbc64956c08c44"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aa200e4b6d6e9cccf37cbc64956c08c44">handle_cli_misdn_show_channels</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:aa200e4b6d6e9cccf37cbc64956c08c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7a7a56c1723165b4ed390f23a1b66bb"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab7a7a56c1723165b4ed390f23a1b66bb">handle_cli_misdn_show_config</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ab7a7a56c1723165b4ed390f23a1b66bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c2e64d521381dcdd6c47f97df0fbe3f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0c2e64d521381dcdd6c47f97df0fbe3f">handle_cli_misdn_show_port</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a0c2e64d521381dcdd6c47f97df0fbe3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a845bf2a632c4fd85f78bd229d731800a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a845bf2a632c4fd85f78bd229d731800a">handle_cli_misdn_show_ports_stats</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a845bf2a632c4fd85f78bd229d731800a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c2c4a2ba8cb107e5e3c35e138a3a1a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac9c2c4a2ba8cb107e5e3c35e138a3a1a">handle_cli_misdn_show_stacks</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac9c2c4a2ba8cb107e5e3c35e138a3a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2608d464a598e6c863f0e98c17f0b55e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2608d464a598e6c863f0e98c17f0b55e">handle_cli_misdn_toggle_echocancel</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a2608d464a598e6c863f0e98c17f0b55e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfd9eaf966babb8dce679b5e909cc01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:a8bfd9eaf966babb8dce679b5e909cc01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3eb36bbe9b4f4fc50f1144f4426746"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl)</td></tr>
<tr class="separator:a5a3eb36bbe9b4f4fc50f1144f4426746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacab4ba06a4bae692a7752b56f2d02fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aacab4ba06a4bae692a7752b56f2d02fe">import_ch</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="memdesc:aacab4ba06a4bae692a7752b56f2d02fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Import parameters from the dialplan environment variables.  <a href="#aacab4ba06a4bae692a7752b56f2d02fe">More...</a><br /></td></tr>
<tr class="separator:aacab4ba06a4bae692a7752b56f2d02fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the module.  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bcceb1ecd44bcc1261b9314b1abcd9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a> (int port, enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a> number_type, char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, size_t size)</td></tr>
<tr class="separator:ac9bcceb1ecd44bcc1261b9314b1abcd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c46f535fa2bd430018641bfabcb04e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a21c46f535fa2bd430018641bfabcb04e">misdn_answer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:a21c46f535fa2bd430018641bfabcb04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f4e04874766b14d63060e3617224ad"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a00f4e04874766b14d63060e3617224ad">misdn_attempt_transfer</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *active_ch, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *held_ch)</td></tr>
<tr class="separator:a00f4e04874766b14d63060e3617224ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24e5448e5dd0e37988f4ffa68a8d0867"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a24e5448e5dd0e37988f4ffa68a8d0867">misdn_call</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const char *dest, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="separator:a24e5448e5dd0e37988f4ffa68a8d0867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30545bb1d30710d0b66d91ef8e7512a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a30545bb1d30710d0b66d91ef8e7512a9">misdn_chan_is_valid</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:a30545bb1d30710d0b66d91ef8e7512a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae519554426944811b0805a4a7595e538"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae519554426944811b0805a4a7595e538">misdn_check_l2l1</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:ae519554426944811b0805a4a7595e538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a115226990899ee9eb82f99539279bf21"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a115226990899ee9eb82f99539279bf21">misdn_copy_redirecting_from_ast</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:a115226990899ee9eb82f99539279bf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09d78e4116be60f1895c9e32142ccb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const struct <a class="el" href="../../d6/d49/structmisdn__party__redirecting.html">misdn_party_redirecting</a> *redirect, char *tag)</td></tr>
<tr class="separator:ae09d78e4116be60f1895c9e32142ccb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae637a258dbb615de52eef6a5f179a920"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae637a258dbb615de52eef6a5f179a920">misdn_digit_begin</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="separator:ae637a258dbb615de52eef6a5f179a920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683bbeada1c322bda3db85f0a18c9170"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a683bbeada1c322bda3db85f0a18c9170">misdn_digit_end</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, unsigned int duration)</td></tr>
<tr class="separator:a683bbeada1c322bda3db85f0a18c9170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c367e9583873f59fe103da83241ac1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#af9c367e9583873f59fe103da83241ac1">misdn_facility_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:af9c367e9583873f59fe103da83241ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4856dbe61d11eebcfb1b7d6250e6e1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a> <a class="el" href="../../df/d7d/structevent.html">event</a>, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:a6d4856dbe61d11eebcfb1b7d6250e6e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69eecf2aa3afdf46bce8c1b856bea659"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a69eecf2aa3afdf46bce8c1b856bea659">misdn_fixup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldast, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:a69eecf2aa3afdf46bce8c1b856bea659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c07f69dab53f96457d548d8dc004345"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *p)</td></tr>
<tr class="separator:a6c07f69dab53f96457d548d8dc004345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c92a44993137a53aa6bf0aaef1d647b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0c92a44993137a53aa6bf0aaef1d647b">misdn_get_connected_line</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, int originator)</td></tr>
<tr class="separator:a0c92a44993137a53aa6bf0aaef1d647b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67762fcf857a1d29ae8d0ee183fcc281"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a67762fcf857a1d29ae8d0ee183fcc281">misdn_hangup</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:a67762fcf857a1d29ae8d0ee183fcc281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555c03f7e7d4469f13760c49a7cfc3ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a555c03f7e7d4469f13760c49a7cfc3ea">misdn_indication</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, int <a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, const void *data, size_t datalen)</td></tr>
<tr class="separator:a555c03f7e7d4469f13760c49a7cfc3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea7ddf219f27c4fb9d7cc3e55b641e15"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aea7ddf219f27c4fb9d7cc3e55b641e15">misdn_is_msn_valid</a> (int port, const struct <a class="el" href="../../d8/d8c/structmisdn__party__dialing.html">misdn_party_dialing</a> *dialed)</td></tr>
<tr class="separator:aea7ddf219f27c4fb9d7cc3e55b641e15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe098aa0a254c196d27911e33857e6d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe098aa0a254c196d27911e33857e6d4">misdn_jb_destroy</a> (struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *jb)</td></tr>
<tr class="memdesc:afe098aa0a254c196d27911e33857e6d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">frees the data and destroys the given jitterbuffer struct  <a href="#afe098aa0a254c196d27911e33857e6d4">More...</a><br /></td></tr>
<tr class="separator:afe098aa0a254c196d27911e33857e6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530287671f65c0bf8bc86da878ddbac3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a530287671f65c0bf8bc86da878ddbac3">misdn_jb_empty</a> (struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *jb, char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:a530287671f65c0bf8bc86da878ddbac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets len bytes out of the jitterbuffer if available, else only the available data is returned and the return value indicates the number of data.  <a href="#a530287671f65c0bf8bc86da878ddbac3">More...</a><br /></td></tr>
<tr class="separator:a530287671f65c0bf8bc86da878ddbac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0b03517b5aa9b9c98d46159e47beaa3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab0b03517b5aa9b9c98d46159e47beaa3">misdn_jb_fill</a> (struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *jb, const char *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:ab0b03517b5aa9b9c98d46159e47beaa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">fills the jitterbuffer with len data returns &lt; 0 if there was an error (buffer overrun).  <a href="#ab0b03517b5aa9b9c98d46159e47beaa3">More...</a><br /></td></tr>
<tr class="separator:ab0b03517b5aa9b9c98d46159e47beaa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a56c181dc92bad4a8c732cd2b77e391"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7a56c181dc92bad4a8c732cd2b77e391">misdn_jb_init</a> (int size, int upper_threshold)</td></tr>
<tr class="memdesc:a7a56c181dc92bad4a8c732cd2b77e391"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocates the jb-structure and initialize the elements  <a href="#a7a56c181dc92bad4a8c732cd2b77e391">More...</a><br /></td></tr>
<tr class="separator:a7a56c181dc92bad4a8c732cd2b77e391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab707fc0cf9fb25221fcf046a9583d839"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab707fc0cf9fb25221fcf046a9583d839">misdn_l1_task</a> (const void *vdata)</td></tr>
<tr class="separator:ab707fc0cf9fb25221fcf046a9583d839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0668ab60f561d89f4135bfbc600575"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0e0668ab60f561d89f4135bfbc600575">misdn_new</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl, int <a class="el" href="../../d4/d88/structstate.html">state</a>, char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, char *callerid, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, int port, int <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>)</td></tr>
<tr class="separator:a0e0668ab60f561d89f4135bfbc600575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24fb8b2cce05250a12724f761e5e9e4b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a24fb8b2cce05250a12724f761e5e9e4b">misdn_overlap_dial_task</a> (const void *data)</td></tr>
<tr class="separator:a24fb8b2cce05250a12724f761e5e9e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d977eebb4ed94cf78548100ab4fde50"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0d977eebb4ed94cf78548100ab4fde50">misdn_prefix_string</a> (const char *str_prefix, char *str_main, size_t size)</td></tr>
<tr class="separator:a0d977eebb4ed94cf78548100ab4fde50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a111caae6df52e50ee929cdcbe2fac780"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a111caae6df52e50ee929cdcbe2fac780">misdn_queue_connected_line_update</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, enum <a class="el" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1b">AST_CONNECTED_LINE_UPDATE_SOURCE</a> source, char *cid_tag)</td></tr>
<tr class="separator:a111caae6df52e50ee929cdcbe2fac780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e7ca7ce7b6f177b7ed8ba3b8ff716b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aa8e7ca7ce7b6f177b7ed8ba3b8ff716b">misdn_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</td></tr>
<tr class="separator:aa8e7ca7ce7b6f177b7ed8ba3b8ff716b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f0c10df28d09e92fb2f4f9b2934941"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a16f0c10df28d09e92fb2f4f9b2934941">misdn_request</a> (const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, const char *data, int *cause)</td></tr>
<tr class="separator:a16f0c10df28d09e92fb2f4f9b2934941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5115e37e01c0dc8a6ba640b2413a3bf9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a5115e37e01c0dc8a6ba640b2413a3bf9">misdn_send_text</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</td></tr>
<tr class="separator:a5115e37e01c0dc8a6ba640b2413a3bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6de645b40ee13ae95c366d0273367837"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6de645b40ee13ae95c366d0273367837">misdn_set_opt_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="separator:a6de645b40ee13ae95c366d0273367837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac60203ac1e950f50c3f36c5a9c2dc16a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac60203ac1e950f50c3f36c5a9c2dc16a">misdn_tasks_add</a> (int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a> callback, const void *data)</td></tr>
<tr class="separator:ac60203ac1e950f50c3f36c5a9c2dc16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f82046b64a8e353a912e8535033af81"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6f82046b64a8e353a912e8535033af81">misdn_tasks_add_variable</a> (int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a> callback, const void *data)</td></tr>
<tr class="separator:a6f82046b64a8e353a912e8535033af81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae402ad3ef621a7e1a2669f5248d4dd23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae402ad3ef621a7e1a2669f5248d4dd23">misdn_tasks_destroy</a> (void)</td></tr>
<tr class="separator:ae402ad3ef621a7e1a2669f5248d4dd23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0f69d2ed0b939a95127679a19e82f0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ada0f69d2ed0b939a95127679a19e82f0">misdn_tasks_init</a> (void)</td></tr>
<tr class="separator:ada0f69d2ed0b939a95127679a19e82f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a8b17fdb011644dfd0928c4e51f75e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a01a8b17fdb011644dfd0928c4e51f75e">misdn_tasks_remove</a> (int task_id)</td></tr>
<tr class="separator:a01a8b17fdb011644dfd0928c4e51f75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a623ed0cdc0f4d9b05023f55e99e61f4a"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a623ed0cdc0f4d9b05023f55e99e61f4a">misdn_tasks_thread_func</a> (void *data)</td></tr>
<tr class="separator:a623ed0cdc0f4d9b05023f55e99e61f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8affc2fb8c618a8d617d8f8be6607bf2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8affc2fb8c618a8d617d8f8be6607bf2">misdn_tasks_wakeup</a> (void)</td></tr>
<tr class="separator:a8affc2fb8c618a8d617d8f8be6607bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd818b3d3a858ccbed06fe1675147af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a> number_plan)</td></tr>
<tr class="separator:a6cd818b3d3a858ccbed06fe1675147af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a809192e8588d50a33a4242ede2873b71"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a> (int presentation)</td></tr>
<tr class="separator:a809192e8588d50a33a4242ede2873b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efd7aa77a455e5aaf82e41cfcf5815e"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7efd7aa77a455e5aaf82e41cfcf5815e">misdn_to_ast_reason</a> (const enum <a class="el" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a> q931)</td></tr>
<tr class="separator:a7efd7aa77a455e5aaf82e41cfcf5815e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f11b00546ef6bc9e47853ab516ad8dd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a> (int screening)</td></tr>
<tr class="separator:a3f11b00546ef6bc9e47853ab516ad8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53c3ed364439bed4bbdd74e3d873c86"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a> number_type)</td></tr>
<tr class="separator:ab53c3ed364439bed4bbdd74e3d873c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5478f292b178f9c27949ef8dd7810206"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a5478f292b178f9c27949ef8dd7810206">misdn_to_str_plan</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a> number_plan)</td></tr>
<tr class="separator:a5478f292b178f9c27949ef8dd7810206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf9411a71645f03e0628dcea770b1ad"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a1cf9411a71645f03e0628dcea770b1ad">misdn_to_str_pres</a> (int presentation)</td></tr>
<tr class="separator:a1cf9411a71645f03e0628dcea770b1ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45975791307e0a9cdaff63af4dc9492c"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a45975791307e0a9cdaff63af4dc9492c">misdn_to_str_screen</a> (int screening)</td></tr>
<tr class="separator:a45975791307e0a9cdaff63af4dc9492c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70683c24ce8bc518f5541dfde4763e7"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#af70683c24ce8bc518f5541dfde4763e7">misdn_to_str_ton</a> (enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a> number_type)</td></tr>
<tr class="separator:af70683c24ce8bc518f5541dfde4763e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ea7311b780b364afa4488cfdcc6f16"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a73ea7311b780b364afa4488cfdcc6f16">misdn_update_caller_id</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, char *cid_tag)</td></tr>
<tr class="separator:a73ea7311b780b364afa4488cfdcc6f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536c1957358bfacc834f5fcbb64c9b97"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a536c1957358bfacc834f5fcbb64c9b97">misdn_update_connected_line</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, int originator)</td></tr>
<tr class="separator:a536c1957358bfacc834f5fcbb64c9b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4630be6c1dd7de4f7f12d700109eb996"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a4630be6c1dd7de4f7f12d700109eb996">misdn_update_redirecting</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, int originator)</td></tr>
<tr class="separator:a4630be6c1dd7de4f7f12d700109eb996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b47ad58ed34948095980ac7d10e3add"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, enum <a class="el" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1b">AST_CONNECTED_LINE_UPDATE_SOURCE</a> source, char *cid_tag)</td></tr>
<tr class="separator:a6b47ad58ed34948095980ac7d10e3add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7958b312230f580ef3cf765c80efdd7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7958b312230f580ef3cf765c80efdd7c">misdn_write</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a7958b312230f580ef3cf765c80efdd7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd97d108065ced9bfacd2cf140965f95"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:abd97d108065ced9bfacd2cf140965f95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae748f83e6f424de7b039a8079f707fd4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae748f83e6f424de7b039a8079f707fd4">print_bc_info</a> (int fd, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *help, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:ae748f83e6f424de7b039a8079f707fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a695d9a32f28a058deed150c684b94db4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a695d9a32f28a058deed150c684b94db4">print_bearer</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:a695d9a32f28a058deed150c684b94db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad972a2f75429887bad891050e3aa4ae0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a> (const struct FacParm *fac, const struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:ad972a2f75429887bad891050e3aa4ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26630f293c5ce4c71389909fd5b97388"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="el" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a26630f293c5ce4c71389909fd5b97388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac8a3f512ee09cfb5ed9283b66804eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#acac8a3f512ee09cfb5ed9283b66804eb">read_config</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:acac8a3f512ee09cfb5ed9283b66804eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d529cc11090d7d2009e5cde3188ac7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:af1d529cc11090d7d2009e5cde3188ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef41ea6eea90bfde80023e7f2cd8bbb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#abef41ea6eea90bfde80023e7f2cd8bbb">release_chan_early</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:abef41ea6eea90bfde80023e7f2cd8bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1982509765f4870f1f63412a53ea668"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr class="separator:ad1982509765f4870f1f63412a53ea668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd5340b1a2a7103296105d029b8de50"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a3cd5340b1a2a7103296105d029b8de50">reload_config</a> (void)</td></tr>
<tr class="separator:a3cd5340b1a2a7103296105d029b8de50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7c4bdc49a560ef361a1cba4b792ef2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afb7c4bdc49a560ef361a1cba4b792ef2">send_cause2ast</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="separator:afb7c4bdc49a560ef361a1cba4b792ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25f94996ca2c5032eb290f2eec5da9b7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a25f94996ca2c5032eb290f2eec5da9b7">send_digit_to_chan</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl, char <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="separator:a25f94996ca2c5032eb290f2eec5da9b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a316a60c7bff187078c5dc4b396c483c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a316a60c7bff187078c5dc4b396c483c4">show_config_description</a> (int fd, enum <a class="el" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem)</td></tr>
<tr class="separator:a316a60c7bff187078c5dc4b396c483c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be1284fe65357755b6161a039fb59e4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> (int sig)</td></tr>
<tr class="separator:a2be1284fe65357755b6161a039fb59e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3afda0545d09cce0d2bc81466baf57"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl)</td></tr>
<tr class="separator:a4b3afda0545d09cce0d2bc81466baf57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e825078cd89b5e86d2099b89b700445"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a0e825078cd89b5e86d2099b89b700445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4194cb1021ae6d8ea9be1219c0853a8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl)</td></tr>
<tr class="separator:ac4194cb1021ae6d8ea9be1219c0853a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a892219d53f0cf14c2d6933dc77464def"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *cl)</td></tr>
<tr class="separator:a892219d53f0cf14c2d6933dc77464def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879a0c566b9bb9c07bd0f1f13948c373"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a879a0c566b9bb9c07bd0f1f13948c373">update_config</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch)</td></tr>
<tr class="memdesc:a879a0c566b9bb9c07bd0f1f13948c373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates caller ID information from config.  <a href="#a879a0c566b9bb9c07bd0f1f13948c373">More...</a><br /></td></tr>
<tr class="separator:a879a0c566b9bb9c07bd0f1f13948c373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870ab6bac01ce35f615fbfe7386f8319"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a870ab6bac01ce35f615fbfe7386f8319">update_ec_config</a> (struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>)</td></tr>
<tr class="separator:a870ab6bac01ce35f615fbfe7386f8319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae14b6d64edd251ea70ad859ffe33a08f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae14b6d64edd251ea70ad859ffe33a08f">update_name</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, int port, int <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>)</td></tr>
<tr class="separator:ae14b6d64edd251ea70ad859ffe33a08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43bee3ea617c99abb55465aa8340e6af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a43bee3ea617c99abb55465aa8340e6af">wait_for_digits</a> (struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *ch, struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="el" href="../../d3/d41/gsm__implode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a43bee3ea617c99abb55465aa8340e6af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Channel driver for mISDN Support (BRI/PRI)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_CHANNEL_DRIVER, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a639b2c4663f01f6e49dcd7aa2c218"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../df/d87/structallowed__bearers.html">allowed_bearers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a> []</td></tr>
<tr class="separator:ac3a639b2c4663f01f6e49dcd7aa2c218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392ce5a44d9bda45ea398b525aa6231d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a> []</td></tr>
<tr class="separator:a392ce5a44d9bda45ea398b525aa6231d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a104c30b0f9b3fa80d00e5ec142686d18"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a> =<a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:a104c30b0f9b3fa80d00e5ec142686d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global channel call record list head.  <a href="#a104c30b0f9b3fa80d00e5ec142686d18">More...</a><br /></td></tr>
<tr class="separator:a104c30b0f9b3fa80d00e5ec142686d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292953c24b6a6f070fdc8096adcb4cfc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></td></tr>
<tr class="separator:a292953c24b6a6f070fdc8096adcb4cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2676e3da728326daba3532f859b33c75"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a> = 0</td></tr>
<tr class="separator:a2676e3da728326daba3532f859b33c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc471c68ae50a47ef9babacc43af0a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#abfc471c68ae50a47ef9babacc43af0a9">glob_channel</a> = 0</td></tr>
<tr class="separator:abfc471c68ae50a47ef9babacc43af0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fde55e91042b09488c4c1b522172a87"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a> [<a class="el" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>+1]</td></tr>
<tr class="separator:a0fde55e91042b09488c4c1b522172a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24bb5f2898b28cecc69c86bb429f7517"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></td></tr>
<tr class="separator:a24bb5f2898b28cecc69c86bb429f7517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a224bdc46e70553698ba782d725622717"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a224bdc46e70553698ba782d725622717">MAXTICS</a> = 8</td></tr>
<tr class="separator:a224bdc46e70553698ba782d725622717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad13c74076796a6eb451cf515f436b5e"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></td></tr>
<tr class="separator:aad13c74076796a6eb451cf515f436b5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79035e58d7d553b30a91b14466422523"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></td></tr>
<tr class="separator:a79035e58d7d553b30a91b14466422523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec47a038542750a8ba346bda19799f4f"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></td></tr>
<tr class="separator:aec47a038542750a8ba346bda19799f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b0e9dfe5bed0103b9888571ccc349d8"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></td></tr>
<tr class="separator:a5b0e9dfe5bed0103b9888571ccc349d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a7c19d49b122fec380d3901c451dfb"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a></td></tr>
<tr class="separator:ab1a7c19d49b122fec380d3901c451dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7601fa9b0fcc72915a9470c8fa0297e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:ac7601fa9b0fcc72915a9470c8fa0297e"><td class="mdescLeft">&#160;</td><td class="mdescRight">the main schedule context for stuff like l1 watcher, overlap dial, ...  <a href="#ac7601fa9b0fcc72915a9470c8fa0297e">More...</a><br /></td></tr>
<tr class="separator:ac7601fa9b0fcc72915a9470c8fa0297e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffc82bd9b6717abebe613f896f7ecd6"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a></td></tr>
<tr class="separator:afffc82bd9b6717abebe613f896f7ecd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c81d5f4de36016de0ecba7520828e0a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a></td></tr>
<tr class="separator:a8c81d5f4de36016de0ecba7520828e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27170aa5e1d5147415094040ca8717f6"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a> [] = &quot;mISDN&quot;</td></tr>
<tr class="separator:a27170aa5e1d5147415094040ca8717f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac56f2c53779cee00e7f7e98d773b82c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a></td></tr>
<tr class="separator:aac56f2c53779cee00e7f7e98d773b82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5607ef5574022ec25b0b74559490431"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d60/structrobin__list.html">robin_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:ae5607ef5574022ec25b0b74559490431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7475bf053cd646e39ddeb8d375d08712"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d1/d5a/structstate__struct.html">state_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#a7475bf053cd646e39ddeb8d375d08712">state_array</a> []</td></tr>
<tr class="separator:a7475bf053cd646e39ddeb8d375d08712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa610396156ba51a6b7d07fe92bea6f24"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9b/chan__misdn_8c.html#aa610396156ba51a6b7d07fe92bea6f24">tracing</a> = 0</td></tr>
<tr class="separator:aa610396156ba51a6b7d07fe92bea6f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>the chan_misdn channel driver for Asterisk </p>
<dl class="section author"><dt>Author</dt><dd>Christian Richter <a href="#" onclick="location.href='mai'+'lto:'+'cri'+'ch'+'@be'+'ro'+'net'+'.c'+'om'; return false;">crich<span style="display: none;">.nosp@m.</span>@ber<span style="display: none;">.nosp@m.</span>onet.<span style="display: none;">.nosp@m.</span>com</a></dd></dl>
<p>MISDN <a href="http://www.misdn.org/">http://www.misdn.org/</a> </p>

<p class="definition">Definition in file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7c2a890d3276dd7527774a08c3d99385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2a890d3276dd7527774a08c3d99385">&#9670;&nbsp;</a></span>chan_list_ref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chan_list_ref</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>((obj), +1, (<a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">371</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08377">cl_queue_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08259">find_chan_by_bc()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08351">find_hold_active_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08283">find_hold_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08317">find_hold_call_l3()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00749">misdn_chan_is_valid()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>.</p>

</div>
</div>
<a id="af8e719b0d03a14ebbc97c8c06d7eb016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8e719b0d03a14ebbc97c8c06d7eb016">&#9670;&nbsp;</a></span>chan_list_unref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define chan_list_unref</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>((obj), -1, (<a class="el" href="../../d0/d8a/muted_8c.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">372</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12574">chan_misdn_jb_empty()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08398">cl_dequeue_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">handle_cli_misdn_send_digit()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05611">handle_cli_misdn_send_display()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05183">handle_cli_misdn_send_facility()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05564">handle_cli_misdn_toggle_echocancel()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">misdn_write()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>.</p>

</div>
</div>
<a id="a0c4dc54929d9b029eb498a340c1241c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4dc54929d9b029eb498a340c1241c7">&#9670;&nbsp;</a></span>MISDN_ASTERISK_TECH_PVT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISDN_ASTERISK_TECH_PVT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ast</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../db/de2/channel__internal__api_8c.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">683</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06915">misdn_digit_end()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">misdn_facility_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06958">misdn_fixup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07393">misdn_read()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08115">misdn_send_text()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">misdn_update_connected_line()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">misdn_write()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>.</p>

</div>
</div>
<a id="a33084d9452c895d2cdc1364e28902a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33084d9452c895d2cdc1364e28902a9f">&#9670;&nbsp;</a></span>MISDN_ASTERISK_TECH_PVT_SET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISDN_ASTERISK_TECH_PVT_SET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ast, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../db/de2/channel__internal__api_8c.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(ast, <a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00684">684</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>.</p>

</div>
</div>
<a id="ae29868fa62c0ec0c2e76cae1fa7a67f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29868fa62c0ec0c2e76cae1fa7a67f6">&#9670;&nbsp;</a></span>ORG_AST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ORG_AST&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Asterisk created the channel (outgoing call) </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">343</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03458">export_aoc_vars()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">print_bc_info()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>.</p>

</div>
</div>
<a id="a8a4b3d4e49a79f6634beed424d5e14b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4b3d4e49a79f6634beed424d5e14b1">&#9670;&nbsp;</a></span>ORG_MISDN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ORG_MISDN&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>mISDN created the channel (incoming call) </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">345</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">misdn_update_connected_line()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06483">misdn_update_redirecting()</a>.</p>

</div>
</div>
<a id="acc8d27499c1656c67c670e96ee254524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8d27499c1656c67c670e96ee254524">&#9670;&nbsp;</a></span>TRANSFER_ON_HELD_CALL_HANGUP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSFER_ON_HELD_CALL_HANGUP&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08334">8334</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5">&#9670;&nbsp;</a></span>misdn_chan_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5">misdn_chan_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba"></a>MISDN_NOTHING&#160;</td><td class="fielddoc"><p>at beginning </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1"></a>MISDN_WAITING4DIGS&#160;</td><td class="fielddoc"><p>when waiting for info </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851"></a>MISDN_EXTCANTMATCH&#160;</td><td class="fielddoc"><p>when asterisk couldn't match our ext </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc"></a>MISDN_INCOMING_SETUP&#160;</td><td class="fielddoc"><p>for incoming setup </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"></a>MISDN_DIALING&#160;</td><td class="fielddoc"><p>when pbx_start </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"></a>MISDN_PROGRESS&#160;</td><td class="fielddoc"><p>we have progress </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"></a>MISDN_PROCEEDING&#160;</td><td class="fielddoc"><p>we have progress </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"></a>MISDN_CALLING&#160;</td><td class="fielddoc"><p>when misdn_call is called </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88"></a>MISDN_CALLING_ACKNOWLEDGE&#160;</td><td class="fielddoc"><p>when we get SETUP_ACK </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"></a>MISDN_ALERTING&#160;</td><td class="fielddoc"><p>when Alerting </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012"></a>MISDN_BUSY&#160;</td><td class="fielddoc"><p>when BUSY </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"></a>MISDN_CONNECTED&#160;</td><td class="fielddoc"><p>when connected </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182"></a>MISDN_DISCONNECTED&#160;</td><td class="fielddoc"><p>when connected </p>
</td></tr>
<tr><td class="fieldname"><a id="afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"></a>MISDN_CLEANING&#160;</td><td class="fielddoc"><p>when hangup from * but we were connected before </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00325">325</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                      {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a> = 0,         <span class="comment">/*!&lt; at beginning */</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>,        <span class="comment">/*!&lt; when waiting for info */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a>,        <span class="comment">/*!&lt; when asterisk couldn&#39;t match our ext */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>,      <span class="comment">/*!&lt; for incoming setup */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>,             <span class="comment">/*!&lt; when pbx_start */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>,            <span class="comment">/*!&lt; we have progress */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>,          <span class="comment">/*!&lt; we have progress */</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>,             <span class="comment">/*!&lt; when misdn_call is called */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>, <span class="comment">/*!&lt; when we get SETUP_ACK */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>,            <span class="comment">/*!&lt; when Alerting */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a>,                <span class="comment">/*!&lt; when BUSY */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>,           <span class="comment">/*!&lt; when connected */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a>,        <span class="comment">/*!&lt; when connected */</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>,            <span class="comment">/*!&lt; when hangup from * but we were connected before */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;};</div><div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00338">chan_misdn.c:338</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00331">chan_misdn.c:331</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00328">chan_misdn.c:328</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00334">chan_misdn.c:334</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00330">chan_misdn.c:330</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00329">chan_misdn.c:329</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00332">chan_misdn.c:332</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00333">chan_misdn.c:333</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00336">chan_misdn.c:336</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00326">chan_misdn.c:326</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00327">chan_misdn.c:327</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d70165673a49458ad6e7cd17dc705db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d70165673a49458ad6e7cd17dc705db">&#9670;&nbsp;</a></span>misdn_hold_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705db">misdn_hold_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"></a>MISDN_HOLD_IDLE&#160;</td><td class="fielddoc"><p>HOLD not active </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f"></a>MISDN_HOLD_ACTIVE&#160;</td><td class="fielddoc"><p>Call is held </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65"></a>MISDN_HOLD_TRANSFER&#160;</td><td class="fielddoc"><p>Held call is being transferred </p>
</td></tr>
<tr><td class="fieldname"><a id="a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff"></a>MISDN_HOLD_DISCONNECT&#160;</td><td class="fielddoc"><p>Held call is being disconnected </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00347">347</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                      {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>,     <span class="comment">/*!&lt; HOLD not active */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a>,      <span class="comment">/*!&lt; Call is held */</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65">MISDN_HOLD_TRANSFER</a>, <span class="comment">/*!&lt; Held call is being transferred */</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a>,  <span class="comment">/*!&lt; Held call is being disconnected */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;};</div><div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65">MISDN_HOLD_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00350">chan_misdn.c:350</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00349">chan_misdn.c:349</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00351">chan_misdn.c:351</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12838">12838</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12838">12838</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a7f504583b6e79bde5bcc9b34e051e05d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f504583b6e79bde5bcc9b34e051e05d">&#9670;&nbsp;</a></span>_misdn_tasks_add_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int _misdn_tasks_add_variable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>variable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03591">3591</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00524">ast_sched_add_variable()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03554">misdn_tasks_init()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03586">misdn_tasks_wakeup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03604">misdn_tasks_add()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03609">misdn_tasks_add_variable()</a>.</p>
<div class="fragment"><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;{</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;   <span class="keywordtype">int</span> task_id;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>) {</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ada0f69d2ed0b939a95127679a19e82f0">misdn_tasks_init</a>();</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;   }</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;   task_id = <a class="code" href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, callback, data, variable);</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8affc2fb8c618a8d617d8f8be6607bf2">misdn_tasks_wakeup</a>();</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;   <span class="keywordflow">return</span> task_id;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="sched_8h_html_adec2ba936e662f6b9353fc0172e9fcec"><div class="ttname"><a href="../../d7/d00/sched_8h.html#adec2ba936e662f6b9353fc0172e9fcec">ast_sched_add_variable</a></div><div class="ttdeci">int ast_sched_add_variable(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data, int variable) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event with rescheduling support. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00524">sched.c:524</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ada0f69d2ed0b939a95127679a19e82f0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ada0f69d2ed0b939a95127679a19e82f0">misdn_tasks_init</a></div><div class="ttdeci">static void misdn_tasks_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03554">chan_misdn.c:3554</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac7601fa9b0fcc72915a9470c8fa0297e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a></div><div class="ttdeci">static struct ast_sched_context * misdn_tasks</div><div class="ttdoc">the main schedule context for stuff like l1 watcher, overlap dial, ... </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00670">chan_misdn.c:670</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8affc2fb8c618a8d617d8f8be6607bf2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8affc2fb8c618a8d617d8f8be6607bf2">misdn_tasks_wakeup</a></div><div class="ttdeci">static void misdn_tasks_wakeup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03586">chan_misdn.c:3586</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a831eeaa0477eef4301f6b0d4de977764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831eeaa0477eef4301f6b0d4de977764">&#9670;&nbsp;</a></span>add_in_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_in_calls </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08844">8844</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, and <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00094">MISDN_CFG_MAX_IN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;{</div><div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;   <span class="keywordtype">int</span> max_in_calls;</div><div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;</div><div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac6d44d729f3a1d61f4fd2391f13a832a">MISDN_CFG_MAX_IN</a>, &amp;max_in_calls, <span class="keyword">sizeof</span>(max_in_calls));</div><div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[port]++;</div><div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;</div><div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;   <span class="keywordflow">if</span> (max_in_calls &gt;= 0 &amp;&amp; max_in_calls &lt; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[port]) {</div><div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Marking Incoming Call on port[%d]\n&quot;</span>, port);</div><div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[port] - max_in_calls;</div><div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;   }</div><div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;</div><div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;}</div><div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aac6d44d729f3a1d61f4fd2391f13a832a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac6d44d729f3a1d61f4fd2391f13a832a">MISDN_CFG_MAX_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00094">chan_misdn_config.h:94</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a294c6e2d2354b30aac2902ea21a94f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a294c6e2d2354b30aac2902ea21a94f0b">&#9670;&nbsp;</a></span>add_out_calls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_out_calls </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08859">8859</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, and <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00095">MISDN_CFG_MAX_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;{</div><div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;   <span class="keywordtype">int</span> max_out_calls;</div><div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;</div><div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa341446ad7a9fd2c59f000e5a4ae63634">MISDN_CFG_MAX_OUT</a>, &amp;max_out_calls, <span class="keyword">sizeof</span>(max_out_calls));</div><div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;</div><div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;   <span class="keywordflow">if</span> (max_out_calls &gt;= 0 &amp;&amp; max_out_calls &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[port]) {</div><div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Rejecting Outgoing Call on port[%d]\n&quot;</span>, port);</div><div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[port] + 1) - max_out_calls;</div><div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;   }</div><div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;</div><div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[port]++;</div><div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;</div><div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa341446ad7a9fd2c59f000e5a4ae63634"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa341446ad7a9fd2c59f000e5a4ae63634">MISDN_CFG_MAX_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00095">chan_misdn_config.h:95</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12838">12838</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a4256599deebfa7f4e6e546a02607f4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4256599deebfa7f4e6e546a02607f4f0">&#9670;&nbsp;</a></span>ast_to_misdn_plan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a> ast_to_misdn_plan </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ast_number_plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02042">2042</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00095">NUMPLAN_DATA</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00097">NUMPLAN_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00098">NUMPLAN_PRIVATE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00096">NUMPLAN_TELEX</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;{</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a> number_plan;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <span class="keywordflow">switch</span> (ast_number_plan &amp; 0x0F) {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>:</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>:</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a>:</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a>;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a>:</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a>;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a>:</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a>:</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   <span class="keywordflow">return</span> number_plan;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00095">isdn_lib.h:95</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a></div><div class="ttdeci">mISDN_NUMBER_PLAN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00092">isdn_lib.h:92</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00097">isdn_lib.h:97</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00098">isdn_lib.h:98</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00096">isdn_lib.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb118af6bdca35689358599c1b579b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb118af6bdca35689358599c1b579b29">&#9670;&nbsp;</a></span>ast_to_misdn_pres()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_to_misdn_pres </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>presentation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02145">2145</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00325">AST_PRES_RESTRICTED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00323">AST_PRES_RESTRICTION</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00326">AST_PRES_UNAVAILABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;{</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   <span class="keywordflow">switch</span> (presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>) {</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>:</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      presentation = 0;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>:</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      presentation = 1;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>:</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      presentation = 2;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   <span class="keywordflow">return</span> presentation;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="callerid_8h_html_a2981008d349635cf996bb8629d15a926"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a></div><div class="ttdeci">#define AST_PRES_UNAVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00326">callerid.h:326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac382817323301fbadbb7f0a5d5025c37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac382817323301fbadbb7f0a5d5025c37">&#9670;&nbsp;</a></span>ast_to_misdn_reason()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a> ast_to_misdn_reason </td>
          <td>(</td>
          <td class="paramtype">const enum <a class="el" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a>&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02274">2274</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00401">AST_REDIRECTING_REASON_AWAY</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00402">AST_REDIRECTING_REASON_CALL_FWD_DTE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00398">AST_REDIRECTING_REASON_DEFLECTION</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00397">AST_REDIRECTING_REASON_DO_NOT_DISTURB</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00399">AST_REDIRECTING_REASON_FOLLOW_ME</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00393">AST_REDIRECTING_REASON_NO_ANSWER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00400">AST_REDIRECTING_REASON_OUT_OF_ORDER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00396">AST_REDIRECTING_REASON_TIME_OF_DAY</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00394">AST_REDIRECTING_REASON_UNAVAILABLE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00395">AST_REDIRECTING_REASON_UNCONDITIONAL</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00391">AST_REDIRECTING_REASON_UNKNOWN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00392">AST_REDIRECTING_REASON_USER_BUSY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00210">mISDN_REDIRECTING_REASON_CALL_FWD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00200">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00208">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00204">mISDN_REDIRECTING_REASON_DEFLECTION</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00202">mISDN_REDIRECTING_REASON_NO_REPLY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00206">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00198">mISDN_REDIRECTING_REASON_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>.</p>
<div class="fragment"><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;{</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   <span class="keywordtype">unsigned</span> index;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>misdn_reasons {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a> ast;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a> q931;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   } misdn_reason_table[] = {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <span class="comment">/* *INDENT-OFF* */</span></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a>,        <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a> },</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf">AST_REDIRECTING_REASON_USER_BUSY</a>,      <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a> },</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5">AST_REDIRECTING_REASON_NO_ANSWER</a>,      <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a> },</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169abdb90f3f8c8155369dcdbd057188a78e">AST_REDIRECTING_REASON_UNAVAILABLE</a>,    mISDN_REDIRECTING_REASON_NO_REPLY },</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e">AST_REDIRECTING_REASON_UNCONDITIONAL</a>,  <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f">mISDN_REDIRECTING_REASON_CALL_FWD</a> },</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ad6a99554f81ed9d0013175575aa42dea">AST_REDIRECTING_REASON_TIME_OF_DAY</a>,    mISDN_REDIRECTING_REASON_UNKNOWN },</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a47514b3ded123bffcd277ae57d0ec7cd">AST_REDIRECTING_REASON_DO_NOT_DISTURB</a>, mISDN_REDIRECTING_REASON_UNKNOWN },</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1">AST_REDIRECTING_REASON_DEFLECTION</a>,     <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a> },</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a484e50afff2aad5bc423f58de85007c4">AST_REDIRECTING_REASON_FOLLOW_ME</a>,      mISDN_REDIRECTING_REASON_UNKNOWN },</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745">AST_REDIRECTING_REASON_OUT_OF_ORDER</a>,   <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a> },</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1b9c4bf584b688358d393c176f8fbf6d">AST_REDIRECTING_REASON_AWAY</a>,           mISDN_REDIRECTING_REASON_UNKNOWN },</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      { <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1">AST_REDIRECTING_REASON_CALL_FWD_DTE</a>,   <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a> }</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <span class="comment">/* *INDENT-ON* */</span></div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   };</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(misdn_reason_table); ++index) {</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <span class="keywordflow">if</span> (misdn_reason_table[index].ast == ast) {</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;         <span class="keywordflow">return</span> misdn_reason_table[index].q931;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   }</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a>;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00206">isdn_lib.h:206</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5">AST_REDIRECTING_REASON_NO_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00393">callerid.h:393</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00391">callerid.h:391</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf">AST_REDIRECTING_REASON_USER_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00392">callerid.h:392</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745">AST_REDIRECTING_REASON_OUT_OF_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00400">callerid.h:400</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00204">isdn_lib.h:204</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169abdb90f3f8c8155369dcdbd057188a78e"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169abdb90f3f8c8155369dcdbd057188a78e">AST_REDIRECTING_REASON_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00394">callerid.h:394</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a></div><div class="ttdeci">mISDN_REDIRECTING_REASON</div><div class="ttdoc">Q.931 encoded redirecting reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00197">isdn_lib.h:197</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f">mISDN_REDIRECTING_REASON_CALL_FWD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00210">isdn_lib.h:210</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a1b9c4bf584b688358d393c176f8fbf6d"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1b9c4bf584b688358d393c176f8fbf6d">AST_REDIRECTING_REASON_AWAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00401">callerid.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00202">isdn_lib.h:202</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00200">isdn_lib.h:200</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00198">isdn_lib.h:198</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ad6a99554f81ed9d0013175575aa42dea"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ad6a99554f81ed9d0013175575aa42dea">AST_REDIRECTING_REASON_TIME_OF_DAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00396">callerid.h:396</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e">AST_REDIRECTING_REASON_UNCONDITIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00395">callerid.h:395</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a484e50afff2aad5bc423f58de85007c4"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a484e50afff2aad5bc423f58de85007c4">AST_REDIRECTING_REASON_FOLLOW_ME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00399">callerid.h:399</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1">AST_REDIRECTING_REASON_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00398">callerid.h:398</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a47514b3ded123bffcd277ae57d0ec7cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a47514b3ded123bffcd277ae57d0ec7cd">AST_REDIRECTING_REASON_DO_NOT_DISTURB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00397">callerid.h:397</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a></div><div class="ttdeci">AST_REDIRECTING_REASON</div><div class="ttdoc">redirecting reason codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00390">callerid.h:390</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1">AST_REDIRECTING_REASON_CALL_FWD_DTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00402">callerid.h:402</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00208">isdn_lib.h:208</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a939a80be7808cdb4e608d121b71b36d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939a80be7808cdb4e608d121b71b36d4">&#9670;&nbsp;</a></span>ast_to_misdn_screen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_to_misdn_screen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>screening</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02242">2242</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00321">AST_PRES_NETWORK_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00317">AST_PRES_NUMBER_TYPE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00320">AST_PRES_USER_NUMBER_FAILED_SCREEN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00319">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00318">AST_PRES_USER_NUMBER_UNSCREENED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;{</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <span class="keywordflow">switch</span> (screening &amp; <a class="code" href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a>) {</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>:</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      screening = 0;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>:</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      screening = 1;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#ab103476cd94e4c3dfeadf3dff48bb51f">AST_PRES_USER_NUMBER_FAILED_SCREEN</a>:</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      screening = 2;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a681f7db5cdf14387bac29c1d220fe3b0">AST_PRES_NETWORK_NUMBER</a>:</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      screening = 3;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;   }</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   <span class="keywordflow">return</span> screening;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;}</div><div class="ttc" id="callerid_8h_html_ab103476cd94e4c3dfeadf3dff48bb51f"><div class="ttname"><a href="../../de/d47/callerid_8h.html#ab103476cd94e4c3dfeadf3dff48bb51f">AST_PRES_USER_NUMBER_FAILED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_FAILED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00320">callerid.h:320</a></div></div>
<div class="ttc" id="callerid_8h_html_a681f7db5cdf14387bac29c1d220fe3b0"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a681f7db5cdf14387bac29c1d220fe3b0">AST_PRES_NETWORK_NUMBER</a></div><div class="ttdeci">#define AST_PRES_NETWORK_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00321">callerid.h:321</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="callerid_8h_html_aa2dfb2ae7af41bd00f62156828f885d4"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a></div><div class="ttdeci">#define AST_PRES_NUMBER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00317">callerid.h:317</a></div></div>
<div class="ttc" id="callerid_8h_html_a373e33a23b1df10c39311947fc724b11"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_PASSED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00319">callerid.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3438ef3ff767addb942dab05ef04fd87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3438ef3ff767addb942dab05ef04fd87">&#9670;&nbsp;</a></span>ast_to_misdn_ton()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a> ast_to_misdn_ton </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ast_number_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01916">1916</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;{</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a> number_type;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   <span class="keywordflow">switch</span> ((ast_number_type &gt;&gt; 4) &amp; 0x07) {</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>:</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>:</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>:</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>:</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>:</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>:</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   <span class="keywordflow">return</span> number_type;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00104">isdn_lib.h:104</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00105">isdn_lib.h:105</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00106">isdn_lib.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00103">isdn_lib.h:103</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a></div><div class="ttdeci">mISDN_NUMBER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00101">isdn_lib.h:101</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00107">isdn_lib.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad61ca821b2c91e20569e54196167c403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad61ca821b2c91e20569e54196167c403">&#9670;&nbsp;</a></span>bearer2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* bearer2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02373">2373</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02356">allowed_bearers::display</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">print_bc_info()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03355">print_bearer()</a>.</p>
<div class="fragment"><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;{</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <span class="keywordtype">unsigned</span> index;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>); ++index) {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[index].cap == cap) {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[index].<a class="code" href="../../df/d87/structallowed__bearers.html#ac49dfab9200d48f835ce64819c4fc878">display</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      }</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown Bearer&quot;</span>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structallowed__bearers_html_ac49dfab9200d48f835ce64819c4fc878"><div class="ttname"><a href="../../df/d87/structallowed__bearers.html#ac49dfab9200d48f835ce64819c4fc878">allowed_bearers::display</a></div><div class="ttdeci">char * display</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02356">chan_misdn.c:2356</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac3a639b2c4663f01f6e49dcd7aa2c218"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a></div><div class="ttdeci">static const struct allowed_bearers allowed_bearers_array[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02362">chan_misdn.c:2362</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a848ab2a42c0b12ed8c70a194b3c3cf45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a848ab2a42c0b12ed8c70a194b3c3cf45">&#9670;&nbsp;</a></span>cb_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196b">event_response_e</a> cb_events </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>queue new chan</p>
<p>Supplementary Services </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">9917</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08844">add_in_calls()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00429">misdn_bchannel::addr</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00547">chan_list::addr</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00381">chan_list::allowed_bearers</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00521">misdn_bchannel::AOCD_need_export</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04194">ast_canmatch_extension()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00114">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00134">AST_CAUSE_INCOMPATIBLE_DESTINATION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00106">AST_CAUSE_USER_BUSY</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10765">ast_channel_bridge_peer()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00713">ast_channel_generator()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00549">ast_channel_generatordata()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00553">ast_channel_generatordata_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10392">ast_channel_queue_redirecting_update()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00457">ast_channel_rings_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00505">ast_channel_transfercapability_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00446">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00450">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00452">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">AST_CONTROL_PROCEEDING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02902">ast_deactivate_generator()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01193">ast_get_chan_features_pickup_config()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01182">ast_named_caller_presentation()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01896">ast_party_id_reset()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02135">ast_party_redirecting_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02179">ast_party_redirecting_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02122">ast_party_redirecting_init()</a>, <a class="el" href="../../d9/dbf/pickup_8c_source.html#l00200">ast_pickup_call()</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00325">AST_PRES_RESTRICTED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00318">AST_PRES_USER_NUMBER_UNSCREENED</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01191">ast_queue_hold()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01216">ast_queue_unhold()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07434">ast_set_callerid()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00041">AST_STATE_RINGING</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00678">ast_transfercapability2str()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00547">misdn_bchannel::bc_state</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00617">bc_state2str()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02373">bearer2str()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00432">misdn_bchannel::bframe</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00435">misdn_bchannel::bframe_len</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00671">misdn_bchannel::cause</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00032">cb_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_list_init()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00368">hold_info::channel</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00411">misdn_bchannel::channel</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08377">cl_queue_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00353">misdn_bchannel::connected</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_list::context</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00426">misdn_bchannel::cw</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00452">misdn_bchannel::dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00361">misdn_bchannel::dummy</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00130">EVENT_ALERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00123">EVENT_BCHAN_ACTIVATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00122">EVENT_BCHAN_DATA</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00124">EVENT_BCHAN_ERROR</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00125">EVENT_CLEANUP</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00131">EVENT_CONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00133">EVENT_CONNECT_ACKNOWLEDGE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00157">EVENT_DTMF_TONE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00137">EVENT_HOLD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00140">EVENT_HOLD_ACKNOWLEDGE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00143">EVENT_HOLD_REJECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00154">EVENT_INFORMATION</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00159">EVENT_NEW_BC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00161">EVENT_NEW_CHANNEL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00158">EVENT_NEW_L3ID</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00152">EVENT_NOTIFY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00160">EVENT_PORT_ALARM</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00126">EVENT_PROCEEDING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00127">EVENT_PROGRESS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00129">EVENT_REGISTER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00149">EVENT_RELEASE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00148">EVENT_RESTART</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00144">EVENT_RETRIEVE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00145">EVENT_RETRIEVE_ACKNOWLEDGE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00146">EVENT_RETRIEVE_REJECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00128">EVENT_SETUP</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00132">EVENT_SETUP_ACKNOWLEDGE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00155">EVENT_STATUS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00156">EVENT_TIMEOUT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00121">EVENT_TONE_GENERATE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03458">export_aoc_vars()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08811">export_ch()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00507">misdn_bchannel::fac_in</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00570">chan_list::far_alerting</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08259">find_chan_by_bc()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08351">find_hold_active_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08283">find_hold_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08317">find_hold_call_l3()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00234">ast_generator::generate</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08447">hangup_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_list::ignore_dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00348">misdn_bchannel::incoming_cid_tag</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00176">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00650">misdn_bchannel::info_dad</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00186">INFO_PI_INBAND_AVAILABLE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00653">misdn_bchannel::infos_pending</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00647">misdn_bchannel::keypad</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00399">misdn_bchannel::l3_id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04324">manager_isdn_get_info()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">misdn_add_number_prefix()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00335">MISDN_ALERTING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08619">misdn_attempt_transfer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00333">MISDN_CALLING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00334">MISDN_CALLING_ACKNOWLEDGE</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00436">misdn_cap_is_speech()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00039">MISDN_CFG_ALARM_BLOCK</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00061">MISDN_CFG_ALWAYS_IMMEDIATE</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00046">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00066">MISDN_CFG_HOLD_ALLOWED</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00063">MISDN_CFG_IMMEDIATE</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00038">MISDN_CFG_REJECT_CAUSE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00339">MISDN_CLEANING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00330">MISDN_DIALING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00338">MISDN_DISCONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00328">MISDN_EXTCANTMATCH</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00114">MISDN_GEN_APPEND_DIGITS2EXTEN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">misdn_get_ch_state()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00349">MISDN_HOLD_ACTIVE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00351">MISDN_HOLD_DISCONNECT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00444">misdn_inband_avail()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00329">MISDN_INCOMING_SETUP</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09904">misdn_is_msn_valid()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00128">misdn_lib_is_ptp()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03431">misdn_lib_log_ies()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00091">misdn_lib_port_block()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00326">MISDN_NOTHING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00223">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00229">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00227">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00225">mISDN_NOTIFY_CODE_DIVERSION_ACTIVATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00217">mISDN_NOTIFY_CODE_INVALID</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">misdn_overlap_dial_task()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00332">MISDN_PROCEEDING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00331">MISDN_PROGRESS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00202">mISDN_REDIRECTING_REASON_NO_REPLY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00198">mISDN_REDIRECTING_REASON_UNKNOWN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03609">misdn_tasks_add_variable()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02000">misdn_to_ast_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02117">misdn_to_ast_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02210">misdn_to_ast_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01874">misdn_to_ast_ton()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01958">misdn_to_str_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02084">misdn_to_str_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02173">misdn_to_str_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01832">misdn_to_str_ton()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06210">misdn_update_remote_party()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00327">MISDN_WAITING4DIGS</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00119">ast_custom_function::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02355">allowed_bearers::name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_list::need_busy</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00386">misdn_bchannel::need_disconnect</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00465">misdn_bchannel::need_more_infos</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00389">misdn_bchannel::need_release</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00392">misdn_bchannel::need_release_complete</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_list::noautorespond_on_setup</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00606">misdn_bchannel::notify_description_code</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00576">chan_list::nttimeout</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">ORG_MISDN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_list::overlap_dial</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_list::overlap_dial_task</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00603">chan_list::overlap_tv</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_list::overlap_tv_lock</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_list::pipe</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03355">print_bearer()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00537">ast_party_redirecting::priv_from</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00534">ast_party_redirecting::priv_orig</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00540">ast_party_redirecting::priv_to</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00492">misdn_bchannel::progress_indicator</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00114">RESPONSE_ERR</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00112">RESPONSE_IGNORE_SETUP</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00111">RESPONSE_IGNORE_SETUP_WITHOUT_CLOSE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00115">RESPONSE_OK</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00113">RESPONSE_RELEASE_SETUP</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00470">misdn_bchannel::sending_complete</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00132">misdn_jb::size</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07764">start_bc_tones()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">start_pbx()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07772">stop_bc_tones()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">stop_indicate()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00531">ast_party_redirecting::to</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00319">misdn_party_redirecting::to_changed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00544">misdn_bchannel::tone_cnt</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08150">update_name()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08889">wait_for_digits()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;{</div><div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;   <span class="keyword">struct </span>misdn_cc_record *cc_record;</div><div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *held_ch;</div><div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab0eef19925128e2ed1f90431ebe8a4d2">find_chan_by_bc</a>(bc);</div><div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160;</div><div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d7d/structevent.html">event</a> != <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a> &amp;&amp; <a class="code" href="../../df/d7d/structevent.html">event</a> != <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a>) {</div><div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;      <span class="keywordtype">int</span> debuglevel = 1;</div><div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;</div><div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;      <span class="comment">/*  Debug Only Non-Bchan */</span></div><div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d7d/structevent.html">event</a> == <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a> &amp;&amp; !user_data) {</div><div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;         debuglevel = 5;</div><div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;      }</div><div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;</div><div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(debuglevel, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;         <span class="stringliteral">&quot;I IND :%s caller:\&quot;%s\&quot; &lt;%s&gt; dialed:%s pid:%d state:%s\n&quot;</span>,</div><div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>),</div><div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>,</div><div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;         ch ? <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(ch) : <span class="stringliteral">&quot;none&quot;</span>);</div><div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;      <span class="keywordflow">if</span> (debuglevel == 1) {</div><div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a3c9c5a8101a5212ab83e7eecfee8ea33">misdn_lib_log_ies</a>(bc);</div><div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; bc_state:%s\n&quot;</span>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ae2f4cc55968e9014a4daa06d1be05bef">bc_state2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">bc_state</a>));</div><div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;      }</div><div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;   }</div><div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;</div><div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160;      <span class="keywordflow">switch</span>(<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a>:</div><div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>:</div><div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>:</div><div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a50ddddd2e7ed5ebc329cb84f494c59dd">EVENT_PORT_ALARM</a>:</div><div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5c96a65759665eb6ba2ac21887c86016">EVENT_RETRIEVE</a>:</div><div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae181b9b8e2c00cb51f42deed063ed1ab">EVENT_NEW_BC</a>:</div><div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>:</div><div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4">EVENT_REGISTER</a>:</div><div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a>:</div><div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a>:</div><div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a>:</div><div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Chan not existing at the moment bc-&gt;l3id:%x bc:%p event:%s port:%d channel:%d\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>, bc, <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;      }</div><div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a>:</div><div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>:</div><div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>:</div><div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a>:</div><div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a596dc8c1b60ba4769e5f606b5d75f23c">EVENT_TIMEOUT</a>:</div><div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;ast_hangup already called, so we have no ast ptr anymore in event(%s)\n&quot;</span>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>));</div><div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;         }</div><div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> || !<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>)) {</div><div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../df/d7d/structevent.html">event</a> != <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a>) {</div><div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No Ast or No private Pointer in Event (%d:%s)\n&quot;</span>, <a class="code" href="../../df/d7d/structevent.html">event</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>));</div><div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160;            }</div><div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;No Ast or Ast private pointer&quot;</span>);</div><div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;         }</div><div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09989"></a><span class="lineno"> 9989</span>&#160;      }</div><div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;   }</div><div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;</div><div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;</div><div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a50ddddd2e7ed5ebc329cb84f494c59dd">EVENT_PORT_ALARM</a>:</div><div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;      {</div><div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;         <span class="keywordtype">int</span> boa = 0;</div><div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2a00b1227ee6580b8e844fef837e7b84">MISDN_CFG_ALARM_BLOCK</a>, &amp;boa, <span class="keyword">sizeof</span>(boa));</div><div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;         <span class="keywordflow">if</span> (boa) {</div><div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; blocking\n&quot;</span>);</div><div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a4cadcadbe3825e4fe2a476a4b93a529a">misdn_lib_port_block</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160;         }</div><div class="line"><a name="l10002"></a><span class="lineno">10002</span>&#160;      }</div><div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0d3a575e6b608b18c13582c9855b18d8">EVENT_BCHAN_ACTIVATED</a>:</div><div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;</div><div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a33a36b6aad8ef7a1c08cbac58ff63664">EVENT_NEW_CHANNEL</a>:</div><div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae14b6d64edd251ea70ad859ffe33a08f">update_name</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>,bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;</div><div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a00e5f3ee95cd2c61825dde95d4561ce3">EVENT_NEW_L3ID</a>:</div><div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>=bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>=bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>;</div><div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;</div><div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae181b9b8e2c00cb51f42deed063ed1ab">EVENT_NEW_BC</a>:</div><div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;         ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a118093a88a20335df7f60d7f3897f2c9">find_hold_call</a>(bc);</div><div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;      }</div><div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;</div><div class="line"><a name="l10021"></a><span class="lineno">10021</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NEW_BC without chan_list?\n&quot;</span>);</div><div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160;      }</div><div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;</div><div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160;      <span class="keywordflow">if</span> (bc) {</div><div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> = (<span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *) user_data;</div><div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;      }</div><div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;</div><div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5453b43c808f36b08d5145be1856ae77">EVENT_DTMF_TONE</a>:</div><div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;   {</div><div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;      <span class="comment">/*  sending INFOS as DTMF-Frames :) */</span></div><div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fr;</div><div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;</div><div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;      memset(&amp;fr, 0, <span class="keyword">sizeof</span>(fr));</div><div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160;      fr.frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>;</div><div class="line"><a name="l10038"></a><span class="lineno">10038</span>&#160;      fr.subclass.integer = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7712c89c275129d6c964a44eae526548">dtmf</a> ;</div><div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;      fr.src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;      fr.data.ptr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;      fr.datalen = 0;</div><div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;      fr.samples = 0;</div><div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;      fr.mallocd = 0;</div><div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;      fr.offset = 0;</div><div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;      fr.delivery = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0,0);</div><div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;</div><div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">ignore_dtmf</a>) {</div><div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DTMF:%c\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7712c89c275129d6c964a44eae526548">dtmf</a>);</div><div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;fr);</div><div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Ignoring DTMF:%c due to bridge flags\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7712c89c275129d6c964a44eae526548">dtmf</a>);</div><div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;      }</div><div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;   }</div><div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5512c203d7860fb90bf53d6550a6beb5">EVENT_STATUS</a>:</div><div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;</div><div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a>:</div><div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a>(ch);</div><div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160;      }</div><div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;</div><div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160;      }</div><div class="line"><a name="l10066"></a><span class="lineno">10066</span>&#160;</div><div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>) {</div><div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a> *, pickup_cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *pickupexten;</div><div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;</div><div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;         <span class="comment">/*  Ok, incomplete Setup, waiting till extension exists */</span></div><div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>) &amp;&amp; ! <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>)) {</div><div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; using keypad as info\n&quot;</span>);</div><div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>));</div><div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;         }</div><div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160;</div><div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - 1);</div><div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;</div><div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160;         pickup_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;         <span class="keywordflow">if</span> (!pickup_cfg) {</div><div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve pickup configuration options. Unable to detect call pickup extension\n&quot;</span>);</div><div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;            pickupexten = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;            pickupexten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(pickup_cfg-&gt;pickupexten);</div><div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;         }</div><div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;</div><div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;         <span class="comment">/* Check for Pickup Request first */</span></div><div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;         <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>), pickupexten)) {</div><div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>)) {</div><div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>;</div><div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;            }</div><div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160;         }</div><div class="line"><a name="l10101"></a><span class="lineno">10101</span>&#160;</div><div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;i&quot;</span>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;                  <span class="stringliteral">&quot;Extension &#39;%s@%s&#39; can never match. Jumping to &#39;i&#39; extension. port:%d\n&quot;</span>,</div><div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160;                  bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <span class="stringliteral">&quot;INVALID_EXTEN&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <span class="stringliteral">&quot;i&quot;</span>);</div><div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a>(ch, bc, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160;            }</div><div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;</div><div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;               <span class="stringliteral">&quot;Extension &#39;%s@%s&#39; can never match. Disconnecting. port:%d\n&quot;</span></div><div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;               <span class="stringliteral">&quot;\tMaybe you want to add an &#39;i&#39; extension to catch this case.\n&quot;</span>,</div><div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;</div><div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;            <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160;            }</div><div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a>;</div><div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;</div><div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;         }</div><div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;</div><div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>) {</div><div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a6324067fc3743b5c48c0907b90d83c5d">overlap_tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> == -1) {</div><div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> =</div><div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160;                  <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6f82046b64a8e353a912e8535033af81">misdn_tasks_add_variable</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24fb8b2cce05250a12724f761e5e9e4b">misdn_overlap_dial_task</a>, ch);</div><div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;            }</div><div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;         }</div><div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;</div><div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>))  {</div><div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a>(ch, bc, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;         }</div><div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;         <span class="comment">/*  sending INFOS as DTMF-Frames :) */</span></div><div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fr;</div><div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;         <span class="keywordtype">int</span> digits;</div><div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;</div><div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;         memset(&amp;fr, 0, <span class="keyword">sizeof</span>(fr));</div><div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;         fr.frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>;</div><div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;         fr.subclass.integer = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>[0] ;</div><div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;         fr.src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;         fr.data.ptr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;         fr.datalen = 0;</div><div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;         fr.samples = 0;</div><div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;         fr.mallocd = 0;</div><div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;         fr.offset = 0;</div><div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;         fr.delivery = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0,0);</div><div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;</div><div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa6ea789fec6299b5d967bd78df6c77994">MISDN_GEN_APPEND_DIGITS2EXTEN</a>, &amp;digits, <span class="keyword">sizeof</span>(digits));</div><div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;            <span class="keywordflow">if</span> (digits) {</div><div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;               strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - 1);</div><div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;            }</div><div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;</div><div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;fr);</div><div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160;         }</div><div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;      }</div><div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a>:</div><div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;   {</div><div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;      <span class="keywordtype">int</span> exceed;</div><div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;      <span class="keywordtype">int</span> ai;</div><div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;      <span class="keywordtype">int</span> im;</div><div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;      <span class="keywordtype">int</span> append_msn = 0;</div><div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a> *, pickup_cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *pickupexten;</div><div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160;</div><div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;      <span class="keywordflow">if</span> (ch) {</div><div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;         <span class="keywordflow">switch</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a>:</div><div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;Ignore found ch.  Is it for an outgoing call?&quot;</span>);</div><div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;            ch = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;Already have a call.&quot;</span>);</div><div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Ignoring Call we have already one\n&quot;</span>);</div><div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196ba762089f99cfe26124dfe5d7e8c11eb17">RESPONSE_IGNORE_SETUP_WITHOUT_CLOSE</a>; <span class="comment">/*  Ignore MSNs which are not in our List */</span></div><div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;         }</div><div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;      }</div><div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;</div><div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;      <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; !<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aea7ddf219f27c4fb9d7cc3e55b641e15">misdn_is_msn_valid</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>)) {</div><div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Ignoring Call, its not in our MSN List\n&quot;</span>);</div><div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196ba92645dbc0821c091a863bbbaf604a531">RESPONSE_IGNORE_SETUP</a>; <span class="comment">/*  Ignore MSNs which are not in our List */</span></div><div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160;      }</div><div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;</div><div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0e234074dd9e6208d65dcd4230827898">cw</a>) {</div><div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;         <span class="keywordtype">int</span> cause;</div><div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Call Waiting on PMP sending RELEASE_COMPLETE\n&quot;</span>);</div><div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf07f31540a757ef544b9a4a25da618c5">MISDN_CFG_REJECT_CAUSE</a>, &amp;cause, <span class="keyword">sizeof</span>(cause));</div><div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = cause ? cause : <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9">RESPONSE_RELEASE_SETUP</a>;</div><div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;      }</div><div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160;</div><div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a695d9a32f28a058deed150c684b94db4">print_bearer</a>(bc);</div><div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;</div><div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;      ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a50699bbbd48dbd7728bfed50b0d00547">chan_list_init</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>);</div><div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;cb_events: malloc for chan_list failed!\n&quot;</span>);</div><div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9">RESPONSE_RELEASE_SETUP</a>;</div><div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;      }</div><div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;</div><div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> = <a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">addr</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>;</div><div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;</div><div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;      {</div><div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;         <span class="keywordflow">if</span> (!(cap)) {</div><div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196bafbd4240b5429f7ddbd5bdb159a8bb7f0">RESPONSE_ERR</a>;</div><div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160;         }</div><div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0);</div><div class="line"><a name="l10225"></a><span class="lineno">10225</span>&#160;         chan = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e0668ab60f561d89f4135bfbc600575">misdn_new</a>(ch, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cap, -1);</div><div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;      }</div><div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;Failed to create a new channel&quot;</span>);</div><div class="line"><a name="l10230"></a><span class="lineno">10230</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;cb_events: misdn_new failed!\n&quot;</span>);</div><div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9">RESPONSE_RELEASE_SETUP</a>;</div><div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;      }</div><div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;</div><div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;      pickup_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a>(chan);</div><div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;      <span class="keywordflow">if</span> (!pickup_cfg) {</div><div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve pickup configuration options. Unable to detect call pickup extension\n&quot;</span>);</div><div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;         pickupexten = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;         pickupexten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(pickup_cfg-&gt;pickupexten);</div><div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;      }</div><div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;</div><div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;      <span class="keywordflow">if</span> ((exceed = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a831eeaa0477eef4301f6b0d4de977764">add_in_calls</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>))) {</div><div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[16];</div><div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;         snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, exceed);</div><div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MAX_OVERFLOW&quot;</span>, tmp);</div><div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;      }</div><div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;</div><div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#acac8a3f512ee09cfb5ed9283b66804eb">read_config</a>(ch);</div><div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;</div><div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae68199acb58f138dce5b16b0de5c4459">export_ch</a>(chan, bc, ch);</div><div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;</div><div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, 1);</div><div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>);</div><div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160;</div><div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;      <span class="comment">/* Update asterisk channel caller information */</span></div><div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; TON: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af70683c24ce8bc518f5541dfde4763e7">misdn_to_str_ton</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>);</div><div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; PLAN: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5478f292b178f9c27949ef8dd7810206">misdn_to_str_plan</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>)</div><div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;         | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;</div><div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; PRES: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a1cf9411a71645f03e0628dcea770b1ad">misdn_to_str_pres</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; SCREEN: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a45975791307e0a9cdaff63af4dc9492c">misdn_to_str_screen</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>)</div><div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;         | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;</div><div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;</div><div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a>, &amp;append_msn, <span class="keyword">sizeof</span>(append_msn));</div><div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160;      <span class="keywordflow">if</span> (append_msn) {</div><div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>, <span class="stringliteral">&quot;_&quot;</span>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - 1);</div><div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - 1);</div><div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;      }</div><div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;</div><div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;</div><div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;         <span class="comment">/* Add configured prefix to redirecting.from.number */</span></div><div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;</div><div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160;         <span class="comment">/* Update asterisk channel redirecting information */</span></div><div class="line"><a name="l10287"></a><span class="lineno">10287</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(chan, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;      }</div><div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;</div><div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;TRANSFERCAPABILITY&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#acb027b361350d81e4b94b540fbdfe4e4">ast_transfercapability2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>));</div><div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae307ed78db92c08b0dd9c13a7724ae86">ast_channel_transfercapability_set</a>(chan, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>);</div><div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;</div><div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) {</div><div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>:</div><div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CALLTYPE&quot;</span>, <span class="stringliteral">&quot;DIGITAL&quot;</span>);</div><div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;CALLTYPE&quot;</span>, <span class="stringliteral">&quot;SPEECH&quot;</span>);</div><div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;      }</div><div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;</div><div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;      <span class="keywordflow">if</span> (!strstr(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">allowed_bearers</a>, <span class="stringliteral">&quot;all&quot;</span>)) {</div><div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;         <span class="keywordtype">int</span> i;</div><div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;</div><div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;         <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>); ++i) {</div><div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[i].cap == bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) {</div><div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;               <span class="keywordflow">if</span> (strstr(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">allowed_bearers</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[i].<a class="code" href="../../df/d87/structallowed__bearers.html#a5ac083a645d964373f022d03df4849c8">name</a>)) {</div><div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;                  <span class="comment">/* The bearer capability is allowed */</span></div><div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[i].deprecated) {</div><div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;                     <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;%s in allowed_bearers list is deprecated\n&quot;</span>,</div><div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;                        <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>[i].<a class="code" href="../../df/d87/structallowed__bearers.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160;                  }</div><div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;               }</div><div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;            }</div><div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160;         }</div><div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;         <span class="keywordflow">if</span> (i == <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a>)) {</div><div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;            <span class="comment">/* We did not find the bearer capability */</span></div><div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Bearer capability not allowed: %s(%d)\n&quot;</span>,</div><div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>);</div><div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160;</div><div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a>;</div><div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;BC not allowed, releasing call&quot;</span>);</div><div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a4c378d6f7b9d40dee77d74fa7c5d91e4">AST_CAUSE_INCOMPATIBLE_DESTINATION</a>;</div><div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9">RESPONSE_RELEASE_SETUP</a>;</div><div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;         }</div><div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;      }</div><div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;<span class="comment"></span></div><div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160;<span class="comment">      /** queue new chan **/</span></div><div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3ace3bd096d1676e348a4ef23a20a7fc">cl_queue_chan</a>(ch);</div><div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;</div><div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160;      }</div><div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;</div><div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;      <span class="comment">/* Check for Pickup Request first */</span></div><div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;      <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan), pickupexten)) {</div><div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">noautorespond_on_setup</a>) {</div><div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;            <span class="comment">/* Sending SETUP_ACK */</span></div><div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>);</div><div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>;</div><div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;         }</div><div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a>(chan)) {</div><div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>;</div><div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;         }</div><div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;      }</div><div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;</div><div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;<span class="comment">       * added support for s extension hope it will help those poor cretains</span></div><div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;<span class="comment">       * which haven&#39;t overlap dial.</span></div><div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf9368cd93cfd0d4ec714e920a9587c41">MISDN_CFG_ALWAYS_IMMEDIATE</a>, &amp;ai, <span class="keyword">sizeof</span>(ai));</div><div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;      <span class="keywordflow">if</span> (ai) {</div><div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad02ce087fa60dd9931299f9574700c97">do_immediate_setup</a>(bc, ch, chan);</div><div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;      }</div><div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160;</div><div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;      <span class="comment">/* check if we should jump into s when we have no dialed.number */</span></div><div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1741048a25b1d75660664a24ebaadbcf">MISDN_CFG_IMMEDIATE</a>, &amp;im, <span class="keyword">sizeof</span>(im));</div><div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;      <span class="keywordflow">if</span> (im &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad02ce087fa60dd9931299f9574700c97">do_immediate_setup</a>(bc, ch, chan);</div><div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160;      }</div><div class="line"><a name="l10370"></a><span class="lineno">10370</span>&#160;</div><div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;CONTEXT:%s\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;i&quot;</span>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;               <span class="stringliteral">&quot;Extension &#39;%s@%s&#39; can never match. Jumping to &#39;i&#39; extension. port:%d\n&quot;</span>,</div><div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <span class="stringliteral">&quot;INVALID_EXTEN&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <span class="stringliteral">&quot;i&quot;</span>);</div><div class="line"><a name="l10379"></a><span class="lineno">10379</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>);</div><div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a>(ch, bc, chan);</div><div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;         }</div><div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160;</div><div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160;            <span class="stringliteral">&quot;Extension &#39;%s@%s&#39; can never match. Disconnecting. port:%d\n&quot;</span></div><div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;            <span class="stringliteral">&quot;\tMaybe you want to add an &#39;i&#39; extension to catch this case.\n&quot;</span>,</div><div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l10391"></a><span class="lineno">10391</span>&#160;         }</div><div class="line"><a name="l10392"></a><span class="lineno">10392</span>&#160;</div><div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a>;</div><div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;</div><div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> ? <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a> : <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160;      }</div><div class="line"><a name="l10399"></a><span class="lineno">10399</span>&#160;</div><div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;      <span class="comment">/* Whatever happens, when sending_complete is set or we are PTMP TE, we will definitely</span></div><div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160;<span class="comment">       * jump into the dialplan, when the dialed extension does not exist, the &#39;s&#39; extension</span></div><div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160;<span class="comment">       * will be used by Asterisk automatically. */</span></div><div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">sending_complete</a> || (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; !<a class="code" href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>))) {</div><div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">noautorespond_on_setup</a>) {</div><div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>=<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a>);</div><div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>;</div><div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;         }</div><div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a>(ch, bc, chan);</div><div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;      }</div><div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160;</div><div class="line"><a name="l10414"></a><span class="lineno">10414</span>&#160;</div><div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;<span class="comment">       * When we are NT and overlapdial is set and if</span></div><div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160;<span class="comment">       * the number is empty, we wait for the ISDN timeout</span></div><div class="line"><a name="l10418"></a><span class="lineno">10418</span>&#160;<span class="comment">       * instead of our own timer.</span></div><div class="line"><a name="l10419"></a><span class="lineno">10419</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10420"></a><span class="lineno">10420</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a> &amp;&amp; bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; !bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0]) {</div><div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a43bee3ea617c99abb55465aa8340e6af">wait_for_digits</a>(ch, bc, chan);</div><div class="line"><a name="l10422"></a><span class="lineno">10422</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160;      }</div><div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;</div><div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160;<span class="comment">       * If overlapdial we will definitely send a SETUP_ACKNOWLEDGE and wait for more</span></div><div class="line"><a name="l10427"></a><span class="lineno">10427</span>&#160;<span class="comment">       * Infos with a Interdigit Timeout.</span></div><div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;<span class="comment">       * */</span></div><div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>) {</div><div class="line"><a name="l10430"></a><span class="lineno">10430</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a6324067fc3743b5c48c0907b90d83c5d">overlap_tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160;</div><div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a43bee3ea617c99abb55465aa8340e6af">wait_for_digits</a>(ch, bc, chan);</div><div class="line"><a name="l10435"></a><span class="lineno">10435</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> == -1) {</div><div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> =</div><div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6f82046b64a8e353a912e8535033af81">misdn_tasks_add_variable</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24fb8b2cce05250a12724f761e5e9e4b">misdn_overlap_dial_task</a>, ch);</div><div class="line"><a name="l10438"></a><span class="lineno">10438</span>&#160;         }</div><div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160;      }</div><div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;</div><div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;      <span class="comment">/* If the extension does not exist and we&#39;re not TE_PTMP we wait for more digits</span></div><div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;<span class="comment">       * without interdigit timeout.</span></div><div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160;<span class="comment">       * */</span></div><div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>))  {</div><div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a43bee3ea617c99abb55465aa8340e6af">wait_for_digits</a>(ch, bc, chan);</div><div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;      }</div><div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160;</div><div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160;<span class="comment">       * If the extension exists let&#39;s just jump into it.</span></div><div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;<span class="comment">       * */</span></div><div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ab7ab21c4af667d26899c1f22a4e6e920">need_more_infos</a> ? <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a> : <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a>);</div><div class="line"><a name="l10455"></a><span class="lineno">10455</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a>(ch, bc, chan);</div><div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;      }</div><div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;   }</div><div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4">EVENT_REGISTER</a>:</div><div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160;      }</div><div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160;<span class="comment">       * Shut down this connection immediately.</span></div><div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;<span class="comment">       * The current design of chan_misdn data structures</span></div><div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;<span class="comment">       * does not allow the proper handling of inbound call records</span></div><div class="line"><a name="l10470"></a><span class="lineno">10470</span>&#160;<span class="comment">       * without an assigned B channel.  Therefore, we cannot</span></div><div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160;<span class="comment">       * be the CCBS User-B party in a point-to-point setup.</span></div><div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_None;</div><div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>:</div><div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>;</div><div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160;</div><div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>) {</div><div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae14b6d64edd251ea70ad859ffe33a08f">update_name</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>,bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l10483"></a><span class="lineno">10483</span>&#160;      }</div><div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;</div><div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10487"></a><span class="lineno">10487</span>&#160;      }</div><div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;</div><div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>)) {</div><div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160;         <span class="comment">/* TX Pending Infos */</span></div><div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - 1);</div><div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;</div><div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160;         }</div><div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>));</div><div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>));</div><div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;</div><div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a>);</div><div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160;      }</div><div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a>:</div><div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) &amp;&amp;</div><div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a>(bc)) {</div><div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10507"></a><span class="lineno">10507</span>&#160;      }</div><div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160;</div><div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>;</div><div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160;</div><div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;      }</div><div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160;</div><div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160;      }</div><div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;</div><div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>);</div><div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635">EVENT_PROGRESS</a>:</div><div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>) {</div><div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae14b6d64edd251ea70ad859ffe33a08f">update_name</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;      }</div><div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160;</div><div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;      }</div><div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;</div><div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;      <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) &amp;&amp;</div><div class="line"><a name="l10532"></a><span class="lineno">10532</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a>(bc)) {</div><div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;         }</div><div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;</div><div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>;</div><div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160;</div><div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;         <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160;         }</div><div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>);</div><div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;      }</div><div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a>:</div><div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>;</div><div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;</div><div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160;      }</div><div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;</div><div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;      }</div><div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;</div><div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>);</div><div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160;</div><div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(7, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Set State Ringing\n&quot;</span>);</div><div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;</div><div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) &amp;&amp; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a>(bc)) {</div><div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Starting Tones, we have inband Data\n&quot;</span>);</div><div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; We have no inband Data, the other end must create ringing\n&quot;</span>);</div><div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a18ac918bce4ec022cf1316d031f78cff">far_alerting</a>) {</div><div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; The other end can not do ringing eh ?.. we must do all ourself..&quot;</span>);</div><div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160;            <span class="comment">/*tone_indicate(ch, TONE_FAR_ALERTING);*/</span></div><div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;         }</div><div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;      }</div><div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb">EVENT_CONNECT</a>:</div><div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;      }</div><div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;div_leg_3_rx_wanted) {</div><div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;         bc-&gt;div_leg_3_rx_wanted = 0;</div><div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;</div><div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l10584"></a><span class="lineno">10584</span>&#160;</div><div class="line"><a name="l10585"></a><span class="lineno">10585</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>)-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> =</div><div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;               <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a> | <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;redirecting);</div><div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>));</div><div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;</div><div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;<span class="comment">             * Reset any earlier private redirecting id representations and</span></div><div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;<span class="comment">             * make sure that it is invalidated at the remote end.</span></div><div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_orig);</div><div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_from);</div><div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_to);</div><div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;</div><div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;redirecting);</div><div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;         }</div><div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;      }</div><div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;</div><div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;      <span class="comment">/* we answer when we&#39;ve got our very new L3 ID from the NT stack */</span></div><div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ad0435294fbb8a6afc9e2713035d044ea">EVENT_CONNECT_ACKNOWLEDGE</a>);</div><div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;</div><div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;      }</div><div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;</div><div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a>(ch);</div><div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;</div><div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;record_id != -1) {</div><div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;<span class="comment">          * We will delete the associated call completion</span></div><div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;<span class="comment">          * record since we now have a completed call.</span></div><div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;<span class="comment">          * We will not wait/depend on the network to tell</span></div><div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;<span class="comment">          * us to delete it.</span></div><div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;         cc_record = misdn_cc_find_by_id(ch-&gt;record_id);</div><div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;         <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;            <span class="keywordflow">if</span> (cc_record-&gt;ptp &amp;&amp; cc_record-&gt;mode.ptp.bc) {</div><div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;               <span class="comment">/* Close the call-completion signaling link */</span></div><div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;               cc_record-&gt;mode.ptp.bc-&gt;fac_out.Function = Fac_None;</div><div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;               cc_record-&gt;mode.ptp.bc-&gt;out_cause = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160;               <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(cc_record-&gt;mode.ptp.bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l10629"></a><span class="lineno">10629</span>&#160;            }</div><div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;            misdn_cc_delete(cc_record);</div><div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;         }</div><div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160;         ch-&gt;record_id = -1;</div><div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;peer) {</div><div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;            misdn_cc_set_peer_var(ch-&gt;peer, MISDN_CC_RECORD_ID, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;</div><div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ch-&gt;peer, -1);</div><div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;            ch-&gt;peer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;         }</div><div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;      }</div><div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;</div><div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;         <span class="comment">/* Add configured prefix to connected.number */</span></div><div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160;</div><div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160;         <span class="comment">/* Update the connected line information on the other channel */</span></div><div class="line"><a name="l10648"></a><span class="lineno">10648</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>, <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;      }</div><div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;</div><div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">addr</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>;</div><div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;</div><div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;</div><div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>;</div><div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160;</div><div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>);</div><div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ad0435294fbb8a6afc9e2713035d044ea">EVENT_CONNECT_ACKNOWLEDGE</a>:</div><div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">addr</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>;</div><div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;</div><div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;</div><div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>;</div><div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10668"></a><span class="lineno">10668</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;      <span class="comment">/* we might not have an ch-&gt;ast ptr here anymore */</span></div><div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160;      <span class="keywordflow">if</span> (ch) {</div><div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10672"></a><span class="lineno">10672</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;         }</div><div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;</div><div class="line"><a name="l10675"></a><span class="lineno">10675</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; org:%d nt:%d, inbandavail:%d state:%d\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a>(bc), ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>);</div><div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a> &amp;&amp; !bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a>(bc) &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;            <span class="comment">/* If there&#39;s inband information available (e.g. a</span></div><div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160;<span class="comment">               recorded message saying what was wrong with the</span></div><div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160;<span class="comment">               dialled number, or perhaps even giving an</span></div><div class="line"><a name="l10680"></a><span class="lineno">10680</span>&#160;<span class="comment">               alternative number, then play it instead of</span></div><div class="line"><a name="l10681"></a><span class="lineno">10681</span>&#160;<span class="comment">               immediately releasing the call */</span></div><div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Inband Info Avail, not sending RELEASE\n&quot;</span>);</div><div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;</div><div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a>;</div><div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(ch);</div><div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160;</div><div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l10689"></a><span class="lineno">10689</span>&#160;               <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> == <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>) {</div><div class="line"><a name="l10690"></a><span class="lineno">10690</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>);</div><div class="line"><a name="l10691"></a><span class="lineno">10691</span>&#160;               }</div><div class="line"><a name="l10692"></a><span class="lineno">10692</span>&#160;            }</div><div class="line"><a name="l10693"></a><span class="lineno">10693</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">need_busy</a> = 0;</div><div class="line"><a name="l10694"></a><span class="lineno">10694</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10695"></a><span class="lineno">10695</span>&#160;         }</div><div class="line"><a name="l10696"></a><span class="lineno">10696</span>&#160;</div><div class="line"><a name="l10697"></a><span class="lineno">10697</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a> = 0;</div><div class="line"><a name="l10698"></a><span class="lineno">10698</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l10699"></a><span class="lineno">10699</span>&#160;</div><div class="line"><a name="l10700"></a><span class="lineno">10700</span>&#160;         <span class="comment">/* Check for held channel, to implement transfer */</span></div><div class="line"><a name="l10701"></a><span class="lineno">10701</span>&#160;         held_ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a118093a88a20335df7f60d7f3897f2c9">find_hold_call</a>(bc);</div><div class="line"><a name="l10702"></a><span class="lineno">10702</span>&#160;         <span class="keywordflow">if</span> (!held_ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> || <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a00f4e04874766b14d63060e3617224ad">misdn_attempt_transfer</a>(ch, held_ch)) {</div><div class="line"><a name="l10703"></a><span class="lineno">10703</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10704"></a><span class="lineno">10704</span>&#160;         }</div><div class="line"><a name="l10705"></a><span class="lineno">10705</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10706"></a><span class="lineno">10706</span>&#160;         held_ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l10707"></a><span class="lineno">10707</span>&#160;         <span class="keywordflow">if</span> (held_ch) {</div><div class="line"><a name="l10708"></a><span class="lineno">10708</span>&#160;            <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10709"></a><span class="lineno">10709</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, held_ch);</div><div class="line"><a name="l10710"></a><span class="lineno">10710</span>&#160;            }</div><div class="line"><a name="l10711"></a><span class="lineno">10711</span>&#160;</div><div class="line"><a name="l10712"></a><span class="lineno">10712</span>&#160;            <span class="keywordflow">if</span> (held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a>) {</div><div class="line"><a name="l10713"></a><span class="lineno">10713</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a> = 0;</div><div class="line"><a name="l10714"></a><span class="lineno">10714</span>&#160;</div><div class="line"><a name="l10715"></a><span class="lineno">10715</span>&#160;<span class="preprocessor">#if defined(TRANSFER_ON_HELD_CALL_HANGUP)</span></div><div class="line"><a name="l10716"></a><span class="lineno">10716</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l10717"></a><span class="lineno">10717</span>&#160;<span class="comment">                * Some phones disconnect the held call and the active call at the</span></div><div class="line"><a name="l10718"></a><span class="lineno">10718</span>&#160;<span class="comment">                * same time to do the transfer.  Unfortunately, either call could</span></div><div class="line"><a name="l10719"></a><span class="lineno">10719</span>&#160;<span class="comment">                * be disconnected first.</span></div><div class="line"><a name="l10720"></a><span class="lineno">10720</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l10721"></a><span class="lineno">10721</span>&#160;               ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afdd26a6887b2f69d2ca39077eae6d8e1">find_hold_active_call</a>(bc);</div><div class="line"><a name="l10722"></a><span class="lineno">10722</span>&#160;               <span class="keywordflow">if</span> (!ch || <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a00f4e04874766b14d63060e3617224ad">misdn_attempt_transfer</a>(ch, held_ch)) {</div><div class="line"><a name="l10723"></a><span class="lineno">10723</span>&#160;                  held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a>;</div><div class="line"><a name="l10724"></a><span class="lineno">10724</span>&#160;                  <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(held_ch, bc);</div><div class="line"><a name="l10725"></a><span class="lineno">10725</span>&#160;               }</div><div class="line"><a name="l10726"></a><span class="lineno">10726</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l10727"></a><span class="lineno">10727</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(held_ch, bc);</div><div class="line"><a name="l10728"></a><span class="lineno">10728</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(TRANSFER_ON_HELD_CALL_HANGUP) */</span><span class="preprocessor"></span></div><div class="line"><a name="l10729"></a><span class="lineno">10729</span>&#160;            }</div><div class="line"><a name="l10730"></a><span class="lineno">10730</span>&#160;         }</div><div class="line"><a name="l10731"></a><span class="lineno">10731</span>&#160;      }</div><div class="line"><a name="l10732"></a><span class="lineno">10732</span>&#160;      <span class="keywordflow">if</span> (held_ch) {</div><div class="line"><a name="l10733"></a><span class="lineno">10733</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(held_ch, <span class="stringliteral">&quot;Done with held call&quot;</span>);</div><div class="line"><a name="l10734"></a><span class="lineno">10734</span>&#160;      }</div><div class="line"><a name="l10735"></a><span class="lineno">10735</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = -1;</div><div class="line"><a name="l10736"></a><span class="lineno">10736</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">need_release</a>) {</div><div class="line"><a name="l10737"></a><span class="lineno">10737</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l10738"></a><span class="lineno">10738</span>&#160;      }</div><div class="line"><a name="l10739"></a><span class="lineno">10739</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10740"></a><span class="lineno">10740</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>:</div><div class="line"><a name="l10741"></a><span class="lineno">10741</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10742"></a><span class="lineno">10742</span>&#160;         ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l10743"></a><span class="lineno">10743</span>&#160;         <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10744"></a><span class="lineno">10744</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l10745"></a><span class="lineno">10745</span>&#160;               <span class="stringliteral">&quot; --&gt; no Ch, so we&#39;ve already released. (%s)\n&quot;</span>,</div><div class="line"><a name="l10746"></a><span class="lineno">10746</span>&#160;               <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>));</div><div class="line"><a name="l10747"></a><span class="lineno">10747</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10748"></a><span class="lineno">10748</span>&#160;         }</div><div class="line"><a name="l10749"></a><span class="lineno">10749</span>&#160;      }</div><div class="line"><a name="l10750"></a><span class="lineno">10750</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10751"></a><span class="lineno">10751</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10752"></a><span class="lineno">10752</span>&#160;      }</div><div class="line"><a name="l10753"></a><span class="lineno">10753</span>&#160;</div><div class="line"><a name="l10754"></a><span class="lineno">10754</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a> = 0;</div><div class="line"><a name="l10755"></a><span class="lineno">10755</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">need_release</a> = 0;</div><div class="line"><a name="l10756"></a><span class="lineno">10756</span>&#160;</div><div class="line"><a name="l10757"></a><span class="lineno">10757</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10758"></a><span class="lineno">10758</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(ch, bc);</div><div class="line"><a name="l10759"></a><span class="lineno">10759</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10760"></a><span class="lineno">10760</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>:</div><div class="line"><a name="l10761"></a><span class="lineno">10761</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10762"></a><span class="lineno">10762</span>&#160;         ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l10763"></a><span class="lineno">10763</span>&#160;      }</div><div class="line"><a name="l10764"></a><span class="lineno">10764</span>&#160;</div><div class="line"><a name="l10765"></a><span class="lineno">10765</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a> = 0;</div><div class="line"><a name="l10766"></a><span class="lineno">10766</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">need_release</a> = 0;</div><div class="line"><a name="l10767"></a><span class="lineno">10767</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a81790e7ee2b93373b0e048d0ef4c53bd">need_release_complete</a> = 0;</div><div class="line"><a name="l10768"></a><span class="lineno">10768</span>&#160;</div><div class="line"><a name="l10769"></a><span class="lineno">10769</span>&#160;      <span class="keywordflow">if</span> (ch) {</div><div class="line"><a name="l10770"></a><span class="lineno">10770</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function != Fac_None) {</div><div class="line"><a name="l10771"></a><span class="lineno">10771</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l10772"></a><span class="lineno">10772</span>&#160;         }</div><div class="line"><a name="l10773"></a><span class="lineno">10773</span>&#160;</div><div class="line"><a name="l10774"></a><span class="lineno">10774</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l10775"></a><span class="lineno">10775</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10776"></a><span class="lineno">10776</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(ch, bc);</div><div class="line"><a name="l10777"></a><span class="lineno">10777</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10778"></a><span class="lineno">10778</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l10779"></a><span class="lineno">10779</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l10780"></a><span class="lineno">10780</span>&#160;<span class="comment">          * A call-completion signaling link established with</span></div><div class="line"><a name="l10781"></a><span class="lineno">10781</span>&#160;<span class="comment">          * REGISTER does not have a struct chan_list record</span></div><div class="line"><a name="l10782"></a><span class="lineno">10782</span>&#160;<span class="comment">          * associated with it.</span></div><div class="line"><a name="l10783"></a><span class="lineno">10783</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l10784"></a><span class="lineno">10784</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l10785"></a><span class="lineno">10785</span>&#160;         cc_record = misdn_cc_find_by_bc(bc);</div><div class="line"><a name="l10786"></a><span class="lineno">10786</span>&#160;         <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l10787"></a><span class="lineno">10787</span>&#160;            <span class="comment">/* The call-completion signaling link is closed. */</span></div><div class="line"><a name="l10788"></a><span class="lineno">10788</span>&#160;            misdn_cc_delete(cc_record);</div><div class="line"><a name="l10789"></a><span class="lineno">10789</span>&#160;         }</div><div class="line"><a name="l10790"></a><span class="lineno">10790</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l10791"></a><span class="lineno">10791</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l10792"></a><span class="lineno">10792</span>&#160;</div><div class="line"><a name="l10793"></a><span class="lineno">10793</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l10794"></a><span class="lineno">10794</span>&#160;            <span class="stringliteral">&quot; --&gt; no Ch, so we&#39;ve already released. (%s)\n&quot;</span>,</div><div class="line"><a name="l10795"></a><span class="lineno">10795</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>));</div><div class="line"><a name="l10796"></a><span class="lineno">10796</span>&#160;      }</div><div class="line"><a name="l10797"></a><span class="lineno">10797</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10798"></a><span class="lineno">10798</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a784d7a1053a1d9680c5be66e3c294843">EVENT_BCHAN_ERROR</a>:</div><div class="line"><a name="l10799"></a><span class="lineno">10799</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a>:</div><div class="line"><a name="l10800"></a><span class="lineno">10800</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l10801"></a><span class="lineno">10801</span>&#160;</div><div class="line"><a name="l10802"></a><span class="lineno">10802</span>&#160;      <span class="keywordflow">switch</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l10803"></a><span class="lineno">10803</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>:</div><div class="line"><a name="l10804"></a><span class="lineno">10804</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>;</div><div class="line"><a name="l10805"></a><span class="lineno">10805</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10806"></a><span class="lineno">10806</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l10807"></a><span class="lineno">10807</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10808"></a><span class="lineno">10808</span>&#160;      }</div><div class="line"><a name="l10809"></a><span class="lineno">10809</span>&#160;</div><div class="line"><a name="l10810"></a><span class="lineno">10810</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10811"></a><span class="lineno">10811</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(ch, bc);</div><div class="line"><a name="l10812"></a><span class="lineno">10812</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10813"></a><span class="lineno">10813</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a>:</div><div class="line"><a name="l10814"></a><span class="lineno">10814</span>&#160;   {</div><div class="line"><a name="l10815"></a><span class="lineno">10815</span>&#160;      <span class="keywordtype">int</span> tone_len = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af6c8edfad6751df061697799630c7f47">tone_cnt</a>;</div><div class="line"><a name="l10816"></a><span class="lineno">10816</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l10817"></a><span class="lineno">10817</span>&#160;      <span class="keywordtype">void</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l10818"></a><span class="lineno">10818</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l10819"></a><span class="lineno">10819</span>&#160;      int (*generate)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <span class="keywordtype">int</span> datalen, <span class="keywordtype">int</span> samples);</div><div class="line"><a name="l10820"></a><span class="lineno">10820</span>&#160;</div><div class="line"><a name="l10821"></a><span class="lineno">10821</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;TONE_GEN: len:%d\n&quot;</span>, tone_len);</div><div class="line"><a name="l10822"></a><span class="lineno">10822</span>&#160;</div><div class="line"><a name="l10823"></a><span class="lineno">10823</span>&#160;      <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l10824"></a><span class="lineno">10824</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10825"></a><span class="lineno">10825</span>&#160;      }</div><div class="line"><a name="l10826"></a><span class="lineno">10826</span>&#160;</div><div class="line"><a name="l10827"></a><span class="lineno">10827</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(ast)) {</div><div class="line"><a name="l10828"></a><span class="lineno">10828</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10829"></a><span class="lineno">10829</span>&#160;      }</div><div class="line"><a name="l10830"></a><span class="lineno">10830</span>&#160;</div><div class="line"><a name="l10831"></a><span class="lineno">10831</span>&#160;      tmp = <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(ast);</div><div class="line"><a name="l10832"></a><span class="lineno">10832</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10833"></a><span class="lineno">10833</span>&#160;      generate = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(ast)-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a>;</div><div class="line"><a name="l10834"></a><span class="lineno">10834</span>&#160;</div><div class="line"><a name="l10835"></a><span class="lineno">10835</span>&#160;      <span class="keywordflow">if</span> (tone_len &lt; 0 || tone_len &gt; 512) {</div><div class="line"><a name="l10836"></a><span class="lineno">10836</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;TONE_GEN: len was %d, set to 128\n&quot;</span>, tone_len);</div><div class="line"><a name="l10837"></a><span class="lineno">10837</span>&#160;         tone_len = 128;</div><div class="line"><a name="l10838"></a><span class="lineno">10838</span>&#160;      }</div><div class="line"><a name="l10839"></a><span class="lineno">10839</span>&#160;</div><div class="line"><a name="l10840"></a><span class="lineno">10840</span>&#160;      res = generate(ast, tmp, tone_len, tone_len);</div><div class="line"><a name="l10841"></a><span class="lineno">10841</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(ast, tmp);</div><div class="line"><a name="l10842"></a><span class="lineno">10842</span>&#160;</div><div class="line"><a name="l10843"></a><span class="lineno">10843</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l10844"></a><span class="lineno">10844</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Auto-deactivating generator\n&quot;</span>);</div><div class="line"><a name="l10845"></a><span class="lineno">10845</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(ast);</div><div class="line"><a name="l10846"></a><span class="lineno">10846</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10847"></a><span class="lineno">10847</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af6c8edfad6751df061697799630c7f47">tone_cnt</a> = 0;</div><div class="line"><a name="l10848"></a><span class="lineno">10848</span>&#160;      }</div><div class="line"><a name="l10849"></a><span class="lineno">10849</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10850"></a><span class="lineno">10850</span>&#160;   }</div><div class="line"><a name="l10851"></a><span class="lineno">10851</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a>:</div><div class="line"><a name="l10852"></a><span class="lineno">10852</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">AOCD_need_export</a>) {</div><div class="line"><a name="l10853"></a><span class="lineno">10853</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l10854"></a><span class="lineno">10854</span>&#160;      }</div><div class="line"><a name="l10855"></a><span class="lineno">10855</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>)) {</div><div class="line"><a name="l10856"></a><span class="lineno">10856</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame;</div><div class="line"><a name="l10857"></a><span class="lineno">10857</span>&#160;</div><div class="line"><a name="l10858"></a><span class="lineno">10858</span>&#160;         <span class="comment">/* In Data Modes we queue frames */</span></div><div class="line"><a name="l10859"></a><span class="lineno">10859</span>&#160;         memset(&amp;frame, 0, <span class="keyword">sizeof</span>(frame));</div><div class="line"><a name="l10860"></a><span class="lineno">10860</span>&#160;         frame.frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>; <span class="comment">/* we have no data frames yet */</span></div><div class="line"><a name="l10861"></a><span class="lineno">10861</span>&#160;         frame.subclass.format = <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>;</div><div class="line"><a name="l10862"></a><span class="lineno">10862</span>&#160;         frame.datalen = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#abd2b13dba522040010e392081c185e60">bframe_len</a>;</div><div class="line"><a name="l10863"></a><span class="lineno">10863</span>&#160;         frame.samples = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#abd2b13dba522040010e392081c185e60">bframe_len</a>;</div><div class="line"><a name="l10864"></a><span class="lineno">10864</span>&#160;         frame.mallocd = 0;</div><div class="line"><a name="l10865"></a><span class="lineno">10865</span>&#160;         frame.offset = 0;</div><div class="line"><a name="l10866"></a><span class="lineno">10866</span>&#160;         frame.delivery = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l10867"></a><span class="lineno">10867</span>&#160;         frame.src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10868"></a><span class="lineno">10868</span>&#160;         frame.data.ptr = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac5bda3fccb33a8bce547ec92e92f27e5">bframe</a>;</div><div class="line"><a name="l10869"></a><span class="lineno">10869</span>&#160;</div><div class="line"><a name="l10870"></a><span class="lineno">10870</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l10871"></a><span class="lineno">10871</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;frame);</div><div class="line"><a name="l10872"></a><span class="lineno">10872</span>&#160;         }</div><div class="line"><a name="l10873"></a><span class="lineno">10873</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10874"></a><span class="lineno">10874</span>&#160;         <span class="keyword">struct </span>pollfd pfd = { .fd = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[1], .events = POLLOUT };</div><div class="line"><a name="l10875"></a><span class="lineno">10875</span>&#160;         <span class="keywordtype">int</span> t;</div><div class="line"><a name="l10876"></a><span class="lineno">10876</span>&#160;</div><div class="line"><a name="l10877"></a><span class="lineno">10877</span>&#160;         t = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(&amp;pfd, 1, 0);</div><div class="line"><a name="l10878"></a><span class="lineno">10878</span>&#160;</div><div class="line"><a name="l10879"></a><span class="lineno">10879</span>&#160;         <span class="keywordflow">if</span> (t &lt; 0) {</div><div class="line"><a name="l10880"></a><span class="lineno">10880</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;poll() error (err=%s)\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l10881"></a><span class="lineno">10881</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10882"></a><span class="lineno">10882</span>&#160;         }</div><div class="line"><a name="l10883"></a><span class="lineno">10883</span>&#160;         <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l10884"></a><span class="lineno">10884</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;poll() timed out\n&quot;</span>);</div><div class="line"><a name="l10885"></a><span class="lineno">10885</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10886"></a><span class="lineno">10886</span>&#160;         }</div><div class="line"><a name="l10887"></a><span class="lineno">10887</span>&#160;</div><div class="line"><a name="l10888"></a><span class="lineno">10888</span>&#160;         <span class="keywordflow">if</span> (pfd.revents &amp; POLLOUT) {</div><div class="line"><a name="l10889"></a><span class="lineno">10889</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;writing %d bytes to asterisk\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#abd2b13dba522040010e392081c185e60">bframe_len</a>);</div><div class="line"><a name="l10890"></a><span class="lineno">10890</span>&#160;            <span class="keywordflow">if</span> (write(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[1], bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac5bda3fccb33a8bce547ec92e92f27e5">bframe</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#abd2b13dba522040010e392081c185e60">bframe_len</a>) &lt;= 0) {</div><div class="line"><a name="l10891"></a><span class="lineno">10891</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Write returned &lt;=0 (err=%s) --&gt; hanging up channel\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l10892"></a><span class="lineno">10892</span>&#160;</div><div class="line"><a name="l10893"></a><span class="lineno">10893</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l10894"></a><span class="lineno">10894</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l10895"></a><span class="lineno">10895</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(ch, bc);</div><div class="line"><a name="l10896"></a><span class="lineno">10896</span>&#160;            }</div><div class="line"><a name="l10897"></a><span class="lineno">10897</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10898"></a><span class="lineno">10898</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Write Pipe full!\n&quot;</span>);</div><div class="line"><a name="l10899"></a><span class="lineno">10899</span>&#160;         }</div><div class="line"><a name="l10900"></a><span class="lineno">10900</span>&#160;      }</div><div class="line"><a name="l10901"></a><span class="lineno">10901</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10902"></a><span class="lineno">10902</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a596dc8c1b60ba4769e5f606b5d75f23c">EVENT_TIMEOUT</a>:</div><div class="line"><a name="l10903"></a><span class="lineno">10903</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; bc) {</div><div class="line"><a name="l10904"></a><span class="lineno">10904</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;--&gt; state: %s\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(ch));</div><div class="line"><a name="l10905"></a><span class="lineno">10905</span>&#160;      }</div><div class="line"><a name="l10906"></a><span class="lineno">10906</span>&#160;</div><div class="line"><a name="l10907"></a><span class="lineno">10907</span>&#160;      <span class="keywordflow">switch</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l10908"></a><span class="lineno">10908</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>:</div><div class="line"><a name="l10909"></a><span class="lineno">10909</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>:</div><div class="line"><a name="l10910"></a><span class="lineno">10910</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab1a40897d0bbfed758b3e20cd0ef544f">nttimeout</a>) {</div><div class="line"><a name="l10911"></a><span class="lineno">10911</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10912"></a><span class="lineno">10912</span>&#160;         }</div><div class="line"><a name="l10913"></a><span class="lineno">10913</span>&#160;         <span class="comment">/* fall-through */</span></div><div class="line"><a name="l10914"></a><span class="lineno">10914</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>:</div><div class="line"><a name="l10915"></a><span class="lineno">10915</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l10916"></a><span class="lineno">10916</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>:</div><div class="line"><a name="l10917"></a><span class="lineno">10917</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>:</div><div class="line"><a name="l10918"></a><span class="lineno">10918</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l10919"></a><span class="lineno">10919</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7f77bca4fa18c428d39f939be30e7112">progress_indicator</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16">INFO_PI_INBAND_AVAILABLE</a>;</div><div class="line"><a name="l10920"></a><span class="lineno">10920</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l10921"></a><span class="lineno">10921</span>&#160;         }</div><div class="line"><a name="l10922"></a><span class="lineno">10922</span>&#160;</div><div class="line"><a name="l10923"></a><span class="lineno">10923</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l10924"></a><span class="lineno">10924</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l10925"></a><span class="lineno">10925</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10926"></a><span class="lineno">10926</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>:</div><div class="line"><a name="l10927"></a><span class="lineno">10927</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l10928"></a><span class="lineno">10928</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7f77bca4fa18c428d39f939be30e7112">progress_indicator</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16">INFO_PI_INBAND_AVAILABLE</a>;</div><div class="line"><a name="l10929"></a><span class="lineno">10929</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l10930"></a><span class="lineno">10930</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l10931"></a><span class="lineno">10931</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l10932"></a><span class="lineno">10932</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10933"></a><span class="lineno">10933</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l10934"></a><span class="lineno">10934</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l10935"></a><span class="lineno">10935</span>&#160;         }</div><div class="line"><a name="l10936"></a><span class="lineno">10936</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10937"></a><span class="lineno">10937</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>:</div><div class="line"><a name="l10938"></a><span class="lineno">10938</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; in state cleaning .. so ignoring, the stack should clean it for us\n&quot;</span>);</div><div class="line"><a name="l10939"></a><span class="lineno">10939</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10940"></a><span class="lineno">10940</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l10941"></a><span class="lineno">10941</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l10942"></a><span class="lineno">10942</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10943"></a><span class="lineno">10943</span>&#160;      }</div><div class="line"><a name="l10944"></a><span class="lineno">10944</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10945"></a><span class="lineno">10945</span>&#160;</div><div class="line"><a name="l10946"></a><span class="lineno">10946</span>&#160;   <span class="comment">/****************************/</span><span class="comment"></span></div><div class="line"><a name="l10947"></a><span class="lineno">10947</span>&#160;<span class="comment">   /** Supplementary Services **/</span></div><div class="line"><a name="l10948"></a><span class="lineno">10948</span>&#160;   <span class="comment">/****************************/</span></div><div class="line"><a name="l10949"></a><span class="lineno">10949</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5c96a65759665eb6ba2ac21887c86016">EVENT_RETRIEVE</a>:</div><div class="line"><a name="l10950"></a><span class="lineno">10950</span>&#160;      <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l10951"></a><span class="lineno">10951</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; no CH, searching for held call\n&quot;</span>);</div><div class="line"><a name="l10952"></a><span class="lineno">10952</span>&#160;         ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l10953"></a><span class="lineno">10953</span>&#160;         <span class="keywordflow">if</span> (!ch || ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a>) {</div><div class="line"><a name="l10954"></a><span class="lineno">10954</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No held call found, cannot Retrieve\n&quot;</span>);</div><div class="line"><a name="l10955"></a><span class="lineno">10955</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ab2c3207c030ed5e443dd1df9af85a928">EVENT_RETRIEVE_REJECT</a>);</div><div class="line"><a name="l10956"></a><span class="lineno">10956</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10957"></a><span class="lineno">10957</span>&#160;         }</div><div class="line"><a name="l10958"></a><span class="lineno">10958</span>&#160;      }</div><div class="line"><a name="l10959"></a><span class="lineno">10959</span>&#160;</div><div class="line"><a name="l10960"></a><span class="lineno">10960</span>&#160;      <span class="comment">/* remember the channel again */</span></div><div class="line"><a name="l10961"></a><span class="lineno">10961</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> = <a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l10962"></a><span class="lineno">10962</span>&#160;</div><div class="line"><a name="l10963"></a><span class="lineno">10963</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>;</div><div class="line"><a name="l10964"></a><span class="lineno">10964</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a> = 0;</div><div class="line"><a name="l10965"></a><span class="lineno">10965</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 0;</div><div class="line"><a name="l10966"></a><span class="lineno">10966</span>&#160;</div><div class="line"><a name="l10967"></a><span class="lineno">10967</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10968"></a><span class="lineno">10968</span>&#160;</div><div class="line"><a name="l10969"></a><span class="lineno">10969</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a74f065bee005ec31713832d502578dfd">EVENT_RETRIEVE_ACKNOWLEDGE</a>) &lt; 0) {</div><div class="line"><a name="l10970"></a><span class="lineno">10970</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; RETRIEVE_ACK failed\n&quot;</span>);</div><div class="line"><a name="l10971"></a><span class="lineno">10971</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ab2c3207c030ed5e443dd1df9af85a928">EVENT_RETRIEVE_REJECT</a>);</div><div class="line"><a name="l10972"></a><span class="lineno">10972</span>&#160;      }</div><div class="line"><a name="l10973"></a><span class="lineno">10973</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10974"></a><span class="lineno">10974</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a32e78cd2f3e64f838783d06a20b93d11">EVENT_HOLD</a>:</div><div class="line"><a name="l10975"></a><span class="lineno">10975</span>&#160;   {</div><div class="line"><a name="l10976"></a><span class="lineno">10976</span>&#160;      <span class="keywordtype">int</span> hold_allowed;</div><div class="line"><a name="l10977"></a><span class="lineno">10977</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, bridged, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l10978"></a><span class="lineno">10978</span>&#160;</div><div class="line"><a name="l10979"></a><span class="lineno">10979</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaefe849152b8701cc28a9c11fcc4234a3">MISDN_CFG_HOLD_ALLOWED</a>, &amp;hold_allowed, <span class="keyword">sizeof</span>(hold_allowed));</div><div class="line"><a name="l10980"></a><span class="lineno">10980</span>&#160;      <span class="keywordflow">if</span> (!hold_allowed) {</div><div class="line"><a name="l10981"></a><span class="lineno">10981</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Hold not allowed this port.\n&quot;</span>);</div><div class="line"><a name="l10982"></a><span class="lineno">10982</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0af459787ecc232b676a2144e08d3fdb65">EVENT_HOLD_REJECT</a>);</div><div class="line"><a name="l10983"></a><span class="lineno">10983</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10984"></a><span class="lineno">10984</span>&#160;      }</div><div class="line"><a name="l10985"></a><span class="lineno">10985</span>&#160;</div><div class="line"><a name="l10986"></a><span class="lineno">10986</span>&#160;      bridged = <a class="code" href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l10987"></a><span class="lineno">10987</span>&#160;      <span class="keywordflow">if</span> (bridged) {</div><div class="line"><a name="l10988"></a><span class="lineno">10988</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Bridge Partner is of type: %s\n&quot;</span>, <a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>(bridged)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l10989"></a><span class="lineno">10989</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l10990"></a><span class="lineno">10990</span>&#160;</div><div class="line"><a name="l10991"></a><span class="lineno">10991</span>&#160;         <span class="comment">/* forget the channel now */</span></div><div class="line"><a name="l10992"></a><span class="lineno">10992</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10993"></a><span class="lineno">10993</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a>;</div><div class="line"><a name="l10994"></a><span class="lineno">10994</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l10995"></a><span class="lineno">10995</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>;</div><div class="line"><a name="l10996"></a><span class="lineno">10996</span>&#160;</div><div class="line"><a name="l10997"></a><span class="lineno">10997</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10998"></a><span class="lineno">10998</span>&#160;</div><div class="line"><a name="l10999"></a><span class="lineno">10999</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac490ba3a784107c476022618293c710d">EVENT_HOLD_ACKNOWLEDGE</a>);</div><div class="line"><a name="l11000"></a><span class="lineno">11000</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l11001"></a><span class="lineno">11001</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0af459787ecc232b676a2144e08d3fdb65">EVENT_HOLD_REJECT</a>);</div><div class="line"><a name="l11002"></a><span class="lineno">11002</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;We aren&#39;t bridged to anybody\n&quot;</span>);</div><div class="line"><a name="l11003"></a><span class="lineno">11003</span>&#160;      }</div><div class="line"><a name="l11004"></a><span class="lineno">11004</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l11005"></a><span class="lineno">11005</span>&#160;   }</div><div class="line"><a name="l11006"></a><span class="lineno">11006</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a>:</div><div class="line"><a name="l11007"></a><span class="lineno">11007</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l11008"></a><span class="lineno">11008</span>&#160;         <span class="comment">/* Add configured prefix to redirecting.to.number */</span></div><div class="line"><a name="l11009"></a><span class="lineno">11009</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>,</div><div class="line"><a name="l11010"></a><span class="lineno">11010</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l11011"></a><span class="lineno">11011</span>&#160;      }</div><div class="line"><a name="l11012"></a><span class="lineno">11012</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a>) {</div><div class="line"><a name="l11013"></a><span class="lineno">11013</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ac08713a6d146cc3c69b19e122c948bc0">mISDN_NOTIFY_CODE_DIVERSION_ACTIVATED</a>:</div><div class="line"><a name="l11014"></a><span class="lineno">11014</span>&#160;         <span class="comment">/* Ignore for now. */</span></div><div class="line"><a name="l11015"></a><span class="lineno">11015</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11016"></a><span class="lineno">11016</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l11017"></a><span class="lineno">11017</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a>:</div><div class="line"><a name="l11018"></a><span class="lineno">11018</span>&#160;      {</div><div class="line"><a name="l11019"></a><span class="lineno">11019</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l11020"></a><span class="lineno">11020</span>&#160;</div><div class="line"><a name="l11021"></a><span class="lineno">11021</span>&#160;         <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l11022"></a><span class="lineno">11022</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11023"></a><span class="lineno">11023</span>&#160;         }</div><div class="line"><a name="l11024"></a><span class="lineno">11024</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11025"></a><span class="lineno">11025</span>&#160;         <span class="keywordflow">if</span> (!ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l11026"></a><span class="lineno">11026</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11027"></a><span class="lineno">11027</span>&#160;         }</div><div class="line"><a name="l11028"></a><span class="lineno">11028</span>&#160;         <span class="keywordflow">switch</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l11029"></a><span class="lineno">11029</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l11030"></a><span class="lineno">11030</span>&#160;            <span class="comment">/* Call is deflecting after we have seen an ALERTING message */</span></div><div class="line"><a name="l11031"></a><span class="lineno">11031</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a>;</div><div class="line"><a name="l11032"></a><span class="lineno">11032</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11033"></a><span class="lineno">11033</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l11034"></a><span class="lineno">11034</span>&#160;            <span class="comment">/* Call is deflecting for call forwarding unconditional or busy reason. */</span></div><div class="line"><a name="l11035"></a><span class="lineno">11035</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a>;</div><div class="line"><a name="l11036"></a><span class="lineno">11036</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11037"></a><span class="lineno">11037</span>&#160;         }</div><div class="line"><a name="l11038"></a><span class="lineno">11038</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l11039"></a><span class="lineno">11039</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;redirecting);</div><div class="line"><a name="l11040"></a><span class="lineno">11040</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>));</div><div class="line"><a name="l11041"></a><span class="lineno">11041</span>&#160;</div><div class="line"><a name="l11042"></a><span class="lineno">11042</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l11043"></a><span class="lineno">11043</span>&#160;<span class="comment">          * Reset any earlier private redirecting id representations and</span></div><div class="line"><a name="l11044"></a><span class="lineno">11044</span>&#160;<span class="comment">          * make sure that it is invalidated at the remote end.</span></div><div class="line"><a name="l11045"></a><span class="lineno">11045</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l11046"></a><span class="lineno">11046</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_orig);</div><div class="line"><a name="l11047"></a><span class="lineno">11047</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_from);</div><div class="line"><a name="l11048"></a><span class="lineno">11048</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_to);</div><div class="line"><a name="l11049"></a><span class="lineno">11049</span>&#160;</div><div class="line"><a name="l11050"></a><span class="lineno">11050</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11051"></a><span class="lineno">11051</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;redirecting);</div><div class="line"><a name="l11052"></a><span class="lineno">11052</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l11053"></a><span class="lineno">11053</span>&#160;      }</div><div class="line"><a name="l11054"></a><span class="lineno">11054</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a>:</div><div class="line"><a name="l11055"></a><span class="lineno">11055</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l11056"></a><span class="lineno">11056</span>&#160;<span class="comment">          * It would be preferable to update the connected line information</span></div><div class="line"><a name="l11057"></a><span class="lineno">11057</span>&#160;<span class="comment">          * only when the message callStatus is active.  However, the</span></div><div class="line"><a name="l11058"></a><span class="lineno">11058</span>&#160;<span class="comment">          * optional redirection number may not be present in the active</span></div><div class="line"><a name="l11059"></a><span class="lineno">11059</span>&#160;<span class="comment">          * message if an alerting message were received earlier.</span></div><div class="line"><a name="l11060"></a><span class="lineno">11060</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l11061"></a><span class="lineno">11061</span>&#160;<span class="comment">          * The consequences if we wind up sending two updates is benign.</span></div><div class="line"><a name="l11062"></a><span class="lineno">11062</span>&#160;<span class="comment">          * The other end will think that it got transferred twice.</span></div><div class="line"><a name="l11063"></a><span class="lineno">11063</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l11064"></a><span class="lineno">11064</span>&#160;         <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l11065"></a><span class="lineno">11065</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11066"></a><span class="lineno">11066</span>&#160;         }</div><div class="line"><a name="l11067"></a><span class="lineno">11067</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11068"></a><span class="lineno">11068</span>&#160;         <span class="keywordflow">if</span> (!ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l11069"></a><span class="lineno">11069</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11070"></a><span class="lineno">11070</span>&#160;         }</div><div class="line"><a name="l11071"></a><span class="lineno">11071</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>,</div><div class="line"><a name="l11072"></a><span class="lineno">11072</span>&#160;            <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a>,</div><div class="line"><a name="l11073"></a><span class="lineno">11073</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l11074"></a><span class="lineno">11074</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l11075"></a><span class="lineno">11075</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>:</div><div class="line"><a name="l11076"></a><span class="lineno">11076</span>&#160;         <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l11077"></a><span class="lineno">11077</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11078"></a><span class="lineno">11078</span>&#160;         }</div><div class="line"><a name="l11079"></a><span class="lineno">11079</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11080"></a><span class="lineno">11080</span>&#160;         <span class="keywordflow">if</span> (!ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l11081"></a><span class="lineno">11081</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l11082"></a><span class="lineno">11082</span>&#160;         }</div><div class="line"><a name="l11083"></a><span class="lineno">11083</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>,</div><div class="line"><a name="l11084"></a><span class="lineno">11084</span>&#160;            <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l11085"></a><span class="lineno">11085</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l11086"></a><span class="lineno">11086</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l11087"></a><span class="lineno">11087</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11088"></a><span class="lineno">11088</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; not yet handled: notify code:0x%02X\n&quot;</span>,</div><div class="line"><a name="l11089"></a><span class="lineno">11089</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a>);</div><div class="line"><a name="l11090"></a><span class="lineno">11090</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l11091"></a><span class="lineno">11091</span>&#160;      }</div><div class="line"><a name="l11092"></a><span class="lineno">11092</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a>;</div><div class="line"><a name="l11093"></a><span class="lineno">11093</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l11094"></a><span class="lineno">11094</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>:</div><div class="line"><a name="l11095"></a><span class="lineno">11095</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function == Fac_None) {</div><div class="line"><a name="l11096"></a><span class="lineno">11096</span>&#160;         <span class="comment">/* This is a FACILITY message so we MUST have a facility ie */</span></div><div class="line"><a name="l11097"></a><span class="lineno">11097</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; Missing facility ie or unknown facility ie contents.\n&quot;</span>);</div><div class="line"><a name="l11098"></a><span class="lineno">11098</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l11099"></a><span class="lineno">11099</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a>(<a class="code" href="../../df/d7d/structevent.html">event</a>, bc, ch);</div><div class="line"><a name="l11100"></a><span class="lineno">11100</span>&#160;      }</div><div class="line"><a name="l11101"></a><span class="lineno">11101</span>&#160;</div><div class="line"><a name="l11102"></a><span class="lineno">11102</span>&#160;      <span class="comment">/* In case it came in on a FACILITY message and we did not handle it. */</span></div><div class="line"><a name="l11103"></a><span class="lineno">11103</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l11104"></a><span class="lineno">11104</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a>;</div><div class="line"><a name="l11105"></a><span class="lineno">11105</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l11106"></a><span class="lineno">11106</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5932a8e4c466cdd288c5133486bf386c">EVENT_RESTART</a>:</div><div class="line"><a name="l11107"></a><span class="lineno">11107</span>&#160;      <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">dummy</a>) {</div><div class="line"><a name="l11108"></a><span class="lineno">11108</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l11109"></a><span class="lineno">11109</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(ch, bc);</div><div class="line"><a name="l11110"></a><span class="lineno">11110</span>&#160;      }</div><div class="line"><a name="l11111"></a><span class="lineno">11111</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l11112"></a><span class="lineno">11112</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l11113"></a><span class="lineno">11113</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;Got Unknown Event\n&quot;</span>);</div><div class="line"><a name="l11114"></a><span class="lineno">11114</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l11115"></a><span class="lineno">11115</span>&#160;   }</div><div class="line"><a name="l11116"></a><span class="lineno">11116</span>&#160;</div><div class="line"><a name="l11117"></a><span class="lineno">11117</span>&#160;   <span class="keywordflow">if</span> (ch) {</div><div class="line"><a name="l11118"></a><span class="lineno">11118</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;cb_event complete OK&quot;</span>);</div><div class="line"><a name="l11119"></a><span class="lineno">11119</span>&#160;   }</div><div class="line"><a name="l11120"></a><span class="lineno">11120</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196bad9a009eaad7d808678adbea41b8b1faa">RESPONSE_OK</a>;</div><div class="line"><a name="l11121"></a><span class="lineno">11121</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structchan__list_html_ac0bf4083f9fee43b521e291685b6b0bf"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">chan_list::need_busy</a></div><div class="ttdeci">int need_busy</div><div class="ttdoc">TRUE if we could send an AST_CONTROL_BUSY if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_misdn.c:402</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a33a36b6aad8ef7a1c08cbac58ff63664"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a33a36b6aad8ef7a1c08cbac58ff63664">EVENT_NEW_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00161">isdn_lib.h:161</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4">EVENT_REGISTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00129">isdn_lib.h:129</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aa6143baad2c3764c9d130d676850196ba92645dbc0821c091a863bbbaf604a531"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196ba92645dbc0821c091a863bbbaf604a531">RESPONSE_IGNORE_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00112">isdn_lib.h:112</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3030517292a60e045b7aeedc419ad180"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">misdn_bchannel::keypad</a></div><div class="ttdeci">char keypad[MISDN_MAX_KEYPAD_LEN]</div><div class="ttdoc">Q.931 Keypad Facility IE contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00647">isdn_lib.h:647</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaefe849152b8701cc28a9c11fcc4234a3"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaefe849152b8701cc28a9c11fcc4234a3">MISDN_CFG_HOLD_ALLOWED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00066">chan_misdn_config.h:66</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00338">chan_misdn.c:338</a></div></div>
<div class="ttc" id="channel_8h_html_a88d833a56ea7de33e230281c5c12b75d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a></div><div class="ttdeci">void ast_set_callerid(struct ast_channel *chan, const char *cid_num, const char *cid_name, const char *cid_ani)</div><div class="ttdoc">Set caller ID number, name and ANI and generate AMI event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07434">channel.c:7434</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a892219d53f0cf14c2d6933dc77464def"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a></div><div class="ttdeci">static int stop_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07743">chan_misdn.c:7743</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaf9368cd93cfd0d4ec714e920a9587c41"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf9368cd93cfd0d4ec714e920a9587c41">MISDN_CFG_ALWAYS_IMMEDIATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00061">chan_misdn_config.h:61</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a118093a88a20335df7f60d7f3897f2c9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a118093a88a20335df7f60d7f3897f2c9">find_hold_call</a></div><div class="ttdeci">static struct chan_list * find_hold_call(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08283">chan_misdn.c:8283</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a43bee3ea617c99abb55465aa8340e6af"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a43bee3ea617c99abb55465aa8340e6af">wait_for_digits</a></div><div class="ttdeci">static void wait_for_digits(struct chan_list *ch, struct misdn_bchannel *bc, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08889">chan_misdn.c:8889</a></div></div>
<div class="ttc" id="causes_8h_html_a4c378d6f7b9d40dee77d74fa7c5d91e4"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a4c378d6f7b9d40dee77d74fa7c5d91e4">AST_CAUSE_INCOMPATIBLE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_INCOMPATIBLE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00134">causes.h:134</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af70683c24ce8bc518f5541dfde4763e7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af70683c24ce8bc518f5541dfde4763e7">misdn_to_str_ton</a></div><div class="ttdeci">static const char * misdn_to_str_ton(enum mISDN_NUMBER_TYPE number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01832">chan_misdn.c:1832</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_ad9d12b10a3d0c3bca1d0b033bc139dab"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#ad9d12b10a3d0c3bca1d0b033bc139dab">ast_get_chan_features_pickup_config</a></div><div class="ttdeci">struct ast_features_pickup_config * ast_get_chan_features_pickup_config(struct ast_channel *chan)</div><div class="ttdoc">Get the pickup configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01193">features_config.c:1193</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="channel_8h_html_afb86bdd7fa42b7bf8ac2fbfab01f67ef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a></div><div class="ttdeci">void * ast_channel_generatordata(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00549">channel_internal_api.c:549</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_acac8a3f512ee09cfb5ed9283b66804eb"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#acac8a3f512ee09cfb5ed9283b66804eb">read_config</a></div><div class="ttdeci">static int read_config(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05922">chan_misdn.c:5922</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6cd818b3d3a858ccbed06fe1675147af"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a></div><div class="ttdeci">static int misdn_to_ast_plan(enum mISDN_NUMBER_PLAN number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02000">chan_misdn.c:2000</a></div></div>
<div class="ttc" id="structast__party__number_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 presentation-indicator and screening-indicator encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00296">channel.h:296</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00152">isdn_lib.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00331">chan_misdn.c:331</a></div></div>
<div class="ttc" id="channel_8h_html_ab1c04d237cea67fefadaacc3f79497fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a></div><div class="ttdeci">void ast_party_id_reset(struct ast_party_id *id)</div><div class="ttdoc">Destroy and initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01896">channel.c:1896</a></div></div>
<div class="ttc" id="structchan__list_html_aafb8164f20f79a2dd0290502a25367d1"><div class="ttname"><a href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">chan_list::addr</a></div><div class="ttdeci">int addr</div><div class="ttdoc">From associated B channel: B Channel mISDN driver layer ID from mISDN_get_layerid() ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00547">chan_misdn.c:547</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0e0668ab60f561d89f4135bfbc600575"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0e0668ab60f561d89f4135bfbc600575">misdn_new</a></div><div class="ttdeci">static struct ast_channel * misdn_new(struct chan_list *cl, int state, char *exten, char *callerid, struct ast_format_cap *cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, int port, int c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08174">chan_misdn.c:8174</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00176">isdn_lib.h:176</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af6c8edfad6751df061697799630c7f47"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af6c8edfad6751df061697799630c7f47">misdn_bchannel::tone_cnt</a></div><div class="ttdeci">int tone_cnt</div><div class="ttdoc">Number of tone samples to generate. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00544">isdn_lib.h:544</a></div></div>
<div class="ttc" id="structchan__list_html_aa8664ec2550c16483dbb615fa28a6a10"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">chan_list::ignore_dtmf</a></div><div class="ttdeci">int ignore_dtmf</div><div class="ttdoc">TRUE if DTMF digits are to be passed inband only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_misdn.c:438</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="isdn__lib_8h_html_aa6143baad2c3764c9d130d676850196bad9a009eaad7d808678adbea41b8b1faa"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196bad9a009eaad7d808678adbea41b8b1faa">RESPONSE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00115">isdn_lib.h:115</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a00f4e04874766b14d63060e3617224ad"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a00f4e04874766b14d63060e3617224ad">misdn_attempt_transfer</a></div><div class="ttdeci">static int misdn_attempt_transfer(struct chan_list *active_ch, struct chan_list *held_ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08619">chan_misdn.c:8619</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7c1d654b7b6114d7a0abc8d351dd1bcd"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7c1d654b7b6114d7a0abc8d351dd1bcd">misdn_bchannel::dummy</a></div><div class="ttdeci">int dummy</div><div class="ttdoc">TRUE if this is a dummy BC record. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00361">isdn_lib.h:361</a></div></div>
<div class="ttc" id="structchan__list_html_a67646b28a1d0efc1226de7291833b5ec"><div class="ttname"><a href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">chan_list::pipe</a></div><div class="ttdeci">int pipe[2]</div><div class="ttdoc">Pipe file descriptor handles array. Read from pipe[0], write to pipe[1]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_misdn.c:444</a></div></div>
<div class="ttc" id="channel_8h_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a809192e8588d50a33a4242ede2873b71"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a></div><div class="ttdeci">static int misdn_to_ast_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02117">chan_misdn.c:2117</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3ace3bd096d1676e348a4ef23a20a7fc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3ace3bd096d1676e348a4ef23a20a7fc">cl_queue_chan</a></div><div class="ttdeci">static void cl_queue_chan(struct chan_list *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08377">chan_misdn.c:8377</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ab2c3207c030ed5e443dd1df9af85a928"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ab2c3207c030ed5e443dd1df9af85a928">EVENT_RETRIEVE_REJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00146">isdn_lib.h:146</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa1741048a25b1d75660664a24ebaadbcf"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1741048a25b1d75660664a24ebaadbcf">MISDN_CFG_IMMEDIATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00063">chan_misdn_config.h:63</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_abd2b13dba522040010e392081c185e60"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#abd2b13dba522040010e392081c185e60">misdn_bchannel::bframe_len</a></div><div class="ttdeci">int bframe_len</div><div class="ttdoc">B channel speech sample data buffer size. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00435">isdn_lib.h:435</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a358cabb91a3da0abe7eac0910f916369"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a358cabb91a3da0abe7eac0910f916369">manager_isdn_get_info</a></div><div class="ttdeci">char * manager_isdn_get_info(enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04324">isdn_lib.c:4324</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6fcf0e0104e3ee88f0944544207a2b03"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">misdn_bchannel::incoming_cid_tag</a></div><div class="ttdeci">char incoming_cid_tag[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Incoming Caller ID string tag for special purpose. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00348">isdn_lib.h:348</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac3a639b2c4663f01f6e49dcd7aa2c218"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac3a639b2c4663f01f6e49dcd7aa2c218">allowed_bearers_array</a></div><div class="ttdeci">static const struct allowed_bearers allowed_bearers_array[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02362">chan_misdn.c:2362</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a0e234074dd9e6208d65dcd4230827898"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a0e234074dd9e6208d65dcd4230827898">misdn_bchannel::cw</a></div><div class="ttdeci">int cw</div><div class="ttdoc">TRUE if call waiting. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00426">isdn_lib.h:426</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af1d529cc11090d7d2009e5cde3188ac7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a></div><div class="ttdeci">static void release_chan(struct chan_list *ch, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08495">chan_misdn.c:8495</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac49b8317168e8506edc0de2450658541">EVENT_CLEANUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00125">isdn_lib.h:125</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a32e78cd2f3e64f838783d06a20b93d11"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a32e78cd2f3e64f838783d06a20b93d11">EVENT_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00137">isdn_lib.h:137</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00202">isdn_lib.h:202</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63e06215600e01fdfb2234581d3457b5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">misdn_bchannel::sending_complete</a></div><div class="ttdeci">int sending_complete</div><div class="ttdoc">TRUE if all digits necessary to complete the call are available. No more INFORMATION messages are nee...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00470">isdn_lib.h:470</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6c07f69dab53f96457d548d8dc004345"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a></div><div class="ttdeci">static const char * misdn_get_ch_state(struct chan_list *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04102">chan_misdn.c:4102</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afdd26a6887b2f69d2ca39077eae6d8e1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afdd26a6887b2f69d2ca39077eae6d8e1">find_hold_active_call</a></div><div class="ttdeci">static struct chan_list * find_hold_active_call(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08351">chan_misdn.c:8351</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae09d78e4116be60f1895c9e32142ccb8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a></div><div class="ttdeci">static void misdn_copy_redirecting_to_ast(struct ast_channel *ast, const struct misdn_party_redirecting *redirect, char *tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06437">chan_misdn.c:6437</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structast__generator_html_a3022be24de5fabbccff620c25841f738"><div class="ttname"><a href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">ast_generator::generate</a></div><div class="ttdeci">int(* generate)(struct ast_channel *chan, void *data, int len, int samples)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00234">channel.h:234</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a4d59f964892483ec5c47124229514851">MISDN_EXTCANTMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00328">chan_misdn.c:328</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0e825078cd89b5e86d2099b89b700445"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0e825078cd89b5e86d2099b89b700445">start_pbx</a></div><div class="ttdeci">static void start_pbx(struct chan_list *ch, struct misdn_bchannel *bc, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08875">chan_misdn.c:8875</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a1cf9411a71645f03e0628dcea770b1ad"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a1cf9411a71645f03e0628dcea770b1ad">misdn_to_str_pres</a></div><div class="ttdeci">static const char * misdn_to_str_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02084">chan_misdn.c:2084</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00151">isdn_lib.h:151</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a0eb39f0206f0029457671f9501ad192d"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">misdn_bchannel::AOCD_need_export</a></div><div class="ttdeci">int AOCD_need_export</div><div class="ttdoc">TRUE if AOCDtype and AOCD data are ready to export to Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00521">isdn_lib.h:521</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structchan__list_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">chan_list::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdoc">Incoming call dialplan context identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_misdn.c:553</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1bac0f31b03872d178b92b054fb07358495">AST_CONNECTED_LINE_UPDATE_SOURCE_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00446">callerid.h:446</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac490ba3a784107c476022618293c710d"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac490ba3a784107c476022618293c710d">EVENT_HOLD_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00140">isdn_lib.h:140</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5478f292b178f9c27949ef8dd7810206"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5478f292b178f9c27949ef8dd7810206">misdn_to_str_plan</a></div><div class="ttdeci">static const char * misdn_to_str_plan(enum mISDN_NUMBER_PLAN number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01958">chan_misdn.c:1958</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb">EVENT_CONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00131">isdn_lib.h:131</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16">INFO_PI_INBAND_AVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00186">isdn_lib.h:186</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa2a00b1227ee6580b8e844fef837e7b84"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2a00b1227ee6580b8e844fef837e7b84">MISDN_CFG_ALARM_BLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00039">chan_misdn_config.h:39</a></div></div>
<div class="ttc" id="pbx_8h_html_a93f9868530c1e8a9d9d367d1ead8782e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a></div><div class="ttdeci">int ast_canmatch_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks for a valid matching extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04194">pbx.c:4194</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad02ce087fa60dd9931299f9574700c97"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad02ce087fa60dd9931299f9574700c97">do_immediate_setup</a></div><div class="ttdeci">static void do_immediate_setup(struct misdn_bchannel *bc, struct chan_list *ch, struct ast_channel *ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08659">chan_misdn.c:8659</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_acaefa07620d12d0dc4f979c9e3c3f73e"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a></div><div class="ttdeci">int misdn_cap_is_speech(int cap)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00436">isdn_lib.c:436</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6f82046b64a8e353a912e8535033af81"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6f82046b64a8e353a912e8535033af81">misdn_tasks_add_variable</a></div><div class="ttdeci">static int misdn_tasks_add_variable(int timeout, ast_sched_cb callback, const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03609">chan_misdn.c:3609</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aea7ddf219f27c4fb9d7cc3e55b641e15"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aea7ddf219f27c4fb9d7cc3e55b641e15">misdn_is_msn_valid</a></div><div class="ttdeci">static int misdn_is_msn_valid(int port, const struct misdn_party_dialing *dialed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l09904">chan_misdn.c:9904</a></div></div>
<div class="ttc" id="structchan__list_html_a6324067fc3743b5c48c0907b90d83c5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#a6324067fc3743b5c48c0907b90d83c5d">chan_list::overlap_tv</a></div><div class="ttdeci">struct timeval overlap_tv</div><div class="ttdoc">Overlap timer start time. Timer restarted for every digit received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00603">chan_misdn.c:603</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac4194cb1021ae6d8ea9be1219c0853a8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a></div><div class="ttdeci">static int stop_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07772">chan_misdn.c:7772</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00198">isdn_lib.h:198</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ad0435294fbb8a6afc9e2713035d044ea"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ad0435294fbb8a6afc9e2713035d044ea">EVENT_CONNECT_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00133">isdn_lib.h:133</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00150">isdn_lib.h:150</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00046">chan_misdn_config.h:46</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00128">isdn_lib.h:128</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ad8554f641ff86b533f70526f80810de9"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ad8554f641ff86b533f70526f80810de9">misdn_inband_avail</a></div><div class="ttdeci">int misdn_inband_avail(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00444">isdn_lib.c:444</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196badeaf958617ddd900889fd5e0ea523cf9">RESPONSE_RELEASE_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00113">isdn_lib.h:113</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00334">chan_misdn.c:334</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00450">callerid.h:450</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00452">callerid.h:452</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab53c3ed364439bed4bbdd74e3d873c86"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a></div><div class="ttdeci">static int misdn_to_ast_ton(enum mISDN_NUMBER_TYPE number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01874">chan_misdn.c:1874</a></div></div>
<div class="ttc" id="channel_8h_html_a0c25448e9c6e2630a8a9cc96b7482cfe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a></div><div class="ttdeci">void ast_channel_rings_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00457">channel_internal_api.c:457</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00330">chan_misdn.c:330</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a4cadcadbe3825e4fe2a476a4b93a529a"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a4cadcadbe3825e4fe2a476a4b93a529a">misdn_lib_port_block</a></div><div class="ttdeci">int misdn_lib_port_block(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00091">isdn_lib.c:91</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_a6858fa4ed2eb8036713a0dacd04b7da9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a></div><div class="ttdeci">void ast_channel_generatordata_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00553">channel_internal_api.c:553</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a81790e7ee2b93373b0e048d0ef4c53bd"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a81790e7ee2b93373b0e048d0ef4c53bd">misdn_bchannel::need_release_complete</a></div><div class="ttdeci">int need_release_complete</div><div class="ttdoc">TRUE if RELEASE_COMPLETE needs to be sent to clear a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00392">isdn_lib.h:392</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="structchan__list_html_a2732815e64648f2863e56c8fd7ce31df"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">chan_list::overlap_dial_task</a></div><div class="ttdeci">int overlap_dial_task</div><div class="ttdoc">Overlap dialing timeout Task ID. -1 if not running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_misdn.c:593</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00149">isdn_lib.h:149</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a74f065bee005ec31713832d502578dfd"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a74f065bee005ec31713832d502578dfd">EVENT_RETRIEVE_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00145">isdn_lib.h:145</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ae181b9b8e2c00cb51f42deed063ed1ab"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae181b9b8e2c00cb51f42deed063ed1ab">EVENT_NEW_BC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00159">isdn_lib.h:159</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a45975791307e0a9cdaff63af4dc9492c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a45975791307e0a9cdaff63af4dc9492c">misdn_to_str_screen</a></div><div class="ttdeci">static const char * misdn_to_str_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02173">chan_misdn.c:2173</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a596dc8c1b60ba4769e5f606b5d75f23c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a596dc8c1b60ba4769e5f606b5d75f23c">EVENT_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00156">isdn_lib.h:156</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a3c9c5a8101a5212ab83e7eecfee8ea33"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a3c9c5a8101a5212ab83e7eecfee8ea33">misdn_lib_log_ies</a></div><div class="ttdeci">void misdn_lib_log_ies(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03431">isdn_lib.c:3431</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635">EVENT_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00127">isdn_lib.h:127</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7811b58aeb8dea5640197a6a61c86db4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">misdn_bchannel::infos_pending</a></div><div class="ttdeci">char infos_pending[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Collected digits to go into info_dad[] while waiting for a SETUP_ACKNOWLEDGE to come in...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00653">isdn_lib.h:653</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab0eef19925128e2ed1f90431ebe8a4d2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab0eef19925128e2ed1f90431ebe8a4d2">find_chan_by_bc</a></div><div class="ttdeci">static struct chan_list * find_chan_by_bc(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08259">chan_misdn.c:8259</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ae2f4cc55968e9014a4daa06d1be05bef"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ae2f4cc55968e9014a4daa06d1be05bef">bc_state2str</a></div><div class="ttdeci">char * bc_state2str(enum bchannel_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00617">isdn_lib.c:617</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00349">chan_misdn.c:349</a></div></div>
<div class="ttc" id="channel_8h_html_ab2e0a6897707b1102ad453ea0963999f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a></div><div class="ttdeci">int ast_queue_hold(struct ast_channel *chan, const char *musicclass)</div><div class="ttdoc">Queue a hold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01191">channel.c:1191</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structchan__list_html_a18ac918bce4ec022cf1316d031f78cff"><div class="ttname"><a href="../../df/d00/structchan__list.html#a18ac918bce4ec022cf1316d031f78cff">chan_list::far_alerting</a></div><div class="ttdeci">int far_alerting</div><div class="ttdoc">TRUE if we must do the ringback tones. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00570">chan_misdn.c:570</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05ac08713a6d146cc3c69b19e122c948bc0"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ac08713a6d146cc3c69b19e122c948bc0">mISDN_NOTIFY_CODE_DIVERSION_ACTIVATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00225">isdn_lib.h:225</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00329">chan_misdn.c:329</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a346ec23214fa6f859c999294e84b65a2">EVENT_TONE_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00121">isdn_lib.h:121</a></div></div>
<div class="ttc" id="causes_8h_html_a51ccdf5c6aa26375323fd14cfef02618"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_DESTINATION_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00114">causes.h:114</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abb98bbaed704a93d67663012188d4f46"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a></div><div class="ttdeci">int misdn_lib_is_ptp(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00128">isdn_lib.c:128</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ac80dac92eeab3a4a76076dd60688344e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">misdn_bchannel::connected</a></div><div class="ttdeci">struct misdn_party_id connected</div><div class="ttdoc">Connected-Party/Connected-Line ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00353">isdn_lib.h:353</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae68199acb58f138dce5b16b0de5c4459"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae68199acb58f138dce5b16b0de5c4459">export_ch</a></div><div class="ttdeci">void export_ch(struct ast_channel *chan, struct misdn_bchannel *bc, struct chan_list *ch)</div><div class="ttdoc">Export parameters to the dialplan environment variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08811">chan_misdn.c:8811</a></div></div>
<div class="ttc" id="structchan__list_html_abafe63857d072be1db1c13acc5622741"><div class="ttname"><a href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">chan_list::allowed_bearers</a></div><div class="ttdeci">char allowed_bearers[BUFFERSIZE+1]</div><div class="ttdoc">The &quot;allowed_bearers&quot; string read in from /etc/asterisk/misdn.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00381">chan_misdn.c:381</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a50ddddd2e7ed5ebc329cb84f494c59dd"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a50ddddd2e7ed5ebc329cb84f494c59dd">EVENT_PORT_ALARM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00160">isdn_lib.h:160</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad61ca821b2c91e20569e54196167c403"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a></div><div class="ttdeci">static const char * bearer2str(int cap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02373">chan_misdn.c:2373</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_a6fa8e680c963b66575d1950c19493b40"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a></div><div class="ttdeci">struct ast_generator * ast_channel_generator(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00713">channel_internal_api.c:713</a></div></div>
<div class="ttc" id="pickup_8h_html_a4890be42c2add5f52028705d6bc02201"><div class="ttname"><a href="../../dd/dbc/pickup_8h.html#a4890be42c2add5f52028705d6bc02201">ast_pickup_call</a></div><div class="ttdeci">int ast_pickup_call(struct ast_channel *chan)</div><div class="ttdoc">Pickup a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/pickup_8c_source.html#l00200">pickup.c:200</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00229">isdn_lib.h:229</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structallowed__bearers_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../df/d87/structallowed__bearers.html#a5ac083a645d964373f022d03df4849c8">allowed_bearers::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02355">chan_misdn.c:2355</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac9bcceb1ecd44bcc1261b9314b1abcd9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a></div><div class="ttdeci">static void misdn_add_number_prefix(int port, enum mISDN_NUMBER_TYPE number_type, char *number, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03424">chan_misdn.c:3424</a></div></div>
<div class="ttc" id="structast__party__number_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00294">channel.h:294</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a6b6590a1b67d07a9e1ab635a6cc1ebde">EVENT_BCHAN_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00122">isdn_lib.h:122</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a592599696448ac01e6a442ab2612463c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a592599696448ac01e6a442ab2612463c">find_hold_call_l3</a></div><div class="ttdeci">static struct chan_list * find_hold_call_l3(unsigned long l3_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08317">chan_misdn.c:8317</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6b47ad58ed34948095980ac7d10e3add"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a></div><div class="ttdeci">static void misdn_update_remote_party(struct ast_channel *ast, const struct misdn_party_id *id, enum AST_CONNECTED_LINE_UPDATE_SOURCE source, char *cid_tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06210">chan_misdn.c:6210</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00332">chan_misdn.c:332</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00227">isdn_lib.h:227</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a24fb8b2cce05250a12724f761e5e9e4b"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a24fb8b2cce05250a12724f761e5e9e4b">misdn_overlap_dial_task</a></div><div class="ttdeci">static int misdn_overlap_dial_task(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03628">chan_misdn.c:3628</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a831eeaa0477eef4301f6b0d4de977764"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a831eeaa0477eef4301f6b0d4de977764">add_in_calls</a></div><div class="ttdeci">int add_in_calls(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08844">chan_misdn.c:8844</a></div></div>
<div class="ttc" id="structast__party__redirecting_html"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a></div><div class="ttdoc">Redirecting Line information. RDNIS (Redirecting Directory Number Information Service) Where a call d...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00523">channel.h:523</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5512c203d7860fb90bf53d6550a6beb5"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5512c203d7860fb90bf53d6550a6beb5">EVENT_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00155">isdn_lib.h:155</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="structchan__list_html_a10319e9c46a8957e2931aed29eeb6f81"><div class="ttname"><a href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">chan_list::overlap_tv_lock</a></div><div class="ttdeci">ast_mutex_t overlap_tv_lock</div><div class="ttdoc">overlap_tv access lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_misdn.c:598</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00223">isdn_lib.h:223</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8a4b3d4e49a79f6634beed424d5e14b1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a></div><div class="ttdeci">#define ORG_MISDN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00345">chan_misdn.c:345</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00333">chan_misdn.c:333</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aafb8164f20f79a2dd0290502a25367d1"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">misdn_bchannel::addr</a></div><div class="ttdeci">int addr</div><div class="ttdoc">B Channel mISDN driver layer ID from mISDN_get_layerid() </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00429">isdn_lib.h:429</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00217">isdn_lib.h:217</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00351">chan_misdn.c:351</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a00e5f3ee95cd2c61825dde95d4561ce3"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a00e5f3ee95cd2c61825dde95d4561ce3">EVENT_NEW_L3ID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00158">isdn_lib.h:158</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00126">isdn_lib.h:126</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a93ba5e99b8615eda660af31763210b30"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">misdn_party_redirecting::to_changed</a></div><div class="ttdeci">int to_changed</div><div class="ttdoc">TRUE if the redirecting.to information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00319">isdn_lib.h:319</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a50699bbbd48dbd7728bfed50b0d00547"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a50699bbbd48dbd7728bfed50b0d00547">chan_list_init</a></div><div class="ttdeci">static struct chan_list * chan_list_init(int orig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_misdn.c:7831</a></div></div>
<div class="ttc" id="structhold__info_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">hold_info::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Original B channel number the HELD call was using. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00368">chan_misdn.c:368</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">misdn_bchannel::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Assigned B channel number B1, B2... 0 if not assigned. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00411">isdn_lib.h:411</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8bfd9eaf966babb8dce679b5e909cc01"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a></div><div class="ttdeci">static void hangup_chan(struct chan_list *ch, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08447">chan_misdn.c:8447</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a695d9a32f28a058deed150c684b94db4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a695d9a32f28a058deed150c684b94db4">print_bearer</a></div><div class="ttdeci">static void print_bearer(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03355">chan_misdn.c:3355</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00132">isdn_lib.h:132</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a866c0e96f1c8ddc9d49fb91f5433b529"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a></div><div class="ttdeci">static void export_aoc_vars(int originator, struct ast_channel *ast, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03458">chan_misdn.c:3458</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1b724daeb32d8d023765605586269a02"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">misdn_bchannel::out_cause</a></div><div class="ttdeci">int out_cause</div><div class="ttdoc">Q.931 Cause for disconnection code (sent) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00677">isdn_lib.h:677</a></div></div>
<div class="ttc" id="structast__party__id_html_a7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">ast_party_id::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdoc">User-set &quot;tag&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00355">channel.h:355</a></div></div>
<div class="ttc" id="channel_8h_html_a7160355005776732fba88cc020f4a45b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a></div><div class="ttdeci">void ast_deactivate_generator(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02902">channel.c:2902</a></div></div>
<div class="ttc" id="channel_8h_html_ac8bce0bf79829c59a7671c4eff83a31f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a></div><div class="ttdeci">void ast_party_redirecting_free(struct ast_party_redirecting *doomed)</div><div class="ttdoc">Destroy the redirecting information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02179">channel.c:2179</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aca6b8a790005c71e029e73fd5362007b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">misdn_bchannel::need_release</a></div><div class="ttdeci">int need_release</div><div class="ttdoc">TRUE if RELEASE needs to be sent to clear a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00389">isdn_lib.h:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ab7ab21c4af667d26899c1f22a4e6e920"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ab7ab21c4af667d26899c1f22a4e6e920">misdn_bchannel::need_more_infos</a></div><div class="ttdeci">int need_more_infos</div><div class="ttdoc">TRUE if we send SETUP_ACKNOWLEDGE on incoming calls anyway (instead of PROCEEDING). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00465">isdn_lib.h:465</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7712c89c275129d6c964a44eae526548"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7712c89c275129d6c964a44eae526548">misdn_bchannel::dtmf</a></div><div class="ttdeci">int dtmf</div><div class="ttdoc">Last decoded DTMF digit from mISDN driver. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00452">isdn_lib.h:452</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf4c3863e7ccb99c1b55a3fc74ef8d3e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">misdn_bchannel::bc_state</a></div><div class="ttdeci">enum bchannel_state bc_state</div><div class="ttdoc">Current B Channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00547">isdn_lib.h:547</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4b3afda0545d09cce0d2bc81466baf57"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a></div><div class="ttdeci">static int start_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07764">chan_misdn.c:7764</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad6644f992fc696511eebf8732e98e74a"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">ast_party_redirecting::to</a></div><div class="ttdeci">struct ast_party_id to</div><div class="ttdoc">Call is redirecting to a new party (Sent to the caller) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00531">channel.h:531</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a96296ec1ed855ce59e12762be480825b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">misdn_bchannel::need_disconnect</a></div><div class="ttdeci">int need_disconnect</div><div class="ttdoc">TRUE if DISCONNECT needs to be sent to clear a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00386">isdn_lib.h:386</a></div></div>
<div class="ttc" id="channel_8h_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="channel_8h_html_a1a5760823cd16fd0343e489efd9c8f89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a></div><div class="ttdeci">void ast_party_redirecting_init(struct ast_party_redirecting *init)</div><div class="ttdoc">Initialize the given redirecting structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02122">channel.c:2122</a></div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a784d7a1053a1d9680c5be66e3c294843"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a784d7a1053a1d9680c5be66e3c294843">EVENT_BCHAN_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00124">isdn_lib.h:124</a></div></div>
<div class="ttc" id="channel_8h_html_ae307ed78db92c08b0dd9c13a7724ae86"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae307ed78db92c08b0dd9c13a7724ae86">ast_channel_transfercapability_set</a></div><div class="ttdeci">void ast_channel_transfercapability_set(struct ast_channel *chan, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00505">channel_internal_api.c:505</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9876ef2ee48779efd4a739c46b5c34f7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">misdn_bchannel::notify_description_code</a></div><div class="ttdeci">enum mISDN_NOTIFY_CODE notify_description_code</div><div class="ttdoc">Notification indicator ie description code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00606">isdn_lib.h:606</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5453b43c808f36b08d5145be1856ae77"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5453b43c808f36b08d5145be1856ae77">EVENT_DTMF_TONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00157">isdn_lib.h:157</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00154">isdn_lib.h:154</a></div></div>
<div class="ttc" id="channel_8h_html_acb027b361350d81e4b94b540fbdfe4e4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acb027b361350d81e4b94b540fbdfe4e4">ast_transfercapability2str</a></div><div class="ttdeci">char * ast_transfercapability2str(int transfercapability) attribute_const</div><div class="ttdoc">Gives the string form of a given transfer capability. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00678">channel.c:678</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7f77bca4fa18c428d39f939be30e7112"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7f77bca4fa18c428d39f939be30e7112">misdn_bchannel::progress_indicator</a></div><div class="ttdeci">int progress_indicator</div><div class="ttdoc">Progress Indicator IE progress description field. Used to determine if there is an inband audio messa...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00492">isdn_lib.h:492</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aa6143baad2c3764c9d130d676850196bafbd4240b5429f7ddbd5bdb159a8bb7f0"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196bafbd4240b5429f7ddbd5bdb159a8bb7f0">RESPONSE_ERR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00114">isdn_lib.h:114</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ac5bda3fccb33a8bce547ec92e92f27e5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ac5bda3fccb33a8bce547ec92e92f27e5">misdn_bchannel::bframe</a></div><div class="ttdeci">char * bframe</div><div class="ttdoc">B channel speech sample data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00432">isdn_lib.h:432</a></div></div>
<div class="ttc" id="channel_8h_html_a8195bba43b7c08b3063bd19b28291b55"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a></div><div class="ttdeci">void ast_channel_queue_redirecting_update(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Queue a redirecting update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10392">channel.c:10392</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">misdn_bchannel::cause</a></div><div class="ttdeci">int cause</div><div class="ttdoc">Q.931 Cause for disconnection code (received) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00671">isdn_lib.h:671</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af5485e2adfaed82d5e7a83e1033eab55"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">misdn_bchannel::info_dad</a></div><div class="ttdeci">char info_dad[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Current overlap dialing digits to/from INFORMATION messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00650">isdn_lib.h:650</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae14b6d64edd251ea70ad859ffe33a08f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae14b6d64edd251ea70ad859ffe33a08f">update_name</a></div><div class="ttdeci">static void update_name(struct ast_channel *tmp, int port, int c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08150">chan_misdn.c:8150</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00326">chan_misdn.c:326</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a0d3a575e6b608b18c13582c9855b18d8"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0d3a575e6b608b18c13582c9855b18d8">EVENT_BCHAN_ACTIVATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00123">isdn_lib.h:123</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3f11b00546ef6bc9e47853ab516ad8dd"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a></div><div class="ttdeci">static int misdn_to_ast_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02210">chan_misdn.c:2210</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0af459787ecc232b676a2144e08d3fdb65"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0af459787ecc232b676a2144e08d3fdb65">EVENT_HOLD_REJECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00143">isdn_lib.h:143</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abef6c81cea5f1eccbaaf0007a6750e21"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a></div><div class="ttdeci">void(* cb_log)(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00032">isdn_lib.c:32</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a661fd03f59ca366c30cb5886636be8bd"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">misdn_bchannel::fac_in</a></div><div class="ttdeci">struct FacParm fac_in</div><div class="ttdoc">Inbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00507">isdn_lib.h:507</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00327">chan_misdn.c:327</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5932a8e4c466cdd288c5133486bf386c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5932a8e4c466cdd288c5133486bf386c">EVENT_RESTART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00148">isdn_lib.h:148</a></div></div>
<div class="ttc" id="structchan__list_html_a01dcdeb372a388f2081495b58e69d280"><div class="ttname"><a href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">chan_list::overlap_dial</a></div><div class="ttdeci">int overlap_dial</div><div class="ttdoc">Enables overlap dialing for the set amount of seconds. (0 = Disabled) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_misdn.c:588</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aa6143baad2c3764c9d130d676850196ba762089f99cfe26124dfe5d7e8c11eb17"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aa6143baad2c3764c9d130d676850196ba762089f99cfe26124dfe5d7e8c11eb17">RESPONSE_IGNORE_SETUP_WITHOUT_CLOSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00111">isdn_lib.h:111</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5c96a65759665eb6ba2ac21887c86016"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5c96a65759665eb6ba2ac21887c86016">EVENT_RETRIEVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00144">isdn_lib.h:144</a></div></div>
<div class="ttc" id="channel_8h_html_af6f0b2102f29f86914e10a7787f0d536"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a></div><div class="ttdeci">void ast_party_redirecting_copy(struct ast_party_redirecting *dest, const struct ast_party_redirecting *src)</div><div class="ttdoc">Copy the source redirecting information to the destination redirecting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02135">channel.c:2135</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaf07f31540a757ef544b9a4a25da618c5"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf07f31540a757ef544b9a4a25da618c5">MISDN_CFG_REJECT_CAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00038">chan_misdn_config.h:38</a></div></div>
<div class="ttc" id="structchan__list_html_ae9d7293e857cb31edd7bd53b68ffb39d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">chan_list::noautorespond_on_setup</a></div><div class="ttdeci">int noautorespond_on_setup</div><div class="ttdoc">TRUE of we are not to respond immediately to a SETUP message. Check the dialplan first. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_misdn.c:413</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00130">isdn_lib.h:130</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa6ea789fec6299b5d967bd78df6c77994"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa6ea789fec6299b5d967bd78df6c77994">MISDN_GEN_APPEND_DIGITS2EXTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00114">chan_misdn_config.h:114</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a2a616bc0b9f450c55ea28ea3a5c9e8e4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">misdn_bchannel::l3_id</a></div><div class="ttdeci">int l3_id</div><div class="ttdoc">Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00399">isdn_lib.h:399</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6d4856dbe61d11eebcfb1b7d6250e6e1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6d4856dbe61d11eebcfb1b7d6250e6e1">misdn_facility_ie_handler</a></div><div class="ttdeci">static void misdn_facility_ie_handler(enum event_e event, struct misdn_bchannel *bc, struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l09095">chan_misdn.c:9095</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structast__features__pickup__config_html"><div class="ttname"><a href="../../d2/d6f/structast__features__pickup__config.html">ast_features_pickup_config</a></div><div class="ttdoc">Configuration relating to call pickup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00137">include/asterisk/features_config.h:137</a></div></div>
<div class="ttc" id="structchan__list_html_ab1a40897d0bbfed758b3e20cd0ef544f"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab1a40897d0bbfed758b3e20cd0ef544f">chan_list::nttimeout</a></div><div class="ttdeci">int nttimeout</div><div class="ttdoc">TRUE if NT should disconnect an overlap dialing call when a timeout occurs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00576">chan_misdn.c:576</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a166333493bb4c2a707f6efc367cf75a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a166333493bb4c2a707f6efc367cf75a7">&#9670;&nbsp;</a></span>chan_list_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_list_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07792">7792</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_list::dsp</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_list::jb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12639">misdn_jb_destroy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03614">misdn_tasks_remove()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_list::overlap_dial</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_list::overlap_dial_task</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_list::overlap_tv_lock</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_list::pipe</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_list_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;{</div><div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch = obj;</div><div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;</div><div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;peer) {</div><div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ch-&gt;peer, -1);</div><div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;      ch-&gt;peer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;   }</div><div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_MISDN_ENHANCEMENTS */</span><span class="preprocessor"></span></div><div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;</div><div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>);</div><div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;   }</div><div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;</div><div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;   <span class="comment">/* releasing jitterbuffer */</span></div><div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>) {</div><div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe098aa0a254c196d27911e33857e6d4">misdn_jb_destroy</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>);</div><div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;   }</div><div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;</div><div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>) {</div><div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> != -1) {</div><div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a01a8b17fdb011644dfd0928c4e51f75e">misdn_tasks_remove</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a>);</div><div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> = -1;</div><div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;      }</div><div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;   }</div><div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;</div><div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;   <span class="keywordflow">if</span> (-1 &lt; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[0]) {</div><div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;      close(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[0]);</div><div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;   }</div><div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;   <span class="keywordflow">if</span> (-1 &lt; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[1]) {</div><div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;      close(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[1]);</div><div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;   }</div><div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;}</div><div class="ttc" id="structchan__list_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">chan_list::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdoc">Allocated DSP controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_misdn.c:510</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="structchan__list_html_a67646b28a1d0efc1226de7291833b5ec"><div class="ttname"><a href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">chan_list::pipe</a></div><div class="ttdeci">int pipe[2]</div><div class="ttdoc">Pipe file descriptor handles array. Read from pipe[0], write to pipe[1]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_misdn.c:444</a></div></div>
<div class="ttc" id="structchan__list_html_a97f61939951f649404581f2de713e396"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">chan_list::jb</a></div><div class="ttdeci">struct misdn_jb * jb</div><div class="ttdoc">Allocated jitterbuffer controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_misdn.c:503</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe098aa0a254c196d27911e33857e6d4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe098aa0a254c196d27911e33857e6d4">misdn_jb_destroy</a></div><div class="ttdeci">void misdn_jb_destroy(struct misdn_jb *jb)</div><div class="ttdoc">frees the data and destroys the given jitterbuffer struct </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12639">chan_misdn.c:12639</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a01a8b17fdb011644dfd0928c4e51f75e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a01a8b17fdb011644dfd0928c4e51f75e">misdn_tasks_remove</a></div><div class="ttdeci">static void misdn_tasks_remove(int task_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03614">chan_misdn.c:3614</a></div></div>
<div class="ttc" id="structchan__list_html_a2732815e64648f2863e56c8fd7ce31df"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">chan_list::overlap_dial_task</a></div><div class="ttdeci">int overlap_dial_task</div><div class="ttdoc">Overlap dialing timeout Task ID. -1 if not running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_misdn.c:593</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structchan__list_html_a10319e9c46a8957e2931aed29eeb6f81"><div class="ttname"><a href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">chan_list::overlap_tv_lock</a></div><div class="ttdeci">ast_mutex_t overlap_tv_lock</div><div class="ttdoc">overlap_tv access lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_misdn.c:598</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="structchan__list_html_a01dcdeb372a388f2081495b58e69d280"><div class="ttname"><a href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">chan_list::overlap_dial</a></div><div class="ttdeci">int overlap_dial</div><div class="ttdoc">Enables overlap dialing for the set amount of seconds. (0 = Disabled) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_misdn.c:588</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50699bbbd48dbd7728bfed50b0d00547"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50699bbbd48dbd7728bfed50b0d00547">&#9670;&nbsp;</a></span>chan_list_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* chan_list_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>orig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the new <a class="el" href="../../df/d00/structchan__list.html" title="Channel call record structure. ">chan_list</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07831">7831</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07792">chan_list_destructor()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_list::need_busy</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_list::need_hangup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_list::need_queue_hangup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_list::overlap_dial_task</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_list::pipe</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;{</div><div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *cl;</div><div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;</div><div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;   cl = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*cl), <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a166333493bb4c2a707f6efc367cf75a7">chan_list_destructor</a>);</div><div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;   <span class="keywordflow">if</span> (!cl) {</div><div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, 0, <span class="stringliteral">&quot;misdn_request: malloc failed!&quot;</span>);</div><div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;   }</div><div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;</div><div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> = orig;</div><div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">need_queue_hangup</a> = 1;</div><div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a> = 1;</div><div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">need_busy</a> = 1;</div><div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> = -1;</div><div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;   cl-&gt;record_id = -1;</div><div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[0] = -1;</div><div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[1] = -1;</div><div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;</div><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;   <span class="keywordflow">return</span> cl;</div><div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac0bf4083f9fee43b521e291685b6b0bf"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">chan_list::need_busy</a></div><div class="ttdeci">int need_busy</div><div class="ttdoc">TRUE if we could send an AST_CONTROL_BUSY if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_misdn.c:402</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_ab8aa4ba47ba9bd53b22a8c30af419827"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">chan_list::need_hangup</a></div><div class="ttdeci">int need_hangup</div><div class="ttdoc">TRUE if a channel can be hung up by calling asterisk directly when done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_misdn.c:397</a></div></div>
<div class="ttc" id="structchan__list_html_ac87f5939f5f9aa3c026c84d17040660f"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">chan_list::need_queue_hangup</a></div><div class="ttdeci">int need_queue_hangup</div><div class="ttdoc">TRUE if a hangup needs to be queued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_misdn.c:392</a></div></div>
<div class="ttc" id="structchan__list_html_a67646b28a1d0efc1226de7291833b5ec"><div class="ttname"><a href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">chan_list::pipe</a></div><div class="ttdeci">int pipe[2]</div><div class="ttdoc">Pipe file descriptor handles array. Read from pipe[0], write to pipe[1]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_misdn.c:444</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a166333493bb4c2a707f6efc367cf75a7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a166333493bb4c2a707f6efc367cf75a7">chan_list_destructor</a></div><div class="ttdeci">static void chan_list_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07792">chan_misdn.c:7792</a></div></div>
<div class="ttc" id="structchan__list_html_a2732815e64648f2863e56c8fd7ce31df"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">chan_list::overlap_dial_task</a></div><div class="ttdeci">int overlap_dial_task</div><div class="ttdoc">Overlap dialing timeout Task ID. -1 if not running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_misdn.c:593</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d484a16cc6daf0c6d4b8dc1951f8e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d484a16cc6daf0c6d4b8dc1951f8e19">&#9670;&nbsp;</a></span>chan_misdn_jb_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chan_misdn_jb_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12574">12574</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08259">find_chan_by_bc()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_list::jb</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12716">misdn_jb_empty()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l12575"></a><span class="lineno">12575</span>&#160;{</div><div class="line"><a name="l12576"></a><span class="lineno">12576</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch;</div><div class="line"><a name="l12577"></a><span class="lineno">12577</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l12578"></a><span class="lineno">12578</span>&#160;</div><div class="line"><a name="l12579"></a><span class="lineno">12579</span>&#160;   ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab0eef19925128e2ed1f90431ebe8a4d2">find_chan_by_bc</a>(bc);</div><div class="line"><a name="l12580"></a><span class="lineno">12580</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l12581"></a><span class="lineno">12581</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12582"></a><span class="lineno">12582</span>&#160;   }</div><div class="line"><a name="l12583"></a><span class="lineno">12583</span>&#160;</div><div class="line"><a name="l12584"></a><span class="lineno">12584</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>) {</div><div class="line"><a name="l12585"></a><span class="lineno">12585</span>&#160;      res = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a530287671f65c0bf8bc86da878ddbac3">misdn_jb_empty</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l12586"></a><span class="lineno">12586</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12587"></a><span class="lineno">12587</span>&#160;      res = 0;</div><div class="line"><a name="l12588"></a><span class="lineno">12588</span>&#160;   }</div><div class="line"><a name="l12589"></a><span class="lineno">12589</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ch, <span class="stringliteral">&quot;Done emptying jb&quot;</span>);</div><div class="line"><a name="l12590"></a><span class="lineno">12590</span>&#160;</div><div class="line"><a name="l12591"></a><span class="lineno">12591</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l12592"></a><span class="lineno">12592</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structchan__list_html_a97f61939951f649404581f2de713e396"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">chan_list::jb</a></div><div class="ttdeci">struct misdn_jb * jb</div><div class="ttdoc">Allocated jitterbuffer controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_misdn.c:503</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab0eef19925128e2ed1f90431ebe8a4d2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab0eef19925128e2ed1f90431ebe8a4d2">find_chan_by_bc</a></div><div class="ttdeci">static struct chan_list * find_chan_by_bc(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08259">chan_misdn.c:8259</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a530287671f65c0bf8bc86da878ddbac3"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a530287671f65c0bf8bc86da878ddbac3">misdn_jb_empty</a></div><div class="ttdeci">int misdn_jb_empty(struct misdn_jb *jb, char *data, int len)</div><div class="ttdoc">gets len bytes out of the jitterbuffer if available, else only the available data is returned and the...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12716">chan_misdn.c:12716</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19868e68215b587e33ccfffeea3015ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19868e68215b587e33ccfffeea3015ae">&#9670;&nbsp;</a></span>chan_misdn_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void chan_misdn_log </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">12768</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00327">AST_MODPRI_CHANNEL_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00123">AST_MODULE_SUPPORT_DEPRECATED</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00127">global_tracefile</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02373">bearer2str()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_list_init()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08377">cl_queue_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">config_jitterbuffer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05853">debug_numtype()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07707">dialtone_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08811">export_ch()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08259">find_chan_by_bc()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08283">find_hold_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08619">misdn_attempt_transfer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12291">misdn_check_l2l1()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06915">misdn_digit_end()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">misdn_facility_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06958">misdn_fixup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12716">misdn_jb_empty()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12650">misdn_jb_fill()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12602">misdn_jb_init()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03619">misdn_l1_task()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">misdn_overlap_dial_task()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07393">misdn_read()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03574">misdn_tasks_destroy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03554">misdn_tasks_init()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03528">misdn_tasks_thread_func()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">misdn_write()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03355">print_bearer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07318">process_ast_dsp()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08725">send_cause2ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">start_pbx()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">stop_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08150">update_name()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08889">wait_for_digits()</a>.</p>
<div class="fragment"><div class="line"><a name="l12769"></a><span class="lineno">12769</span>&#160;{</div><div class="line"><a name="l12770"></a><span class="lineno">12770</span>&#160;   va_list ap;</div><div class="line"><a name="l12771"></a><span class="lineno">12771</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[1024];</div><div class="line"><a name="l12772"></a><span class="lineno">12772</span>&#160;   <span class="keywordtype">char</span> port_buf[8];</div><div class="line"><a name="l12773"></a><span class="lineno">12773</span>&#160;</div><div class="line"><a name="l12774"></a><span class="lineno">12774</span>&#160;   <span class="keywordflow">if</span> (!(0 &lt;= port &amp;&amp; port &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>)) {</div><div class="line"><a name="l12775"></a><span class="lineno">12775</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;chan_misdn_log called with out-of-range port number! (%d)\n&quot;</span>, port);</div><div class="line"><a name="l12776"></a><span class="lineno">12776</span>&#160;      port = 0;</div><div class="line"><a name="l12777"></a><span class="lineno">12777</span>&#160;      level = -1;</div><div class="line"><a name="l12778"></a><span class="lineno">12778</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(level == -1</div><div class="line"><a name="l12779"></a><span class="lineno">12779</span>&#160;      || (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[port]</div><div class="line"><a name="l12780"></a><span class="lineno">12780</span>&#160;         ? (level == 1 &amp;&amp; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port]) || level == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port]</div><div class="line"><a name="l12781"></a><span class="lineno">12781</span>&#160;         : level &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port])</div><div class="line"><a name="l12782"></a><span class="lineno">12782</span>&#160;      || (level &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0] &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>)))) {</div><div class="line"><a name="l12783"></a><span class="lineno">12783</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l12784"></a><span class="lineno">12784</span>&#160;<span class="comment">       * We are not going to print anything so lets not</span></div><div class="line"><a name="l12785"></a><span class="lineno">12785</span>&#160;<span class="comment">       * go to all the work of generating a string.</span></div><div class="line"><a name="l12786"></a><span class="lineno">12786</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l12787"></a><span class="lineno">12787</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l12788"></a><span class="lineno">12788</span>&#160;   }</div><div class="line"><a name="l12789"></a><span class="lineno">12789</span>&#160;</div><div class="line"><a name="l12790"></a><span class="lineno">12790</span>&#160;   snprintf(port_buf, <span class="keyword">sizeof</span>(port_buf), <span class="stringliteral">&quot;P[%2d] &quot;</span>, port);</div><div class="line"><a name="l12791"></a><span class="lineno">12791</span>&#160;   va_start(ap, tmpl);</div><div class="line"><a name="l12792"></a><span class="lineno">12792</span>&#160;   vsnprintf(buf, <span class="keyword">sizeof</span>(buf), tmpl, ap);</div><div class="line"><a name="l12793"></a><span class="lineno">12793</span>&#160;   va_end(ap);</div><div class="line"><a name="l12794"></a><span class="lineno">12794</span>&#160;</div><div class="line"><a name="l12795"></a><span class="lineno">12795</span>&#160;   <span class="keywordflow">if</span> (level == -1) {</div><div class="line"><a name="l12796"></a><span class="lineno">12796</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s&quot;</span>, buf);</div><div class="line"><a name="l12797"></a><span class="lineno">12797</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[port]</div><div class="line"><a name="l12798"></a><span class="lineno">12798</span>&#160;      ? (level == 1 &amp;&amp; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port]) || level == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port]</div><div class="line"><a name="l12799"></a><span class="lineno">12799</span>&#160;      : level &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port]) {</div><div class="line"><a name="l12800"></a><span class="lineno">12800</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;%s%s&quot;</span>, port_buf, buf);</div><div class="line"><a name="l12801"></a><span class="lineno">12801</span>&#160;   }</div><div class="line"><a name="l12802"></a><span class="lineno">12802</span>&#160;</div><div class="line"><a name="l12803"></a><span class="lineno">12803</span>&#160;   <span class="keywordflow">if</span> (level &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0] &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>)) {</div><div class="line"><a name="l12804"></a><span class="lineno">12804</span>&#160;      <span class="keywordtype">char</span> ctimebuf[30];</div><div class="line"><a name="l12805"></a><span class="lineno">12805</span>&#160;      time_t tm;</div><div class="line"><a name="l12806"></a><span class="lineno">12806</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l12807"></a><span class="lineno">12807</span>&#160;      <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l12808"></a><span class="lineno">12808</span>&#160;      FILE *fp;</div><div class="line"><a name="l12809"></a><span class="lineno">12809</span>&#160;</div><div class="line"><a name="l12810"></a><span class="lineno">12810</span>&#160;      fp = fopen(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>, <span class="stringliteral">&quot;a+&quot;</span>);</div><div class="line"><a name="l12811"></a><span class="lineno">12811</span>&#160;      <span class="keywordflow">if</span> (!fp) {</div><div class="line"><a name="l12812"></a><span class="lineno">12812</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Error opening Tracefile: [ %s ] %s\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l12813"></a><span class="lineno">12813</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l12814"></a><span class="lineno">12814</span>&#160;      }</div><div class="line"><a name="l12815"></a><span class="lineno">12815</span>&#160;</div><div class="line"><a name="l12816"></a><span class="lineno">12816</span>&#160;      tm = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l12817"></a><span class="lineno">12817</span>&#160;      tmp = ctime_r(&amp;tm, ctimebuf);</div><div class="line"><a name="l12818"></a><span class="lineno">12818</span>&#160;      p = strchr(tmp, <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l12819"></a><span class="lineno">12819</span>&#160;      <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l12820"></a><span class="lineno">12820</span>&#160;         *p = <span class="charliteral">&#39;:&#39;</span>;</div><div class="line"><a name="l12821"></a><span class="lineno">12821</span>&#160;      }</div><div class="line"><a name="l12822"></a><span class="lineno">12822</span>&#160;      fputs(tmp, fp);</div><div class="line"><a name="l12823"></a><span class="lineno">12823</span>&#160;      fputs(<span class="stringliteral">&quot; &quot;</span>, fp);</div><div class="line"><a name="l12824"></a><span class="lineno">12824</span>&#160;      fputs(port_buf, fp);</div><div class="line"><a name="l12825"></a><span class="lineno">12825</span>&#160;      fputs(<span class="stringliteral">&quot; &quot;</span>, fp);</div><div class="line"><a name="l12826"></a><span class="lineno">12826</span>&#160;      fputs(buf, fp);</div><div class="line"><a name="l12827"></a><span class="lineno">12827</span>&#160;</div><div class="line"><a name="l12828"></a><span class="lineno">12828</span>&#160;      fclose(fp);</div><div class="line"><a name="l12829"></a><span class="lineno">12829</span>&#160;   }</div><div class="line"><a name="l12830"></a><span class="lineno">12830</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a24bb5f2898b28cecc69c86bb429f7517"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></div><div class="ttdeci">static int max_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00696">chan_misdn.c:696</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0fde55e91042b09488c4c1b522172a87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a></div><div class="ttdeci">static char global_tracefile[BUFFERSIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00127">chan_misdn.c:127</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b57a38a097758231e9e04be29a7572f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b57a38a097758231e9e04be29a7572f">&#9670;&nbsp;</a></span>cl_dequeue_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cl_dequeue_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08398">8398</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>.</p>
<div class="fragment"><div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;{</div><div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;   <span class="keywordtype">int</span> found_it;</div><div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;</div><div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>) {</div><div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;      <span class="comment">/* List is empty. */</span></div><div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;   }</div><div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;</div><div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a> == chan) {</div><div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;      <span class="comment">/* What we want is the head of the list. */</span></div><div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>;</div><div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(chan, <span class="stringliteral">&quot;Removed chan_list from list head&quot;</span>);</div><div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;   }</div><div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;</div><div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;   found_it = 0;</div><div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;      <span class="keywordflow">if</span> (help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a> == chan) {</div><div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;         <span class="comment">/* Found it in the list. */</span></div><div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;         help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a> = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>;</div><div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;         found_it = 1;</div><div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;      }</div><div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;   }</div><div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;</div><div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;   <span class="keywordflow">if</span> (found_it) {</div><div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(chan, <span class="stringliteral">&quot;Removed chan_list from list&quot;</span>);</div><div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;   }</div><div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;   <span class="keywordflow">return</span> found_it;</div><div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;}</div><div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ace3bd096d1676e348a4ef23a20a7fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ace3bd096d1676e348a4ef23a20a7fc">&#9670;&nbsp;</a></span>cl_queue_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cl_queue_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08377">8377</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;{</div><div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, chan-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> ? chan-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0, <span class="stringliteral">&quot;* Queuing chan %p\n&quot;</span>, chan);</div><div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;</div><div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(chan, <span class="stringliteral">&quot;Adding chan_list to list&quot;</span>);</div><div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;   chan-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>) {</div><div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;      <span class="comment">/* List is empty, make head of list. */</span></div><div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a> = chan;</div><div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;</div><div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;      <span class="comment">/* Put at end of list. */</span></div><div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;      <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;      }</div><div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;      help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a> = chan;</div><div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;   }</div><div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a587673fb51095846ac3555b69500c852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a587673fb51095846ac3555b69500c852">&#9670;&nbsp;</a></span>complete_ch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * complete_ch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">5654</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01830">ast_complete_channels()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00162">ast_cli_args::line</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">handle_cli_misdn_send_digit()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05611">handle_cli_misdn_send_display()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05183">handle_cli_misdn_send_facility()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04303">handle_cli_misdn_show_channel()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05564">handle_cli_misdn_toggle_echocancel()</a>.</p>
<div class="fragment"><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;{</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a3a116acde8f18aa530e5b4a6df420273">ast_complete_channels</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>, 3);</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="cli_8h_html_a3a116acde8f18aa530e5b4a6df420273"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a3a116acde8f18aa530e5b4a6df420273">ast_complete_channels</a></div><div class="ttdeci">char * ast_complete_channels(const char *line, const char *word, int pos, int state, int rpos)</div><div class="ttdoc">Command completion for the list of active channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01830">main/cli.c:1830</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09b42d3fd17449bf47d6d5f539fdcfea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b42d3fd17449bf47d6d5f539fdcfea">&#9670;&nbsp;</a></span>complete_debug_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * complete_debug_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05659">5659</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03720">handle_cli_misdn_set_debug()</a>.</p>
<div class="fragment"><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;{</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {</div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;   }</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;   <span class="keywordflow">switch</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>) {</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;   <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>[0] == <span class="charliteral">&#39;p&#39;</span>) {</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;port&quot;</span>);</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>[0] == <span class="charliteral">&#39;o&#39;</span>) {</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;only&quot;</span>);</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;      }</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;   <span class="keywordflow">case</span> 6:</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>[0] == <span class="charliteral">&#39;o&#39;</span>) {</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;only&quot;</span>);</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;      }</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;   }</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;}</div><div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdfbb2708952028d36e77743a6863ca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdfbb2708952028d36e77743a6863ca5">&#9670;&nbsp;</a></span>complete_show_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * complete_show_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05682">5682</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00162">ast_cli_args::line</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00655">misdn_cfg_get_name()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">MISDN_CFG_LAST</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00106">MISDN_GEN_FIRST</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00121">MISDN_GEN_LAST</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03987">handle_cli_misdn_show_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;{</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;   <span class="keywordtype">char</span> buffer[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem;</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;   <span class="keywordflow">switch</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>) {</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;   <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;      <span class="keywordflow">if</span> ((!strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, <span class="stringliteral">&quot;description&quot;</span>, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;description&quot;</span>);</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;      }</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;      <span class="keywordflow">if</span> ((!strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, <span class="stringliteral">&quot;descriptions&quot;</span>, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;descriptions&quot;</span>);</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;      }</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;      <span class="keywordflow">if</span> ((!strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, <span class="stringliteral">&quot;0&quot;</span>, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;      }</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;      <span class="keywordflow">while</span> ((port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) != -1) {</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;         snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;%d&quot;</span>, port);</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;         <span class="keywordflow">if</span> ((!strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, buffer, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(buffer);</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;         }</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;      }</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;   <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;      <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, <span class="stringliteral">&quot;description &quot;</span>)) {</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;         <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> + 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>; ++elem) {</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;            <span class="keywordflow">if</span> ((elem == <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) || (elem == <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a>)) {</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;            }</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a5d5c67cc756ded480d5742ca65a3e36f">misdn_cfg_get_name</a>(elem, buffer, <span class="keyword">sizeof</span>(buffer));</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;            <span class="keywordflow">if</span> (!wordlen || !strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, buffer, wordlen)) {</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;               <span class="keywordflow">if</span> (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>) {</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(buffer);</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;               }</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;            }</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;         }</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, <span class="stringliteral">&quot;descriptions &quot;</span>)) {</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;         <span class="keywordflow">if</span> ((!wordlen || !strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, <span class="stringliteral">&quot;general&quot;</span>, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;general&quot;</span>);</div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;         }</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;         <span class="keywordflow">if</span> ((!wordlen || !strncmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, <span class="stringliteral">&quot;ports&quot;</span>, wordlen)) &amp;&amp; (++which &gt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>)) {</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;ports&quot;</span>);</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;         }</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;      }</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;   }</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a></div><div class="ttdeci">misdn_cfg_elements</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00027">chan_misdn_config.h:27</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a5d5c67cc756ded480d5742ca65a3e36f"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a5d5c67cc756ded480d5742ca65a3e36f">misdn_cfg_get_name</a></div><div class="ttdeci">void misdn_cfg_get_name(enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00655">misdn_config.c:655</a></div></div>
<div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">chan_misdn_config.h:103</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00030">chan_misdn_config.h:30</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00106">chan_misdn_config.h:106</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00121">chan_misdn_config.h:121</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a908c29953e5e94cf4df5200fbc4ca11f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a908c29953e5e94cf4df5200fbc4ca11f">&#9670;&nbsp;</a></span>config_jitterbuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void config_jitterbuffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">5817</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00032">cb_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_list::jb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_list::jb_len</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_list::jb_upper_threshold</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12639">misdn_jb_destroy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12602">misdn_jb_init()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00477">misdn_bchannel::nojitter</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;{</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a> = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a>;</div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abf">threshold</a> = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a>;</div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;</div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;config_jb: Called\n&quot;</span>);</div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;</div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;   <span class="keywordflow">if</span> (!len) {</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;config_jb: Deactivating Jitterbuffer\n&quot;</span>);</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">nojitter</a> = 1;</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;      <span class="keywordflow">if</span> (len &lt;= 100 || len &gt; 8000) {</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;config_jb: Jitterbuffer out of Bounds, setting to 1000\n&quot;</span>);</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;         len = 1000;</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;      }</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;      <span class="keywordflow">if</span> (threshold &gt; len) {</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;config_jb: Jitterbuffer Threshold &gt; Jitterbuffer setting to Jitterbuffer -1\n&quot;</span>);</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;      }</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>) {</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;config_jb: We&#39;ve got a Jitterbuffer Already on this port.\n&quot;</span>);</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe098aa0a254c196d27911e33857e6d4">misdn_jb_destroy</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>);</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;      }</div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7a56c181dc92bad4a8c732cd2b77e391">misdn_jb_init</a>(len, threshold);</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>) {</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">nojitter</a> = 1;</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;      }</div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;   }</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_a07282113b825722384e367076e68795f"><div class="ttname"><a href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">chan_list::jb_len</a></div><div class="ttdeci">int jb_len</div><div class="ttdoc">Jitterbuffer length. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_misdn.c:490</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="structchan__list_html_a97f61939951f649404581f2de713e396"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">chan_list::jb</a></div><div class="ttdeci">struct misdn_jb * jb</div><div class="ttdoc">Allocated jitterbuffer controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_misdn.c:503</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe098aa0a254c196d27911e33857e6d4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe098aa0a254c196d27911e33857e6d4">misdn_jb_destroy</a></div><div class="ttdeci">void misdn_jb_destroy(struct misdn_jb *jb)</div><div class="ttdoc">frees the data and destroys the given jitterbuffer struct </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12639">chan_misdn.c:12639</a></div></div>
<div class="ttc" id="structchan__list_html_a2cbe6476569972d16740b7ee7e4273a9"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">chan_list::jb_upper_threshold</a></div><div class="ttdeci">int jb_upper_threshold</div><div class="ttdoc">Jitterbuffer upper threshold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_misdn.c:496</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dsp_8h_html_a11a8ce2b7eba2230cab37aad708d9abf"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abf">threshold</a></div><div class="ttdeci">threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00071">dsp.h:71</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6bb23a220a9276463546e4b5faa28e36"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">misdn_bchannel::nojitter</a></div><div class="ttdeci">int nojitter</div><div class="ttdoc">TRUE if we will not use the jitter buffer system. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00477">isdn_lib.h:477</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7a56c181dc92bad4a8c732cd2b77e391"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7a56c181dc92bad4a8c732cd2b77e391">misdn_jb_init</a></div><div class="ttdeci">struct misdn_jb * misdn_jb_init(int size, int upper_threshold)</div><div class="ttdoc">allocates the jb-structure and initialize the elements </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12602">chan_misdn.c:12602</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abef6c81cea5f1eccbaaf0007a6750e21"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a></div><div class="ttdeci">void(* cb_log)(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00032">isdn_lib.c:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7915b63b76329bbf4c3f434841a8bf41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7915b63b76329bbf4c3f434841a8bf41">&#9670;&nbsp;</a></span>debug_numtype()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_numtype </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05853">5853</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00069">MISDN_CFG_ECHOCANCEL</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;{</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;   <span class="keywordflow">switch</span> (numtype) {</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>:</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: Unknown\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>:</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: International\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>:</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: National\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>:</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: Network Specific\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>:</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: Subscriber\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>:</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; %s: Abbreviated\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;      <span class="comment">/* Maybe we should cut off the prefix if present ? */</span></div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; !!!! Wrong dialplan setting, please see the misdn.conf sample file\n &quot;</span>);</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;   }</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00104">isdn_lib.h:104</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00105">isdn_lib.h:105</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00106">isdn_lib.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00103">isdn_lib.h:103</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00107">isdn_lib.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a821d90675a82dc5fc7307c141efae6da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a821d90675a82dc5fc7307c141efae6da">&#9670;&nbsp;</a></span>dialtone_indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dialtone_indicate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>AST INDICATIONS END </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07707">7707</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00745">ast_channel_zone()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00455">ast_get_indication_tone()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00052">ast_tone_zone_sound::data</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00062">MISDN_CFG_NODIALTONE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_list::norxtone</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_list::notxtone</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_list::ts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08889">wait_for_digits()</a>.</p>
<div class="fragment"><div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;{</div><div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;   <span class="keywordtype">int</span> nd = 0;</div><div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;</div><div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;No Ast in dialtone_indicate\n&quot;</span>);</div><div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;   }</div><div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;</div><div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa23c446035a120715be770b3c7c32a579">MISDN_CFG_NODIALTONE</a>, &amp;nd, <span class="keyword">sizeof</span>(nd));</div><div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;</div><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;   <span class="keywordflow">if</span> (nd) {</div><div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Not sending Dialtone, because config wants it\n&quot;</span>);</div><div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;   }</div><div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;</div><div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Dial\n&quot;</span>);</div><div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;</div><div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a> = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(ast), <span class="stringliteral">&quot;dial&quot;</span>);</div><div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;</div><div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;   <span class="keywordflow">if</span> (cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a>) {</div><div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;      cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">notxtone</a> = 0;</div><div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;      cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">norxtone</a> = 0;</div><div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;      <span class="comment">/* This prods us in misdn_write */</span></div><div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(ast, 0, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a>-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, 0);</div><div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;   }</div><div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;</div><div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_a673d53e20b8ac75477469442f51314e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_channel_zone(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00745">channel_internal_api.c:745</a></div></div>
<div class="ttc" id="structchan__list_html_a522a11718c8bcec41db4714e6bedc2b2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">chan_list::norxtone</a></div><div class="ttdeci">int norxtone</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_misdn.c:415</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa23c446035a120715be770b3c7c32a579"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa23c446035a120715be770b3c7c32a579">MISDN_CFG_NODIALTONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00062">chan_misdn_config.h:62</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structchan__list_html_a85d7b17a82d4d04aabe2a4d634bbb7c3"><div class="ttname"><a href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">chan_list::notxtone</a></div><div class="ttdeci">int notxtone</div><div class="ttdoc">TRUE if we are not to generate tones (Playtones) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_misdn.c:420</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="indications_8h_html_a516be2823557000dcd4be685a44d1d09"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a></div><div class="ttdeci">struct ast_tone_zone_sound * ast_get_indication_tone(const struct ast_tone_zone *zone, const char *indication)</div><div class="ttdoc">Locate a tone zone sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00455">indications.c:455</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html_ad30b22ae8fc57203eae5d30c3e9243e2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">chan_list::ts</a></div><div class="ttdeci">struct ast_tone_zone_sound * ts</div><div class="ttdoc">Tone zone sound used for dialtone generation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_misdn.c:582</a></div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_tone_zone_sound::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00052">indications.h:52</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad02ce087fa60dd9931299f9574700c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad02ce087fa60dd9931299f9574700c97">&#9670;&nbsp;</a></span>do_immediate_setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_immediate_setup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">8659</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04194">ast_canmatch_extension()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00126">EVENT_PROCEEDING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00132">EVENT_SETUP_ACKNOWLEDGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08447">hangup_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00330">MISDN_DIALING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00329">MISDN_INCOMING_SETUP</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00128">misdn_lib_is_ptp()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_list::noautorespond_on_setup</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08438">pbx_start_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;{</div><div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;   <span class="keywordtype">char</span> *predial;</div><div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fr;</div><div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;</div><div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;   predial = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast));</div><div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;</div><div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;</div><div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;   <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">noautorespond_on_setup</a>) {</div><div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>);</div><div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>)) {</div><div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>);</div><div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a>);</div><div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;         }</div><div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;      }</div><div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>;</div><div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;   }</div><div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;</div><div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;      <span class="stringliteral">&quot;* Starting Ast context:%s dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt; with &#39;s&#39; extension\n&quot;</span>,</div><div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast),</div><div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;      (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str)</div><div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;      (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str)</div><div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;</div><div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ast, <span class="stringliteral">&quot;s&quot;</span>);</div><div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;</div><div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(ast, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast), <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast), 1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) || <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a>(ch) &lt; 0) {</div><div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;      ast = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;</div><div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> ? <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a> : <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;   }</div><div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;</div><div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;</div><div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(predial)) {</div><div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;      fr.frametype = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>;</div><div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;      fr.subclass.integer = *predial;</div><div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;      fr.src = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;      fr.data.ptr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;      fr.datalen = 0;</div><div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;      fr.samples = 0;</div><div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;      fr.mallocd = 0;</div><div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;      fr.offset = 0;</div><div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;      fr.delivery = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0,0);</div><div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;</div><div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> &amp;&amp; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>)) {</div><div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;fr);</div><div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;      }</div><div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;      predial++;</div><div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;   }</div><div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abd97d108065ced9bfacd2cf140965f95"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a></div><div class="ttdeci">static int pbx_start_chan(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08438">chan_misdn.c:8438</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="pbx_8h_html_a93f9868530c1e8a9d9d367d1ead8782e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a></div><div class="ttdeci">int ast_canmatch_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks for a valid matching extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04194">pbx.c:4194</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00150">isdn_lib.h:150</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00330">chan_misdn.c:330</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00329">chan_misdn.c:329</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abb98bbaed704a93d67663012188d4f46"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a></div><div class="ttdeci">int misdn_lib_is_ptp(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00128">isdn_lib.c:128</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00126">isdn_lib.h:126</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8bfd9eaf966babb8dce679b5e909cc01"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a></div><div class="ttdeci">static void hangup_chan(struct chan_list *ch, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08447">chan_misdn.c:8447</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00132">isdn_lib.h:132</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1b724daeb32d8d023765605586269a02"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">misdn_bchannel::out_cause</a></div><div class="ttdeci">int out_cause</div><div class="ttdoc">Q.931 Cause for disconnection code (sent) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00677">isdn_lib.h:677</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="structchan__list_html_ae9d7293e857cb31edd7bd53b68ffb39d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">chan_list::noautorespond_on_setup</a></div><div class="ttdeci">int noautorespond_on_setup</div><div class="ttdoc">TRUE of we are not to respond immediately to a SETUP message. Check the dialplan first. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_misdn.c:413</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a866c0e96f1c8ddc9d49fb91f5433b529"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a866c0e96f1c8ddc9d49fb91f5433b529">&#9670;&nbsp;</a></span>export_aoc_vars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void export_aoc_vars </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>originator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03458">3458</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">misdn_bchannel::AOCD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00521">misdn_bchannel::AOCD_need_export</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00515">misdn_bchannel::AOCDtype</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10765">ast_channel_bridge_peer()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00518">misdn_bchannel::chargingUnit</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00517">misdn_bchannel::currency</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;{</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128];</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;   <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">AOCD_need_export</a> || !ast) {</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;   }</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   <span class="keywordflow">if</span> (originator == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>) {</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(ast);</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      }</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(ast);</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;   }</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">AOCDtype</a>) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDCurrency:</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_Type&quot;</span>, <span class="stringliteral">&quot;currency&quot;</span>);</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.chargeNotAvailable) {</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_ChargeAvailable&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_ChargeAvailable&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.freeOfCharge) {</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_FreeOfCharge&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_FreeOfCharge&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;            <span class="keywordflow">if</span> (snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d %s&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.currencyAmount * bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.multiplier, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.currency) &lt; <span class="keyword">sizeof</span>(buf)) {</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_Amount&quot;</span>, buf);</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;               <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.billingId &gt;= 0 &amp;&amp; snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>.billingId) &lt; <span class="keyword">sizeof</span>(buf)) {</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;                  <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_BillingId&quot;</span>, buf);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;               }</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;            }</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;         }</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      }</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDChargingUnit:</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_Type&quot;</span>, <span class="stringliteral">&quot;charging_unit&quot;</span>);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>.chargeNotAvailable) {</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_ChargeAvailable&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_ChargeAvailable&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>.freeOfCharge) {</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_FreeOfCharge&quot;</span>, <span class="stringliteral">&quot;yes&quot;</span>);</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_FreeOfCharge&quot;</span>, <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;            <span class="keywordflow">if</span> (snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>.recordedUnits) &lt; <span class="keyword">sizeof</span>(buf)) {</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_RecordedUnits&quot;</span>, buf);</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;               <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>.billingId &gt;= 0 &amp;&amp; snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>.billingId) &lt; <span class="keyword">sizeof</span>(buf)) {</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;                  <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AOCD_BillingId&quot;</span>, buf);</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;               }</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;            }</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;         }</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      }</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;   }</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;   bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">AOCD_need_export</a> = 0;</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aaffc525adbd9bfd027c2707b0cc6afc5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">misdn_bchannel::AOCD</a></div><div class="ttdeci">union misdn_bchannel::@161 AOCD</div></div>
<div class="ttc" id="structmisdn__bchannel_html_ae28caf1e05f165a0c6016a2fafba615e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">misdn_bchannel::AOCDtype</a></div><div class="ttdeci">enum FacFunction AOCDtype</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00515">isdn_lib.h:515</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a0eb39f0206f0029457671f9501ad192d"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">misdn_bchannel::AOCD_need_export</a></div><div class="ttdeci">int AOCD_need_export</div><div class="ttdoc">TRUE if AOCDtype and AOCD data are ready to export to Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00521">isdn_lib.h:521</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a57e9381374e669bc7b18db012cd207f4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">misdn_bchannel::currency</a></div><div class="ttdeci">struct FacAOCDCurrency currency</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00517">isdn_lib.h:517</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="channel_8h_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a346f9e9a2450ed13b2f6723bcd67fd56"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">misdn_bchannel::chargingUnit</a></div><div class="ttdeci">struct FacAOCDChargingUnit chargingUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00518">isdn_lib.h:518</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae68199acb58f138dce5b16b0de5c4459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae68199acb58f138dce5b16b0de5c4459">&#9670;&nbsp;</a></span>export_ch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void export_ch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Export parameters to the dialplan environment variables. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08811">8811</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00647">misdn_bchannel::keypad</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00470">misdn_bchannel::sending_complete</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00629">misdn_bchannel::urate</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00663">misdn_bchannel::uu</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00666">misdn_bchannel::uulen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;{</div><div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[32];</div><div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;</div><div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;<span class="comment">    * The only use for MISDN_PID is if there is a problem and you</span></div><div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;<span class="comment">    * have to use the &quot;misdn restart pid&quot; CLI command.  Otherwise,</span></div><div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;<span class="comment">    * the pid is not used by anyone.  The internal use of MISDN_PID</span></div><div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;<span class="comment">    * has been deleted.</span></div><div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EXPORT_PID: pid:%d\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;   snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;_MISDN_PID&quot;</span>, tmp);</div><div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;</div><div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;   <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">sending_complete</a>) {</div><div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">sending_complete</a>);</div><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_ADDRESS_COMPLETE&quot;</span>, tmp);</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;   }</div><div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;</div><div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;   <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af6c0d819ed84001ebc48f28c7765211a">urate</a>) {</div><div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af6c0d819ed84001ebc48f28c7765211a">urate</a>);</div><div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_URATE&quot;</span>, tmp);</div><div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;   }</div><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;</div><div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;   <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">uulen</a>) {</div><div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_USERUSER&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>);</div><div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;   }</div><div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;</div><div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>)) {</div><div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_KEYPAD&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>);</div><div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;   }</div><div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3030517292a60e045b7aeedc419ad180"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">misdn_bchannel::keypad</a></div><div class="ttdeci">char keypad[MISDN_MAX_KEYPAD_LEN]</div><div class="ttdoc">Q.931 Keypad Facility IE contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00647">isdn_lib.h:647</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9b9b9448e634b1536a6bb5bc04438fbf"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">misdn_bchannel::uulen</a></div><div class="ttdeci">int uulen</div><div class="ttdoc">User-User information string length in uu[]. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00666">isdn_lib.h:666</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af85206f753950090e4d86a4fde26c5ed"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">misdn_bchannel::uu</a></div><div class="ttdeci">char uu[256]</div><div class="ttdoc">User-User information string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00663">isdn_lib.h:663</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63e06215600e01fdfb2234581d3457b5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">misdn_bchannel::sending_complete</a></div><div class="ttdeci">int sending_complete</div><div class="ttdoc">TRUE if all digits necessary to complete the call are available. No more INFORMATION messages are nee...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00470">isdn_lib.h:470</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af6c0d819ed84001ebc48f28c7765211a"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af6c0d819ed84001ebc48f28c7765211a">misdn_bchannel::urate</a></div><div class="ttdeci">int urate</div><div class="ttdoc">Q.931 Bearer Capability IE Layer 1 User Rate field. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00629">isdn_lib.h:629</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0eef19925128e2ed1f90431ebe8a4d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0eef19925128e2ed1f90431ebe8a4d2">&#9670;&nbsp;</a></span>find_chan_by_bc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* find_chan_by_bc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the found <a class="el" href="../../df/d00/structchan__list.html" title="Channel call record structure. ">chan_list</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08259">8259</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12574">chan_misdn_jb_empty()</a>.</p>
<div class="fragment"><div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;{</div><div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;</div><div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;      <span class="keywordflow">if</span> (help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> == bc) {</div><div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(help, <span class="stringliteral">&quot;Found chan_list by bc&quot;</span>);</div><div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;         <span class="keywordflow">return</span> help;</div><div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;      }</div><div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;   }</div><div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;</div><div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(6, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;      <span class="stringliteral">&quot;$$$ find_chan_by_bc: No channel found for dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;</div><div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdd26a6887b2f69d2ca39077eae6d8e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd26a6887b2f69d2ca39077eae6d8e1">&#9670;&nbsp;</a></span>find_hold_active_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* find_hold_active_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08351">8351</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00335">MISDN_ALERTING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00332">MISDN_PROCEEDING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00331">MISDN_PROGRESS</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;{</div><div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *list;</div><div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;</div><div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;   <span class="keywordflow">for</span> (list = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; list; list = list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;      <span class="keywordflow">if</span> (list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a> &amp;&amp; list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> &amp;&amp; list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> == bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a></div><div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;         &amp;&amp; list-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;         <span class="keywordflow">switch</span> (list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>:</div><div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>:</div><div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>:</div><div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(list, <span class="stringliteral">&quot;Found chan_list hold active call&quot;</span>);</div><div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;            <span class="keywordflow">return</span> list;</div><div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;         }</div><div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;      }</div><div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;   }</div><div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;}</div><div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00331">chan_misdn.c:331</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00332">chan_misdn.c:332</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a118093a88a20335df7f60d7f3897f2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118093a88a20335df7f60d7f3897f2c9">&#9670;&nbsp;</a></span>find_hold_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* find_hold_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the found <a class="el" href="../../df/d00/structchan__list.html" title="Channel call record structure. ">chan_list</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08283">8283</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00368">hold_info::channel</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00411">misdn_bchannel::channel</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00349">MISDN_HOLD_ACTIVE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00367">misdn_bchannel::pri</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;{</div><div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;</div><div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;   <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af4b6f45a73da60a2b05d11e6f5bb0f23">pri</a>) {</div><div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;   }</div><div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;</div><div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(6, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;$$$ find_hold_call: channel:%d dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>,</div><div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;$$$ find_hold_call: --&gt; hold:%d channel:%d\n&quot;</span>, help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a>, help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;      <span class="keywordflow">if</span> (help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a> &amp;&amp; help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a> == bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>) {</div><div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(help, <span class="stringliteral">&quot;Found chan_list hold call&quot;</span>);</div><div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;         <span class="keywordflow">return</span> help;</div><div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;      }</div><div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;   }</div><div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(6, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;      <span class="stringliteral">&quot;$$$ find_hold_call: No channel found for dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;</div><div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af4b6f45a73da60a2b05d11e6f5bb0f23"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af4b6f45a73da60a2b05d11e6f5bb0f23">misdn_bchannel::pri</a></div><div class="ttdeci">int pri</div><div class="ttdoc">TRUE if ISDN-PRI (ISDN-BRI otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00367">isdn_lib.h:367</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbad3f0d414de796673dcff118191c6180f">MISDN_HOLD_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00349">chan_misdn.c:349</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structhold__info_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">hold_info::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Original B channel number the HELD call was using. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00368">chan_misdn.c:368</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">misdn_bchannel::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Assigned B channel number B1, B2... 0 if not assigned. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00411">isdn_lib.h:411</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a592599696448ac01e6a442ab2612463c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592599696448ac01e6a442ab2612463c">&#9670;&nbsp;</a></span>find_hold_call_l3()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* find_hold_call_l3 </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>l3_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the found <a class="el" href="../../df/d00/structchan__list.html" title="Channel call record structure. ">chan_list</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08317">8317</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;{</div><div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;</div><div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;      <span class="keywordflow">if</span> (help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a> &amp;&amp; help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> == l3_id) {</div><div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(help, <span class="stringliteral">&quot;Found chan_list hold call l3&quot;</span>);</div><div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;         <span class="keywordflow">return</span> help;</div><div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;      }</div><div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;   }</div><div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;</div><div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;}</div><div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1fb654d1fbb5b25904cbab043016c887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fb654d1fbb5b25904cbab043016c887">&#9670;&nbsp;</a></span>free_robin_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_robin_list </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00629">629</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00620">robin_list::group</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00623">robin_list::next</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d60/structrobin__list.html">robin_list</a> *r;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d60/structrobin__list.html">robin_list</a> *<a class="code" href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">next</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">for</span> (r = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; r; r = <a class="code" href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">next</a>) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      next = r-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">next</a>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(r-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(r);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="structrobin__list_html_a16e0a28f6dda4bbd353c30350a69eb58"><div class="ttname"><a href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">robin_list::next</a></div><div class="ttdeci">struct robin_list * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00623">chan_misdn.c:623</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae5607ef5574022ec25b0b74559490431"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a></div><div class="ttdeci">static struct robin_list * robin</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00626">chan_misdn.c:626</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrobin__list_html"><div class="ttname"><a href="../../de/d60/structrobin__list.html">robin_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00619">chan_misdn.c:619</a></div></div>
<div class="ttc" id="structrobin__list_html_a443519726cbe3c4f2b2fe1d42ce2fd2f"><div class="ttname"><a href="../../de/d60/structrobin__list.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">robin_list::group</a></div><div class="ttdeci">char * group</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00620">chan_misdn.c:620</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1d27aae6bd9100e5a4d36c20f84e146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1d27aae6bd9100e5a4d36c20f84e146">&#9670;&nbsp;</a></span>get_chan_by_ast_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* get_chan_by_ast_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns a reference to the found <a class="el" href="../../df/d00/structchan__list.html" title="Channel call record structure. ">chan_list</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">786</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02947">ast_channel_trylock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01568">ast_safe_sleep_conditional()</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00210">mISDN_REDIRECTING_REASON_CALL_FWD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00200">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00202">mISDN_REDIRECTING_REASON_NO_REPLY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00198">mISDN_REDIRECTING_REASON_UNKNOWN</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00095">NUMPLAN_DATA</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00097">NUMPLAN_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00098">NUMPLAN_PRIVATE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00096">NUMPLAN_TELEX</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00032">ast_datastore_info::type</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">handle_cli_misdn_send_digit()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05611">handle_cli_misdn_send_display()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05183">handle_cli_misdn_send_facility()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05564">handle_cli_misdn_toggle_echocancel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keywordflow">for</span> (tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>; tmp = tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> &amp;&amp; strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>), <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) == 0) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(tmp, <span class="stringliteral">&quot;Found chan_list by ast name&quot;</span>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div><div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c5e71fd7d73198e58f64bba83ce22dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c5e71fd7d73198e58f64bba83ce22dd">&#9670;&nbsp;</a></span>get_robin_position()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/d60/structrobin__list.html">robin_list</a>* get_robin_position </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00641">641</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00620">robin_list::group</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00623">robin_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00624">robin_list::prev</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00626">robin</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d60/structrobin__list.html">robin_list</a> *<span class="keyword">new</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d60/structrobin__list.html">robin_list</a> *iter = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordflow">for</span> (; iter; iter = iter-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">next</a>) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(iter-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a>, <a class="code" href="../../d3/d08/structgroup.html">group</a>)) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <span class="keywordflow">return</span> iter;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <span class="keyword">new</span> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*<span class="keyword">new</span>));</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (!<span class="keyword">new</span>) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keyword">new</span>-&gt;group = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d3/d08/structgroup.html">group</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">if</span> (!new-&gt;group) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<span class="keyword">new</span>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keyword">new</span>-&gt;channel = 1;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keyword">new</span>-&gt;next = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>-&gt;<a class="code" href="../../de/d60/structrobin__list.html#ab51530b18b97e702616ad69e6d73032f">prev</a> = <span class="keyword">new</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a> = <span class="keyword">new</span>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="ttc" id="structrobin__list_html_a16e0a28f6dda4bbd353c30350a69eb58"><div class="ttname"><a href="../../de/d60/structrobin__list.html#a16e0a28f6dda4bbd353c30350a69eb58">robin_list::next</a></div><div class="ttdeci">struct robin_list * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00623">chan_misdn.c:623</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae5607ef5574022ec25b0b74559490431"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae5607ef5574022ec25b0b74559490431">robin</a></div><div class="ttdeci">static struct robin_list * robin</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00626">chan_misdn.c:626</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structrobin__list_html"><div class="ttname"><a href="../../de/d60/structrobin__list.html">robin_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00619">chan_misdn.c:619</a></div></div>
<div class="ttc" id="structrobin__list_html_ab51530b18b97e702616ad69e6d73032f"><div class="ttname"><a href="../../de/d60/structrobin__list.html#ab51530b18b97e702616ad69e6d73032f">robin_list::prev</a></div><div class="ttdeci">struct robin_list * prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00624">chan_misdn.c:624</a></div></div>
<div class="ttc" id="structrobin__list_html_a443519726cbe3c4f2b2fe1d42ce2fd2f"><div class="ttname"><a href="../../de/d60/structrobin__list.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">robin_list::group</a></div><div class="ttdeci">char * group</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00620">chan_misdn.c:620</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8422063dea40ac94c4be4ec41c3531a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8422063dea40ac94c4be4ec41c3531a0">&#9670;&nbsp;</a></span>handle_cli_misdn_port_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_port_block </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03830">3830</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00091">misdn_lib_port_block()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;{</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn port block&quot;</span>;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;         <span class="stringliteral">&quot;Usage: misdn port block &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;         <span class="stringliteral">&quot;       Block the specified port by &lt;port&gt;.\n&quot;</span>;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;   }</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;   }</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a4cadcadbe3825e4fe2a476a4b93a529a">misdn_lib_port_block</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a4cadcadbe3825e4fe2a476a4b93a529a"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a4cadcadbe3825e4fe2a476a4b93a529a">misdn_lib_port_block</a></div><div class="ttdeci">int misdn_lib_port_block(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00091">isdn_lib.c:91</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9c507187b74a4a48ebd5145657032a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c507187b74a4a48ebd5145657032a9">&#9670;&nbsp;</a></span>handle_cli_misdn_port_down()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_port_down </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03940">3940</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01805">misdn_lib_get_port_down()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;{</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn port down&quot;</span>;</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;         <span class="stringliteral">&quot;Usage: misdn port down &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;         <span class="stringliteral">&quot;       Try to deactivate the L1 on the given port.\n&quot;</span>;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;   }</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;   }</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a2bd1958952ab44d23665ef7b560562ad">misdn_lib_get_port_down</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a2bd1958952ab44d23665ef7b560562ad"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a2bd1958952ab44d23665ef7b560562ad">misdn_lib_get_port_down</a></div><div class="ttdeci">int misdn_lib_get_port_down(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01805">isdn_lib.c:1805</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b6100bdd2088a5299fb7465cee105f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b6100bdd2088a5299fb7465cee105f3">&#9670;&nbsp;</a></span>handle_cli_misdn_port_unblock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_port_unblock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03852">3852</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00104">misdn_lib_port_unblock()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;{</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn port unblock&quot;</span>;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;         <span class="stringliteral">&quot;Usage: misdn port unblock &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;         <span class="stringliteral">&quot;       Unblock the port specified by &lt;port&gt;.\n&quot;</span>;</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;   }</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;   }</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a2ed2741b4a2412a38f62d57d5439f9b8">misdn_lib_port_unblock</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a2ed2741b4a2412a38f62d57d5439f9b8"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a2ed2741b4a2412a38f62d57d5439f9b8">misdn_lib_port_unblock</a></div><div class="ttdeci">int misdn_lib_port_unblock(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00104">isdn_lib.c:104</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac00d6334df0119e11a59afecda59ca66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac00d6334df0119e11a59afecda59ca66">&#9670;&nbsp;</a></span>handle_cli_misdn_port_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_port_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03918">3918</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01781">misdn_lib_get_port_up()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;{</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn port up&quot;</span>;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;         <span class="stringliteral">&quot;Usage: misdn port up &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;         <span class="stringliteral">&quot;       Try to establish L1 on the given port.\n&quot;</span>;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;   }</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   }</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a35c0c233baff2379c5ab795e32964316">misdn_lib_get_port_up</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a35c0c233baff2379c5ab795e32964316"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a35c0c233baff2379c5ab795e32964316">misdn_lib_get_port_up</a></div><div class="ttdeci">int misdn_lib_get_port_up(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01781">isdn_lib.c:1781</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b564e6f166949ef4be38ede31e6a06d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b564e6f166949ef4be38ede31e6a06d">&#9670;&nbsp;</a></span>handle_cli_misdn_reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_reload </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04144">4144</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;{</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn reload&quot;</span>;</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;         <span class="stringliteral">&quot;Usage: misdn reload\n&quot;</span></div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;         <span class="stringliteral">&quot;       Reload internal mISDN config, read from the config\n&quot;</span></div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;         <span class="stringliteral">&quot;       file.\n&quot;</span>;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   }</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 2) {</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;   }</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Reloading mISDN configuration\n&quot;</span>);</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3cd5340b1a2a7103296105d029b8de50">reload_config</a>();</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3cd5340b1a2a7103296105d029b8de50"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3cd5340b1a2a7103296105d029b8de50">reload_config</a></div><div class="ttdeci">static void reload_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04123">chan_misdn.c:4123</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac922c20f04e6be23558ccb06bbc34119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac922c20f04e6be23558ccb06bbc34119">&#9670;&nbsp;</a></span>handle_cli_misdn_restart_pid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_restart_pid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03896">3896</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03932">misdn_lib_pid_restart()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;{</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn restart pid&quot;</span>;</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;         <span class="stringliteral">&quot;Usage: misdn restart pid &lt;pid&gt;\n&quot;</span></div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;         <span class="stringliteral">&quot;       Restart the given pid\n&quot;</span>;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;   }</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;   }</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a111cdb350e166d2945f9fd13baa2ebc0">misdn_lib_pid_restart</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_a111cdb350e166d2945f9fd13baa2ebc0"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a111cdb350e166d2945f9fd13baa2ebc0">misdn_lib_pid_restart</a></div><div class="ttdeci">int misdn_lib_pid_restart(int pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03932">isdn_lib.c:3932</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a487febe127a6feb33e3fca63c2f52fe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a487febe127a6feb33e3fca63c2f52fe4">&#9670;&nbsp;</a></span>handle_cli_misdn_restart_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_restart_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03874">3874</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03982">misdn_lib_port_restart()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;{</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn restart port&quot;</span>;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;         <span class="stringliteral">&quot;Usage: misdn restart port &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;         <span class="stringliteral">&quot;       Restart the given port.\n&quot;</span>;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;   }</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;   }</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a8cf964fe703a6f4f84f2011cd191a0df">misdn_lib_port_restart</a>(atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]));</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a8cf964fe703a6f4f84f2011cd191a0df"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a8cf964fe703a6f4f84f2011cd191a0df">misdn_lib_port_restart</a></div><div class="ttdeci">int misdn_lib_port_restart(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03982">isdn_lib.c:3982</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a991a7eec0f5a454d36126dbf1b2969f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a991a7eec0f5a454d36126dbf1b2969f4">&#9670;&nbsp;</a></span>handle_cli_misdn_send_digit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_send_digit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">5509</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">ast_dtmf_stream()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">complete_ch()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03681">send_digit_to_chan()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;{</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channame;</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;   <span class="keywordtype">int</span> i, msglen;</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn send digit&quot;</span>;</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;         <span class="stringliteral">&quot;Usage: misdn send digit &lt;channel&gt; \&quot;&lt;msg&gt;\&quot; \n&quot;</span></div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;         <span class="stringliteral">&quot;       Send &lt;digit&gt; to &lt;channel&gt; as DTMF Tone\n&quot;</span></div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;         <span class="stringliteral">&quot;       when channel is a mISDN channel\n&quot;</span>;</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a>(a);</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;   }</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5) {</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;   }</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;   channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;   msg = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;   msglen = strlen(msg);</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Sending %s to %s\n&quot;</span>, msg, channame);</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;   tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Sending %s to %s failed Channel does not exist\n&quot;</span>, msg, channame);</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;   }</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;<span class="preprocessor">#if 1</span></div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; msglen; i++) {</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      <span class="keywordflow">if</span> (!tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;      }</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Sending: %c\n&quot;</span>, msg[i]);</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a25f94996ca2c5032eb290f2eec5da9b7">send_digit_to_chan</a>(tmp, msg[i]);</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;      <span class="comment">/* res = ast_safe_sleep(tmp-&gt;ast, 250); */</span></div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;      usleep(250000);</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;      <span class="comment">/* res = ast_waitfor(tmp-&gt;ast,100); */</span></div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;   }</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af20b8ac2e28e659be352bbaecdf0ab03">ast_dtmf_stream</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, msg, 250);</div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;   }</div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Digit(s) sent&quot;</span>);</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_af20b8ac2e28e659be352bbaecdf0ab03"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af20b8ac2e28e659be352bbaecdf0ab03">ast_dtmf_stream</a></div><div class="ttdeci">int ast_dtmf_stream(struct ast_channel *chan, struct ast_channel *peer, const char *digits, int between, unsigned int duration)</div><div class="ttdoc">Send a string of DTMF digits to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00981">main/app.c:981</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1d27aae6bd9100e5a4d36c20f84e146"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a></div><div class="ttdeci">static struct chan_list * get_chan_by_ast_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00786">chan_misdn.c:786</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a587673fb51095846ac3555b69500c852"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a></div><div class="ttdeci">static char * complete_ch(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05654">chan_misdn.c:5654</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a25f94996ca2c5032eb290f2eec5da9b7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a25f94996ca2c5032eb290f2eec5da9b7">send_digit_to_chan</a></div><div class="ttdeci">static void send_digit_to_chan(struct chan_list *cl, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03681">chan_misdn.c:3681</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4f56774e430a5eba0cc9c6320346783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4f56774e430a5eba0cc9c6320346783">&#9670;&nbsp;</a></span>handle_cli_misdn_send_display()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_send_display </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05611">5611</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">complete_ch()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00642">misdn_bchannel::display</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00154">EVENT_INFORMATION</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;{</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channame;</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *msg;</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn send display&quot;</span>;</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;         <span class="stringliteral">&quot;Usage: misdn send display &lt;channel&gt; \&quot;&lt;msg&gt;\&quot; \n&quot;</span></div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;         <span class="stringliteral">&quot;       Send &lt;msg&gt; to &lt;channel&gt; as Display Message\n&quot;</span></div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;         <span class="stringliteral">&quot;       when channel is a mISDN channel\n&quot;</span>;</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a>(a);</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;   }</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5) {</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;   }</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;   channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;   msg = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Sending %s to %s\n&quot;</span>, msg, channame);</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;   tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;   <span class="keywordflow">if</span> (tmp &amp;&amp; tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>) {</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>, msg, <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>));</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a>);</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Done sending display&quot;</span>);</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Display failed&quot;</span>);</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;      }</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such channel %s\n&quot;</span>, channame);</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;   }</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1d27aae6bd9100e5a4d36c20f84e146"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a></div><div class="ttdeci">static struct chan_list * get_chan_by_ast_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00786">chan_misdn.c:786</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a89b6e11f1f5add3aec515c40e0cbc44c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">misdn_bchannel::display</a></div><div class="ttdeci">char display[84]</div><div class="ttdoc">Display message that can be displayed by the user phone. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00642">isdn_lib.h:642</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a587673fb51095846ac3555b69500c852"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a></div><div class="ttdeci">static char * complete_ch(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05654">chan_misdn.c:5654</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00154">isdn_lib.h:154</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc0f2b80f48cbb51ff8fbfccc5316ccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc0f2b80f48cbb51ff8fbfccc5316ccb">&#9670;&nbsp;</a></span>handle_cli_misdn_send_facility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_send_facility </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05183">5183</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">complete_ch()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l00220">dummy()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00129">EVENT_REGISTER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00065">misdn_lib_port_is_nt()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00077">misdn_make_dummy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;{</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channame;</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *nr;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;   <span class="keywordtype">int</span> port;</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *served_nr;</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> <a class="code" href="../../d1/d6d/chan__unistim_8c.html#abc0ce15d00b4bfb69266c5fd016dc88c">dummy</a>, *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>=&amp;<a class="code" href="../../d1/d6d/chan__unistim_8c.html#abc0ce15d00b4bfb69266c5fd016dc88c">dummy</a>;</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;   <span class="keywordtype">unsigned</span> max_len;</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn send facility&quot;</span>;</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: misdn send facility &lt;type&gt; &lt;channel|port&gt; \&quot;&lt;args&gt;\&quot; \n&quot;</span></div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;      <span class="stringliteral">&quot;\t type is one of:\n&quot;</span></div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      <span class="stringliteral">&quot;\t - calldeflect\n&quot;</span></div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;      <span class="stringliteral">&quot;\t - callrerouting\n&quot;</span></div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="stringliteral">&quot;\t - CFActivate\n&quot;</span></div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;      <span class="stringliteral">&quot;\t - CFDeactivate\n&quot;</span>;</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a>(a);</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;   }</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 5) {</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;   }</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;   <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;calldeflect&quot;</span>)) {</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 6) {</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;calldeflect requires 1 arg: ToNumber\n\n&quot;</span>);</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      }</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;      channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;      nr = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5];</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending Calldeflection (%s) to %s\n&quot;</span>, nr, channame);</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;      tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;      <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending CD with nr %s to %s failed: Channel does not exist.\n&quot;</span>, nr, channame);</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;      }</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tmp);</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;      max_len = <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Number) - 1;</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(nr)) {</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending CD with nr %s to %s failed: Number too long (up to %u digits are allowed).\n&quot;</span>,</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;            nr, channame, max_len);</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Number too long&quot;</span>);</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;      }</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CallDeflection;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUserPresent = 1;</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUser = 0;</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.LengthOfNumber = strlen(nr);</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      strcpy((<span class="keywordtype">char</span> *) tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Number, nr);</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Subaddress.Length = 0;</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;      max_len = <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.DeflectedToNumber) - 1;</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(nr)) {</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending CD with nr %s to %s failed: Number too long (up to %u digits are allowed).\n&quot;</span>,</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;            nr, channame, max_len);</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Number too long&quot;</span>);</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;      }</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CD;</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.PresentationAllowed = 0;</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;      <span class="comment">//tmp-&gt;bc-&gt;fac_out.u.CDeflection.DeflectedToSubaddress[0] = 0;</span></div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;      strcpy((<span class="keywordtype">char</span> *) tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.DeflectedToNumber, nr);</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Send facility complete&quot;</span>);</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;callrerouteing&quot;</span>) || strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;callrerouting&quot;</span>)) {</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 6) {</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;callrerouting requires 1 arg: ToNumber\n\n&quot;</span>);</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;      }</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;      channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;      nr = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5];</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending Callrerouting (%s) to %s\n&quot;</span>, nr, channame);</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;      tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;      <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending Call Rerouting with nr %s to %s failed: Channel does not exist.\n&quot;</span>, nr, channame);</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;      }</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tmp);</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;      max_len = <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Number) - 1;</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(nr)) {</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending Call Rerouting with nr %s to %s failed: Number too long (up to %u digits are allowed).\n&quot;</span>,</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;            nr, channame, max_len);</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Number too long&quot;</span>);</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;      }</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CallRerouteing;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.ReroutingReason = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.ReroutingCounter = 1;</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.LengthOfNumber = strlen(nr);</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;      strcpy((<span class="keywordtype">char</span> *) tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Number, nr);</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Subaddress.Length = 0;</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CallingPartySubaddress.Length = 0;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      <span class="comment">/* 0x90 0x90 0xa3 3.1 kHz audio, circuit mode, 64kbit/sec, level1/a-Law */</span></div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Length = 3;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[0] = 0x90;</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[1] = 0x90;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[2] = 0xa3;</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Hlc.Length = 0;</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Llc.Length = 0;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.UserInfo.Length = 0;</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.LastRerouting.Type = 1;<span class="comment">/* presentationRestricted */</span></div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;      tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.SubscriptionOption = 0;<span class="comment">/* no notification to caller */</span></div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Send facility complete&quot;</span>);</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;CFActivate&quot;</span>)) {</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 7) {</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;CFActivate requires 2 args: 1.FromNumber, 2.ToNumber\n\n&quot;</span>);</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      }</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;      port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      served_nr = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5];</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;      nr = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[6];</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#aeb7cfd0342e0a820eb3d7302401c9c74">misdn_make_dummy</a>(bc, port, 0, <a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(port), 0);</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending CFActivate  Port:(%d) FromNr. (%s) to Nr. (%s)\n&quot;</span>, port, served_nr, nr);</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_ActivationDiversion;</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.BasicService = 0;<span class="comment">/* allServices */</span></div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.Procedure = 0;<span class="comment">/* cfu (Call Forward Unconditional) */</span></div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ServedUser.Number,</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;         served_nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ServedUser.Number));</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ServedUser.LengthOfNumber =</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;         strlen((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ServedUser.Number);</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ServedUser.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Party.Number,</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;         nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Party.Number));</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Party.LengthOfNumber =</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;         strlen((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Party.Number);</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Party.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.ActivationDiversion.Component.Invoke.ForwardedTo.Subaddress.Length = 0;</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CFActivate;</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.BasicService = 0; <span class="comment">/* All Services */</span></div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.Procedure = 0; <span class="comment">/* Unconditional */</span></div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ServedUserNumber, served_nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ServedUserNumber));</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ForwardedToNumber, nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ForwardedToNumber));</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;CFDeactivate&quot;</span>)) {</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 6) {</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;CFDeactivate requires 1 arg: FromNumber\n\n&quot;</span>);</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;      }</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;      port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      served_nr = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5];</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#aeb7cfd0342e0a820eb3d7302401c9c74">misdn_make_dummy</a>(bc, port, 0, <a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(port), 0);</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Sending CFDeactivate  Port:(%d) FromNr. (%s)\n&quot;</span>, port, served_nr);</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_DeactivationDiversion;</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.BasicService = 0;<span class="comment">/* allServices */</span></div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.Procedure = 0;<span class="comment">/* cfu (Call Forward Unconditional) */</span></div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.ServedUser.Number,</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;         served_nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.ServedUser.Number));</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.ServedUser.LengthOfNumber =</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;         strlen((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.ServedUser.Number);</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DeactivationDiversion.Component.Invoke.ServedUser.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CFDeactivate;</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFDeactivate.BasicService = 0; <span class="comment">/* All Services */</span></div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFDeactivate.Procedure = 0; <span class="comment">/* Unconditional */</span></div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ServedUserNumber, served_nr, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CFActivate.ServedUserNumber));</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS) &amp;&amp; defined(CCBS_TEST_MESSAGES)</span></div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;test&quot;</span>)) {</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;      <span class="keywordtype">int</span> msg_number;</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 5) {</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;test (&lt;port&gt; [&lt;msg#&gt;]) | (&lt;channel-name&gt; &lt;msg#&gt;)\n\n&quot;</span>);</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;      }</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;      port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;      channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4];</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;      tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;      <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;         <span class="comment">/* We are going to send this FACILITY message out on an existing connection */</span></div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;         msg_number = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5]);</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;         <span class="keywordflow">if</span> (msg_number &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(Fac_Msgs)) {</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tmp);</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;            tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a> = Fac_Msgs[msg_number];</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;            <span class="comment">/* Send message */</span></div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tmp);</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;test &lt;channel-name&gt; &lt;msg#&gt;\n\n&quot;</span>);</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;         }</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Facility test done&quot;</span>);</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 6) {</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;         <span class="keywordflow">for</span> (msg_number = 0; msg_number &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(Fac_Msgs); ++msg_number) {</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#aeb7cfd0342e0a820eb3d7302401c9c74">misdn_make_dummy</a>(bc, port, 0, <a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(port), 0);</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a> = Fac_Msgs[msg_number];</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;            <span class="comment">/* Send message */</span></div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;            sleep(1);</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;         }</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;         msg_number = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5]);</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;         <span class="keywordflow">if</span> (msg_number &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(Fac_Msgs)) {</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#aeb7cfd0342e0a820eb3d7302401c9c74">misdn_make_dummy</a>(bc, port, 0, <a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(port), 0);</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a> = Fac_Msgs[msg_number];</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;            <span class="comment">/* Send message */</span></div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;            <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;test &lt;port&gt; [&lt;msg#&gt;]\n\n&quot;</span>);</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;         }</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;      }</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;register&quot;</span>)) {</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 5) {</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;register &lt;port&gt;\n\n&quot;</span>);</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;      }</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;      port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;      bc = misdn_lib_get_register_bc(port);</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;      <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;         <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Could not allocate REGISTER bc struct\n\n&quot;</span>);</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;      }</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a> = Fac_Msgs[45];</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4">EVENT_REGISTER</a>);</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) &amp;&amp; defined(CCBS_TEST_MESSAGES) */</span><span class="preprocessor"></span></div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;   }</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a53d4e0b7243f3f08495f6642de59b0c4">EVENT_REGISTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00129">isdn_lib.h:129</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="chan__unistim_8c_html_abc0ce15d00b4bfb69266c5fd016dc88c"><div class="ttname"><a href="../../d1/d6d/chan__unistim_8c.html#abc0ce15d00b4bfb69266c5fd016dc88c">dummy</a></div><div class="ttdeci">static void dummy(char *unused,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/chan__unistim_8c_source.html#l00220">chan_unistim.c:220</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_aeb7cfd0342e0a820eb3d7302401c9c74"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#aeb7cfd0342e0a820eb3d7302401c9c74">misdn_make_dummy</a></div><div class="ttdeci">void misdn_make_dummy(struct misdn_bchannel *dummybc, int port, int l3id, int nt, int channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00077">isdn_lib.c:77</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1d27aae6bd9100e5a4d36c20f84e146"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a></div><div class="ttdeci">static struct chan_list * get_chan_by_ast_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00786">chan_misdn.c:786</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00151">isdn_lib.h:151</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a587673fb51095846ac3555b69500c852"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a></div><div class="ttdeci">static char * complete_ch(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05654">chan_misdn.c:5654</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_af7c94af767216508e15fd4f55131abc1"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a></div><div class="ttdeci">int misdn_lib_port_is_nt(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00065">isdn_lib.c:65</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af373345bae361170d11185836212d3c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af373345bae361170d11185836212d3c0">&#9670;&nbsp;</a></span>handle_cli_misdn_send_restart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_send_restart </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05477">5477</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00411">misdn_bchannel::channel</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03943">misdn_lib_send_restart()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;{</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn send restart&quot;</span>;</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;         <span class="stringliteral">&quot;Usage: misdn send restart [port [channel]]\n&quot;</span></div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;         <span class="stringliteral">&quot;       Send a restart for every bchannel on the given port.\n&quot;</span>;</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;   }</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4 || a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 5) {</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;   }</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;   port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      channel = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a5eece989af344908ee385f23239508da">misdn_lib_send_restart</a>(port, channel);</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a5eece989af344908ee385f23239508da">misdn_lib_send_restart</a>(port, -1);</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;   }</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a5eece989af344908ee385f23239508da"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a5eece989af344908ee385f23239508da">misdn_lib_send_restart</a></div><div class="ttdeci">int misdn_lib_send_restart(int port, int channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03943">isdn_lib.c:3943</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">misdn_bchannel::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Assigned B channel number B1, B2... 0 if not assigned. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00411">isdn_lib.h:411</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a088af39453d5a46a5bdedb4e2f3a2d85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088af39453d5a46a5bdedb4e2f3a2d85">&#9670;&nbsp;</a></span>handle_cli_misdn_set_crypt_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_set_crypt_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03807">3807</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;{</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn set crypt debug&quot;</span>;</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;         <span class="stringliteral">&quot;Usage: misdn set crypt debug &lt;level&gt;\n&quot;</span></div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;         <span class="stringliteral">&quot;       Set the crypt debug level of the mISDN channel. Level\n&quot;</span></div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;         <span class="stringliteral">&quot;       must be 1 or 2.\n&quot;</span>;</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;   }</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5) {</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   }</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;   <span class="comment">/* XXX Is this supposed to not do anything? XXX */</span></div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab50fd3a696f51032d456c1d98bfca6e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab50fd3a696f51032d456c1d98bfca6e6">&#9670;&nbsp;</a></span>handle_cli_misdn_set_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_set_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03720">3720</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05659">complete_debug_port()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00696">max_ports</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;{</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;   <span class="keywordtype">int</span> level;</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn set debug [on|off]&quot;</span>;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;         <span class="stringliteral">&quot;Usage: misdn set debug {on|off|&lt;level&gt;} [only] | [port &lt;port&gt; [only]]\n&quot;</span></div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;         <span class="stringliteral">&quot;       Set the debug level of the mISDN channel.\n&quot;</span>;</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a09b42d3fd17449bf47d6d5f539fdcfea">complete_debug_port</a>(a);</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;   }</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 4 || a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 7) {</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;   }</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;      level = 1;</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;off&quot;</span>)) {</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;      level = 0;</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isdigit(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3][0])) {</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      level = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;   }</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;   <span class="keywordflow">switch</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>) {</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;   <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;   <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      {</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;         <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;         <span class="keywordtype">int</span> only = 0;</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;         <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;            <span class="keywordflow">if</span> (strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;only&quot;</span>, strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]))) {</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;               only = 1;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;            }</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;         }</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;         <span class="keywordflow">for</span> (i = 0; i &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[i] = level;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[i] = only;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;         }</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;changing debug level for all ports to %d%s\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0], only ? <span class="stringliteral">&quot; (only)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      }</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;   <span class="keywordflow">case</span> 6:</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;   <span class="keywordflow">case</span> 7:</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      {</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;         <span class="keywordflow">if</span> (strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;port&quot;</span>, strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4])))</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;         port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5]);</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;         <span class="keywordflow">if</span> (port &lt;= 0 || port &gt; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>) {</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;            <span class="keywordflow">switch</span> (max_ports) {</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;            <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;port number not valid! no ports available so you won&#39;t get lucky with any number here...\n&quot;</span>);</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;            <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;port number not valid! only port 1 is available.\n&quot;</span>);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;port number not valid! only ports 1 to %d are available.\n&quot;</span>, max_ports);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;            }</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;         }</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;         <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 7) {</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;            <span class="keywordflow">if</span> (strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[6], <span class="stringliteral">&quot;only&quot;</span>, strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[6]))) {</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>] = 1;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;            }</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>] = 0;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;         }</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>] = level;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;changing debug level to %d%s for port %d\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port], <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[port] ? <span class="stringliteral">&quot; (only)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, port);</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      }</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;   }</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a24bb5f2898b28cecc69c86bb429f7517"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></div><div class="ttdeci">static int max_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00696">chan_misdn.c:696</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a09b42d3fd17449bf47d6d5f539fdcfea"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a09b42d3fd17449bf47d6d5f539fdcfea">complete_debug_port</a></div><div class="ttdeci">static char * complete_debug_port(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05659">chan_misdn.c:5659</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c9cecde93e23c09aa13dddfbdff9e1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c9cecde93e23c09aa13dddfbdff9e1d">&#9670;&nbsp;</a></span>handle_cli_misdn_set_tics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_set_tics </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04339">4339</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00612">MAXTICS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;{</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn set tics&quot;</span>;</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;         <span class="stringliteral">&quot;Usage: misdn set tics &lt;value&gt;\n&quot;</span>;</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;   }</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;   }</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;   <span class="comment">/* XXX Wow, this does... a whole lot of nothing... XXX */</span></div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a224bdc46e70553698ba782d725622717">MAXTICS</a> = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a224bdc46e70553698ba782d725622717"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a224bdc46e70553698ba782d725622717">MAXTICS</a></div><div class="ttdeci">int MAXTICS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00612">chan_misdn.c:612</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cc6b3a80dd616a738acfdba302802ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cc6b3a80dd616a738acfdba302802ab">&#9670;&nbsp;</a></span>handle_cli_misdn_show_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04303">4303</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">complete_ch()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">print_bc_info()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;{</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show channel&quot;</span>;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show channel &lt;channel&gt;\n&quot;</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;         <span class="stringliteral">&quot;       Show an internal mISDN channel\n.&quot;</span>;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a>(a);</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   }</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;   }</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a> = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      <span class="keywordflow">if</span> (bc &amp;&amp; ast) {</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3])) {</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae748f83e6f424de7b039a8079f707fd4">print_bc_info</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, help, bc);</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;         }</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;      }</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;   }</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a587673fb51095846ac3555b69500c852"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a></div><div class="ttdeci">static char * complete_ch(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05654">chan_misdn.c:5654</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae748f83e6f424de7b039a8079f707fd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae748f83e6f424de7b039a8079f707fd4">print_bc_info</a></div><div class="ttdeci">static void print_bc_info(int fd, struct chan_list *help, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04167">chan_misdn.c:4167</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa200e4b6d6e9cccf37cbc64956c08c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa200e4b6d6e9cccf37cbc64956c08c44">&#9670;&nbsp;</a></span>handle_cli_misdn_show_channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_channels </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04230">4230</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00368">hold_info::channel</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00483">misdn_dump_chanlist()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">print_bc_info()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;{</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *help;</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show channels&quot;</span>;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show channels\n&quot;</span></div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;         <span class="stringliteral">&quot;       Show the internal mISDN channel list\n&quot;</span>;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   }</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;   }</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Channel List: %p\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>);</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;<span class="comment">    * Walking the list and dumping the channel information could</span></div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;<span class="comment">    * take awhile.  With the list locked for the duration, the</span></div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;<span class="comment">    * channel driver cannot process signaling messages.  However,</span></div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;<span class="comment">    * since this is a CLI command it should not be run very often.</span></div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;   <span class="keywordflow">for</span> (help = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; help; help = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a> = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;      <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;         <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;chan_list obj. with l3id:%x has no bc and no ast Leg\n&quot;</span>, help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>);</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;         }</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;bc with pid:%d has no Ast Leg\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;      }</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0] &gt; 2) {</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Bc:%p Ast:%p\n&quot;</span>, bc, ast);</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;      }</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      <span class="keywordflow">if</span> (bc) {</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae748f83e6f424de7b039a8079f707fd4">print_bc_info</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, help, bc);</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;         <span class="keywordflow">if</span> (help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;ITS A HELD CALL BC:\n&quot;</span>);</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot; --&gt; l3_id: %x\n&quot;</span></div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;               <span class="stringliteral">&quot; --&gt; dialed:%s\n&quot;</span></div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;               <span class="stringliteral">&quot; --&gt; caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span></div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;               <span class="stringliteral">&quot; --&gt; hold_port: %d\n&quot;</span></div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;               <span class="stringliteral">&quot; --&gt; hold_channel: %d\n&quot;</span>,</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;               help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>,</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;               help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;               help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a></div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;               );</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;* Channel in unknown STATE !!! Exten:%s, Callerid:%s\n&quot;</span>,</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;         }</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      }</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;   }</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a31360d1850c8039cf700033c1c44edba">misdn_dump_chanlist</a>();</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="isdn__lib_8c_html_a31360d1850c8039cf700033c1c44edba"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a31360d1850c8039cf700033c1c44edba">misdn_dump_chanlist</a></div><div class="ttdeci">void misdn_dump_chanlist(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00483">isdn_lib.c:483</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae748f83e6f424de7b039a8079f707fd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae748f83e6f424de7b039a8079f707fd4">print_bc_info</a></div><div class="ttdeci">static void print_bc_info(int fd, struct chan_list *help, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04167">chan_misdn.c:4167</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structhold__info_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../de/d5b/structhold__info.html#adf7dff2c57c0da9a4a2b70e3e815be31">hold_info::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Original B channel number the HELD call was using. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00368">chan_misdn.c:368</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7a7a56c1723165b4ed390f23a1b66bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7a7a56c1723165b4ed390f23a1b66bb">&#9670;&nbsp;</a></span>handle_cli_misdn_show_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03987">3987</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05682">complete_show_config()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00030">MISDN_CFG_FIRST</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00805">misdn_cfg_get_config_string()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00634">misdn_cfg_get_elem()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00737">misdn_cfg_is_port_valid()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">MISDN_CFG_LAST</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00106">MISDN_GEN_FIRST</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00121">MISDN_GEN_LAST</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::ok</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03962">show_config_description()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;{</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;   <span class="keywordtype">char</span> buffer[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem;</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;   <span class="keywordtype">int</span> linebreak;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;   <span class="keywordtype">int</span> onlyport = -1;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   <span class="keywordtype">int</span> ok = 0;</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show config&quot;</span>;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show config [&lt;port&gt; | description &lt;config element&gt; | descriptions [general|ports]]\n&quot;</span></div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;         <span class="stringliteral">&quot;       Use 0 for &lt;port&gt; to only print the general config.\n&quot;</span>;</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afdfbb2708952028d36e77743a6863ca5">complete_show_config</a>(a);</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   }</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt;= 4) {</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;      <span class="keywordflow">if</span> (!strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;description&quot;</span>)) {</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;         <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;            <span class="keyword">enum</span> <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a46bc08092d9417e582c993fc96c2151e">misdn_cfg_get_elem</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            <span class="keywordflow">if</span> (elem == <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a>) {</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Unknown element: %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a316a60c7bff187078c5dc4b396c483c4">show_config_description</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, elem);</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;            }</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;         }</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;descriptions&quot;</span>)) {</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;         <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4) || ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) &amp;&amp; !strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;general&quot;</span>))) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;            <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a> + 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>; ++elem) {</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a316a60c7bff187078c5dc4b396c483c4">show_config_description</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, elem);</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;            }</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;            ok = 1;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;         }</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;         <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4) || ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) &amp;&amp; !strcmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;ports&quot;</span>))) {</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;            <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> + 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a> - 1 <span class="comment">/* the ptp hack, remove the -1 when ptp is gone */</span>; ++elem) {</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a316a60c7bff187078c5dc4b396c483c4">show_config_description</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, elem);</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            }</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;            ok = 1;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;         }</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;         <span class="keywordflow">return</span> ok ? <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a> : <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!sscanf(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;%5d&quot;</span>, &amp;onlyport) || onlyport &lt; 0) {</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Unknown option: %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      }</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;   }</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3 || onlyport == 0) {</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;mISDN General-Config:\n&quot;</span>);</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a> + 1, linebreak = 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a>; elem++, linebreak++) {</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac61399fce05fb3fceea23627e48a7769">misdn_cfg_get_config_string</a>(0, elem, buffer, <span class="keyword">sizeof</span>(buffer));</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-36s%s&quot;</span>, buffer, !(linebreak % 2) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;      }</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;   }</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;   <span class="keywordflow">if</span> (onlyport &lt; 0) {</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;      <span class="keywordtype">int</span> port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0);</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;      <span class="keywordflow">for</span> (; port &gt; 0; port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n[PORT %d]\n&quot;</span>, port);</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;         <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> + 1, linebreak = 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>; elem++, linebreak++) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac61399fce05fb3fceea23627e48a7769">misdn_cfg_get_config_string</a>(port, elem, buffer, <span class="keyword">sizeof</span>(buffer));</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-36s%s&quot;</span>, buffer, !(linebreak % 2) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;         }</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;      }</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   }</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;   <span class="keywordflow">if</span> (onlyport &gt; 0) {</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a>(onlyport)) {</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;[PORT %d]\n&quot;</span>, onlyport);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;         <span class="keywordflow">for</span> (elem = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a> + 1, linebreak = 1; elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>; elem++, linebreak++) {</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac61399fce05fb3fceea23627e48a7769">misdn_cfg_get_config_string</a>(onlyport, elem, buffer, <span class="keyword">sizeof</span>(buffer));</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-36s%s&quot;</span>, buffer, !(linebreak % 2) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;         }</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Port %d is not active!\n&quot;</span>, onlyport);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;      }</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;   }</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac61399fce05fb3fceea23627e48a7769"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac61399fce05fb3fceea23627e48a7769">misdn_cfg_get_config_string</a></div><div class="ttdeci">void misdn_cfg_get_config_string(int port, enum misdn_cfg_elements elem, char *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00805">misdn_config.c:805</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a></div><div class="ttdeci">misdn_cfg_elements</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00027">chan_misdn_config.h:27</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab08e8e7e093f022d1a156fe2d6ebdf45"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab08e8e7e093f022d1a156fe2d6ebdf45">misdn_cfg_is_port_valid</a></div><div class="ttdeci">int misdn_cfg_is_port_valid(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00737">misdn_config.c:737</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a316a60c7bff187078c5dc4b396c483c4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a316a60c7bff187078c5dc4b396c483c4">show_config_description</a></div><div class="ttdeci">static void show_config_description(int fd, enum misdn_cfg_elements elem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03962">chan_misdn.c:3962</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">chan_misdn_config.h:103</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afdfbb2708952028d36e77743a6863ca5"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afdfbb2708952028d36e77743a6863ca5">complete_show_config</a></div><div class="ttdeci">static char * complete_show_config(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05682">chan_misdn.c:5682</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a46bc08092d9417e582c993fc96c2151e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a46bc08092d9417e582c993fc96c2151e">misdn_cfg_get_elem</a></div><div class="ttdeci">enum misdn_cfg_elements misdn_cfg_get_elem(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00634">misdn_config.c:634</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab150c41adf9cecd32d381a5c1ff16dab">MISDN_CFG_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00030">chan_misdn_config.h:30</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa50f2df70cb915612835a13a49c5fef81">MISDN_GEN_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00106">chan_misdn_config.h:106</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabeb4c50c2d53fffe39ee8c2fcc4cbc80">MISDN_GEN_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00121">chan_misdn_config.h:121</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c2e64d521381dcdd6c47f97df0fbe3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c2e64d521381dcdd6c47f97df0fbe3f">&#9670;&nbsp;</a></span>handle_cli_misdn_show_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04421">4421</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00168">get_show_stack_details()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;{</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;   <span class="keywordtype">int</span> port;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128];</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show port&quot;</span>;</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show port &lt;port&gt;\n&quot;</span></div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;         <span class="stringliteral">&quot;       Show detailed information for given port.\n&quot;</span>;</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;   }</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   }</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;   port = atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;BEGIN STACK_LIST:\n&quot;</span>);</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a43a4d64b314f634eabc3589c0d5fa0b9">get_show_stack_details</a>(port, buf);</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  %s  Debug:%d%s\n&quot;</span>, buf, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port], <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[port] ? <span class="stringliteral">&quot;(only)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a43a4d64b314f634eabc3589c0d5fa0b9"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a43a4d64b314f634eabc3589c0d5fa0b9">get_show_stack_details</a></div><div class="ttdeci">void get_show_stack_details(int port, char *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00168">isdn_lib.c:168</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a845bf2a632c4fd85f78bd229d731800a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a845bf2a632c4fd85f78bd229d731800a">&#9670;&nbsp;</a></span>handle_cli_misdn_show_ports_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_ports_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04392">4392</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;{</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;   <span class="keywordtype">int</span> port;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show ports stats&quot;</span>;</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show ports stats\n&quot;</span></div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;         <span class="stringliteral">&quot;       Show mISDNs channel&#39;s call statistics per port.\n&quot;</span>;</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;   }</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   }</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Port\tin_calls\tout_calls\n&quot;</span>);</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;   <span class="keywordflow">for</span> (port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0); port &gt; 0;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;      port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d\t%d\t\t%d\n&quot;</span>, port, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[port], <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[port]);</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;   }</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9c2c4a2ba8cb107e5e3c35e138a3a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c2c4a2ba8cb107e5e3c35e138a3a1a">&#9670;&nbsp;</a></span>handle_cli_misdn_show_stacks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_show_stacks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04361">4361</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00168">get_show_stack_details()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;{</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;   <span class="keywordtype">int</span> port;</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn show stacks&quot;</span>;</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;         <span class="stringliteral">&quot;Usage: misdn show stacks\n&quot;</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;         <span class="stringliteral">&quot;       Show internal mISDN stack_list.\n&quot;</span>;</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;   }</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;   }</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;BEGIN STACK_LIST:\n&quot;</span>);</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;   <span class="keywordflow">for</span> (port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0); port &gt; 0;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128];</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a43a4d64b314f634eabc3589c0d5fa0b9">get_show_stack_details</a>(port, buf);</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  %s  Debug:%d%s\n&quot;</span>, buf, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[port], <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[port] ? <span class="stringliteral">&quot;(only)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;   }</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a43a4d64b314f634eabc3589c0d5fa0b9"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a43a4d64b314f634eabc3589c0d5fa0b9">get_show_stack_details</a></div><div class="ttdeci">void get_show_stack_details(int port, char *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00168">isdn_lib.c:168</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2608d464a598e6c863f0e98c17f0b55e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2608d464a598e6c863f0e98c17f0b55e">&#9670;&nbsp;</a></span>handle_cli_misdn_toggle_echocancel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_misdn_toggle_echocancel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05564">5564</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05654">complete_ch()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00786">get_chan_by_ast_name()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04677">manager_ec_disable()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04628">manager_ec_enable()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00425">chan_list::toggle_ec</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05903">update_ec_config()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;{</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *channame;</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;misdn toggle echocancel&quot;</span>;</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;         <span class="stringliteral">&quot;Usage: misdn toggle echocancel &lt;channel&gt;\n&quot;</span></div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;         <span class="stringliteral">&quot;       Toggle EchoCancel on mISDN Channel.\n&quot;</span>;</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a>(a);</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;   }</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;   }</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;   channame = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Toggling EchoCancel on %s\n&quot;</span>, channame);</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;   tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a>(channame);</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Toggling EchoCancel %s failed Channel does not exist\n&quot;</span>, channame);</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;   }</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a35d28f76cf61d199a5364a5c8c34e2fe">toggle_ec</a> = tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a35d28f76cf61d199a5364a5c8c34e2fe">toggle_ec</a> ? 0 : 1;</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a35d28f76cf61d199a5364a5c8c34e2fe">toggle_ec</a>) {</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;<span class="preprocessor">#ifdef MISDN_1_2</span></div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;      update_pipeline_config(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a870ab6bac01ce35f615fbfe7386f8319">update_ec_config</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a7e7944bc36ef8fe8e943ac12c2fea749">manager_ec_enable</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a1801c58b6e467b4ef0d75aff37aa77f2">manager_ec_disable</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;   }</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(tmp, <span class="stringliteral">&quot;Done toggling echo cancel&quot;</span>);</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_a7e7944bc36ef8fe8e943ac12c2fea749"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a7e7944bc36ef8fe8e943ac12c2fea749">manager_ec_enable</a></div><div class="ttdeci">void manager_ec_enable(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04628">isdn_lib.c:4628</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1d27aae6bd9100e5a4d36c20f84e146"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1d27aae6bd9100e5a4d36c20f84e146">get_chan_by_ast_name</a></div><div class="ttdeci">static struct chan_list * get_chan_by_ast_name(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00786">chan_misdn.c:786</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a1801c58b6e467b4ef0d75aff37aa77f2"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a1801c58b6e467b4ef0d75aff37aa77f2">manager_ec_disable</a></div><div class="ttdeci">void manager_ec_disable(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04677">isdn_lib.c:4677</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a587673fb51095846ac3555b69500c852"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a587673fb51095846ac3555b69500c852">complete_ch</a></div><div class="ttdeci">static char * complete_ch(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05654">chan_misdn.c:5654</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a870ab6bac01ce35f615fbfe7386f8319"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a870ab6bac01ce35f615fbfe7386f8319">update_ec_config</a></div><div class="ttdeci">static int update_ec_config(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05903">chan_misdn.c:5903</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="structchan__list_html_a35d28f76cf61d199a5364a5c8c34e2fe"><div class="ttname"><a href="../../df/d00/structchan__list.html#a35d28f76cf61d199a5364a5c8c34e2fe">chan_list::toggle_ec</a></div><div class="ttdeci">int toggle_ec</div><div class="ttdoc">TRUE if echo canceller is enabled. Value is toggled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00425">chan_misdn.c:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8bfd9eaf966babb8dce679b5e909cc01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bfd9eaf966babb8dce679b5e909cc01">&#9670;&nbsp;</a></span>hangup_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void hangup_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08447">8447</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01166">ast_queue_hangup_with_cause()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00671">misdn_bchannel::cause</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00032">cb_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_list::need_hangup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_list::need_queue_hangup</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08725">send_cause2ast()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d2e/core__unreal_8c_source.html#l01018">ast_unreal_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">start_pbx()</a>.</p>
<div class="fragment"><div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;{</div><div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;   <span class="keywordtype">int</span> port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;</div><div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(1, port, <span class="stringliteral">&quot;Cannot hangup chan, no ch\n&quot;</span>);</div><div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;   }</div><div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;</div><div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(5, port, <span class="stringliteral">&quot;hangup_chan called\n&quot;</span>);</div><div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;</div><div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a>) {</div><div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(2, port, <span class="stringliteral">&quot; --&gt; hangup\n&quot;</span>);</div><div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a> = 0;</div><div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">need_queue_hangup</a> = 0;</div><div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> &amp;&amp; <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb7c4bdc49a560ef361a1cba4b792ef2">send_cause2ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc, ch)) {</div><div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;      }</div><div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;   }</div><div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;</div><div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;   <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">need_queue_hangup</a>) {</div><div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(2, port, <span class="stringliteral">&quot; --&gt; No need to queue hangup\n&quot;</span>);</div><div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;   }</div><div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;</div><div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">need_queue_hangup</a> = 0;</div><div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb7c4bdc49a560ef361a1cba4b792ef2">send_cause2ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc, ch)) {</div><div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(2, port, <span class="stringliteral">&quot; --&gt; queue_hangup\n&quot;</span>);</div><div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;      }</div><div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(1, port, <span class="stringliteral">&quot;Cannot hangup chan, no ast\n&quot;</span>);</div><div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;   }</div><div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;}</div><div class="ttc" id="structchan__list_html_ab8aa4ba47ba9bd53b22a8c30af419827"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">chan_list::need_hangup</a></div><div class="ttdeci">int need_hangup</div><div class="ttdoc">TRUE if a channel can be hung up by calling asterisk directly when done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_misdn.c:397</a></div></div>
<div class="ttc" id="structchan__list_html_ac87f5939f5f9aa3c026c84d17040660f"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">chan_list::need_queue_hangup</a></div><div class="ttdeci">int need_queue_hangup</div><div class="ttdoc">TRUE if a hangup needs to be queued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_misdn.c:392</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="channel_8h_html_a91e78b15da3244307ffd749fa85f4db7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a></div><div class="ttdeci">int ast_queue_hangup_with_cause(struct ast_channel *chan, int cause)</div><div class="ttdoc">Queue a hangup frame with hangupcause set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01166">channel.c:1166</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afb7c4bdc49a560ef361a1cba4b792ef2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afb7c4bdc49a560ef361a1cba4b792ef2">send_cause2ast</a></div><div class="ttdeci">static int send_cause2ast(struct ast_channel *ast, struct misdn_bchannel *bc, struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08725">chan_misdn.c:8725</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">misdn_bchannel::cause</a></div><div class="ttdeci">int cause</div><div class="ttdoc">Q.931 Cause for disconnection code (received) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00671">isdn_lib.h:671</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abef6c81cea5f1eccbaaf0007a6750e21"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a></div><div class="ttdeci">void(* cb_log)(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00032">isdn_lib.c:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a3eb36bbe9b4f4fc50f1144f4426746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3eb36bbe9b4f4fc50f1144f4426746">&#9670;&nbsp;</a></span>hanguptone_indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void hanguptone_indicate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">7738</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04596">misdn_lib_send_tone()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00069">TONE_HANGUP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">misdn_overlap_dial_task()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">start_pbx()</a>.</p>
<div class="fragment"><div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;{</div><div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0ae7cb3ebbb16132ba484d6c4566d006">misdn_lib_send_tone</a>(cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#a3252ee16ff4db6f40f149d91392d422aaf83c9b163aec1068e1e500796951037c">TONE_HANGUP</a>);</div><div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_a3252ee16ff4db6f40f149d91392d422aaf83c9b163aec1068e1e500796951037c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3252ee16ff4db6f40f149d91392d422aaf83c9b163aec1068e1e500796951037c">TONE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00069">isdn_lib.h:69</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0ae7cb3ebbb16132ba484d6c4566d006"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0ae7cb3ebbb16132ba484d6c4566d006">misdn_lib_send_tone</a></div><div class="ttdeci">void misdn_lib_send_tone(struct misdn_bchannel *bc, enum tone_e tone)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04596">isdn_lib.c:4596</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacab4ba06a4bae692a7752b56f2d02fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacab4ba06a4bae692a7752b56f2d02fe">&#9670;&nbsp;</a></span>import_ch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void import_ch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Import parameters from the dialplan environment variables. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08786">8786</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00647">misdn_bchannel::keypad</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00470">misdn_bchannel::sending_complete</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00663">misdn_bchannel::uu</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00666">misdn_bchannel::uulen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;{</div><div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;</div><div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;   tmp = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_ADDRESS_COMPLETE&quot;</span>);</div><div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;   <span class="keywordflow">if</span> (tmp &amp;&amp; (atoi(tmp) == 1)) {</div><div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">sending_complete</a> = 1;</div><div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;   }</div><div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;</div><div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;   tmp = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_USERUSER&quot;</span>);</div><div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;   <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;MISDN_USERUSER: %s\n&quot;</span>, tmp);</div><div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>, tmp, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>));</div><div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">uulen</a> = strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>);</div><div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;   }</div><div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;</div><div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;   tmp = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MISDN_KEYPAD&quot;</span>);</div><div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;   <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>, tmp, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>));</div><div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;   }</div><div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;}</div><div class="ttc" id="structmisdn__bchannel_html_a3030517292a60e045b7aeedc419ad180"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">misdn_bchannel::keypad</a></div><div class="ttdeci">char keypad[MISDN_MAX_KEYPAD_LEN]</div><div class="ttdoc">Q.931 Keypad Facility IE contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00647">isdn_lib.h:647</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9b9b9448e634b1536a6bb5bc04438fbf"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">misdn_bchannel::uulen</a></div><div class="ttdeci">int uulen</div><div class="ttdoc">User-User information string length in uu[]. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00666">isdn_lib.h:666</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af85206f753950090e4d86a4fde26c5ed"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">misdn_bchannel::uu</a></div><div class="ttdeci">char uu[256]</div><div class="ttdoc">User-User information string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00663">isdn_lib.h:663</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63e06215600e01fdfb2234581d3457b5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">misdn_bchannel::sending_complete</a></div><div class="ttdeci">int sending_complete</div><div class="ttdoc">TRUE if all digits necessary to complete the call are available. No more INFORMATION messages are nee...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00470">isdn_lib.h:470</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the module. </p>
<p>Module loading including tests for configuration or dependencies. This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE, or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails tests return AST_MODULE_LOAD_FAILURE. If the module can not load the configuration file or other non-critical problem return AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">11315</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00610">ast_register_application</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00729">misdn_lib_iface::cb_event</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12574">chan_misdn_jb_empty()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00129">g_config_initialized</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00127">global_tracefile</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00696">max_ports</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00779">misdn_cfg_get_ports_string()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01203">misdn_cfg_init()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00096">MISDN_CFG_L1_TIMEOUT</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01113">misdn_cfg_update_ptp()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12291">misdn_check_l2l1()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">misdn_facility_exec()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00110">MISDN_GEN_DEBUG</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00120">MISDN_GEN_NTDEBUGFILE</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00119">MISDN_GEN_NTDEBUGFLAGS</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00118">MISDN_GEN_NTKEEPCALLS</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00111">MISDN_GEN_TRACEFILE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03619">misdn_l1_task()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04143">misdn_lib_init()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04094">misdn_lib_maxports_get()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04124">misdn_lib_nt_debug_init()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04112">misdn_lib_nt_keepcalls()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00673">misdn_ports</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03604">misdn_tasks_add()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l11316"></a><span class="lineno">11316</span>&#160;{</div><div class="line"><a name="l11317"></a><span class="lineno">11317</span>&#160;   <span class="keywordtype">int</span> i, port;</div><div class="line"><a name="l11318"></a><span class="lineno">11318</span>&#160;   <span class="keywordtype">int</span> ntflags = 0, ntkc = 0;</div><div class="line"><a name="l11319"></a><span class="lineno">11319</span>&#160;   <span class="keywordtype">char</span> ports[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l11320"></a><span class="lineno">11320</span>&#160;   <span class="keywordtype">char</span> tempbuf[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l11321"></a><span class="lineno">11321</span>&#160;   <span class="keywordtype">char</span> ntfile[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l11322"></a><span class="lineno">11322</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d28/structmisdn__lib__iface.html">misdn_lib_iface</a> iface = {</div><div class="line"><a name="l11323"></a><span class="lineno">11323</span>&#160;      .<a class="code" href="../../dd/d28/structmisdn__lib__iface.html#a76d91d70b7a468109bf9fed16a2e9f88">cb_event</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a848ab2a42c0b12ed8c70a194b3c3cf45">cb_events</a>,</div><div class="line"><a name="l11324"></a><span class="lineno">11324</span>&#160;      .cb_log = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>,</div><div class="line"><a name="l11325"></a><span class="lineno">11325</span>&#160;      .cb_jb_empty = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5d484a16cc6daf0c6d4b8dc1951f8e19">chan_misdn_jb_empty</a>,</div><div class="line"><a name="l11326"></a><span class="lineno">11326</span>&#160;   };</div><div class="line"><a name="l11327"></a><span class="lineno">11327</span>&#160;</div><div class="line"><a name="l11328"></a><span class="lineno">11328</span>&#160;</div><div class="line"><a name="l11329"></a><span class="lineno">11329</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l11330"></a><span class="lineno">11330</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11331"></a><span class="lineno">11331</span>&#160;   }</div><div class="line"><a name="l11332"></a><span class="lineno">11332</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0);</div><div class="line"><a name="l11333"></a><span class="lineno">11333</span>&#160;</div><div class="line"><a name="l11334"></a><span class="lineno">11334</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a09fa0c33c5c8fc7f1317234b3965d7ab">misdn_lib_maxports_get</a>();</div><div class="line"><a name="l11335"></a><span class="lineno">11335</span>&#160;</div><div class="line"><a name="l11336"></a><span class="lineno">11336</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> &lt;= 0) {</div><div class="line"><a name="l11337"></a><span class="lineno">11337</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to initialize mISDN\n&quot;</span>);</div><div class="line"><a name="l11338"></a><span class="lineno">11338</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11339"></a><span class="lineno">11339</span>&#160;   }</div><div class="line"><a name="l11340"></a><span class="lineno">11340</span>&#160;</div><div class="line"><a name="l11341"></a><span class="lineno">11341</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a5cc183f54c105ba066b4f005e3886ba9">misdn_cfg_init</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>, 0)) {</div><div class="line"><a name="l11342"></a><span class="lineno">11342</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to initialize misdn_config.\n&quot;</span>);</div><div class="line"><a name="l11343"></a><span class="lineno">11343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11344"></a><span class="lineno">11344</span>&#160;   }</div><div class="line"><a name="l11345"></a><span class="lineno">11345</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a> = 1;</div><div class="line"><a name="l11346"></a><span class="lineno">11346</span>&#160;</div><div class="line"><a name="l11347"></a><span class="lineno">11347</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l11348"></a><span class="lineno">11348</span>&#160;   misdn_cc_init();</div><div class="line"><a name="l11349"></a><span class="lineno">11349</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l11350"></a><span class="lineno">11350</span>&#160;</div><div class="line"><a name="l11351"></a><span class="lineno">11351</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));</div><div class="line"><a name="l11352"></a><span class="lineno">11352</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>) {</div><div class="line"><a name="l11353"></a><span class="lineno">11353</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory for misdn_debug\n&quot;</span>);</div><div class="line"><a name="l11354"></a><span class="lineno">11354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11355"></a><span class="lineno">11355</span>&#160;   }</div><div class="line"><a name="l11356"></a><span class="lineno">11356</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));</div><div class="line"><a name="l11357"></a><span class="lineno">11357</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>) {</div><div class="line"><a name="l11358"></a><span class="lineno">11358</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>);</div><div class="line"><a name="l11359"></a><span class="lineno">11359</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory for misdn_ports\n&quot;</span>);</div><div class="line"><a name="l11360"></a><span class="lineno">11360</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11361"></a><span class="lineno">11361</span>&#160;   }</div><div class="line"><a name="l11362"></a><span class="lineno">11362</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566">MISDN_GEN_DEBUG</a>, &amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0], <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0]));</div><div class="line"><a name="l11363"></a><span class="lineno">11363</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {</div><div class="line"><a name="l11364"></a><span class="lineno">11364</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[i] = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[0];</div><div class="line"><a name="l11365"></a><span class="lineno">11365</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>[i] = i;</div><div class="line"><a name="l11366"></a><span class="lineno">11366</span>&#160;   }</div><div class="line"><a name="l11367"></a><span class="lineno">11367</span>&#160;   *<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a> = 0;</div><div class="line"><a name="l11368"></a><span class="lineno">11368</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l11369"></a><span class="lineno">11369</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>) {</div><div class="line"><a name="l11370"></a><span class="lineno">11370</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>);</div><div class="line"><a name="l11371"></a><span class="lineno">11371</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>);</div><div class="line"><a name="l11372"></a><span class="lineno">11372</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory for misdn_debug_only\n&quot;</span>);</div><div class="line"><a name="l11373"></a><span class="lineno">11373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11374"></a><span class="lineno">11374</span>&#160;   }</div><div class="line"><a name="l11375"></a><span class="lineno">11375</span>&#160;</div><div class="line"><a name="l11376"></a><span class="lineno">11376</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3">MISDN_GEN_TRACEFILE</a>, tempbuf, <span class="keyword">sizeof</span>(tempbuf));</div><div class="line"><a name="l11377"></a><span class="lineno">11377</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tempbuf)) {</div><div class="line"><a name="l11378"></a><span class="lineno">11378</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aa610396156ba51a6b7d07fe92bea6f24">tracing</a> = 1;</div><div class="line"><a name="l11379"></a><span class="lineno">11379</span>&#160;   }</div><div class="line"><a name="l11380"></a><span class="lineno">11380</span>&#160;</div><div class="line"><a name="l11381"></a><span class="lineno">11381</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));</div><div class="line"><a name="l11382"></a><span class="lineno">11382</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>) {</div><div class="line"><a name="l11383"></a><span class="lineno">11383</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>);</div><div class="line"><a name="l11384"></a><span class="lineno">11384</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>);</div><div class="line"><a name="l11385"></a><span class="lineno">11385</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>);</div><div class="line"><a name="l11386"></a><span class="lineno">11386</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory for misdn_in_calls\n&quot;</span>);</div><div class="line"><a name="l11387"></a><span class="lineno">11387</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11388"></a><span class="lineno">11388</span>&#160;   }</div><div class="line"><a name="l11389"></a><span class="lineno">11389</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a> + 1));</div><div class="line"><a name="l11390"></a><span class="lineno">11390</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>) {</div><div class="line"><a name="l11391"></a><span class="lineno">11391</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>);</div><div class="line"><a name="l11392"></a><span class="lineno">11392</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>);</div><div class="line"><a name="l11393"></a><span class="lineno">11393</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>);</div><div class="line"><a name="l11394"></a><span class="lineno">11394</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>);</div><div class="line"><a name="l11395"></a><span class="lineno">11395</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Out of memory for misdn_out_calls\n&quot;</span>);</div><div class="line"><a name="l11396"></a><span class="lineno">11396</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11397"></a><span class="lineno">11397</span>&#160;   }</div><div class="line"><a name="l11398"></a><span class="lineno">11398</span>&#160;</div><div class="line"><a name="l11399"></a><span class="lineno">11399</span>&#160;   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {</div><div class="line"><a name="l11400"></a><span class="lineno">11400</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[i] = 0;</div><div class="line"><a name="l11401"></a><span class="lineno">11401</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[i] = 0;</div><div class="line"><a name="l11402"></a><span class="lineno">11402</span>&#160;   }</div><div class="line"><a name="l11403"></a><span class="lineno">11403</span>&#160;</div><div class="line"><a name="l11404"></a><span class="lineno">11404</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l11405"></a><span class="lineno">11405</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l11406"></a><span class="lineno">11406</span>&#160;</div><div class="line"><a name="l11407"></a><span class="lineno">11407</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac2740a8103bd868c78d5f7f6c0985d6d">misdn_cfg_update_ptp</a>();</div><div class="line"><a name="l11408"></a><span class="lineno">11408</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a5b0f1d6d9689fea5b7eba75176d06cc7">misdn_cfg_get_ports_string</a>(ports);</div><div class="line"><a name="l11409"></a><span class="lineno">11409</span>&#160;</div><div class="line"><a name="l11410"></a><span class="lineno">11410</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ports)) {</div><div class="line"><a name="l11411"></a><span class="lineno">11411</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, 0, <span class="stringliteral">&quot;Got: %s from get_ports\n&quot;</span>, ports);</div><div class="line"><a name="l11412"></a><span class="lineno">11412</span>&#160;   }</div><div class="line"><a name="l11413"></a><span class="lineno">11413</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ae89d0b5cf902c0b4b8fb93a01f2f85d0">misdn_lib_init</a>(ports, &amp;iface, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l11414"></a><span class="lineno">11414</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, 0, <span class="stringliteral">&quot;No te ports initialized\n&quot;</span>);</div><div class="line"><a name="l11415"></a><span class="lineno">11415</span>&#160;   }</div><div class="line"><a name="l11416"></a><span class="lineno">11416</span>&#160;</div><div class="line"><a name="l11417"></a><span class="lineno">11417</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa237371e790a3620cf1312b2c92ef8aab">MISDN_GEN_NTDEBUGFLAGS</a>, &amp;ntflags, <span class="keyword">sizeof</span>(ntflags));</div><div class="line"><a name="l11418"></a><span class="lineno">11418</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa5a45db543dae5ec58f3e4a9e95aae51a">MISDN_GEN_NTDEBUGFILE</a>, &amp;ntfile, <span class="keyword">sizeof</span>(ntfile));</div><div class="line"><a name="l11419"></a><span class="lineno">11419</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab0f790b350189bdcdced68408057d16d">MISDN_GEN_NTKEEPCALLS</a>, &amp;ntkc, <span class="keyword">sizeof</span>(ntkc));</div><div class="line"><a name="l11420"></a><span class="lineno">11420</span>&#160;</div><div class="line"><a name="l11421"></a><span class="lineno">11421</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0c45d15c14a1b1155e47f6625ffb8e80">misdn_lib_nt_keepcalls</a>(ntkc);</div><div class="line"><a name="l11422"></a><span class="lineno">11422</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a1154a11f754192d2e62a4ed59f6ffa10">misdn_lib_nt_debug_init</a>(ntflags, ntfile);</div><div class="line"><a name="l11423"></a><span class="lineno">11423</span>&#160;</div><div class="line"><a name="l11424"></a><span class="lineno">11424</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>)) {</div><div class="line"><a name="l11425"></a><span class="lineno">11425</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register channel class %s\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>);</div><div class="line"><a name="l11426"></a><span class="lineno">11426</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l11427"></a><span class="lineno">11427</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l11428"></a><span class="lineno">11428</span>&#160;   }</div><div class="line"><a name="l11429"></a><span class="lineno">11429</span>&#160;</div><div class="line"><a name="l11430"></a><span class="lineno">11430</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>));</div><div class="line"><a name="l11431"></a><span class="lineno">11431</span>&#160;</div><div class="line"><a name="l11432"></a><span class="lineno">11432</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#aa47a7223480d23a864cf83fef0f8585e">ast_register_application</a>(<span class="stringliteral">&quot;misdn_set_opt&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6de645b40ee13ae95c366d0273367837">misdn_set_opt_exec</a>, <span class="stringliteral">&quot;misdn_set_opt&quot;</span>,</div><div class="line"><a name="l11433"></a><span class="lineno">11433</span>&#160;      <span class="stringliteral">&quot;misdn_set_opt(:&lt;opt&gt;&lt;optarg&gt;:&lt;opt&gt;&lt;optarg&gt;...):\n&quot;</span></div><div class="line"><a name="l11434"></a><span class="lineno">11434</span>&#160;      <span class="stringliteral">&quot;Sets mISDN opts. and optargs\n&quot;</span></div><div class="line"><a name="l11435"></a><span class="lineno">11435</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l11436"></a><span class="lineno">11436</span>&#160;      <span class="stringliteral">&quot;The available options are:\n&quot;</span></div><div class="line"><a name="l11437"></a><span class="lineno">11437</span>&#160;      <span class="stringliteral">&quot;    a - Have Asterisk detect DTMF tones on called channel\n&quot;</span></div><div class="line"><a name="l11438"></a><span class="lineno">11438</span>&#160;      <span class="stringliteral">&quot;    c - Make crypted outgoing call, optarg is keyindex\n&quot;</span></div><div class="line"><a name="l11439"></a><span class="lineno">11439</span>&#160;      <span class="stringliteral">&quot;    d - Send display text to called phone, text is the optarg\n&quot;</span></div><div class="line"><a name="l11440"></a><span class="lineno">11440</span>&#160;      <span class="stringliteral">&quot;    e - Perform echo cancellation on this channel,\n&quot;</span></div><div class="line"><a name="l11441"></a><span class="lineno">11441</span>&#160;      <span class="stringliteral">&quot;        takes taps as optarg (32,64,128,256)\n&quot;</span></div><div class="line"><a name="l11442"></a><span class="lineno">11442</span>&#160;      <span class="stringliteral">&quot;   e! - Disable echo cancellation on this channel\n&quot;</span></div><div class="line"><a name="l11443"></a><span class="lineno">11443</span>&#160;      <span class="stringliteral">&quot;    f - Enable fax detection\n&quot;</span></div><div class="line"><a name="l11444"></a><span class="lineno">11444</span>&#160;      <span class="stringliteral">&quot;    h - Make digital outgoing call\n&quot;</span></div><div class="line"><a name="l11445"></a><span class="lineno">11445</span>&#160;      <span class="stringliteral">&quot;   h1 - Make HDLC mode digital outgoing call\n&quot;</span></div><div class="line"><a name="l11446"></a><span class="lineno">11446</span>&#160;      <span class="stringliteral">&quot;    i - Ignore detected DTMF tones, don&#39;t signal them to Asterisk,\n&quot;</span></div><div class="line"><a name="l11447"></a><span class="lineno">11447</span>&#160;      <span class="stringliteral">&quot;        they will be transported inband.\n&quot;</span></div><div class="line"><a name="l11448"></a><span class="lineno">11448</span>&#160;      <span class="stringliteral">&quot;   jb - Set jitter buffer length, optarg is length\n&quot;</span></div><div class="line"><a name="l11449"></a><span class="lineno">11449</span>&#160;      <span class="stringliteral">&quot;   jt - Set jitter buffer upper threshold, optarg is threshold\n&quot;</span></div><div class="line"><a name="l11450"></a><span class="lineno">11450</span>&#160;      <span class="stringliteral">&quot;   jn - Disable jitter buffer\n&quot;</span></div><div class="line"><a name="l11451"></a><span class="lineno">11451</span>&#160;      <span class="stringliteral">&quot;    n - Disable mISDN DSP on channel.\n&quot;</span></div><div class="line"><a name="l11452"></a><span class="lineno">11452</span>&#160;      <span class="stringliteral">&quot;        Disables: echo cancel, DTMF detection, and volume control.\n&quot;</span></div><div class="line"><a name="l11453"></a><span class="lineno">11453</span>&#160;      <span class="stringliteral">&quot;    p - Caller ID presentation,\n&quot;</span></div><div class="line"><a name="l11454"></a><span class="lineno">11454</span>&#160;      <span class="stringliteral">&quot;        optarg is either &#39;allowed&#39; or &#39;restricted&#39;\n&quot;</span></div><div class="line"><a name="l11455"></a><span class="lineno">11455</span>&#160;      <span class="stringliteral">&quot;    s - Send Non-inband DTMF as inband\n&quot;</span></div><div class="line"><a name="l11456"></a><span class="lineno">11456</span>&#160;      <span class="stringliteral">&quot;   vr - Rx gain control, optarg is gain\n&quot;</span></div><div class="line"><a name="l11457"></a><span class="lineno">11457</span>&#160;      <span class="stringliteral">&quot;   vt - Tx gain control, optarg is gain\n&quot;</span></div><div class="line"><a name="l11458"></a><span class="lineno">11458</span>&#160;      );</div><div class="line"><a name="l11459"></a><span class="lineno">11459</span>&#160;</div><div class="line"><a name="l11460"></a><span class="lineno">11460</span>&#160;</div><div class="line"><a name="l11461"></a><span class="lineno">11461</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#aa47a7223480d23a864cf83fef0f8585e">ast_register_application</a>(<span class="stringliteral">&quot;misdn_facility&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af9c367e9583873f59fe103da83241ac1">misdn_facility_exec</a>, <span class="stringliteral">&quot;misdn_facility&quot;</span>,</div><div class="line"><a name="l11462"></a><span class="lineno">11462</span>&#160;      <span class="stringliteral">&quot;misdn_facility(&lt;FACILITY_TYPE&gt;|&lt;ARG1&gt;|..)\n&quot;</span></div><div class="line"><a name="l11463"></a><span class="lineno">11463</span>&#160;      <span class="stringliteral">&quot;Sends the Facility Message FACILITY_TYPE with \n&quot;</span></div><div class="line"><a name="l11464"></a><span class="lineno">11464</span>&#160;      <span class="stringliteral">&quot;the given Arguments to the current ISDN Channel\n&quot;</span></div><div class="line"><a name="l11465"></a><span class="lineno">11465</span>&#160;      <span class="stringliteral">&quot;Supported Facilities are:\n&quot;</span></div><div class="line"><a name="l11466"></a><span class="lineno">11466</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l11467"></a><span class="lineno">11467</span>&#160;      <span class="stringliteral">&quot;type=calldeflect args=Nr where to deflect\n&quot;</span></div><div class="line"><a name="l11468"></a><span class="lineno">11468</span>&#160;#<span class="keywordflow">if</span> defined(AST_MISDN_ENHANCEMENTS)</div><div class="line"><a name="l11469"></a><span class="lineno">11469</span>&#160;      <span class="stringliteral">&quot;type=callrerouting args=Nr where to deflect\n&quot;</span></div><div class="line"><a name="l11470"></a><span class="lineno">11470</span>&#160;#endif   <span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span></div><div class="line"><a name="l11471"></a><span class="lineno">11471</span>&#160;      );</div><div class="line"><a name="l11472"></a><span class="lineno">11472</span>&#160;</div><div class="line"><a name="l11473"></a><span class="lineno">11473</span>&#160;</div><div class="line"><a name="l11474"></a><span class="lineno">11474</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#aa47a7223480d23a864cf83fef0f8585e">ast_register_application</a>(<span class="stringliteral">&quot;misdn_check_l2l1&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae519554426944811b0805a4a7595e538">misdn_check_l2l1</a>, <span class="stringliteral">&quot;misdn_check_l2l1&quot;</span>,</div><div class="line"><a name="l11475"></a><span class="lineno">11475</span>&#160;      <span class="stringliteral">&quot;misdn_check_l2l1(&lt;port&gt;||g:&lt;groupname&gt;,timeout)\n&quot;</span></div><div class="line"><a name="l11476"></a><span class="lineno">11476</span>&#160;      <span class="stringliteral">&quot;Checks if the L2 and L1 are up on either the given &lt;port&gt; or\n&quot;</span></div><div class="line"><a name="l11477"></a><span class="lineno">11477</span>&#160;      <span class="stringliteral">&quot;on the ports in the group with &lt;groupname&gt;\n&quot;</span></div><div class="line"><a name="l11478"></a><span class="lineno">11478</span>&#160;      <span class="stringliteral">&quot;If the L1/L2 are down, check_l2l1 gets up the L1/L2 and waits\n&quot;</span></div><div class="line"><a name="l11479"></a><span class="lineno">11479</span>&#160;      <span class="stringliteral">&quot;for &lt;timeout&gt; seconds that this happens. Otherwise, nothing happens\n&quot;</span></div><div class="line"><a name="l11480"></a><span class="lineno">11480</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l11481"></a><span class="lineno">11481</span>&#160;      <span class="stringliteral">&quot;This application, ensures the L1/L2 state of the Ports in a group\n&quot;</span></div><div class="line"><a name="l11482"></a><span class="lineno">11482</span>&#160;      <span class="stringliteral">&quot;it is intended to make the pmp_l1_check option redundant and to\n&quot;</span></div><div class="line"><a name="l11483"></a><span class="lineno">11483</span>&#160;      <span class="stringliteral">&quot;fix a buggy switch config from your provider\n&quot;</span></div><div class="line"><a name="l11484"></a><span class="lineno">11484</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l11485"></a><span class="lineno">11485</span>&#160;      <span class="stringliteral">&quot;a sample dialplan would look like:\n\n&quot;</span></div><div class="line"><a name="l11486"></a><span class="lineno">11486</span>&#160;      <span class="stringliteral">&quot;exten =&gt; _X.,1,misdn_check_l2l1(g:out|2)\n&quot;</span></div><div class="line"><a name="l11487"></a><span class="lineno">11487</span>&#160;      <span class="stringliteral">&quot;exten =&gt; _X.,n,dial(mISDN/g:out/${EXTEN})\n&quot;</span></div><div class="line"><a name="l11488"></a><span class="lineno">11488</span>&#160;      );</div><div class="line"><a name="l11489"></a><span class="lineno">11489</span>&#160;</div><div class="line"><a name="l11490"></a><span class="lineno">11490</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l11491"></a><span class="lineno">11491</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#aa47a7223480d23a864cf83fef0f8585e">ast_register_application</a>(misdn_command_name, misdn_command_exec, misdn_command_name,</div><div class="line"><a name="l11492"></a><span class="lineno">11492</span>&#160;      <span class="stringliteral">&quot;misdn_command(&lt;command&gt;[,&lt;options&gt;])\n&quot;</span></div><div class="line"><a name="l11493"></a><span class="lineno">11493</span>&#160;      <span class="stringliteral">&quot;The following commands are defined:\n&quot;</span></div><div class="line"><a name="l11494"></a><span class="lineno">11494</span>&#160;      <span class="stringliteral">&quot;cc-initialize\n&quot;</span></div><div class="line"><a name="l11495"></a><span class="lineno">11495</span>&#160;      <span class="stringliteral">&quot;  Setup mISDN support for call completion\n&quot;</span></div><div class="line"><a name="l11496"></a><span class="lineno">11496</span>&#160;      <span class="stringliteral">&quot;  Must call before doing any Dial() involving call completion.\n&quot;</span></div><div class="line"><a name="l11497"></a><span class="lineno">11497</span>&#160;      <span class="stringliteral">&quot;ccnr-request,${MISDN_CC_RECORD_ID},&lt;notify-context&gt;,&lt;user-a-extension&gt;,&lt;priority&gt;\n&quot;</span></div><div class="line"><a name="l11498"></a><span class="lineno">11498</span>&#160;      <span class="stringliteral">&quot;  Request Call Completion No Reply activation\n&quot;</span></div><div class="line"><a name="l11499"></a><span class="lineno">11499</span>&#160;      <span class="stringliteral">&quot;ccbs-request,${MISDN_CC_RECORD_ID},&lt;notify-context&gt;,&lt;user-a-extension&gt;,&lt;priority&gt;\n&quot;</span></div><div class="line"><a name="l11500"></a><span class="lineno">11500</span>&#160;      <span class="stringliteral">&quot;  Request Call Completion Busy Subscriber activation\n&quot;</span></div><div class="line"><a name="l11501"></a><span class="lineno">11501</span>&#160;      <span class="stringliteral">&quot;cc-b-free,${MISDN_CC_RECORD_ID},&lt;notify-context&gt;,&lt;user-a-extension&gt;,&lt;priority&gt;\n&quot;</span></div><div class="line"><a name="l11502"></a><span class="lineno">11502</span>&#160;      <span class="stringliteral">&quot;  Set the dialplan location to notify when User-B is available but User-A is busy.\n&quot;</span></div><div class="line"><a name="l11503"></a><span class="lineno">11503</span>&#160;      <span class="stringliteral">&quot;  Setting this dialplan location is optional.\n&quot;</span></div><div class="line"><a name="l11504"></a><span class="lineno">11504</span>&#160;      <span class="stringliteral">&quot;cc-a-busy,${MISDN_CC_RECORD_ID},&lt;yes/no&gt;\n&quot;</span></div><div class="line"><a name="l11505"></a><span class="lineno">11505</span>&#160;      <span class="stringliteral">&quot;  Set the busy status of call completion User-A\n&quot;</span></div><div class="line"><a name="l11506"></a><span class="lineno">11506</span>&#160;      <span class="stringliteral">&quot;cc-deactivate,${MISDN_CC_RECORD_ID}\n&quot;</span></div><div class="line"><a name="l11507"></a><span class="lineno">11507</span>&#160;      <span class="stringliteral">&quot;  Deactivate the identified call completion request\n&quot;</span></div><div class="line"><a name="l11508"></a><span class="lineno">11508</span>&#160;      <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l11509"></a><span class="lineno">11509</span>&#160;      <span class="stringliteral">&quot;MISDN_CC_RECORD_ID is set when Dial() returns and call completion is possible\n&quot;</span></div><div class="line"><a name="l11510"></a><span class="lineno">11510</span>&#160;      <span class="stringliteral">&quot;MISDN_CC_STATUS is set to ACTIVATED or ERROR after the call completion\n&quot;</span></div><div class="line"><a name="l11511"></a><span class="lineno">11511</span>&#160;      <span class="stringliteral">&quot;activation request.\n&quot;</span></div><div class="line"><a name="l11512"></a><span class="lineno">11512</span>&#160;      <span class="stringliteral">&quot;MISDN_ERROR_MSG is set to a descriptive message on error.\n&quot;</span></div><div class="line"><a name="l11513"></a><span class="lineno">11513</span>&#160;      );</div><div class="line"><a name="l11514"></a><span class="lineno">11514</span>&#160;</div><div class="line"><a name="l11515"></a><span class="lineno">11515</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;misdn_cc_function);</div><div class="line"><a name="l11516"></a><span class="lineno">11516</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l11517"></a><span class="lineno">11517</span>&#160;</div><div class="line"><a name="l11518"></a><span class="lineno">11518</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3">MISDN_GEN_TRACEFILE</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>));</div><div class="line"><a name="l11519"></a><span class="lineno">11519</span>&#160;</div><div class="line"><a name="l11520"></a><span class="lineno">11520</span>&#160;   <span class="comment">/* start the l1 watchers */</span></div><div class="line"><a name="l11521"></a><span class="lineno">11521</span>&#160;</div><div class="line"><a name="l11522"></a><span class="lineno">11522</span>&#160;   <span class="keywordflow">for</span> (port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0); port &gt;= 0; port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l11523"></a><span class="lineno">11523</span>&#160;      <span class="keywordtype">int</span> l1timeout;</div><div class="line"><a name="l11524"></a><span class="lineno">11524</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa379acd10a5cf71976a3d84c97b869b8a">MISDN_CFG_L1_TIMEOUT</a>, &amp;l1timeout, <span class="keyword">sizeof</span>(l1timeout));</div><div class="line"><a name="l11525"></a><span class="lineno">11525</span>&#160;      <span class="keywordflow">if</span> (l1timeout) {</div><div class="line"><a name="l11526"></a><span class="lineno">11526</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, 0, <span class="stringliteral">&quot;Adding L1watcher task: port:%d timeout:%ds\n&quot;</span>, port, l1timeout);</div><div class="line"><a name="l11527"></a><span class="lineno">11527</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac60203ac1e950f50c3f36c5a9c2dc16a">misdn_tasks_add</a>(l1timeout * 1000, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab707fc0cf9fb25221fcf046a9583d839">misdn_l1_task</a>, &amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>[port]);</div><div class="line"><a name="l11528"></a><span class="lineno">11528</span>&#160;      }</div><div class="line"><a name="l11529"></a><span class="lineno">11529</span>&#160;   }</div><div class="line"><a name="l11530"></a><span class="lineno">11530</span>&#160;</div><div class="line"><a name="l11531"></a><span class="lineno">11531</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, 0, <span class="stringliteral">&quot;-- mISDN Channel Driver Registered --\n&quot;</span>);</div><div class="line"><a name="l11532"></a><span class="lineno">11532</span>&#160;</div><div class="line"><a name="l11533"></a><span class="lineno">11533</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11534"></a><span class="lineno">11534</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_a09fa0c33c5c8fc7f1317234b3965d7ab"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a09fa0c33c5c8fc7f1317234b3965d7ab">misdn_lib_maxports_get</a></div><div class="ttdeci">int misdn_lib_maxports_get(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04094">isdn_lib.c:4094</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ae89d0b5cf902c0b4b8fb93a01f2f85d0"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ae89d0b5cf902c0b4b8fb93a01f2f85d0">misdn_lib_init</a></div><div class="ttdeci">int misdn_lib_init(char *portlist, struct misdn_lib_iface *iface, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04143">isdn_lib.c:4143</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3">MISDN_GEN_TRACEFILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00111">chan_misdn_config.h:111</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a1154a11f754192d2e62a4ed59f6ffa10"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a1154a11f754192d2e62a4ed59f6ffa10">misdn_lib_nt_debug_init</a></div><div class="ttdeci">void misdn_lib_nt_debug_init(int flags, char *file)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04124">isdn_lib.c:4124</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a5cc183f54c105ba066b4f005e3886ba9"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a5cc183f54c105ba066b4f005e3886ba9">misdn_cfg_init</a></div><div class="ttdeci">int misdn_cfg_init(int max_ports, int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01203">misdn_config.c:1203</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac60203ac1e950f50c3f36c5a9c2dc16a"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac60203ac1e950f50c3f36c5a9c2dc16a">misdn_tasks_add</a></div><div class="ttdeci">static int misdn_tasks_add(int timeout, ast_sched_cb callback, const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03604">chan_misdn.c:3604</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa379acd10a5cf71976a3d84c97b869b8a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa379acd10a5cf71976a3d84c97b869b8a">MISDN_CFG_L1_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00096">chan_misdn_config.h:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5d484a16cc6daf0c6d4b8dc1951f8e19"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5d484a16cc6daf0c6d4b8dc1951f8e19">chan_misdn_jb_empty</a></div><div class="ttdeci">int chan_misdn_jb_empty(struct misdn_bchannel *bc, char *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12574">chan_misdn.c:12574</a></div></div>
<div class="ttc" id="structmisdn__lib__iface_html_a76d91d70b7a468109bf9fed16a2e9f88"><div class="ttname"><a href="../../dd/d28/structmisdn__lib__iface.html#a76d91d70b7a468109bf9fed16a2e9f88">misdn_lib_iface::cb_event</a></div><div class="ttdeci">enum event_response_e(* cb_event)(enum event_e event, struct misdn_bchannel *bc, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00729">isdn_lib.h:729</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab707fc0cf9fb25221fcf046a9583d839"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab707fc0cf9fb25221fcf046a9583d839">misdn_l1_task</a></div><div class="ttdeci">static int misdn_l1_task(const void *vdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03619">chan_misdn.c:3619</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aac56f2c53779cee00e7f7e98d773b82c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a></div><div class="ttdeci">static ast_mutex_t release_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00323">chan_misdn.c:323</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a392ce5a44d9bda45ea398b525aa6231d"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a></div><div class="ttdeci">static struct ast_cli_entry chan_misdn_clis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05734">chan_misdn.c:5734</a></div></div>
<div class="ttc" id="module_8h_html_aa47a7223480d23a864cf83fef0f8585e"><div class="ttname"><a href="../../d5/d16/module_8h.html#aa47a7223480d23a864cf83fef0f8585e">ast_register_application</a></div><div class="ttdeci">#define ast_register_application(app, execute, synopsis, description)</div><div class="ttdoc">Register an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00610">module.h:610</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa5a45db543dae5ec58f3e4a9e95aae51a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa5a45db543dae5ec58f3e4a9e95aae51a">MISDN_GEN_NTDEBUGFILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00120">chan_misdn_config.h:120</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a5b0f1d6d9689fea5b7eba75176d06cc7"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a5b0f1d6d9689fea5b7eba75176d06cc7">misdn_cfg_get_ports_string</a></div><div class="ttdeci">void misdn_cfg_get_ports_string(char *ports)</div><div class="ttdoc">Generate a comma separated list of all active ports. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00779">misdn_config.c:779</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aab0f790b350189bdcdced68408057d16d"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab0f790b350189bdcdced68408057d16d">MISDN_GEN_NTKEEPCALLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00118">chan_misdn_config.h:118</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a24bb5f2898b28cecc69c86bb429f7517"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></div><div class="ttdeci">static int max_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00696">chan_misdn.c:696</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0fde55e91042b09488c4c1b522172a87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a></div><div class="ttdeci">static char global_tracefile[BUFFERSIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00127">chan_misdn.c:127</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac2740a8103bd868c78d5f7f6c0985d6d"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac2740a8103bd868c78d5f7f6c0985d6d">misdn_cfg_update_ptp</a></div><div class="ttdeci">void misdn_cfg_update_ptp(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01113">misdn_config.c:1113</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0c45d15c14a1b1155e47f6625ffb8e80"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0c45d15c14a1b1155e47f6625ffb8e80">misdn_lib_nt_keepcalls</a></div><div class="ttdeci">void misdn_lib_nt_keepcalls(int kc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04112">isdn_lib.c:4112</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa237371e790a3620cf1312b2c92ef8aab"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa237371e790a3620cf1312b2c92ef8aab">MISDN_GEN_NTDEBUGFLAGS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00119">chan_misdn_config.h:119</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae519554426944811b0805a4a7595e538"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae519554426944811b0805a4a7595e538">misdn_check_l2l1</a></div><div class="ttdeci">static int misdn_check_l2l1(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12291">chan_misdn.c:12291</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aa610396156ba51a6b7d07fe92bea6f24"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aa610396156ba51a6b7d07fe92bea6f24">tracing</a></div><div class="ttdeci">static int tracing</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00692">chan_misdn.c:692</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8c81d5f4de36016de0ecba7520828e0a"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a></div><div class="ttdeci">static struct ast_channel_tech misdn_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08130">chan_misdn.c:8130</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l11262">chan_misdn.c:11262</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1a7c19d49b122fec380d3901c451dfb"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a></div><div class="ttdeci">static int * misdn_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00673">chan_misdn.c:673</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2676e3da728326daba3532f859b33c75"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a></div><div class="ttdeci">static int g_config_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00129">chan_misdn.c:129</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566">MISDN_GEN_DEBUG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00110">chan_misdn_config.h:110</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af9c367e9583873f59fe103da83241ac1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af9c367e9583873f59fe103da83241ac1">misdn_facility_exec</a></div><div class="ttdeci">static int misdn_facility_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12168">chan_misdn.c:12168</a></div></div>
<div class="ttc" id="structmisdn__lib__iface_html"><div class="ttname"><a href="../../dd/d28/structmisdn__lib__iface.html">misdn_lib_iface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00728">isdn_lib.h:728</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6de645b40ee13ae95c366d0273367837"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6de645b40ee13ae95c366d0273367837">misdn_set_opt_exec</a></div><div class="ttdeci">static int misdn_set_opt_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12365">chan_misdn.c:12365</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a848ab2a42c0b12ed8c70a194b3c3cf45"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a848ab2a42c0b12ed8c70a194b3c3cf45">cb_events</a></div><div class="ttdeci">static enum event_response_e cb_events(enum event_e event, struct misdn_bchannel *bc, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l09917">chan_misdn.c:9917</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac9bcceb1ecd44bcc1261b9314b1abcd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9bcceb1ecd44bcc1261b9314b1abcd9">&#9670;&nbsp;</a></span>misdn_add_number_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_add_number_prefix </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a>&#160;</td>
          <td class="paramname"><em>number_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">3424</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00056">MISDN_CFG_TON_PREFIX_ABBREVIATED</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00052">MISDN_CFG_TON_PREFIX_INTERNATIONAL</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00053">MISDN_CFG_TON_PREFIX_NATIONAL</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00054">MISDN_CFG_TON_PREFIX_NETWORK_SPECIFIC</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00055">MISDN_CFG_TON_PREFIX_SUBSCRIBER</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00051">MISDN_CFG_TON_PREFIX_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00246">MISDN_MAX_NUMBER_LEN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03381">misdn_prefix_string()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09904">misdn_is_msn_valid()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;{</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a> type_prefix;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <span class="keywordtype">char</span> num_prefix[<a class="code" href="../../de/d26/isdn__lib_8h.html#a4a613b77afdcc44b324b02e71ab9267f">MISDN_MAX_NUMBER_LEN</a>];</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;   <span class="comment">/* Get prefix string. */</span></div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;   <span class="keywordflow">switch</span> (number_type) {</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>:</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2f8c438a0eea8fb25e602fd072e9641e">MISDN_CFG_TON_PREFIX_UNKNOWN</a>;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>:</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa688790df7ac09204a398ca1d32d6a0f2">MISDN_CFG_TON_PREFIX_INTERNATIONAL</a>;</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>:</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aadf29f3edadd53821eda0317195e4cd4b">MISDN_CFG_TON_PREFIX_NATIONAL</a>;</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>:</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa66f2b79bc31e52cc2a9215445470fb1b">MISDN_CFG_TON_PREFIX_NETWORK_SPECIFIC</a>;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>:</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa023568cd4515839c5682392d1c791027">MISDN_CFG_TON_PREFIX_SUBSCRIBER</a>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>:</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;      type_prefix = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa4c8455860e1c3aadb21cba85f4b14180">MISDN_CFG_TON_PREFIX_ABBREVIATED</a>;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <span class="comment">/* Type-of-number does not have a prefix that can be added. */</span></div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;   }</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, type_prefix, num_prefix, <span class="keyword">sizeof</span>(num_prefix));</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0d977eebb4ed94cf78548100ab4fde50">misdn_prefix_string</a>(num_prefix, <a class="code" href="../../d6/d49/structnumber.html">number</a>, size);</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00104">isdn_lib.h:104</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00105">isdn_lib.h:105</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a></div><div class="ttdeci">misdn_cfg_elements</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00027">chan_misdn_config.h:27</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa4c8455860e1c3aadb21cba85f4b14180"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa4c8455860e1c3aadb21cba85f4b14180">MISDN_CFG_TON_PREFIX_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00056">chan_misdn_config.h:56</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aadf29f3edadd53821eda0317195e4cd4b"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aadf29f3edadd53821eda0317195e4cd4b">MISDN_CFG_TON_PREFIX_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00053">chan_misdn_config.h:53</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa66f2b79bc31e52cc2a9215445470fb1b"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa66f2b79bc31e52cc2a9215445470fb1b">MISDN_CFG_TON_PREFIX_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00054">chan_misdn_config.h:54</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a4a613b77afdcc44b324b02e71ab9267f"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a4a613b77afdcc44b324b02e71ab9267f">MISDN_MAX_NUMBER_LEN</a></div><div class="ttdeci">#define MISDN_MAX_NUMBER_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00246">isdn_lib.h:246</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa2f8c438a0eea8fb25e602fd072e9641e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2f8c438a0eea8fb25e602fd072e9641e">MISDN_CFG_TON_PREFIX_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00051">chan_misdn_config.h:51</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00106">isdn_lib.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00103">isdn_lib.h:103</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0d977eebb4ed94cf78548100ab4fde50"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0d977eebb4ed94cf78548100ab4fde50">misdn_prefix_string</a></div><div class="ttdeci">static void misdn_prefix_string(const char *str_prefix, char *str_main, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03381">chan_misdn.c:3381</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa688790df7ac09204a398ca1d32d6a0f2"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa688790df7ac09204a398ca1d32d6a0f2">MISDN_CFG_TON_PREFIX_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00052">chan_misdn_config.h:52</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00107">isdn_lib.h:107</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa023568cd4515839c5682392d1c791027"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa023568cd4515839c5682392d1c791027">MISDN_CFG_TON_PREFIX_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00055">chan_misdn_config.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21c46f535fa2bd430018641bfabcb04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21c46f535fa2bd430018641bfabcb04e">&#9670;&nbsp;</a></span>misdn_answer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_answer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">6824</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00120">AST_CAUSE_NETWORK_OUT_OF_ORDER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00144">AST_CAUSE_PROTOCOL_ERROR</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01166">ast_queue_hangup_with_cause()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00353">misdn_bchannel::connected</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00529">misdn_bchannel::crypt_key</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00131">EVENT_CONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00474">misdn_bchannel::nodsp</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00477">misdn_bchannel::nojitter</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00263">misdn_party_dialing::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00260">misdn_party_dialing::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00594">misdn_bchannel::outgoing_colp</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00600">misdn_bchannel::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07764">start_bc_tones()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">stop_indicate()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;{</div><div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *p;</div><div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;</div><div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;   <span class="keywordflow">if</span> (!ast || !(p = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;   }</div><div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;</div><div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p ? (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> ? p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0) : 0, <span class="stringliteral">&quot;* ANSWER:\n&quot;</span>);</div><div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;</div><div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; Channel not connected ??\n&quot;</span>);</div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a9e3ffd481d41079a4ed1700464c9a42a">AST_CAUSE_NETWORK_OUT_OF_ORDER</a>);</div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;   }</div><div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;</div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;   <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>) {</div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot; --&gt; Got Answer, but there is no bc obj ??\n&quot;</span>);</div><div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;</div><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a1514f9ae692d948e3351fa75d4be2bf3">AST_CAUSE_PROTOCOL_ERROR</a>);</div><div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;   }</div><div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;</div><div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;   tmp = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;CRYPT_KEY&quot;</span>);</div><div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp)) {</div><div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Connection will be BF crypted\n&quot;</span>);</div><div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">crypt_key</a>, tmp, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">crypt_key</a>));</div><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Connection is without BF encryption\n&quot;</span>);</div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;   }</div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;</div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;   tmp = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;MISDN_DIGITAL_TRANS&quot;</span>);</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tmp) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(tmp)) {</div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Connection is transparent digital\n&quot;</span>);</div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a134855bcd1a1ba0d1733faa7a4e94389">nodsp</a> = 1;</div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 0;</div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">nojitter</a> = 1;</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;   }</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>;</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a>(p);</div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;</div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2,p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; empty connected number using dialed number\n&quot;</span>);</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;<span class="comment">       * Use the misdn_set_opt() application to set the presentation</span></div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;<span class="comment">       * before we answer or you can use the CONECTEDLINE() function</span></div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;<span class="comment">       * to set everything before using the Answer() application.</span></div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;  <span class="comment">/* unscreened */</span></div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>;</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">number_plan</a>;</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;   }</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>) {</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;   <span class="keywordflow">case</span> 1:<span class="comment">/* restricted */</span></div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;   <span class="keywordflow">case</span> 2:<span class="comment">/* blocked */</span></div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;   }</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;div_leg_3_tx_pending) {</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;div_leg_3_tx_pending = 0;</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;      <span class="comment">/* Send DivertingLegInformation3 */</span></div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_DivertingLegInformation3;</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation3.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation3.PresentationAllowedIndicator =</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;         (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> == 0) ? 1 : 0;</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;   }</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb">EVENT_CONNECT</a>);</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="causes_8h_html_a1514f9ae692d948e3351fa75d4be2bf3"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a1514f9ae692d948e3351fa75d4be2bf3">AST_CAUSE_PROTOCOL_ERROR</a></div><div class="ttdeci">#define AST_CAUSE_PROTOCOL_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00144">causes.h:144</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a892219d53f0cf14c2d6933dc77464def"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a></div><div class="ttdeci">static int stop_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07743">chan_misdn.c:7743</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a134855bcd1a1ba0d1733faa7a4e94389"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a134855bcd1a1ba0d1733faa7a4e94389">misdn_bchannel::nodsp</a></div><div class="ttdeci">int nodsp</div><div class="ttdoc">TRUE if we will not use jollys dsp. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00474">isdn_lib.h:474</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">misdn_bchannel::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">User set presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00600">isdn_lib.h:600</a></div></div>
<div class="ttc" id="causes_8h_html_a9e3ffd481d41079a4ed1700464c9a42a"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9e3ffd481d41079a4ed1700464c9a42a">AST_CAUSE_NETWORK_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_NETWORK_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00120">causes.h:120</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a54d4a7ef01a4074469ac37421f843333"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">misdn_bchannel::outgoing_colp</a></div><div class="ttdeci">int outgoing_colp</div><div class="ttdoc">Select what to do with outgoing COLP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00594">isdn_lib.h:594</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9aa37e2112fabf2ca6694c70d2f0ff24"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">misdn_bchannel::crypt_key</a></div><div class="ttdeci">char crypt_key[255]</div><div class="ttdoc">Blowfish encryption key string (secret) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00529">isdn_lib.h:529</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9d1a3f3e4b462e571e5485570ee63adb">EVENT_CONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00131">isdn_lib.h:131</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="channel_8h_html_a91e78b15da3244307ffd749fa85f4db7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a></div><div class="ttdeci">int ast_queue_hangup_with_cause(struct ast_channel *chan, int cause)</div><div class="ttdoc">Queue a hangup frame with hangupcause set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01166">channel.c:1166</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6bb23a220a9276463546e4b5faa28e36"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">misdn_bchannel::nojitter</a></div><div class="ttdeci">int nojitter</div><div class="ttdoc">TRUE if we will not use the jitter buffer system. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00477">isdn_lib.h:477</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ac80dac92eeab3a4a76076dd60688344e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">misdn_bchannel::connected</a></div><div class="ttdeci">struct misdn_party_id connected</div><div class="ttdoc">Connected-Party/Connected-Line ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00353">isdn_lib.h:353</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_dialing::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the dialed/called number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00260">isdn_lib.h:260</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4b3afda0545d09cce0d2bc81466baf57"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a></div><div class="ttdeci">static int start_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07764">chan_misdn.c:7764</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">misdn_party_dialing::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00263">isdn_lib.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00f4e04874766b14d63060e3617224ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f4e04874766b14d63060e3617224ad">&#9670;&nbsp;</a></span>misdn_attempt_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_attempt_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>active_ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>held_ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08619">8619</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01117">AST_BRIDGE_TRANSFER_SUCCESS</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02952">ast_channel_lock_both</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00335">MISDN_ALERTING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00350">MISDN_HOLD_TRANSFER</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00332">MISDN_PROCEEDING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00331">MISDN_PROGRESS</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../db/d37/hsearch_8c_source.html#l00050">retval</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;{</div><div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17">ast_transfer_result</a> xfer_res;</div><div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_target;</div><div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *to_transferee;</div><div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;</div><div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;   <span class="keywordflow">switch</span> (active_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>:</div><div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>:</div><div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>:</div><div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;   }</div><div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;</div><div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, active_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;   to_target = active_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;   to_transferee = held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;TRANSFERRING %s to %s\n&quot;</span>,</div><div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(to_transferee), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(to_target));</div><div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;   held_ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65">MISDN_HOLD_TRANSFER</a>;</div><div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(to_target);</div><div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(to_transferee);</div><div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(to_target);</div><div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(to_transferee);</div><div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;</div><div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;   retval = 0;</div><div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;   xfer_res = <a class="code" href="../../d4/d56/bridge_8h.html#aec45146e91e4d8bc2a7d2cf083c4dac0">ast_bridge_transfer_attended</a>(to_transferee, to_target);</div><div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;   <span class="keywordflow">if</span> (xfer_res != <a class="code" href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a>) {</div><div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;      retval = -1;</div><div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;   }</div><div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;</div><div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(to_target);</div><div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(to_transferee);</div><div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge_8h_html_aec45146e91e4d8bc2a7d2cf083c4dac0"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aec45146e91e4d8bc2a7d2cf083c4dac0">ast_bridge_transfer_attended</a></div><div class="ttdeci">enum ast_transfer_result ast_bridge_transfer_attended(struct ast_channel *to_transferee, struct ast_channel *to_transfer_target)</div><div class="ttdoc">Attended transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04729">bridge.c:4729</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba198f729e4c17eed671b7b21150a83c65">MISDN_HOLD_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00350">chan_misdn.c:350</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00331">chan_misdn.c:331</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17a6b0053a1a47d100ef5f155f068c08934">AST_BRIDGE_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01117">bridge.h:1117</a></div></div>
<div class="ttc" id="bridge_8h_html_aadbf879fadde4b1bb7832b1390cc8c17"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aadbf879fadde4b1bb7832b1390cc8c17">ast_transfer_result</a></div><div class="ttdeci">ast_transfer_result</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01115">bridge.h:1115</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00332">chan_misdn.c:332</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="hsearch_8c_html_ad0f0f85b3cab490a81baa02c4b9edf45"><div class="ttname"><a href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a></div><div class="ttdeci">static ENTRY retval</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d37/hsearch_8c_source.html#l00050">hsearch.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24e5448e5dd0e37988f4ffa68a8d0867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24e5448e5dd0e37988f4ffa68a8d0867">&#9670;&nbsp;</a></span>misdn_call()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>we should have l3id after sending setup </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">6554</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08859">add_out_calls()</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00119">AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00121">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00501">ast_channel_transfercapability()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">AST_NONSTANDARD_APP_ARGS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00039">AST_STATE_DIALING</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02042">ast_to_misdn_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01916">ast_to_misdn_ton()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00678">ast_transfercapability2str()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00316">misdn_party_redirecting::count</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05853">debug_numtype()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00089">ENOCHAN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00128">EVENT_SETUP</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08786">import_ch()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00348">misdn_bchannel::incoming_cid_tag</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00176">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00399">misdn_bchannel::l3_id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00333">MISDN_CALLING</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00046">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00049">MISDN_CFG_LOCALDIALPLAN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00128">misdn_lib_is_ptp()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">misdn_set_opt_exec()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00594">misdn_bchannel::outgoing_colp</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00600">misdn_bchannel::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00470">misdn_bchannel::sending_complete</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00603">misdn_bchannel::set_presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07772">stop_bc_tones()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>
<div class="fragment"><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;{</div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;   <span class="keywordtype">int</span> r;</div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;   <span class="keywordtype">int</span> exceed;</div><div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;   <span class="keywordtype">int</span> number_type;</div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch;</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *newbc;</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;   <span class="keywordtype">char</span> *dest_cp;</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;   <span class="keywordtype">int</span> append_msn = 0;</div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(intf);   <span class="comment">/* The interface token is discarded. */</span></div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>); <span class="comment">/* extension token */</span></div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(opts);   <span class="comment">/* options token */</span></div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;   );</div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;</div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! misdn_call called on ast_channel *ast where ast == NULL\n&quot;</span>);</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;   }</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;</div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;   <span class="keywordflow">if</span> (((<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>) &amp;&amp; (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>)) || !dest) {</div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! misdn_call called on %s, neither down nor reserved (or dest==NULL)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>);</div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;   }</div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;</div><div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;   ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast);</div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! misdn_call called on %s, chan_list *ch==NULL\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>);</div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;   }</div><div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;</div><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;   newbc = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;   <span class="keywordflow">if</span> (!newbc) {</div><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! misdn_call called on %s, newbc==NULL\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>);</div><div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;   }</div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;</div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;   port = newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;</div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;   <span class="keywordflow">if</span> ((ch-&gt;peer = misdn_cc_caller_get(ast))) {</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, port, <span class="stringliteral">&quot; --&gt; Found CC caller data, peer:%s\n&quot;</span>,</div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;         ch-&gt;peer-&gt;chan ? <span class="stringliteral">&quot;available&quot;</span> : <span class="stringliteral">&quot;NULL&quot;</span>);</div><div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;   }</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;record_id != -1) {</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;      <span class="keyword">struct </span>misdn_cc_record *cc_record;</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;</div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;      <span class="comment">/* This is a call completion retry call */</span></div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;      cc_record = misdn_cc_find_by_id(ch-&gt;record_id);</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;      <span class="keywordflow">if</span> (!cc_record) {</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! misdn_call called on %s, cc_record==NULL\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>);</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;      }</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;      <span class="comment">/* Setup calling parameters to retry the call. */</span></div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a> = cc_record-&gt;redial.dialed;</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a> = cc_record-&gt;redial.caller;</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;      memset(&amp;newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, 0, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>));</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a> = cc_record-&gt;redial.capability;</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = cc_record-&gt;redial.hdlc;</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">sending_complete</a> = 1;</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;      <span class="keywordflow">if</span> (cc_record-&gt;ptp) {</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CCBS_T_Call;</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CCBS_T_Call.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CCBSCall;</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CCBSCall.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CCBSCall.CCBSReference = cc_record-&gt;mode.ptmp.reference_id;</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;      }</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;</div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ast, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot;* Call completion to: %s\n&quot;</span>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; * tech:%s context:%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast));</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;   {</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> connected_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(ast);</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;</div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;<span class="comment">       * dest is ---v</span></div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;<span class="comment">       * Dial(mISDN/g:group_name[/extension[/options]])</span></div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;<span class="comment">       * Dial(mISDN/port[:preselected_channel][/extension[/options]])</span></div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;<span class="comment">       * The dial extension could be empty if you are using MISDN_KEYPAD</span></div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;<span class="comment">       * to control ISDN provider features.</span></div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;      dest_cp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(dest);</div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, dest_cp, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext) {</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;      }</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot;* CALL: %s\n&quot;</span>, dest);</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; * dialed:%s tech:%s context:%s\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast));</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ast, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext);</div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>)</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;         &amp;&amp; connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a></div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;         &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>, connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, port, <span class="stringliteral">&quot; --&gt; * set caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;      }</div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;         &amp;&amp; connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a></div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;         &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, port, <span class="stringliteral">&quot; --&gt; * set caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;      }</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;</div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a>, &amp;append_msn, <span class="keyword">sizeof</span>(append_msn));</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;      <span class="keywordflow">if</span> (append_msn) {</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;         strncat(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>, <span class="stringliteral">&quot;_&quot;</span>, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - strlen(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - 1);</div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;         strncat(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - strlen(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>) - 1);</div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;      }</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;</div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;</div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1">MISDN_CFG_LOCALDIALPLAN</a>, &amp;number_type, <span class="keyword">sizeof</span>(number_type));</div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;      <span class="keywordflow">if</span> (number_type &lt; 0) {</div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;         <span class="keywordflow">if</span> (connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;         }</div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;         <span class="comment">/* Force us to send in SETUP message */</span></div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = number_type;</div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;      }</div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a>(port, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <span class="stringliteral">&quot;LTON&quot;</span>);</div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;</div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;      newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a57b29a2e12f8d2695625942049f81a2c">ast_channel_transfercapability</a>(ast);</div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ast, <span class="stringliteral">&quot;TRANSFERCAPABILITY&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#acb027b361350d81e4b94b540fbdfe4e4">ast_transfercapability2str</a>(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>));</div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a57b29a2e12f8d2695625942049f81a2c">ast_channel_transfercapability</a>(ast) == <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>) {</div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; * Call with flag Digital\n&quot;</span>);</div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;      }</div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;</div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;      <span class="comment">/* update caller screening and presentation */</span></div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a879a0c566b9bb9c07bd0f1f13948c373">update_config</a>(ch);</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;      <span class="comment">/* fill in some ies from channel dialplan variables */</span></div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aacab4ba06a4bae692a7752b56f2d02fe">import_ch</a>(ast, newbc, ch);</div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;</div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;      <span class="comment">/* Finally The Options Override Everything */</span></div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.opts)) {</div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6de645b40ee13ae95c366d0273367837">misdn_set_opt_exec</a>(ast, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.opts);</div><div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot;NO OPTS GIVEN\n&quot;</span>);</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;      }</div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;      <span class="keywordflow">if</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">set_presentation</a>) {</div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;      }</div><div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;</div><div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a115226990899ee9eb82f99539279bf21">misdn_copy_redirecting_from_ast</a>(newbc, ast);</div><div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;      <span class="keywordflow">switch</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>) {</div><div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;      <span class="keywordflow">case</span> 1:<span class="comment">/* restricted */</span></div><div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;      <span class="keywordflow">case</span> 2:<span class="comment">/* blocked */</span></div><div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;      }</div><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;      <span class="keywordflow">if</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] &amp;&amp; <a class="code" href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a>(port)) {</div><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;         <span class="keywordflow">if</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> &lt; 1) {</div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 1;</div><div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;         }</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;         <span class="comment">/* Create DivertingLegInformation2 facility */</span></div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_DivertingLegInformation2;</div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DivertingPresent = 1;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;         misdn_PresentedNumberUnscreened_fill(</div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;            &amp;newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.Diverting,</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;            &amp;newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>);</div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;         <span class="keywordflow">switch</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>) {</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;         <span class="keywordflow">case</span> 2:<span class="comment">/* blocked */</span></div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;            <span class="comment">/* Block the number going out */</span></div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.Diverting.Type = 1;<span class="comment">/* presentationRestricted */</span></div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;            <span class="comment">/* Don&#39;t tell about any previous diversions or why for that matter. */</span></div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DiversionCounter = 1;</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DiversionReason = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DiversionCounter =</div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;               newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DiversionReason =</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;               misdn_to_diversion_reason(newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a>);</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;         }</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;         newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.OriginalCalledPresent = 0;</div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;         <span class="keywordflow">if</span> (1 &lt; newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.DiversionCounter) {</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.OriginalCalledPresent = 1;</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;            newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation2.OriginalCalled.Type = 2;<span class="comment">/* numberNotAvailableDueToInterworking */</span></div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;         }</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;<span class="comment">          * Expect a DivertingLegInformation3 to update the COLR of the</span></div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;<span class="comment">          * redirecting-to party we are attempting to call now.</span></div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;         newbc-&gt;div_leg_3_rx_wanted = 1;</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;      }</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;   }</div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;   exceed = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a294c6e2d2354b30aac2902ea21a94f0b">add_out_calls</a>(port);</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;   <span class="keywordflow">if</span> (exceed != 0) {</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[16];</div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, exceed);</div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ast, <span class="stringliteral">&quot;MAX_OVERFLOW&quot;</span>, tmp);</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>);</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;   }</div><div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;   <span class="keywordflow">if</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function != Fac_None) {</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, newbc);</div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;   }</div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;   r = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(newbc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a>);</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;<span class="comment">   /** we should have l3id after sending setup **/</span></div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a> = newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>;</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;   <span class="keywordflow">if</span> (r == -<a class="code" href="../../de/d26/isdn__lib_8h.html#aefc450be0adfb41a7d1c57716c537648ad76b17371e2d0f0f02080a4c5058d160">ENOCHAN</a>) {</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, port, <span class="stringliteral">&quot; --&gt; * Theres no Channel at the moment .. !\n&quot;</span>);</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot; --&gt; * SEND: State Down pid:%d\n&quot;</span>, newbc ? newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a> : -1);</div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#a84f3380611feeec35bb25319b26f92fd">AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</a>);</div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;   }</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; * SEND: State Dialing pid:%d\n&quot;</span>, newbc ? newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a> : 1);</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;   <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a>);</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;   <span class="keywordflow">if</span> (newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(ch);</div><div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;   }</div><div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;</div><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>;</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;</div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7915b63b76329bbf4c3f434841a8bf41"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a></div><div class="ttdeci">void debug_numtype(int port, int numtype, char *type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05853">chan_misdn.c:5853</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a879a0c566b9bb9c07bd0f1f13948c373"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a879a0c566b9bb9c07bd0f1f13948c373">update_config</a></div><div class="ttdeci">static void update_config(struct chan_list *ch)</div><div class="ttdoc">Updates caller ID information from config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05761">chan_misdn.c:5761</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1">MISDN_CFG_LOCALDIALPLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00049">chan_misdn_config.h:49</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a57b29a2e12f8d2695625942049f81a2c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a57b29a2e12f8d2695625942049f81a2c">ast_channel_transfercapability</a></div><div class="ttdeci">unsigned short ast_channel_transfercapability(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00501">channel_internal_api.c:501</a></div></div>
<div class="ttc" id="causes_8h_html_a554ad1e279785609a381c194f770f554"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_TEMPORARY_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00121">causes.h:121</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00176">isdn_lib.h:176</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">misdn_bchannel::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">User set presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00600">isdn_lib.h:600</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6fcf0e0104e3ee88f0944544207a2b03"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">misdn_bchannel::incoming_cid_tag</a></div><div class="ttdeci">char incoming_cid_tag[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Incoming Caller ID string tag for special purpose. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00348">isdn_lib.h:348</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a294c6e2d2354b30aac2902ea21a94f0b"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a294c6e2d2354b30aac2902ea21a94f0b">add_out_calls</a></div><div class="ttdeci">int add_out_calls(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08859">chan_misdn.c:8859</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a54d4a7ef01a4074469ac37421f843333"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">misdn_bchannel::outgoing_colp</a></div><div class="ttdeci">int outgoing_colp</div><div class="ttdoc">Select what to do with outgoing COLP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00594">isdn_lib.h:594</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63e06215600e01fdfb2234581d3457b5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63e06215600e01fdfb2234581d3457b5">misdn_bchannel::sending_complete</a></div><div class="ttdeci">int sending_complete</div><div class="ttdoc">TRUE if all digits necessary to complete the call are available. No more INFORMATION messages are nee...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00470">isdn_lib.h:470</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="causes_8h_html_a84f3380611feeec35bb25319b26f92fd"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a84f3380611feeec35bb25319b26f92fd">AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00119">causes.h:119</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aacab4ba06a4bae692a7752b56f2d02fe"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aacab4ba06a4bae692a7752b56f2d02fe">import_ch</a></div><div class="ttdeci">void import_ch(struct ast_channel *chan, struct misdn_bchannel *bc, struct chan_list *ch)</div><div class="ttdoc">Import parameters from the dialplan environment variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08786">chan_misdn.c:8786</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac4194cb1021ae6d8ea9be1219c0853a8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a></div><div class="ttdeci">static int stop_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07772">chan_misdn.c:7772</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa4a93466951ba12cc493dfd11d98a680">MISDN_CFG_APPEND_MSN_TO_CALLERID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00046">chan_misdn_config.h:46</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00128">isdn_lib.h:128</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aed5b46635418b99add3c2a5a98f2571b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">misdn_bchannel::set_presentation</a></div><div class="ttdeci">int set_presentation</div><div class="ttdoc">TRUE if the user set the presentation restriction code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00603">isdn_lib.h:603</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abb98bbaed704a93d67663012188d4f46"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a></div><div class="ttdeci">int misdn_lib_is_ptp(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00128">isdn_lib.c:128</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="structast__party__number_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00294">channel.h:294</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_accfcb380df76a64251d88ef49c2dd4e3"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_NONSTANDARD_APP_ARGS(args, parse, sep)</div><div class="ttdoc">Performs the &amp;#39;nonstandard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">include/asterisk/app.h:1300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a115226990899ee9eb82f99539279bf21"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a115226990899ee9eb82f99539279bf21">misdn_copy_redirecting_from_ast</a></div><div class="ttdeci">static void misdn_copy_redirecting_from_ast(struct misdn_bchannel *bc, struct ast_channel *ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06382">chan_misdn.c:6382</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00333">chan_misdn.c:333</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3438ef3ff767addb942dab05ef04fd87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a></div><div class="ttdeci">static enum mISDN_NUMBER_TYPE ast_to_misdn_ton(unsigned ast_number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01916">chan_misdn.c:1916</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00039">channelstate.h:39</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__party__id_html_a7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">ast_party_id::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdoc">User-set &quot;tag&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00355">channel.h:355</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="channel_8h_html_acb027b361350d81e4b94b540fbdfe4e4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acb027b361350d81e4b94b540fbdfe4e4">ast_transfercapability2str</a></div><div class="ttdeci">char * ast_transfercapability2str(int transfercapability) attribute_const</div><div class="ttdoc">Gives the string form of a given transfer capability. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00678">channel.c:678</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aefc450be0adfb41a7d1c57716c537648ad76b17371e2d0f0f02080a4c5058d160"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aefc450be0adfb41a7d1c57716c537648ad76b17371e2d0f0f02080a4c5058d160">ENOCHAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00089">isdn_lib.h:89</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6de645b40ee13ae95c366d0273367837"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6de645b40ee13ae95c366d0273367837">misdn_set_opt_exec</a></div><div class="ttdeci">static int misdn_set_opt_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12365">chan_misdn.c:12365</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">misdn_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call has been redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00316">isdn_lib.h:316</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a2a616bc0b9f450c55ea28ea3a5c9e8e4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">misdn_bchannel::l3_id</a></div><div class="ttdeci">int l3_id</div><div class="ttdoc">Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00399">isdn_lib.h:399</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4256599deebfa7f4e6e546a02607f4f0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a></div><div class="ttdeci">static enum mISDN_NUMBER_PLAN ast_to_misdn_plan(unsigned ast_number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02042">chan_misdn.c:2042</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a30545bb1d30710d0b66d91ef8e7512a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30545bb1d30710d0b66d91ef8e7512a9">&#9670;&nbsp;</a></span>misdn_chan_is_valid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_chan_is_valid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00749">749</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_list::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *list;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="keywordflow">for</span> (list = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a>; list; list = list-&gt;<a class="code" href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">next</a>) {</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">if</span> (list == ch) {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="ttc" id="structchan__list_html_a60fbcc5914e6335bae7f4c9a97dfeee2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a60fbcc5914e6335bae7f4c9a97dfeee2">chan_list::next</a></div><div class="ttdeci">struct chan_list * next</div><div class="ttdoc">Next channel call record in the list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00608">chan_misdn.c:608</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a104c30b0f9b3fa80d00e5ec142686d18"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a104c30b0f9b3fa80d00e5ec142686d18">cl_te</a></div><div class="ttdeci">static struct chan_list * cl_te</div><div class="ttdoc">Global channel call record list head. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00704">chan_misdn.c:704</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a292953c24b6a6f070fdc8096adcb4cfc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a292953c24b6a6f070fdc8096adcb4cfc">cl_te_lock</a></div><div class="ttdeci">static ast_mutex_t cl_te_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00705">chan_misdn.c:705</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae519554426944811b0805a4a7595e538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae519554426944811b0805a4a7595e538">&#9670;&nbsp;</a></span>misdn_check_l2l1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_check_l2l1 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12291">12291</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01574">ast_safe_sleep()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01781">misdn_lib_get_port_up()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01821">misdn_lib_port_up()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l12292"></a><span class="lineno">12292</span>&#160;{</div><div class="line"><a name="l12293"></a><span class="lineno">12293</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l12294"></a><span class="lineno">12294</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d3/d08/structgroup.html">group</a>[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l12295"></a><span class="lineno">12295</span>&#160;   <span class="keywordtype">char</span> *port_str;</div><div class="line"><a name="l12296"></a><span class="lineno">12296</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l12297"></a><span class="lineno">12297</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l12298"></a><span class="lineno">12298</span>&#160;   <span class="keywordtype">int</span> dowait = 0;</div><div class="line"><a name="l12299"></a><span class="lineno">12299</span>&#160;   <span class="keywordtype">int</span> port_up;</div><div class="line"><a name="l12300"></a><span class="lineno">12300</span>&#160;</div><div class="line"><a name="l12301"></a><span class="lineno">12301</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l12302"></a><span class="lineno">12302</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(grouppar);</div><div class="line"><a name="l12303"></a><span class="lineno">12303</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(timeout);</div><div class="line"><a name="l12304"></a><span class="lineno">12304</span>&#160;   );</div><div class="line"><a name="l12305"></a><span class="lineno">12305</span>&#160;</div><div class="line"><a name="l12306"></a><span class="lineno">12306</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((<span class="keywordtype">char</span> *) data)) {</div><div class="line"><a name="l12307"></a><span class="lineno">12307</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_check_l2l1 Requires arguments\n&quot;</span>);</div><div class="line"><a name="l12308"></a><span class="lineno">12308</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12309"></a><span class="lineno">12309</span>&#160;   }</div><div class="line"><a name="l12310"></a><span class="lineno">12310</span>&#160;</div><div class="line"><a name="l12311"></a><span class="lineno">12311</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l12312"></a><span class="lineno">12312</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l12313"></a><span class="lineno">12313</span>&#160;</div><div class="line"><a name="l12314"></a><span class="lineno">12314</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc != 2) {</div><div class="line"><a name="l12315"></a><span class="lineno">12315</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Wrong argument count\n&quot;</span>);</div><div class="line"><a name="l12316"></a><span class="lineno">12316</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12317"></a><span class="lineno">12317</span>&#160;   }</div><div class="line"><a name="l12318"></a><span class="lineno">12318</span>&#160;</div><div class="line"><a name="l12319"></a><span class="lineno">12319</span>&#160;   <span class="comment">/*ast_log(LOG_NOTICE, &quot;Arguments: group/port &#39;%s&#39; timeout &#39;%s&#39;\n&quot;, args.grouppar, args.timeout);*/</span></div><div class="line"><a name="l12320"></a><span class="lineno">12320</span>&#160;   timeout = atoi(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.timeout);</div><div class="line"><a name="l12321"></a><span class="lineno">12321</span>&#160;   port_str = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.grouppar;</div><div class="line"><a name="l12322"></a><span class="lineno">12322</span>&#160;</div><div class="line"><a name="l12323"></a><span class="lineno">12323</span>&#160;   <span class="keywordflow">if</span> (port_str[0] == <span class="charliteral">&#39;g&#39;</span> &amp;&amp; port_str[1] == <span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l12324"></a><span class="lineno">12324</span>&#160;      <span class="comment">/* We make a group call lets checkout which ports are in my group */</span></div><div class="line"><a name="l12325"></a><span class="lineno">12325</span>&#160;      port_str += 2;</div><div class="line"><a name="l12326"></a><span class="lineno">12326</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(group, port_str, <span class="keyword">sizeof</span>(group));</div><div class="line"><a name="l12327"></a><span class="lineno">12327</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot;Checking Ports in group: %s\n&quot;</span>, group);</div><div class="line"><a name="l12328"></a><span class="lineno">12328</span>&#160;</div><div class="line"><a name="l12329"></a><span class="lineno">12329</span>&#160;      <span class="keywordflow">for</span> (port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port);</div><div class="line"><a name="l12330"></a><span class="lineno">12330</span>&#160;         port &gt; 0;</div><div class="line"><a name="l12331"></a><span class="lineno">12331</span>&#160;         port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l12332"></a><span class="lineno">12332</span>&#160;         <span class="keywordtype">char</span> cfg_group[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l12333"></a><span class="lineno">12333</span>&#160;</div><div class="line"><a name="l12334"></a><span class="lineno">12334</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot;trying port %d\n&quot;</span>, port);</div><div class="line"><a name="l12335"></a><span class="lineno">12335</span>&#160;</div><div class="line"><a name="l12336"></a><span class="lineno">12336</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>, cfg_group, <span class="keyword">sizeof</span>(cfg_group));</div><div class="line"><a name="l12337"></a><span class="lineno">12337</span>&#160;</div><div class="line"><a name="l12338"></a><span class="lineno">12338</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(cfg_group, group)) {</div><div class="line"><a name="l12339"></a><span class="lineno">12339</span>&#160;            port_up = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a>(port, 1);</div><div class="line"><a name="l12340"></a><span class="lineno">12340</span>&#160;            <span class="keywordflow">if</span> (!port_up) {</div><div class="line"><a name="l12341"></a><span class="lineno">12341</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot; --&gt; port &#39;%d&#39;\n&quot;</span>, port);</div><div class="line"><a name="l12342"></a><span class="lineno">12342</span>&#160;               <a class="code" href="../../de/dfe/isdn__lib_8c.html#a35c0c233baff2379c5ab795e32964316">misdn_lib_get_port_up</a>(port);</div><div class="line"><a name="l12343"></a><span class="lineno">12343</span>&#160;               dowait = 1;</div><div class="line"><a name="l12344"></a><span class="lineno">12344</span>&#160;            }</div><div class="line"><a name="l12345"></a><span class="lineno">12345</span>&#160;         }</div><div class="line"><a name="l12346"></a><span class="lineno">12346</span>&#160;      }</div><div class="line"><a name="l12347"></a><span class="lineno">12347</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12348"></a><span class="lineno">12348</span>&#160;      port = atoi(port_str);</div><div class="line"><a name="l12349"></a><span class="lineno">12349</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot;Checking Port: %d\n&quot;</span>, port);</div><div class="line"><a name="l12350"></a><span class="lineno">12350</span>&#160;      port_up = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a>(port, 1);</div><div class="line"><a name="l12351"></a><span class="lineno">12351</span>&#160;      <span class="keywordflow">if</span> (!port_up) {</div><div class="line"><a name="l12352"></a><span class="lineno">12352</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a35c0c233baff2379c5ab795e32964316">misdn_lib_get_port_up</a>(port);</div><div class="line"><a name="l12353"></a><span class="lineno">12353</span>&#160;         dowait = 1;</div><div class="line"><a name="l12354"></a><span class="lineno">12354</span>&#160;      }</div><div class="line"><a name="l12355"></a><span class="lineno">12355</span>&#160;   }</div><div class="line"><a name="l12356"></a><span class="lineno">12356</span>&#160;</div><div class="line"><a name="l12357"></a><span class="lineno">12357</span>&#160;   <span class="keywordflow">if</span> (dowait) {</div><div class="line"><a name="l12358"></a><span class="lineno">12358</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot;Waiting for &#39;%d&#39; seconds\n&quot;</span>, timeout);</div><div class="line"><a name="l12359"></a><span class="lineno">12359</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(chan, timeout * 1000);</div><div class="line"><a name="l12360"></a><span class="lineno">12360</span>&#160;   }</div><div class="line"><a name="l12361"></a><span class="lineno">12361</span>&#160;</div><div class="line"><a name="l12362"></a><span class="lineno">12362</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12363"></a><span class="lineno">12363</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="channel_8h_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00031">chan_misdn_config.h:31</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a35c0c233baff2379c5ab795e32964316"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a35c0c233baff2379c5ab795e32964316">misdn_lib_get_port_up</a></div><div class="ttdeci">int misdn_lib_get_port_up(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01781">isdn_lib.c:1781</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a6f06df375dc3530408a6c2f8488b2440"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a></div><div class="ttdeci">int misdn_lib_port_up(int port, int check)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01821">isdn_lib.c:1821</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a115226990899ee9eb82f99539279bf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a115226990899ee9eb82f99539279bf21">&#9670;&nbsp;</a></span>misdn_copy_redirecting_from_ast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_copy_redirecting_from_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">6382</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00916">ast_channel_redirecting_effective_from()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00920">ast_channel_redirecting_effective_to()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02042">ast_to_misdn_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02145">ast_to_misdn_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02274">ast_to_misdn_reason()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02242">ast_to_misdn_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01916">ast_to_misdn_ton()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00316">misdn_party_redirecting::count</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00549">ast_party_redirecting::count</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06483">misdn_update_redirecting()</a>.</p>
<div class="fragment"><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;{</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> from_id = <a class="code" href="../../d5/d7b/channel_8h.html#a20d25ecd953d8ab838fa96d3cb6f06a1">ast_channel_redirecting_effective_from</a>(ast);</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> to_id = <a class="code" href="../../d5/d7b/channel_8h.html#a1f58aea6d9e9c644a5ec802f45c6245d">ast_channel_redirecting_effective_to</a>(ast);</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;</div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;      <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;   <span class="keywordflow">if</span> (from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;         <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a>(from_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;   }</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;      <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;   <span class="keywordflow">if</span> (to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;         <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a>(to_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;   }</div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;   bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac382817323301fbadbb7f0a5d5025c37">ast_to_misdn_reason</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ast)-&gt;reason.code);</div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;   bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ast)-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afb118af6bdca35689358599c1b579b29"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a></div><div class="ttdeci">static int ast_to_misdn_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02145">chan_misdn.c:2145</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a20d25ecd953d8ab838fa96d3cb6f06a1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a20d25ecd953d8ab838fa96d3cb6f06a1">ast_channel_redirecting_effective_from</a></div><div class="ttdeci">struct ast_party_id ast_channel_redirecting_effective_from(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00916">channel_internal_api.c:916</a></div></div>
<div class="ttc" id="structast__party__number_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 presentation-indicator and screening-indicator encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00296">channel.h:296</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="channel_8h_html_a1f58aea6d9e9c644a5ec802f45c6245d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1f58aea6d9e9c644a5ec802f45c6245d">ast_channel_redirecting_effective_to</a></div><div class="ttdeci">struct ast_party_id ast_channel_redirecting_effective_to(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00920">channel_internal_api.c:920</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="structast__party__number_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00294">channel.h:294</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a939a80be7808cdb4e608d121b71b36d4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a></div><div class="ttdeci">static int ast_to_misdn_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02242">chan_misdn.c:2242</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3438ef3ff767addb942dab05ef04fd87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a></div><div class="ttdeci">static enum mISDN_NUMBER_TYPE ast_to_misdn_ton(unsigned ast_number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01916">chan_misdn.c:1916</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">ast_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call was redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00549">channel.h:549</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac382817323301fbadbb7f0a5d5025c37"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac382817323301fbadbb7f0a5d5025c37">ast_to_misdn_reason</a></div><div class="ttdeci">static enum mISDN_REDIRECTING_REASON ast_to_misdn_reason(const enum AST_REDIRECTING_REASON ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02274">chan_misdn.c:2274</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">misdn_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call has been redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00316">isdn_lib.h:316</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4256599deebfa7f4e6e546a02607f4f0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a></div><div class="ttdeci">static enum mISDN_NUMBER_PLAN ast_to_misdn_plan(unsigned ast_number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02042">chan_misdn.c:2042</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae09d78e4116be60f1895c9e32142ccb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09d78e4116be60f1895c9e32142ccb8">&#9670;&nbsp;</a></span>misdn_copy_redirecting_to_ast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_copy_redirecting_to_ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d6/d49/structmisdn__party__redirecting.html">misdn_party_redirecting</a> *&#160;</td>
          <td class="paramname"><em>redirect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">6437</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l09215">ast_channel_set_redirecting()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02153">ast_party_redirecting_set_init()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00511">ast_party_redirecting_reason::code</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00316">misdn_party_redirecting::count</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00549">ast_party_redirecting::count</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00528">ast_party_redirecting::from</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00560">ast_set_party_redirecting::from</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02000">misdn_to_ast_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02117">misdn_to_ast_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02314">misdn_to_ast_reason()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02210">misdn_to_ast_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01874">misdn_to_ast_ton()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00366">ast_set_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00543">ast_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00531">ast_party_redirecting::to</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00562">ast_set_party_redirecting::to</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;{</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>;</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a8ec95c9df838fdfbb514995efb96bf82">ast_party_redirecting_set_init</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ast));</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;   memset(&amp;<a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>));</div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>.from.number = 1;</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;   redirecting.from.number.valid = 1;</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;   redirecting.from.number.str = (<span class="keywordtype">char</span> *) redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>;</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;   redirecting.from.number.plan =</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>)</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;   redirecting.from.number.presentation =</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>)</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;   redirecting.from.tag = tag;</div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;</div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>.to.number = 1;</div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;   redirecting.to.number.valid = 1;</div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;   redirecting.to.number.str = (<span class="keywordtype">char</span> *) redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>;</div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;   redirecting.to.number.plan =</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>)</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;   redirecting.to.number.presentation =</div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>)</div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;   redirecting.to.tag = tag;</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;   redirecting.reason.code = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7efd7aa77a455e5aaf82e41cfcf5815e">misdn_to_ast_reason</a>(redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a>);</div><div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;   redirecting.count = redirect-&gt;<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1cb98e78f1231d96dad09ddaeaf0981d">ast_channel_set_redirecting</a>(ast, &amp;redirecting, &amp;<a class="code" href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a>);</div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;}</div><div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6cd818b3d3a858ccbed06fe1675147af"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a></div><div class="ttdeci">static int misdn_to_ast_plan(enum mISDN_NUMBER_PLAN number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02000">chan_misdn.c:2000</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a809192e8588d50a33a4242ede2873b71"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a></div><div class="ttdeci">static int misdn_to_ast_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02117">chan_misdn.c:2117</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab53c3ed364439bed4bbdd74e3d873c86"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a></div><div class="ttdeci">static int misdn_to_ast_ton(enum mISDN_NUMBER_TYPE number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01874">chan_misdn.c:1874</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_a1cb98e78f1231d96dad09ddaeaf0981d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1cb98e78f1231d96dad09ddaeaf0981d">ast_channel_set_redirecting</a></div><div class="ttdeci">void ast_channel_set_redirecting(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Set the redirecting id information in the Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09215">channel.c:9215</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="structast__party__redirecting_html"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a></div><div class="ttdoc">Redirecting Line information. RDNIS (Redirecting Directory Number Information Service) Where a call d...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00523">channel.h:523</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7efd7aa77a455e5aaf82e41cfcf5815e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7efd7aa77a455e5aaf82e41cfcf5815e">misdn_to_ast_reason</a></div><div class="ttdeci">static enum AST_REDIRECTING_REASON misdn_to_ast_reason(const enum mISDN_REDIRECTING_REASON q931)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02314">chan_misdn.c:2314</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a></div><div class="ttdoc">Indicate what information in ast_party_redirecting should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00556">channel.h:556</a></div></div>
<div class="ttc" id="channel_8h_html_a8ec95c9df838fdfbb514995efb96bf82"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8ec95c9df838fdfbb514995efb96bf82">ast_party_redirecting_set_init</a></div><div class="ttdeci">void ast_party_redirecting_set_init(struct ast_party_redirecting *init, const struct ast_party_redirecting *guide)</div><div class="ttdoc">Initialize the given redirecting id structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02153">channel.c:2153</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af1cb0928be35bc54586eae5e3052f325"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af1cb0928be35bc54586eae5e3052f325">update_redirecting</a></div><div class="ttdeci">static void update_redirecting(struct sip_pvt *p, const void *data, size_t datalen)</div><div class="ttdoc">Send a provisional response indicating that a call was redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l15755">chan_sip.c:15755</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3f11b00546ef6bc9e47853ab516ad8dd"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a></div><div class="ttdeci">static int misdn_to_ast_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02210">chan_misdn.c:2210</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">misdn_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call has been redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00316">isdn_lib.h:316</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae637a258dbb615de52eef6a5f179a920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae637a258dbb615de52eef6a5f179a920">&#9670;&nbsp;</a></span>misdn_digit_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_digit_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06909">6909</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>
<div class="fragment"><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;{</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;   <span class="comment">/* XXX Modify this callback to support Asterisk controlling the length of DTMF */</span></div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a683bbeada1c322bda3db85f0a18c9170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683bbeada1c322bda3db85f0a18c9170">&#9670;&nbsp;</a></span>misdn_digit_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_digit_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06915">6915</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00154">EVENT_INFORMATION</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00650">misdn_bchannel::info_dad</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00653">misdn_bchannel::infos_pending</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00333">MISDN_CALLING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00334">MISDN_CALLING_ACKNOWLEDGE</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03681">send_digit_to_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00457">misdn_bchannel::send_dtmf</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>
<div class="fragment"><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;{</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *p;</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[2] = { <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, 0 };</div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;   <span class="keywordflow">if</span> (!ast || !(p = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;   }</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;</div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;   bc = p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc ? bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0, <span class="stringliteral">&quot;* IND : Digit %c\n&quot;</span>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;</div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;   <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; !! Got Digit Event without having bchannel Object\n&quot;</span>);</div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;   }</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;</div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>:</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;      <span class="keywordflow">if</span> (strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>) &lt; <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>) - 1) {</div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>, buf, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">infos_pending</a>) - 1);</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;      }</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>:</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>, buf, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">info_dad</a>));</div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;      <span class="keywordflow">if</span> (strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) &lt; <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - 1) {</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;         strncat(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, buf, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) - 1);</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;      }</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a>);</div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">send_dtmf</a>) {</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a25f94996ca2c5032eb290f2eec5da9b7">send_digit_to_chan</a>(p, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>);</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;      }</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;   }</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00334">chan_misdn.c:334</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7811b58aeb8dea5640197a6a61c86db4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7811b58aeb8dea5640197a6a61c86db4">misdn_bchannel::infos_pending</a></div><div class="ttdeci">char infos_pending[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Collected digits to go into info_dad[] while waiting for a SETUP_ACKNOWLEDGE to come in...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00653">isdn_lib.h:653</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1f467e7dfa18d05d423b9daff1b4e94c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">misdn_bchannel::send_dtmf</a></div><div class="ttdeci">int send_dtmf</div><div class="ttdoc">TRUE if we should produce DTMF tones ourselves. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00457">isdn_lib.h:457</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00333">chan_misdn.c:333</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00154">isdn_lib.h:154</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a25f94996ca2c5032eb290f2eec5da9b7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a25f94996ca2c5032eb290f2eec5da9b7">send_digit_to_chan</a></div><div class="ttdeci">static void send_digit_to_chan(struct chan_list *cl, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03681">chan_misdn.c:3681</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af5485e2adfaed82d5e7a83e1033eab55"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af5485e2adfaed82d5e7a83e1033eab55">misdn_bchannel::info_dad</a></div><div class="ttdeci">char info_dad[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Current overlap dialing digits to/from INFORMATION messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00650">isdn_lib.h:650</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9c367e9583873f59fe103da83241ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c367e9583873f59fe103da83241ac1">&#9670;&nbsp;</a></span>misdn_facility_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_facility_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">12168</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l12169"></a><span class="lineno">12169</span>&#160;{</div><div class="line"><a name="l12170"></a><span class="lineno">12170</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(chan);</div><div class="line"><a name="l12171"></a><span class="lineno">12171</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l12172"></a><span class="lineno">12172</span>&#160;   <span class="keywordtype">unsigned</span> max_len;</div><div class="line"><a name="l12173"></a><span class="lineno">12173</span>&#160;</div><div class="line"><a name="l12174"></a><span class="lineno">12174</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l12175"></a><span class="lineno">12175</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(facility_type);</div><div class="line"><a name="l12176"></a><span class="lineno">12176</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(arg)[99];</div><div class="line"><a name="l12177"></a><span class="lineno">12177</span>&#160;   );</div><div class="line"><a name="l12178"></a><span class="lineno">12178</span>&#160;</div><div class="line"><a name="l12179"></a><span class="lineno">12179</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, 0, <span class="stringliteral">&quot;TYPE: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l12180"></a><span class="lineno">12180</span>&#160;</div><div class="line"><a name="l12181"></a><span class="lineno">12181</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>)) {</div><div class="line"><a name="l12182"></a><span class="lineno">12182</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_facility only makes sense with %s channels!\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>);</div><div class="line"><a name="l12183"></a><span class="lineno">12183</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12184"></a><span class="lineno">12184</span>&#160;   }</div><div class="line"><a name="l12185"></a><span class="lineno">12185</span>&#160;</div><div class="line"><a name="l12186"></a><span class="lineno">12186</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((<span class="keywordtype">char</span> *) data)) {</div><div class="line"><a name="l12187"></a><span class="lineno">12187</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_facility requires arguments: facility_type[,&lt;args&gt;]\n&quot;</span>);</div><div class="line"><a name="l12188"></a><span class="lineno">12188</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12189"></a><span class="lineno">12189</span>&#160;   }</div><div class="line"><a name="l12190"></a><span class="lineno">12190</span>&#160;</div><div class="line"><a name="l12191"></a><span class="lineno">12191</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l12192"></a><span class="lineno">12192</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l12193"></a><span class="lineno">12193</span>&#160;</div><div class="line"><a name="l12194"></a><span class="lineno">12194</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.facility_type)) {</div><div class="line"><a name="l12195"></a><span class="lineno">12195</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_facility requires arguments: facility_type[,&lt;args&gt;]\n&quot;</span>);</div><div class="line"><a name="l12196"></a><span class="lineno">12196</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12197"></a><span class="lineno">12197</span>&#160;   }</div><div class="line"><a name="l12198"></a><span class="lineno">12198</span>&#160;</div><div class="line"><a name="l12199"></a><span class="lineno">12199</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.facility_type, <span class="stringliteral">&quot;calldeflect&quot;</span>)) {</div><div class="line"><a name="l12200"></a><span class="lineno">12200</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0])) {</div><div class="line"><a name="l12201"></a><span class="lineno">12201</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Facility: Call Deflection requires an argument: Number\n&quot;</span>);</div><div class="line"><a name="l12202"></a><span class="lineno">12202</span>&#160;      }</div><div class="line"><a name="l12203"></a><span class="lineno">12203</span>&#160;</div><div class="line"><a name="l12204"></a><span class="lineno">12204</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l12205"></a><span class="lineno">12205</span>&#160;      max_len = <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Number) - 1;</div><div class="line"><a name="l12206"></a><span class="lineno">12206</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0])) {</div><div class="line"><a name="l12207"></a><span class="lineno">12207</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l12208"></a><span class="lineno">12208</span>&#160;            <span class="stringliteral">&quot;Facility: Number argument too long (up to %u digits are allowed). Ignoring.\n&quot;</span>,</div><div class="line"><a name="l12209"></a><span class="lineno">12209</span>&#160;            max_len);</div><div class="line"><a name="l12210"></a><span class="lineno">12210</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12211"></a><span class="lineno">12211</span>&#160;      }</div><div class="line"><a name="l12212"></a><span class="lineno">12212</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CallDeflection;</div><div class="line"><a name="l12213"></a><span class="lineno">12213</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l12214"></a><span class="lineno">12214</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l12215"></a><span class="lineno">12215</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUserPresent = 1;</div><div class="line"><a name="l12216"></a><span class="lineno">12216</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUser = 0;</div><div class="line"><a name="l12217"></a><span class="lineno">12217</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l12218"></a><span class="lineno">12218</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.LengthOfNumber = strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0]);</div><div class="line"><a name="l12219"></a><span class="lineno">12219</span>&#160;      strcpy((<span class="keywordtype">char</span> *) ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Party.Number, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0]);</div><div class="line"><a name="l12220"></a><span class="lineno">12220</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.Component.Invoke.Deflection.Subaddress.Length = 0;</div><div class="line"><a name="l12221"></a><span class="lineno">12221</span>&#160;</div><div class="line"><a name="l12222"></a><span class="lineno">12222</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l12223"></a><span class="lineno">12223</span>&#160;</div><div class="line"><a name="l12224"></a><span class="lineno">12224</span>&#160;      max_len = <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.DeflectedToNumber) - 1;</div><div class="line"><a name="l12225"></a><span class="lineno">12225</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0])) {</div><div class="line"><a name="l12226"></a><span class="lineno">12226</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l12227"></a><span class="lineno">12227</span>&#160;            <span class="stringliteral">&quot;Facility: Number argument too long (up to %u digits are allowed). Ignoring.\n&quot;</span>,</div><div class="line"><a name="l12228"></a><span class="lineno">12228</span>&#160;            max_len);</div><div class="line"><a name="l12229"></a><span class="lineno">12229</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12230"></a><span class="lineno">12230</span>&#160;      }</div><div class="line"><a name="l12231"></a><span class="lineno">12231</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CD;</div><div class="line"><a name="l12232"></a><span class="lineno">12232</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.PresentationAllowed = 0;</div><div class="line"><a name="l12233"></a><span class="lineno">12233</span>&#160;      <span class="comment">//ch-&gt;bc-&gt;fac_out.u.CDeflection.DeflectedToSubaddress[0] = 0;</span></div><div class="line"><a name="l12234"></a><span class="lineno">12234</span>&#160;      strcpy((<span class="keywordtype">char</span> *) ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CDeflection.DeflectedToNumber, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0]);</div><div class="line"><a name="l12235"></a><span class="lineno">12235</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l12236"></a><span class="lineno">12236</span>&#160;</div><div class="line"><a name="l12237"></a><span class="lineno">12237</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l12238"></a><span class="lineno">12238</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l12239"></a><span class="lineno">12239</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l12240"></a><span class="lineno">12240</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l12241"></a><span class="lineno">12241</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.facility_type, <span class="stringliteral">&quot;callrerouteing&quot;</span>)</div><div class="line"><a name="l12242"></a><span class="lineno">12242</span>&#160;      || !strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.facility_type, <span class="stringliteral">&quot;callrerouting&quot;</span>)) {</div><div class="line"><a name="l12243"></a><span class="lineno">12243</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0])) {</div><div class="line"><a name="l12244"></a><span class="lineno">12244</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Facility: Call rerouting requires an argument: Number\n&quot;</span>);</div><div class="line"><a name="l12245"></a><span class="lineno">12245</span>&#160;      }</div><div class="line"><a name="l12246"></a><span class="lineno">12246</span>&#160;</div><div class="line"><a name="l12247"></a><span class="lineno">12247</span>&#160;      max_len = <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Number) - 1;</div><div class="line"><a name="l12248"></a><span class="lineno">12248</span>&#160;      <span class="keywordflow">if</span> (max_len &lt; strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0])) {</div><div class="line"><a name="l12249"></a><span class="lineno">12249</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l12250"></a><span class="lineno">12250</span>&#160;            <span class="stringliteral">&quot;Facility: Number argument too long (up to %u digits are allowed). Ignoring.\n&quot;</span>,</div><div class="line"><a name="l12251"></a><span class="lineno">12251</span>&#160;            max_len);</div><div class="line"><a name="l12252"></a><span class="lineno">12252</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12253"></a><span class="lineno">12253</span>&#160;      }</div><div class="line"><a name="l12254"></a><span class="lineno">12254</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CallRerouteing;</div><div class="line"><a name="l12255"></a><span class="lineno">12255</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l12256"></a><span class="lineno">12256</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.ComponentType = FacComponent_Invoke;</div><div class="line"><a name="l12257"></a><span class="lineno">12257</span>&#160;</div><div class="line"><a name="l12258"></a><span class="lineno">12258</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.ReroutingReason = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l12259"></a><span class="lineno">12259</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.ReroutingCounter = 1;</div><div class="line"><a name="l12260"></a><span class="lineno">12260</span>&#160;</div><div class="line"><a name="l12261"></a><span class="lineno">12261</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Type = 0;<span class="comment">/* unknown */</span></div><div class="line"><a name="l12262"></a><span class="lineno">12262</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.LengthOfNumber = strlen(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0]);</div><div class="line"><a name="l12263"></a><span class="lineno">12263</span>&#160;      strcpy((<span class="keywordtype">char</span> *) ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Party.Number, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.arg[0]);</div><div class="line"><a name="l12264"></a><span class="lineno">12264</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CalledAddress.Subaddress.Length = 0;</div><div class="line"><a name="l12265"></a><span class="lineno">12265</span>&#160;</div><div class="line"><a name="l12266"></a><span class="lineno">12266</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.CallingPartySubaddress.Length = 0;</div><div class="line"><a name="l12267"></a><span class="lineno">12267</span>&#160;</div><div class="line"><a name="l12268"></a><span class="lineno">12268</span>&#160;      <span class="comment">/* 0x90 0x90 0xa3 3.1 kHz audio, circuit mode, 64kbit/sec, level1/a-Law */</span></div><div class="line"><a name="l12269"></a><span class="lineno">12269</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Length = 3;</div><div class="line"><a name="l12270"></a><span class="lineno">12270</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[0] = 0x90;</div><div class="line"><a name="l12271"></a><span class="lineno">12271</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[1] = 0x90;</div><div class="line"><a name="l12272"></a><span class="lineno">12272</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Bc.Contents[2] = 0xa3;</div><div class="line"><a name="l12273"></a><span class="lineno">12273</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Hlc.Length = 0;</div><div class="line"><a name="l12274"></a><span class="lineno">12274</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.Llc.Length = 0;</div><div class="line"><a name="l12275"></a><span class="lineno">12275</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.Q931ie.UserInfo.Length = 0;</div><div class="line"><a name="l12276"></a><span class="lineno">12276</span>&#160;</div><div class="line"><a name="l12277"></a><span class="lineno">12277</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.LastRerouting.Type = 1;<span class="comment">/* presentationRestricted */</span></div><div class="line"><a name="l12278"></a><span class="lineno">12278</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallRerouteing.Component.Invoke.SubscriptionOption = 0;<span class="comment">/* no notification to caller */</span></div><div class="line"><a name="l12279"></a><span class="lineno">12279</span>&#160;</div><div class="line"><a name="l12280"></a><span class="lineno">12280</span>&#160;      <span class="comment">/* Send message */</span></div><div class="line"><a name="l12281"></a><span class="lineno">12281</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l12282"></a><span class="lineno">12282</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l12283"></a><span class="lineno">12283</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l12284"></a><span class="lineno">12284</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12285"></a><span class="lineno">12285</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Unknown Facility: %s\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.facility_type);</div><div class="line"><a name="l12286"></a><span class="lineno">12286</span>&#160;   }</div><div class="line"><a name="l12287"></a><span class="lineno">12287</span>&#160;</div><div class="line"><a name="l12288"></a><span class="lineno">12288</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12289"></a><span class="lineno">12289</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00151">isdn_lib.h:151</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d4856dbe61d11eebcfb1b7d6250e6e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d4856dbe61d11eebcfb1b7d6250e6e1">&#9670;&nbsp;</a></span>misdn_facility_ie_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_facility_ie_handler </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0">event_e</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">9095</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">misdn_bchannel::AOCD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00521">misdn_bchannel::AOCD_need_export</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00515">misdn_bchannel::AOCDtype</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10392">ast_channel_queue_redirecting_update()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00908">ast_channel_redirecting()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00450">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00452">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01896">ast_party_id_reset()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02135">ast_party_redirecting_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02179">ast_party_redirecting_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02122">ast_party_redirecting_init()</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00325">AST_PRES_RESTRICTED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00318">AST_PRES_USER_NUMBER_UNSCREENED</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00518">misdn_bchannel::chargingUnit</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00316">misdn_party_redirecting::count</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00517">misdn_bchannel::currency</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00130">EVENT_ALERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00149">EVENT_RELEASE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00128">EVENT_SETUP</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03458">export_aoc_vars()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00507">misdn_bchannel::fac_in</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00348">misdn_bchannel::incoming_cid_tag</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">misdn_add_number_prefix()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00229">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00227">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00217">mISDN_NOTIFY_CODE_INVALID</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00204">mISDN_REDIRECTING_REASON_DEFLECTION</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06210">misdn_update_remote_party()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00606">misdn_bchannel::notify_description_code</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00263">misdn_party_dialing::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00260">misdn_party_dialing::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00537">ast_party_redirecting::priv_from</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00534">ast_party_redirecting::priv_orig</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00540">ast_party_redirecting::priv_to</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00531">ast_party_redirecting::to</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00319">misdn_party_redirecting::to_changed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;{</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *diagnostic_msg;</div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;   <span class="keyword">struct </span>misdn_cc_record *cc_record;</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[32];</div><div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> party_id;</div><div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;   <span class="keywordtype">long</span> new_record_id;</div><div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;</div><div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>, bc);</div><div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;   <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function) {</div><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;   <span class="keywordflow">case</span> Fac_ActivationDiversion:</div><div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.ActivationDiversion.ComponentType) {</div><div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;         <span class="comment">/* Positive ACK to activation */</span></div><div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;         <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;      }</div><div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;   <span class="keywordflow">case</span> Fac_DeactivationDiversion:</div><div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DeactivationDiversion.ComponentType) {</div><div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;         <span class="comment">/* Positive ACK to deactivation */</span></div><div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;         <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;      }</div><div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;   <span class="keywordflow">case</span> Fac_ActivationStatusNotificationDiv:</div><div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;      <span class="comment">/* Sent to other MSN numbers on the line when a user activates call forwarding. */</span></div><div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;      <span class="comment">/* Sent in the first call control message of an outgoing call from the served user. */</span></div><div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;      <span class="comment">/* We do not have anything to do for this message. */</span></div><div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;   <span class="keywordflow">case</span> Fac_DeactivationStatusNotificationDiv:</div><div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;      <span class="comment">/* Sent to other MSN numbers on the line when a user deactivates call forwarding. */</span></div><div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;      <span class="comment">/* We do not have anything to do for this message. */</span></div><div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;   <span class="keywordflow">case</span> Fac_InterrogationDiversion:</div><div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;   <span class="keywordflow">case</span> Fac_InterrogateServedUserNumbers:</div><div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;   <span class="keywordflow">case</span> Fac_DiversionInformation:</div><div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;      <span class="comment">/* Sent to the served user when a call is forwarded. */</span></div><div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;      <span class="comment">/* We do not have anything to do for this message. */</span></div><div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;   <span class="keywordflow">case</span> Fac_CallDeflection:</div><div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;         <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.ComponentType) {</div><div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;         <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;               <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>[0] = 0;</div><div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">number_plan</a>;</div><div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>;</div><div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;            <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUserPresent) {</div><div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> =</div><div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;                  bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUser</div><div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;                  ? 0 <span class="comment">/* Allowed */</span> : 1 <span class="comment">/* Restricted */</span>;</div><div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;            }</div><div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;</div><div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;            <span class="comment">/* Add configured prefix to the call deflection number */</span></div><div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;            memset(&amp;party_id, 0, <span class="keyword">sizeof</span>(party_id));</div><div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;            misdn_PartyNumber_extract(&amp;party_id,</div><div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;               &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.Component.Invoke.Deflection.Party);</div><div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, party_id.number_type,</div><div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;               party_id.number, <span class="keyword">sizeof</span>(party_id.number));</div><div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;            <span class="comment">//party_id.presentation = 0;/* Allowed */</span></div><div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;            <span class="comment">//party_id.screening = 0;/* Unscreened */</span></div><div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a> = party_id;</div><div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;</div><div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;            ++bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a>;</div><div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;</div><div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;            ast_channel_call_forward_set(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;</div><div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;            <span class="comment">/* Send back positive ACK */</span></div><div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;<span class="preprocessor">#if 1</span></div><div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;<span class="comment">             * Since there are no return result arguments it must be a</span></div><div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;<span class="comment">             * generic result message.  ETSI 300-196</span></div><div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_RESULT;</div><div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.RESULT.InvokeID = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.InvokeID;</div><div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_CallDeflection;</div><div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.InvokeID = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallDeflection.InvokeID;</div><div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.CallDeflection.ComponentType = FacComponent_Result;</div><div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;</div><div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;            <span class="comment">/* This line is BUSY to further attempts by this dialing attempt. */</span></div><div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>);</div><div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;</div><div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;         <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;            <span class="comment">/* Positive ACK to call deflection */</span></div><div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;<span class="comment">             * Sent in DISCONNECT or FACILITY message depending upon network option.</span></div><div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;<span class="comment">             * It is in the FACILITY message if the call is still offered to the user</span></div><div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;<span class="comment">             * while trying to alert the deflected to party.</span></div><div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;            <span class="comment">/* Ignore the ACK */</span></div><div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;</div><div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;         }</div><div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;      }</div><div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;   <span class="keywordflow">case</span> Fac_CallRerouteing:</div><div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;      <span class="comment">/* Private-Public ISDN interworking message */</span></div><div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation1:</div><div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;      <span class="comment">/* Private-Public ISDN interworking message */</span></div><div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;      bc-&gt;div_leg_3_rx_wanted = 0;</div><div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> =</div><div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;            diversion_reason_to_misdn(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation1.DiversionReason);</div><div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation1.DivertedToPresent) {</div><div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;            misdn_PresentedNumberUnscreened_extract(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>,</div><div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;               &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation1.DivertedTo);</div><div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;</div><div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;            <span class="comment">/* Add configured prefix to redirecting.to.number */</span></div><div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>,</div><div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* unscreened */</span></div><div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;         }</div><div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;         bc-&gt;div_leg_3_rx_wanted = 1;</div><div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;      }</div><div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation2:</div><div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;      <span class="comment">/* Private-Public ISDN interworking message */</span></div><div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a>:</div><div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;         <span class="comment">/* Comes in on a SETUP with redirecting.from information */</span></div><div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;         bc-&gt;div_leg_3_tx_pending = 1;</div><div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;<span class="comment">             * Setup the redirecting.to informtion so we can identify</span></div><div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;<span class="comment">             * if the user wants to manually supply the COLR for this</span></div><div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;<span class="comment">             * redirected to number if further redirects could happen.</span></div><div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;<span class="comment">             * All the user needs to do is set the REDIRECTING(to-pres)</span></div><div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;<span class="comment">             * to the COLR and REDIRECTING(to-num) = ${EXTEN} to be safe</span></div><div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;<span class="comment">             * after determining that the incoming call was redirected by</span></div><div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;<span class="comment">             * checking if there is a REDIRECTING(from-num).</span></div><div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;               <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">number_plan</a>;</div><div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>;</div><div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* unscreened */</span></div><div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;</div><div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> =</div><div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;               diversion_reason_to_misdn(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation2.DiversionReason);</div><div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation2.DiversionCounter;</div><div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;            <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation2.DivertingPresent) {</div><div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;               <span class="comment">/* This information is redundant if there was a redirecting ie in the SETUP. */</span></div><div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;               misdn_PresentedNumberUnscreened_extract(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>,</div><div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;                  &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation2.Diverting);</div><div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;</div><div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;               <span class="comment">/* Add configured prefix to redirecting.from.number */</span></div><div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>,</div><div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;                  bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;            }</div><div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;            <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation2.OriginalCalledPresent) {</div><div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;               <span class="comment">/* We have no place to put the OriginalCalled number */</span></div><div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;            }</div><div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;         }</div><div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; Expected in a SETUP message: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;      }</div><div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation3:</div><div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;      <span class="comment">/* Private-Public ISDN interworking message */</span></div><div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;div_leg_3_rx_wanted) {</div><div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;         bc-&gt;div_leg_3_rx_wanted = 0;</div><div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;</div><div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;</div><div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>)-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> =</div><div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.DivertingLegInformation3.PresentationAllowedIndicator</div><div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;               ? <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a> | <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;               : <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a> | <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;redirecting);</div><div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>));</div><div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;</div><div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;<span class="comment">             * Reset any earlier private redirecting id representations and</span></div><div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;<span class="comment">             * make sure that it is invalidated at the remote end.</span></div><div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_orig);</div><div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_from);</div><div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;redirecting.priv_to);</div><div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;</div><div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;redirecting);</div><div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;         }</div><div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;      }</div><div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;</div><div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;</div><div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;   <span class="keywordflow">case</span> Fac_CD:</div><div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;            <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>[0] = 0;</div><div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">number_plan</a>;</div><div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>;</div><div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> =</div><div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CDeflection.PresentationAllowed</div><div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;            ? 0 <span class="comment">/* Allowed */</span> : 1 <span class="comment">/* Restricted */</span>;</div><div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;</div><div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;            (<span class="keywordtype">char</span> *) bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CDeflection.DeflectedToNumber,</div><div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;            <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>[0] = 0;</div><div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;</div><div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;         ++bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a>;</div><div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;</div><div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;         ast_channel_call_forward_set(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;</div><div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;</div><div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;         <span class="comment">/* This line is BUSY to further attempts by this dialing attempt. */</span></div><div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>);</div><div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;      }</div><div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDCurrency:</div><div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">AOCDtype</a> = Fac_AOCDCurrency;</div><div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;         memcpy(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.AOCDcur, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">currency</a>));</div><div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">AOCD_need_export</a> = 1;</div><div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc);</div><div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;      }</div><div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDChargingUnit:</div><div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">AOCDtype</a> = Fac_AOCDChargingUnit;</div><div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;         memcpy(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.AOCDchu, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">AOCD</a>.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">chargingUnit</a>));</div><div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">AOCD_need_export</a> = 1;</div><div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, bc);</div><div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;      }</div><div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;   <span class="keywordflow">case</span> Fac_ERROR:</div><div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;      diagnostic_msg = misdn_to_str_error_code(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.ERROR.errorValue);</div><div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Facility error code: %s\n&quot;</span>, diagnostic_msg);</div><div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>:</div><div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>:</div><div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;         <span class="comment">/* Possible call failure as a result of Fac_CCBSCall/Fac_CCBS_T_Call */</span></div><div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;peer) {</div><div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;            misdn_cc_set_peer_var(ch-&gt;peer, MISDN_ERROR_MSG, diagnostic_msg);</div><div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;         }</div><div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;      }</div><div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;      cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.ERROR.invokeId);</div><div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;      <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;         cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;         cc_record-&gt;error_code = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.ERROR.errorValue;</div><div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;      }</div><div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;   <span class="keywordflow">case</span> Fac_REJECT:</div><div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;      diagnostic_msg = misdn_to_str_reject_code(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.REJECT.Code);</div><div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Facility reject code: %s\n&quot;</span>, diagnostic_msg);</div><div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>:</div><div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>:</div><div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;         <span class="comment">/* Possible call failure as a result of Fac_CCBSCall/Fac_CCBS_T_Call */</span></div><div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;peer) {</div><div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;            misdn_cc_set_peer_var(ch-&gt;peer, MISDN_ERROR_MSG, diagnostic_msg);</div><div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;         }</div><div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;      }</div><div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.REJECT.InvokeIDPresent) {</div><div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;         cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.REJECT.InvokeID);</div><div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;         <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;            cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;            cc_record-&gt;reject_code = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.REJECT.Code;</div><div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;         }</div><div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;      }</div><div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;   <span class="keywordflow">case</span> Fac_RESULT:</div><div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;      cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.RESULT.InvokeID);</div><div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;      <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;         cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;      }</div><div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;   <span class="keywordflow">case</span> Fac_EctExecute:</div><div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;   <span class="keywordflow">case</span> Fac_ExplicitEctExecute:</div><div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;   <span class="keywordflow">case</span> Fac_EctLinkIdRequest:</div><div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;   <span class="keywordflow">case</span> Fac_SubaddressTransfer:</div><div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;      <span class="comment">/* We do not have anything to do for this message since we do not handle subaddresses. */</span></div><div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;   <span class="keywordflow">case</span> Fac_RequestSubaddress:</div><div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;<span class="comment">       * We do not have anything to do for this message since we do not handle subaddresses.</span></div><div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;<span class="comment">       * However, we do care about some other ie&#39;s that should be present.</span></div><div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;         <span class="comment">/* Add configured prefix to redirecting.to.number */</span></div><div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>,</div><div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;      }</div><div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a>) {</div><div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a>:</div><div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;         <span class="comment">/* Notify ie was not present. */</span></div><div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a>:</div><div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;<span class="comment">          * It would be preferable to update the connected line information</span></div><div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;<span class="comment">          * only when the message callStatus is active.  However, the</span></div><div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;<span class="comment">          * optional redirection number may not be present in the active</span></div><div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;<span class="comment">          * message if an alerting message were received earlier.</span></div><div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;<span class="comment">          * The consequences if we wind up sending two updates is benign.</span></div><div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;<span class="comment">          * The other end will think that it got transferred twice.</span></div><div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;         <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;         }</div><div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;         <span class="keywordflow">if</span> (!ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;         }</div><div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>,</div><div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;            <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a>,</div><div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>:</div><div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;         <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a>) {</div><div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;         }</div><div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;         <span class="keywordflow">if</span> (!ch || !ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>) {</div><div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;         }</div><div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>,</div><div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;            <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 0;</div><div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<span class="stringliteral">&quot; --&gt; not yet handled: notify code:0x%02X\n&quot;</span>,</div><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a>);</div><div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;      }</div><div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a>;</div><div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;   <span class="keywordflow">case</span> Fac_EctInform:</div><div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;      <span class="comment">/* Private-Public ISDN interworking message */</span></div><div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;      <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> &amp;&amp; bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.EctInform.RedirectionPresent) {</div><div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;         <span class="comment">/* Add configured prefix to the redirection number */</span></div><div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;         memset(&amp;party_id, 0, <span class="keyword">sizeof</span>(party_id));</div><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;         misdn_PresentedNumberUnscreened_extract(&amp;party_id,</div><div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;            &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.EctInform.Redirection);</div><div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, party_id.number_type,</div><div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;            party_id.number, <span class="keyword">sizeof</span>(party_id.number));</div><div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;</div><div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;<span class="comment">          * It would be preferable to update the connected line information</span></div><div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;<span class="comment">          * only when the message callStatus is active.  However, the</span></div><div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;<span class="comment">          * optional redirection number may not be present in the active</span></div><div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;<span class="comment">          * message if an alerting message were received earlier.</span></div><div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;<span class="comment">          *</span></div><div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;<span class="comment">          * The consequences if we wind up sending two updates is benign.</span></div><div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;<span class="comment">          * The other end will think that it got transferred twice.</span></div><div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, &amp;party_id,</div><div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;            (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.EctInform.Status == 0 <span class="comment">/* alerting */</span>)</div><div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;               ? <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a></div><div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;               : <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a>,</div><div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;               bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;      }</div><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;   <span class="keywordflow">case</span> Fac_EctLoopTest:</div><div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;      <span class="comment">/* The use of this message is unclear on how it works to detect loops. */</span></div><div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;   <span class="keywordflow">case</span> Fac_CallInfoRetain:</div><div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a>:</div><div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;         <span class="comment">/* CCBS/CCNR is available */</span></div><div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;peer) {</div><div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;record_id == -1) {</div><div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;               cc_record = misdn_cc_new();</div><div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;<span class="comment">                * We are doing a call-completion attempt</span></div><div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;<span class="comment">                * or the switch is sending us extra call-completion</span></div><div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;<span class="comment">                * availability indications (erroneously?).</span></div><div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;<span class="comment">                *</span></div><div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;<span class="comment">                * Assume that the network request retention option</span></div><div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;<span class="comment">                * is not on and that the current call-completion</span></div><div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;<span class="comment">                * request is disabled.</span></div><div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;               cc_record = misdn_cc_find_by_id(ch-&gt;record_id);</div><div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;               <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;                  <span class="keywordflow">if</span> (cc_record-&gt;ptp &amp;&amp; cc_record-&gt;mode.ptp.bc) {</div><div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;                     <span class="comment">/*</span></div><div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;<span class="comment">                      * What?  We are getting mixed messages from the</span></div><div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;<span class="comment">                      * switch.  We are currently setup for</span></div><div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;<span class="comment">                      * point-to-point.  Now we are switching to</span></div><div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;<span class="comment">                      * point-to-multipoint.</span></div><div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;<span class="comment">                      *</span></div><div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;<span class="comment">                      * Close the call-completion signaling link</span></div><div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;<span class="comment">                      */</span></div><div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;                     cc_record-&gt;mode.ptp.bc-&gt;fac_out.Function = Fac_None;</div><div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;                     cc_record-&gt;mode.ptp.bc-&gt;out_cause = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;                     <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(cc_record-&gt;mode.ptp.bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;                  }</div><div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;</div><div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;                  <span class="comment">/*</span></div><div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;<span class="comment">                   * Resetup the existing record for a possible new</span></div><div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;<span class="comment">                   * call-completion request.</span></div><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;<span class="comment">                   */</span></div><div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;                  new_record_id = misdn_cc_record_id_new();</div><div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;                  <span class="keywordflow">if</span> (new_record_id &lt; 0) {</div><div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;                     <span class="comment">/* Looks like we must keep the old id anyway. */</span></div><div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;                     cc_record-&gt;record_id = new_record_id;</div><div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;                     ch-&gt;record_id = new_record_id;</div><div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;                  }</div><div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;                  cc_record-&gt;ptp = 0;</div><div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;                  cc_record-&gt;port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;                  memset(&amp;cc_record-&gt;mode, 0, <span class="keyword">sizeof</span>(cc_record-&gt;mode));</div><div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;                  cc_record-&gt;mode.ptmp.linkage_id = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallInfoRetain.CallLinkageID;</div><div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;                  cc_record-&gt;invoke_id = ++misdn_invoke_id;</div><div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;                  cc_record-&gt;activated = 0;</div><div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;                  cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;                  cc_record-&gt;activation_requested = 0;</div><div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;                  cc_record-&gt;error_code = FacError_None;</div><div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;                  cc_record-&gt;reject_code = FacReject_None;</div><div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;                  memset(&amp;cc_record-&gt;remote_user_free, 0, <span class="keyword">sizeof</span>(cc_record-&gt;remote_user_free));</div><div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;                  memset(&amp;cc_record-&gt;b_free, 0, <span class="keyword">sizeof</span>(cc_record-&gt;b_free));</div><div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;                  cc_record-&gt;time_created = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;</div><div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;                  cc_record = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;                  <span class="comment">/*</span></div><div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;<span class="comment">                   * Where did the record go?  We will have to recapture</span></div><div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;<span class="comment">                   * the call setup information.  Unfortunately, some</span></div><div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;<span class="comment">                   * setup information may have been changed.</span></div><div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;<span class="comment">                   */</span></div><div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;                  ch-&gt;record_id = -1;</div><div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;                  cc_record = misdn_cc_new();</div><div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;               }</div><div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;            }</div><div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;            <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;               ch-&gt;record_id = cc_record-&gt;record_id;</div><div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;               cc_record-&gt;ptp = 0;</div><div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;               cc_record-&gt;port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;               cc_record-&gt;mode.ptmp.linkage_id = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CallInfoRetain.CallLinkageID;</div><div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;</div><div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;               <span class="comment">/* Record call information for possible call-completion attempt. */</span></div><div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;               cc_record-&gt;redial.caller = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>;</div><div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;               cc_record-&gt;redial.dialed = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>;</div><div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;               cc_record-&gt;redial.setup_bc_hlc_llc = bc-&gt;setup_bc_hlc_llc;</div><div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;               cc_record-&gt;redial.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>;</div><div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;               cc_record-&gt;redial.hdlc = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a>;</div><div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;            }</div><div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;</div><div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;            <span class="comment">/* Set MISDN_CC_RECORD_ID in original channel */</span></div><div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;record_id != -1) {</div><div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;               snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%ld&quot;</span>, ch-&gt;record_id);</div><div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;               buf[0] = 0;</div><div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;            }</div><div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;            misdn_cc_set_peer_var(ch-&gt;peer, MISDN_CC_RECORD_ID, buf);</div><div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;         }</div><div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;            <span class="stringliteral">&quot; --&gt; Expected in a DISCONNECT or ALERTING message: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;      }</div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Call:</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSCall:</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a>:</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;<span class="comment">          * This is a call completion retry call.</span></div><div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;<span class="comment">          * If we had anything to do we would do it here.</span></div><div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Expected in a SETUP message: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;      }</div><div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSDeactivate:</div><div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSDeactivate.ComponentType) {</div><div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;         cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSDeactivate.InvokeID);</div><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;         <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;            cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;         }</div><div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;</div><div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;      }</div><div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSErase:</div><div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;      cc_record = misdn_cc_find_by_reference(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSErase.CCBSReference);</div><div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;      <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;         misdn_cc_delete(cc_record);</div><div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;      }</div><div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSRemoteUserFree:</div><div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;      misdn_cc_handle_remote_user_free(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>);</div><div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSBFree:</div><div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;      misdn_cc_handle_b_free(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>);</div><div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSStatusRequest:</div><div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;      misdn_cc_handle_ccbs_status_request(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>);</div><div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;   <span class="keywordflow">case</span> Fac_EraseCallLinkageID:</div><div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;      cc_record = misdn_cc_find_by_linkage(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.EraseCallLinkageID.CallLinkageID);</div><div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;      <span class="keywordflow">if</span> (cc_record &amp;&amp; !cc_record-&gt;activation_requested) {</div><div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;<span class="comment">          * The T-RETENTION timer expired before we requested</span></div><div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;<span class="comment">          * call completion activation.  Call completion is no</span></div><div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;<span class="comment">          * longer available.</span></div><div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;         misdn_cc_delete(cc_record);</div><div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;      }</div><div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSStopAlerting:</div><div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;      <span class="comment">/* We do not have anything to do for this message. */</span></div><div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSRequest:</div><div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;   <span class="keywordflow">case</span> Fac_CCNRRequest:</div><div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSRequest.ComponentType) {</div><div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;         cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSRequest.InvokeID);</div><div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;         <span class="keywordflow">if</span> (cc_record &amp;&amp; !cc_record-&gt;ptp) {</div><div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;            cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;            cc_record-&gt;activated = 1;</div><div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;            cc_record-&gt;mode.ptmp.recall_mode = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSRequest.Component.Result.RecallMode;</div><div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;            cc_record-&gt;mode.ptmp.reference_id = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBSRequest.Component.Result.CCBSReference;</div><div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;         }</div><div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;</div><div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;      }</div><div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSInterrogate:</div><div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;   <span class="keywordflow">case</span> Fac_CCNRInterrogate:</div><div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;   <span class="keywordflow">case</span> Fac_StatusRequest:</div><div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Suspend:</div><div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Resume:</div><div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;      <span class="comment">/* We don&#39;t handle this yet */</span></div><div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* We don&#39;t handle this yet */</span><span class="preprocessor"></span></div><div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_RemoteUserFree:</div><div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160;      misdn_cc_handle_T_remote_user_free(bc);</div><div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Available:</div><div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../df/d7d/structevent.html">event</a>) {</div><div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a>:</div><div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>:</div><div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;         <span class="comment">/* CCBS-T/CCNR-T is available */</span></div><div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;         <span class="keywordflow">if</span> (ch &amp;&amp; ch-&gt;peer) {</div><div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;            <span class="keywordtype">int</span> set_id = 1;</div><div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;</div><div class="line"><a name="l09756"></a><span class="lineno"> 9756</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;record_id == -1) {</div><div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;               cc_record = misdn_cc_new();</div><div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;<span class="comment">                * We are doing a call-completion attempt</span></div><div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;<span class="comment">                * or the switch is sending us extra call-completion</span></div><div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;<span class="comment">                * availability indications (erroneously?).</span></div><div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;               cc_record = misdn_cc_find_by_id(ch-&gt;record_id);</div><div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;               <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;                  <span class="keywordflow">if</span> (cc_record-&gt;ptp &amp;&amp; cc_record-&gt;mode.ptp.retention_enabled) {</div><div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;                     <span class="comment">/*</span></div><div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;<span class="comment">                      * Call-completion is still activated.</span></div><div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;<span class="comment">                      * The user does not have to request it again.</span></div><div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;<span class="comment">                      */</span></div><div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;                     <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Call-completion request retention option is enabled\n&quot;</span>);</div><div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;</div><div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160;                     set_id = 0;</div><div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;                     <span class="keywordflow">if</span> (cc_record-&gt;ptp &amp;&amp; cc_record-&gt;mode.ptp.bc) {</div><div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;                        <span class="comment">/*</span></div><div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;<span class="comment">                         * The network request retention option</span></div><div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;<span class="comment">                         * is not on and the current call-completion</span></div><div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;<span class="comment">                         * request is to be disabled.</span></div><div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;<span class="comment">                         *</span></div><div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;<span class="comment">                         * We should get here only if EVENT_DISCONNECT</span></div><div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160;<span class="comment">                         *</span></div><div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;<span class="comment">                         * Close the call-completion signaling link</span></div><div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;<span class="comment">                         */</span></div><div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;                        cc_record-&gt;mode.ptp.bc-&gt;fac_out.Function = Fac_None;</div><div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;                        cc_record-&gt;mode.ptp.bc-&gt;out_cause = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;                        <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(cc_record-&gt;mode.ptp.bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160;                     }</div><div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;</div><div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;                     <span class="comment">/*</span></div><div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;<span class="comment">                      * Resetup the existing record for a possible new</span></div><div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;<span class="comment">                      * call-completion request.</span></div><div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;<span class="comment">                      */</span></div><div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;                     new_record_id = misdn_cc_record_id_new();</div><div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;                     <span class="keywordflow">if</span> (new_record_id &lt; 0) {</div><div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;                        <span class="comment">/* Looks like we must keep the old id anyway. */</span></div><div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;                        cc_record-&gt;record_id = new_record_id;</div><div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160;                        ch-&gt;record_id = new_record_id;</div><div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;                     }</div><div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;                     cc_record-&gt;ptp = 1;</div><div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;                     cc_record-&gt;port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;                     memset(&amp;cc_record-&gt;mode, 0, <span class="keyword">sizeof</span>(cc_record-&gt;mode));</div><div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;                     cc_record-&gt;invoke_id = ++misdn_invoke_id;</div><div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;                     cc_record-&gt;activated = 0;</div><div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;                     cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;                     cc_record-&gt;activation_requested = 0;</div><div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;                     cc_record-&gt;error_code = FacError_None;</div><div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160;                     cc_record-&gt;reject_code = FacReject_None;</div><div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;                     memset(&amp;cc_record-&gt;remote_user_free, 0, <span class="keyword">sizeof</span>(cc_record-&gt;remote_user_free));</div><div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160;                     memset(&amp;cc_record-&gt;b_free, 0, <span class="keyword">sizeof</span>(cc_record-&gt;b_free));</div><div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;                     cc_record-&gt;time_created = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;                  }</div><div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;                  cc_record = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;                  <span class="comment">/*</span></div><div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;<span class="comment">                   * Where did the record go?  We will have to recapture</span></div><div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;<span class="comment">                   * the call setup information.  Unfortunately, some</span></div><div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160;<span class="comment">                   * setup information may have been changed.</span></div><div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;<span class="comment">                   */</span></div><div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;                  ch-&gt;record_id = -1;</div><div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;                  cc_record = misdn_cc_new();</div><div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;               }</div><div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;            }</div><div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;            <span class="keywordflow">if</span> (cc_record) {</div><div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160;               ch-&gt;record_id = cc_record-&gt;record_id;</div><div class="line"><a name="l09828"></a><span class="lineno"> 9828</span>&#160;               cc_record-&gt;ptp = 1;</div><div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;               cc_record-&gt;port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;</div><div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;               <span class="comment">/* Record call information for possible call-completion attempt. */</span></div><div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160;               cc_record-&gt;redial.caller = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>;</div><div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;               cc_record-&gt;redial.dialed = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>;</div><div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;               cc_record-&gt;redial.setup_bc_hlc_llc = bc-&gt;setup_bc_hlc_llc;</div><div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;               cc_record-&gt;redial.<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>;</div><div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;               cc_record-&gt;redial.hdlc = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a>;</div><div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;            }</div><div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160;</div><div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;            <span class="comment">/* Set MISDN_CC_RECORD_ID in original channel */</span></div><div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;            <span class="keywordflow">if</span> (ch-&gt;record_id != -1 &amp;&amp; set_id) {</div><div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;               snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%ld&quot;</span>, ch-&gt;record_id);</div><div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160;               buf[0] = 0;</div><div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;            }</div><div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;            misdn_cc_set_peer_var(ch-&gt;peer, MISDN_CC_RECORD_ID, buf);</div><div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160;         }</div><div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;            <span class="stringliteral">&quot; --&gt; Expected in a DISCONNECT or ALERTING message: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;      }</div><div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Request:</div><div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;   <span class="keywordflow">case</span> Fac_CCNR_T_Request:</div><div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBS_T_Request.ComponentType) {</div><div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;         cc_record = misdn_cc_find_by_invoke(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBS_T_Request.InvokeID);</div><div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;         <span class="keywordflow">if</span> (cc_record &amp;&amp; cc_record-&gt;ptp) {</div><div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;            cc_record-&gt;outstanding_message = 0;</div><div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;            cc_record-&gt;activated = 1;</div><div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;            cc_record-&gt;mode.ptp.retention_enabled =</div><div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;               cc_record-&gt;mode.ptp.requested_retention</div><div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;               ? bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.u.CCBS_T_Request.Component.Result.RetentionSupported</div><div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160;               ? 1 : 0</div><div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;               : 0;</div><div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;         }</div><div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;</div><div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;         <span class="comment">/* We cannot be User-B in ptp mode. */</span></div><div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;      }</div><div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160;</div><div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;   <span class="keywordflow">case</span> Fac_None:</div><div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; not yet handled: facility type:0x%04X\n&quot;</span>,</div><div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">fac_in</a>.Function);</div><div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;   }</div><div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aaffc525adbd9bfd027c2707b0cc6afc5"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aaffc525adbd9bfd027c2707b0cc6afc5">misdn_bchannel::AOCD</a></div><div class="ttdeci">union misdn_bchannel::@161 AOCD</div></div>
<div class="ttc" id="structast__party__number_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 presentation-indicator and screening-indicator encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00296">channel.h:296</a></div></div>
<div class="ttc" id="channel_8h_html_ab1c04d237cea67fefadaacc3f79497fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a></div><div class="ttdeci">void ast_party_id_reset(struct ast_party_id *id)</div><div class="ttdoc">Destroy and initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01896">channel.c:1896</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ae28caf1e05f165a0c6016a2fafba615e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">misdn_bchannel::AOCDtype</a></div><div class="ttdeci">enum FacFunction AOCDtype</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00515">isdn_lib.h:515</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6fcf0e0104e3ee88f0944544207a2b03"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">misdn_bchannel::incoming_cid_tag</a></div><div class="ttdeci">char incoming_cid_tag[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Incoming Caller ID string tag for special purpose. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00348">isdn_lib.h:348</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00204">isdn_lib.h:204</a></div></div>
<div class="ttc" id="structmisdn__party__id_html"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a></div><div class="ttdoc">Connected-Line/Calling/Redirecting ID info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00273">isdn_lib.h:273</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae09d78e4116be60f1895c9e32142ccb8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae09d78e4116be60f1895c9e32142ccb8">misdn_copy_redirecting_to_ast</a></div><div class="ttdeci">static void misdn_copy_redirecting_to_ast(struct ast_channel *ast, const struct misdn_party_redirecting *redirect, char *tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06437">chan_misdn.c:6437</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a0eb39f0206f0029457671f9501ad192d"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a0eb39f0206f0029457671f9501ad192d">misdn_bchannel::AOCD_need_export</a></div><div class="ttdeci">int AOCD_need_export</div><div class="ttdoc">TRUE if AOCDtype and AOCD data are ready to export to Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00521">isdn_lib.h:521</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00150">isdn_lib.h:150</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a71b67c9dd659e015ff13d68c2d3ea2aa">EVENT_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00128">isdn_lib.h:128</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba081539467ff0b3f134371ecd26079ebd">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00450">callerid.h:450</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba9cefd9617f283404e6a50c45ac0bc2f1">AST_CONNECTED_LINE_UPDATE_SOURCE_TRANSFER_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00452">callerid.h:452</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00149">isdn_lib.h:149</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a57e9381374e669bc7b18db012cd207f4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a57e9381374e669bc7b18db012cd207f4">misdn_bchannel::currency</a></div><div class="ttdeci">struct FacAOCDCurrency currency</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00517">isdn_lib.h:517</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_dialing::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the dialed/called number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00260">isdn_lib.h:260</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00229">isdn_lib.h:229</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac9bcceb1ecd44bcc1261b9314b1abcd9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a></div><div class="ttdeci">static void misdn_add_number_prefix(int port, enum mISDN_NUMBER_TYPE number_type, char *number, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03424">chan_misdn.c:3424</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6b47ad58ed34948095980ac7d10e3add"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6b47ad58ed34948095980ac7d10e3add">misdn_update_remote_party</a></div><div class="ttdeci">static void misdn_update_remote_party(struct ast_channel *ast, const struct misdn_party_id *id, enum AST_CONNECTED_LINE_UPDATE_SOURCE source, char *cid_tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06210">chan_misdn.c:6210</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05aa4e347df6d29bd551391e7385dc03f47">mISDN_NOTIFY_CODE_CALL_TRANSFER_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00227">isdn_lib.h:227</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structast__party__redirecting_html"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a></div><div class="ttdoc">Redirecting Line information. RDNIS (Redirecting Directory Number Information Service) Where a call d...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00523">channel.h:523</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05a3273b0d0632dacfe2923979c2f889735">mISDN_NOTIFY_CODE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00217">isdn_lib.h:217</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a93ba5e99b8615eda660af31763210b30"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">misdn_party_redirecting::to_changed</a></div><div class="ttdeci">int to_changed</div><div class="ttdoc">TRUE if the redirecting.to information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00319">isdn_lib.h:319</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a866c0e96f1c8ddc9d49fb91f5433b529"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a866c0e96f1c8ddc9d49fb91f5433b529">export_aoc_vars</a></div><div class="ttdeci">static void export_aoc_vars(int originator, struct ast_channel *ast, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03458">chan_misdn.c:3458</a></div></div>
<div class="ttc" id="channel_8h_html_ac8bce0bf79829c59a7671c4eff83a31f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a></div><div class="ttdeci">void ast_party_redirecting_free(struct ast_party_redirecting *doomed)</div><div class="ttdoc">Destroy the redirecting information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02179">channel.c:2179</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad6644f992fc696511eebf8732e98e74a"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">ast_party_redirecting::to</a></div><div class="ttdeci">struct ast_party_id to</div><div class="ttdoc">Call is redirecting to a new party (Sent to the caller) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00531">channel.h:531</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a1a5760823cd16fd0343e489efd9c8f89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a></div><div class="ttdeci">void ast_party_redirecting_init(struct ast_party_redirecting *init)</div><div class="ttdoc">Initialize the given redirecting structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02122">channel.c:2122</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9876ef2ee48779efd4a739c46b5c34f7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">misdn_bchannel::notify_description_code</a></div><div class="ttdeci">enum mISDN_NOTIFY_CODE notify_description_code</div><div class="ttdoc">Notification indicator ie description code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00606">isdn_lib.h:606</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="channel_8h_html_a8195bba43b7c08b3063bd19b28291b55"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a></div><div class="ttdeci">void ast_channel_queue_redirecting_update(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Queue a redirecting update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10392">channel.c:10392</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a661fd03f59ca366c30cb5886636be8bd"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a661fd03f59ca366c30cb5886636be8bd">misdn_bchannel::fac_in</a></div><div class="ttdeci">struct FacParm fac_in</div><div class="ttdoc">Inbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00507">isdn_lib.h:507</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a346f9e9a2450ed13b2f6723bcd67fd56"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a346f9e9a2450ed13b2f6723bcd67fd56">misdn_bchannel::chargingUnit</a></div><div class="ttdeci">struct FacAOCDChargingUnit chargingUnit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00518">isdn_lib.h:518</a></div></div>
<div class="ttc" id="channel_8h_html_af6f0b2102f29f86914e10a7787f0d536"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a></div><div class="ttdeci">void ast_party_redirecting_copy(struct ast_party_redirecting *dest, const struct ast_party_redirecting *src)</div><div class="ttdoc">Copy the source redirecting information to the destination redirecting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02135">channel.c:2135</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">misdn_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call has been redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00316">isdn_lib.h:316</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00130">isdn_lib.h:130</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">misdn_party_dialing::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00263">isdn_lib.h:263</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69eecf2aa3afdf46bce8c1b856bea659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69eecf2aa3afdf46bce8c1b856bea659">&#9670;&nbsp;</a></span>misdn_fixup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_fixup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>oldast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06958">6958</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">misdn_get_ch_state()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>
<div class="fragment"><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;{</div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *p;</div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;</div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;   <span class="keywordflow">if</span> (!ast || !(p = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;   }</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> ? p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0, <span class="stringliteral">&quot;* IND: Got Fixup State:%s L3id:%x\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(p), p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>);</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6c07f69dab53f96457d548d8dc004345"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a></div><div class="ttdeci">static const char * misdn_get_ch_state(struct chan_list *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04102">chan_misdn.c:4102</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c07f69dab53f96457d548d8dc004345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c07f69dab53f96457d548d8dc004345">&#9670;&nbsp;</a></span>misdn_get_ch_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* misdn_get_ch_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">4102</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04080">state_struct::txt</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06958">misdn_fixup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">misdn_write()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">print_bc_info()</a>.</p>
<div class="fragment"><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;{</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d4/d88/structstate.html">state</a>[8];</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   }</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7475bf053cd646e39ddeb8d375d08712">state_array</a>); i++) {</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7475bf053cd646e39ddeb8d375d08712">state_array</a>[i].state == p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7475bf053cd646e39ddeb8d375d08712">state_array</a>[i].<a class="code" href="../../d1/d5a/structstate__struct.html#aba0eebd3e383d31cb3f744c90a98393f">txt</a>;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;      }</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;   }</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   snprintf(state, <span class="keyword">sizeof</span>(state), <span class="stringliteral">&quot;%d&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) ;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structstate__struct_html_aba0eebd3e383d31cb3f744c90a98393f"><div class="ttname"><a href="../../d1/d5a/structstate__struct.html#aba0eebd3e383d31cb3f744c90a98393f">state_struct::txt</a></div><div class="ttdeci">char txt[255]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04080">chan_misdn.c:4080</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7475bf053cd646e39ddeb8d375d08712"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7475bf053cd646e39ddeb8d375d08712">state_array</a></div><div class="ttdeci">static const struct state_struct state_array[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04083">chan_misdn.c:4083</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c92a44993137a53aa6bf0aaef1d647b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c92a44993137a53aa6bf0aaef1d647b">&#9670;&nbsp;</a></span>misdn_get_connected_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_get_connected_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>originator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">6226</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00900">ast_channel_connected_effective_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02042">ast_to_misdn_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02145">ast_to_misdn_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02242">ast_to_misdn_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01916">ast_to_misdn_ton()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00353">misdn_bchannel::connected</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05853">debug_numtype()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00050">MISDN_CFG_CPNDIALPLAN</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00049">MISDN_CFG_LOCALDIALPLAN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">ORG_MISDN</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">misdn_update_connected_line()</a>.</p>
<div class="fragment"><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;{</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;   <span class="keywordtype">int</span> number_type;</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> connected_id = <a class="code" href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a>(ast);</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;   <span class="keywordflow">if</span> (originator == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>) {</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;      <span class="comment">/* ORIGINATOR MISDN (incoming call) */</span></div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;         <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;      <span class="keywordflow">if</span> (connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;            <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;      }</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa92b890538b4c95499a88ab65a2052bdb">MISDN_CFG_CPNDIALPLAN</a>, &amp;number_type, <span class="keyword">sizeof</span>(number_type));</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;      <span class="keywordflow">if</span> (0 &lt;= number_type) {</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;         <span class="comment">/* Force us to send in CONNECT message */</span></div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = number_type;</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;      }</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <span class="stringliteral">&quot;CTON&quot;</span>);</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;      <span class="comment">/* ORIGINATOR Asterisk (outgoing call) */</span></div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;</div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;         <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;      <span class="keywordflow">if</span> (connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;            <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a>(connected_id.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>);</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;<span class="comment">/* Allowed */</span></div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = 0;<span class="comment">/* Unscreened */</span></div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>;</div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;      }</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1">MISDN_CFG_LOCALDIALPLAN</a>, &amp;number_type, <span class="keyword">sizeof</span>(number_type));</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;      <span class="keywordflow">if</span> (0 &lt;= number_type) {</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;         <span class="comment">/* Force us to send in SETUP message */</span></div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a> = number_type;</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;      }</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <span class="stringliteral">&quot;LTON&quot;</span>);</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;   }</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;}</div><div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afb118af6bdca35689358599c1b579b29"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a></div><div class="ttdeci">static int ast_to_misdn_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02145">chan_misdn.c:2145</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7915b63b76329bbf4c3f434841a8bf41"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a></div><div class="ttdeci">void debug_numtype(int port, int numtype, char *type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05853">chan_misdn.c:5853</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaf91e0f4ad7302b0e9446ef3367ef9fd1">MISDN_CFG_LOCALDIALPLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00049">chan_misdn_config.h:49</a></div></div>
<div class="ttc" id="structast__party__number_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 presentation-indicator and screening-indicator encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00296">channel.h:296</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa92b890538b4c95499a88ab65a2052bdb"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa92b890538b4c95499a88ab65a2052bdb">MISDN_CFG_CPNDIALPLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00050">chan_misdn_config.h:50</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ac80dac92eeab3a4a76076dd60688344e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">misdn_bchannel::connected</a></div><div class="ttdeci">struct misdn_party_id connected</div><div class="ttdoc">Connected-Party/Connected-Line ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00353">isdn_lib.h:353</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="channel_8h_html_abd6165fa9617e1bb5efee3befa3e963d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abd6165fa9617e1bb5efee3befa3e963d">ast_channel_connected_effective_id</a></div><div class="ttdeci">struct ast_party_id ast_channel_connected_effective_id(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00900">channel_internal_api.c:900</a></div></div>
<div class="ttc" id="structast__party__number_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00294">channel.h:294</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a939a80be7808cdb4e608d121b71b36d4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a></div><div class="ttdeci">static int ast_to_misdn_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02242">chan_misdn.c:2242</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8a4b3d4e49a79f6634beed424d5e14b1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a></div><div class="ttdeci">#define ORG_MISDN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00345">chan_misdn.c:345</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3438ef3ff767addb942dab05ef04fd87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3438ef3ff767addb942dab05ef04fd87">ast_to_misdn_ton</a></div><div class="ttdeci">static enum mISDN_NUMBER_TYPE ast_to_misdn_ton(unsigned ast_number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01916">chan_misdn.c:1916</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4256599deebfa7f4e6e546a02607f4f0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4256599deebfa7f4e6e546a02607f4f0">ast_to_misdn_plan</a></div><div class="ttdeci">static enum mISDN_NUMBER_PLAN ast_to_misdn_plan(unsigned ast_number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02042">chan_misdn.c:2042</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67762fcf857a1d29ae8d0ee183fcc281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67762fcf857a1d29ae8d0ee183fcc281">&#9670;&nbsp;</a></span>misdn_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">7117</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00427">ast_channel_hangupcause()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00671">misdn_bchannel::cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00149">EVENT_RELEASE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00186">INFO_PI_INBAND_AVAILABLE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00335">MISDN_ALERTING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00684">MISDN_ASTERISK_TECH_PVT_SET</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00336">MISDN_BUSY</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00333">MISDN_CALLING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00334">MISDN_CALLING_ACKNOWLEDGE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00749">misdn_chan_is_valid()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00339">MISDN_CLEANING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00330">MISDN_DIALING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00338">MISDN_DISCONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">misdn_get_ch_state()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00351">MISDN_HOLD_DISCONNECT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00329">MISDN_INCOMING_SETUP</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04580">misdn_lib_find_held_bc()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01759">misdn_lib_release()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00326">MISDN_NOTHING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00332">MISDN_PROCEEDING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00331">MISDN_PROGRESS</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_list::need_busy</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00386">misdn_bchannel::need_disconnect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_list::need_hangup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_list::need_queue_hangup</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00389">misdn_bchannel::need_release</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00492">misdn_bchannel::progress_indicator</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">release_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">release_chan_early()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07764">start_bc_tones()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07772">stop_bc_tones()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00663">misdn_bchannel::uu</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00666">misdn_bchannel::uulen</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>
<div class="fragment"><div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;{</div><div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *p;</div><div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;</div><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;   }</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;misdn_hangup(%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;</div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;   <span class="comment">/* Take the ast_channel&#39;s tech_pvt reference. */</span></div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;   p = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast);</div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;   }</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;</div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a30545bb1d30710d0b66d91ef8e7512a9">misdn_chan_is_valid</a>(p)) {</div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference.  Was not active?&quot;</span>);</div><div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;   }</div><div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;</div><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;      bc = p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a>;</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;      bc = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a1788dff1c632e46dd33697f6e3975e06">misdn_lib_find_held_bc</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>);</div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;      <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;            <span class="stringliteral">&quot;misdn_hangup: Could not find held bc for (%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abef41ea6eea90bfde80023e7f2cd8bbb">release_chan_early</a>(p);</div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;      }</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;   }</div><div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;</div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a> || p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a>) {</div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;      <span class="comment">/* between request and call */</span></div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;State Reserved (or nothing) =&gt; chanIsAvail\n&quot;</span>);</div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abef41ea6eea90bfde80023e7f2cd8bbb">release_chan_early</a>(p);</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;      <span class="keywordflow">if</span> (bc) {</div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#afc3a516ffc421e9ded54345e2ed59248">misdn_lib_release</a>(bc);</div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;      }</div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;   }</div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;   <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Hangup with private but no bc ? state:%s l3id:%x\n&quot;</span>,</div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(p), p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>);</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abef41ea6eea90bfde80023e7f2cd8bbb">release_chan_early</a>(p);</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;   }</div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;</div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a> = 0;</div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">need_queue_hangup</a> = 0;</div><div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">need_busy</a> = 0;</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;   <span class="keywordflow">if</span> (!bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a>(p);</div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;   }</div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;</div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;   bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(ast) ? <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(ast) : <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;</div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;   <span class="comment">/* Channel lock is already held when we are called. */</span></div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;   <span class="comment">//ast_channel_lock(ast);</span></div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;HANGUPCAUSE&quot;</span>);</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;   <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;      var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;PRI_CAUSE&quot;</span>);</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;   }</div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;   <span class="keywordflow">if</span> (var) {</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;      <span class="keywordtype">int</span> tmpcause;</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;</div><div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;      tmpcause = atoi(var);</div><div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = tmpcause ? tmpcause : <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;   }</div><div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;</div><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(ast, <span class="stringliteral">&quot;MISDN_USERUSER&quot;</span>);</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;   <span class="keywordflow">if</span> (var) {</div><div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;MISDN_USERUSER: %s\n&quot;</span>, var);</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>, var, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>));</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">uulen</a> = strlen(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">uu</a>);</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;   }</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;   <span class="comment">//ast_channel_unlock(ast);</span></div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;      <span class="stringliteral">&quot;* IND : HANGUP\tpid:%d context:%s dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt; State:%s\n&quot;</span>,</div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>,</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast),</div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;      (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str)</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;      (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str)</div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(p));</div><div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; l3id:%x\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>);</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; cause:%d\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; out_cause:%d\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a>);</div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a>:</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;<span class="comment">       * This is the only place in misdn_hangup, where we</span></div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;<span class="comment">       * can call release_chan, else it might create a lot of trouble.</span></div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;release channel, in INCOMING_SETUP state.. no other events happened\n&quot;</span>);</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a>(p, bc);</div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>:</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;      }</div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;</div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a>) {</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;      }</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a>:</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;      }</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a>) {</div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;      }</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a>:</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a>:</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a>:</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a> &amp;&amp; p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;      }</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a>) {</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;      }</div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>:</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;      <span class="comment">/*  Alerting or Disconnect */</span></div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7f77bca4fa18c428d39f939be30e7112">progress_indicator</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16">INFO_PI_INBAND_AVAILABLE</a>;</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;      }</div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a>) {</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;      }</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a>:</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">need_release</a>) {</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;      }</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;</div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>:</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;</div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a>:</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = -1;</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">need_release</a>) {</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;         }</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;         <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">need_disconnect</a>) {</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;         }</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;      }</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;   }</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;   p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>;</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Channel: %s hungup new state:%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast),</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(p));</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(p, <span class="stringliteral">&quot;Release ast_channel reference&quot;</span>);</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structchan__list_html_ac0bf4083f9fee43b521e291685b6b0bf"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">chan_list::need_busy</a></div><div class="ttdeci">int need_busy</div><div class="ttdoc">TRUE if we could send an AST_CONTROL_BUSY if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_misdn.c:402</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aeba6a62960839423f21b58eb999d8182">MISDN_DISCONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00338">chan_misdn.c:338</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="structchan__list_html_ab8aa4ba47ba9bd53b22a8c30af419827"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">chan_list::need_hangup</a></div><div class="ttdeci">int need_hangup</div><div class="ttdoc">TRUE if a channel can be hung up by calling asterisk directly when done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_misdn.c:397</a></div></div>
<div class="ttc" id="structchan__list_html_ac87f5939f5f9aa3c026c84d17040660f"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac87f5939f5f9aa3c026c84d17040660f">chan_list::need_queue_hangup</a></div><div class="ttdeci">int need_queue_hangup</div><div class="ttdoc">TRUE if a hangup needs to be queued. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00392">chan_misdn.c:392</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a36836b8cc51e5fe963e14005e87bd85f">MISDN_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00331">chan_misdn.c:331</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9b9b9448e634b1536a6bb5bc04438fbf"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9b9b9448e634b1536a6bb5bc04438fbf">misdn_bchannel::uulen</a></div><div class="ttdeci">int uulen</div><div class="ttdoc">User-User information string length in uu[]. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00666">isdn_lib.h:666</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af85206f753950090e4d86a4fde26c5ed"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af85206f753950090e4d86a4fde26c5ed">misdn_bchannel::uu</a></div><div class="ttdeci">char uu[256]</div><div class="ttdoc">User-User information string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00663">isdn_lib.h:663</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abef41ea6eea90bfde80023e7f2cd8bbb"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abef41ea6eea90bfde80023e7f2cd8bbb">release_chan_early</a></div><div class="ttdeci">static void release_chan_early(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08561">chan_misdn.c:8561</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af1d529cc11090d7d2009e5cde3188ac7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af1d529cc11090d7d2009e5cde3188ac7">release_chan</a></div><div class="ttdeci">static void release_chan(struct chan_list *ch, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08495">chan_misdn.c:8495</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6c07f69dab53f96457d548d8dc004345"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a></div><div class="ttdeci">static const char * misdn_get_ch_state(struct chan_list *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04102">chan_misdn.c:4102</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a1788dff1c632e46dd33697f6e3975e06"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a1788dff1c632e46dd33697f6e3975e06">misdn_lib_find_held_bc</a></div><div class="ttdeci">struct misdn_bchannel * misdn_lib_find_held_bc(int port, int l3_id)</div><div class="ttdoc">Find a held call&amp;#39;s B channel record. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04580">isdn_lib.c:4580</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a30545bb1d30710d0b66d91ef8e7512a9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a30545bb1d30710d0b66d91ef8e7512a9">misdn_chan_is_valid</a></div><div class="ttdeci">static int misdn_chan_is_valid(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00749">chan_misdn.c:749</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a14061dd054afd472999a4f4f6cdf3923a17162f66340f9291db0c9506c49f8c16">INFO_PI_INBAND_AVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00186">isdn_lib.h:186</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac4194cb1021ae6d8ea9be1219c0853a8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac4194cb1021ae6d8ea9be1219c0853a8">stop_bc_tones</a></div><div class="ttdeci">static int stop_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07772">chan_misdn.c:7772</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00150">isdn_lib.h:150</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aac56f2c53779cee00e7f7e98d773b82c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a></div><div class="ttdeci">static ast_mutex_t release_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00323">chan_misdn.c:323</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a598042a141b4ad603577007db2853d88">MISDN_CALLING_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00334">chan_misdn.c:334</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00330">chan_misdn.c:330</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_afc3a516ffc421e9ded54345e2ed59248"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#afc3a516ffc421e9ded54345e2ed59248">misdn_lib_release</a></div><div class="ttdeci">void misdn_lib_release(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01759">isdn_lib.c:1759</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00149">isdn_lib.h:149</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a5d03e5cf808bb262d60ebc705e23d8bc">MISDN_INCOMING_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00329">chan_misdn.c:329</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a33084d9452c895d2cdc1364e28902a9f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT_SET(ast, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00684">chan_misdn.c:684</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a1ca50650a77f3b056e0c92b61be93c3f">MISDN_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00332">chan_misdn.c:332</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3bac1451532cc826fefc4692b0d19a2c">MISDN_CALLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00333">chan_misdn.c:333</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dba93ca9caddef57f07d1954a0beee8c6ff">MISDN_HOLD_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00351">chan_misdn.c:351</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1b724daeb32d8d023765605586269a02"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">misdn_bchannel::out_cause</a></div><div class="ttdeci">int out_cause</div><div class="ttdoc">Q.931 Cause for disconnection code (sent) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00677">isdn_lib.h:677</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aca6b8a790005c71e029e73fd5362007b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aca6b8a790005c71e029e73fd5362007b">misdn_bchannel::need_release</a></div><div class="ttdeci">int need_release</div><div class="ttdoc">TRUE if RELEASE needs to be sent to clear a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00389">isdn_lib.h:389</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00336">chan_misdn.c:336</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4b3afda0545d09cce0d2bc81466baf57"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a></div><div class="ttdeci">static int start_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07764">chan_misdn.c:7764</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a96296ec1ed855ce59e12762be480825b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a96296ec1ed855ce59e12762be480825b">misdn_bchannel::need_disconnect</a></div><div class="ttdeci">int need_disconnect</div><div class="ttdoc">TRUE if DISCONNECT needs to be sent to clear a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00386">isdn_lib.h:386</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7f77bca4fa18c428d39f939be30e7112"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7f77bca4fa18c428d39f939be30e7112">misdn_bchannel::progress_indicator</a></div><div class="ttdeci">int progress_indicator</div><div class="ttdoc">Progress Indicator IE progress description field. Used to determine if there is an inband audio messa...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00492">isdn_lib.h:492</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">misdn_bchannel::cause</a></div><div class="ttdeci">int cause</div><div class="ttdoc">Q.931 Cause for disconnection code (received) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00671">isdn_lib.h:671</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5ac85585e1ed241b2fec956021eba4aeba">MISDN_NOTHING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00326">chan_misdn.c:326</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a555c03f7e7d4469f13760c49a7cfc3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a555c03f7e7d4469f13760c49a7cfc3ea">&#9670;&nbsp;</a></span>misdn_indication()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_indication </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">6975</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00115">AST_CAUSE_INVALID_NUMBER_FORMAT</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00122">AST_CAUSE_SWITCH_CONGESTION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00106">AST_CAUSE_USER_BUSY</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">AST_CONTROL_CONNECTED_LINE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">AST_CONTROL_FLASH</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">AST_CONTROL_INCOMPLETE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">AST_CONTROL_MASQUERADE_NOTIFY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00284">AST_CONTROL_OFFHOOK</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">AST_CONTROL_PROCEEDING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">AST_CONTROL_PVT_CAUSE_CODE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">AST_CONTROL_REDIRECTING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00279">AST_CONTROL_RING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00283">AST_CONTROL_TAKEOFFHOOK</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07876">ast_moh_stop()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00043">AST_STATE_BUSY</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00130">EVENT_ALERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00126">EVENT_PROCEEDING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00127">EVENT_PROGRESS</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00432">chan_list::incoming_early_audio</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00335">MISDN_ALERTING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">misdn_update_connected_line()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06483">misdn_update_redirecting()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00559">chan_list::mohinterpret</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">ORG_MISDN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_list::overlap_dial</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07764">start_bc_tones()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">stop_indicate()</a>.</p>
<div class="fragment"><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;{</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *p;</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;   <span class="keywordflow">if</span> (!ast || !(p = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Returned -1 in misdn_indication\n&quot;</span>);</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;   }</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;</div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;   <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>) {</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;* IND : Indication [%d] ignored on %s\n&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>,</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Private Pointer but no bc ?\n&quot;</span>);</div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;* IND : Indication [%d] ignored on hold %s\n&quot;</span>,</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;      }</div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;   }</div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;</div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND : Indication [%d] on %s\n&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>) {</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND :\tbusy pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;      <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a>);</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>;</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;      }</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a>:</div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND :\tring pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND :\tringing pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;      <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>) {</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>:</div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tringing pid:%d but I was Ringing before, so ignoring it\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>:</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tringing pid:%d but Connected, so just send TONE_ALERTING without state changes \n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;         p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a>;</div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tringing pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a>);</div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * SEND: State Ring pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>);</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;</div><div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;         <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>) &amp;&amp; !p-&gt;<a class="code" href="../../df/d00/structchan__list.html#adb84283db099b71dd2bba1f88b78dc43">incoming_early_audio</a>) {</div><div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; incoming_early_audio off\n&quot;</span>);</div><div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;         }</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;      }</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tanswer pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a>:</div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\ttakeoffhook pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a>:</div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\toffhook pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>:</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\tflash pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tprogress pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635">EVENT_PROGRESS</a>);</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tproceeding pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a>);</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\tincomplete pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;      <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>) {</div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;         <span class="comment">/* Overlapped dialing not enabled - send hangup */</span></div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;         p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a>;</div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;</div><div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;         }</div><div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;      }</div><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\tcongestion pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;</div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;      p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a>;</div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(p);</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;      }</div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;   <span class="keywordflow">case</span> -1 :</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * IND :\t-1! (stop indication) pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a>(p);</div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;</div><div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a>(p);</div><div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;      }</div><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(ast, data, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#af689da2b77d1265192a78a5b0994a1d5">mohinterpret</a>);</div><div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\tHOLD pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(ast);</div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; *\tUNHOLD pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND :\tconnected line update pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a536c1957358bfacc834f5fcbb64c9b97">misdn_update_connected_line</a>(ast, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>);</div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;* IND :\tredirecting info update pid:%d\n&quot;</span>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a4630be6c1dd7de4f7f12d700109eb996">misdn_update_redirecting</a>(ast, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>);</div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * Unknown Indication:%d pid:%d\n&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, p-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>);</div><div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;      <span class="comment">/* fallthrough */</span></div><div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>:</div><div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;   }</div><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;</div><div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a892219d53f0cf14c2d6933dc77464def"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a></div><div class="ttdeci">static int stop_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07743">chan_misdn.c:7743</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">include/asterisk/frame.h:311</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4630be6c1dd7de4f7f12d700109eb996"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4630be6c1dd7de4f7f12d700109eb996">misdn_update_redirecting</a></div><div class="ttdeci">static void misdn_update_redirecting(struct ast_channel *ast, struct misdn_bchannel *bc, int originator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06483">chan_misdn.c:6483</a></div></div>
<div class="ttc" id="causes_8h_html_a02b3785262e0be6843e8e9d235d8d78d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_SWITCH_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00122">causes.h:122</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a536c1957358bfacc834f5fcbb64c9b97"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a536c1957358bfacc834f5fcbb64c9b97">misdn_update_connected_line</a></div><div class="ttdeci">static void misdn_update_connected_line(struct ast_channel *ast, struct misdn_bchannel *bc, int originator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06300">chan_misdn.c:6300</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00279">include/asterisk/frame.h:279</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00283">include/asterisk/frame.h:283</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">include/asterisk/frame.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="structchan__list_html_af689da2b77d1265192a78a5b0994a1d5"><div class="ttname"><a href="../../df/d00/structchan__list.html#af689da2b77d1265192a78a5b0994a1d5">chan_list::mohinterpret</a></div><div class="ttdeci">char mohinterpret[MAX_MUSICCLASS]</div><div class="ttdoc">The configured music-on-hold class to use for this call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00559">chan_misdn.c:559</a></div></div>
<div class="ttc" id="causes_8h_html_a29549b982646ee60f116fc4f55c711e5"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_NUMBER_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00115">causes.h:115</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">include/asterisk/frame.h:310</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00284">include/asterisk/frame.h:284</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01090">app_meetme.c:1090</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a9edbfcbbe26666eab8693f9b070f1635">EVENT_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00127">isdn_lib.h:127</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">include/asterisk/frame.h:299</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="structchan__list_html_adb84283db099b71dd2bba1f88b78dc43"><div class="ttname"><a href="../../df/d00/structchan__list.html#adb84283db099b71dd2bba1f88b78dc43">chan_list::incoming_early_audio</a></div><div class="ttdeci">int incoming_early_audio</div><div class="ttdoc">TRUE if you want to send Tone Indications to an incoming ISDN channel on a TE Port. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00432">chan_misdn.c:432</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3eb1ae141484e6c25d7f4f3150136df2">MISDN_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00335">chan_misdn.c:335</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8a4b3d4e49a79f6634beed424d5e14b1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a></div><div class="ttdeci">#define ORG_MISDN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00345">chan_misdn.c:345</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ae7a1bdce2a4a05df29bdd33b399592b9">EVENT_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00126">isdn_lib.h:126</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00043">channelstate.h:43</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1b724daeb32d8d023765605586269a02"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">misdn_bchannel::out_cause</a></div><div class="ttdeci">int out_cause</div><div class="ttdoc">Q.931 Cause for disconnection code (sent) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00677">isdn_lib.h:677</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">include/asterisk/frame.h:307</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a4b3afda0545d09cce0d2bc81466baf57"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a4b3afda0545d09cce0d2bc81466baf57">start_bc_tones</a></div><div class="ttdeci">static int start_bc_tones(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07764">chan_misdn.c:7764</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="structchan__list_html_a01dcdeb372a388f2081495b58e69d280"><div class="ttname"><a href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">chan_list::overlap_dial</a></div><div class="ttdeci">int overlap_dial</div><div class="ttdoc">Enables overlap dialing for the set amount of seconds. (0 = Disabled) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_misdn.c:588</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a0de72a83490b9470ea743075273c82ed">EVENT_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00130">isdn_lib.h:130</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea7ddf219f27c4fb9d7cc3e55b641e15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea7ddf219f27c4fb9d7cc3e55b641e15">&#9670;&nbsp;</a></span>misdn_is_msn_valid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_is_msn_valid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d8c/structmisdn__party__dialing.html">misdn_party_dialing</a> *&#160;</td>
          <td class="paramname"><em>dialed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09904">9904</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">misdn_add_number_prefix()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00712">misdn_cfg_is_msn_valid()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00260">misdn_party_dialing::number_type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160;{</div><div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d6/d49/structnumber.html">number</a>[<span class="keyword">sizeof</span>(dialed-&gt;<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)];</div><div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;</div><div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>, dialed-&gt;<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d49/structnumber.html">number</a>));</div><div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(port, dialed-&gt;<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d6/d49/structnumber.html">number</a>));</div><div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a1ff611ca63fed235f7cb668f96f94ed5">misdn_cfg_is_msn_valid</a>(port, <a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;}</div><div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_dialing::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the dialed/called number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00260">isdn_lib.h:260</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac9bcceb1ecd44bcc1261b9314b1abcd9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a></div><div class="ttdeci">static void misdn_add_number_prefix(int port, enum mISDN_NUMBER_TYPE number_type, char *number, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03424">chan_misdn.c:3424</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a1ff611ca63fed235f7cb668f96f94ed5"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a1ff611ca63fed235f7cb668f96f94ed5">misdn_cfg_is_msn_valid</a></div><div class="ttdeci">int misdn_cfg_is_msn_valid(int port, char *msn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00712">misdn_config.c:712</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe098aa0a254c196d27911e33857e6d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe098aa0a254c196d27911e33857e6d4">&#9670;&nbsp;</a></span>misdn_jb_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void misdn_jb_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *&#160;</td>
          <td class="paramname"><em>jb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>frees the data and destroys the given jitterbuffer struct </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12639">12639</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00140">misdn_jb::mutexjb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::ok</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::samples</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07792">chan_list_destructor()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">config_jitterbuffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l12640"></a><span class="lineno">12640</span>&#160;{</div><div class="line"><a name="l12641"></a><span class="lineno">12641</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12642"></a><span class="lineno">12642</span>&#160;</div><div class="line"><a name="l12643"></a><span class="lineno">12643</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>);</div><div class="line"><a name="l12644"></a><span class="lineno">12644</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>);</div><div class="line"><a name="l12645"></a><span class="lineno">12645</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb);</div><div class="line"><a name="l12646"></a><span class="lineno">12646</span>&#160;}</div><div class="ttc" id="structmisdn__jb_html_aed384c3d09ac23ca7e91dd5228895cab"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">misdn_jb::mutexjb</a></div><div class="ttdeci">ast_mutex_t mutexjb</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00140">chan_misdn.c:140</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a507fe8d0880446ea29b9ef3c406b193a"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">misdn_jb::ok</a></div><div class="ttdeci">char * ok</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="structmisdn__jb_html_abc9a40738ac7a2f0c49808a180b249a7"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">misdn_jb::samples</a></div><div class="ttdeci">char * samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a530287671f65c0bf8bc86da878ddbac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a530287671f65c0bf8bc86da878ddbac3">&#9670;&nbsp;</a></span>misdn_jb_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_jb_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *&#160;</td>
          <td class="paramname"><em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets len bytes out of the jitterbuffer if available, else only the available data is returned and the return value indicates the number of data. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12716">12716</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00140">misdn_jb::mutexjb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::ok</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00135">misdn_jb::rp</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::samples</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00132">misdn_jb::size</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00138">misdn_jb::state_buffer</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00136">misdn_jb::state_empty</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00135">misdn_jb::wp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12574">chan_misdn_jb_empty()</a>.</p>
<div class="fragment"><div class="line"><a name="l12717"></a><span class="lineno">12717</span>&#160;{</div><div class="line"><a name="l12718"></a><span class="lineno">12718</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l12719"></a><span class="lineno">12719</span>&#160;   <span class="keywordtype">int</span> wp;</div><div class="line"><a name="l12720"></a><span class="lineno">12720</span>&#160;   <span class="keywordtype">int</span> rp;</div><div class="line"><a name="l12721"></a><span class="lineno">12721</span>&#160;   <span class="keywordtype">int</span> read = 0;</div><div class="line"><a name="l12722"></a><span class="lineno">12722</span>&#160;</div><div class="line"><a name="l12723"></a><span class="lineno">12723</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12724"></a><span class="lineno">12724</span>&#160;</div><div class="line"><a name="l12725"></a><span class="lineno">12725</span>&#160;   rp = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a>;</div><div class="line"><a name="l12726"></a><span class="lineno">12726</span>&#160;   wp = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">wp</a>;</div><div class="line"><a name="l12727"></a><span class="lineno">12727</span>&#160;</div><div class="line"><a name="l12728"></a><span class="lineno">12728</span>&#160;   <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">state_empty</a>) {</div><div class="line"><a name="l12729"></a><span class="lineno">12729</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; i++) {</div><div class="line"><a name="l12730"></a><span class="lineno">12730</span>&#160;         <span class="keywordflow">if</span> (wp == rp) {</div><div class="line"><a name="l12731"></a><span class="lineno">12731</span>&#160;            jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a> = rp;</div><div class="line"><a name="l12732"></a><span class="lineno">12732</span>&#160;            jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">state_empty</a> = 0;</div><div class="line"><a name="l12733"></a><span class="lineno">12733</span>&#160;</div><div class="line"><a name="l12734"></a><span class="lineno">12734</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12735"></a><span class="lineno">12735</span>&#160;</div><div class="line"><a name="l12736"></a><span class="lineno">12736</span>&#160;            <span class="keywordflow">return</span> read;</div><div class="line"><a name="l12737"></a><span class="lineno">12737</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12738"></a><span class="lineno">12738</span>&#160;            <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>[rp] == 1) {</div><div class="line"><a name="l12739"></a><span class="lineno">12739</span>&#160;               data[i] = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>[rp];</div><div class="line"><a name="l12740"></a><span class="lineno">12740</span>&#160;               jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>[rp] = 0;</div><div class="line"><a name="l12741"></a><span class="lineno">12741</span>&#160;               rp = (rp != jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - 1) ? rp + 1 : 0;</div><div class="line"><a name="l12742"></a><span class="lineno">12742</span>&#160;               read += 1;</div><div class="line"><a name="l12743"></a><span class="lineno">12743</span>&#160;            }</div><div class="line"><a name="l12744"></a><span class="lineno">12744</span>&#160;         }</div><div class="line"><a name="l12745"></a><span class="lineno">12745</span>&#160;      }</div><div class="line"><a name="l12746"></a><span class="lineno">12746</span>&#160;</div><div class="line"><a name="l12747"></a><span class="lineno">12747</span>&#160;      <span class="keywordflow">if</span> (wp &gt;= rp) {</div><div class="line"><a name="l12748"></a><span class="lineno">12748</span>&#160;         jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a> = wp - rp;</div><div class="line"><a name="l12749"></a><span class="lineno">12749</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12750"></a><span class="lineno">12750</span>&#160;         jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a> = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - rp + wp;</div><div class="line"><a name="l12751"></a><span class="lineno">12751</span>&#160;      }</div><div class="line"><a name="l12752"></a><span class="lineno">12752</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, 0, <span class="stringliteral">&quot;misdn_jb_empty: read:%d | Buffer status:%d p:%p\n&quot;</span>, len, jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a>, jb);</div><div class="line"><a name="l12753"></a><span class="lineno">12753</span>&#160;</div><div class="line"><a name="l12754"></a><span class="lineno">12754</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a> = rp;</div><div class="line"><a name="l12755"></a><span class="lineno">12755</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12756"></a><span class="lineno">12756</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, 0, <span class="stringliteral">&quot;misdn_jb_empty: Wait...requested:%d p:%p\n&quot;</span>, len, jb);</div><div class="line"><a name="l12757"></a><span class="lineno">12757</span>&#160;   }</div><div class="line"><a name="l12758"></a><span class="lineno">12758</span>&#160;</div><div class="line"><a name="l12759"></a><span class="lineno">12759</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12760"></a><span class="lineno">12760</span>&#160;</div><div class="line"><a name="l12761"></a><span class="lineno">12761</span>&#160;   <span class="keywordflow">return</span> read;</div><div class="line"><a name="l12762"></a><span class="lineno">12762</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aed384c3d09ac23ca7e91dd5228895cab"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">misdn_jb::mutexjb</a></div><div class="ttdeci">ast_mutex_t mutexjb</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00140">chan_misdn.c:140</a></div></div>
<div class="ttc" id="structmisdn__jb_html_af203f5ddbac4a47afed1a07b97e7e477"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">misdn_jb::wp</a></div><div class="ttdeci">int wp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00135">chan_misdn.c:135</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a507fe8d0880446ea29b9ef3c406b193a"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">misdn_jb::ok</a></div><div class="ttdeci">char * ok</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">misdn_jb::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00132">chan_misdn.c:132</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a11e82d877020d6f0dadf0a2af23f52f0"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">misdn_jb::state_buffer</a></div><div class="ttdeci">int state_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00138">chan_misdn.c:138</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structmisdn__jb_html_abc9a40738ac7a2f0c49808a180b249a7"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">misdn_jb::samples</a></div><div class="ttdeci">char * samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aeb71ca49f25e00e13aaa5c1a06dafd92"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">misdn_jb::rp</a></div><div class="ttdeci">int rp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00135">chan_misdn.c:135</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aed9875545100bb0bce80bde9443f0b17"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">misdn_jb::state_empty</a></div><div class="ttdeci">int state_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00136">chan_misdn.c:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0b03517b5aa9b9c98d46159e47beaa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b03517b5aa9b9c98d46159e47beaa3">&#9670;&nbsp;</a></span>misdn_jb_fill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int misdn_jb_fill </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *&#160;</td>
          <td class="paramname"><em>jb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>fills the jitterbuffer with len data returns &lt; 0 if there was an error (buffer overrun). </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12650">12650</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00139">misdn_jb::bytes_wrote</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00140">misdn_jb::mutexjb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::ok</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00135">misdn_jb::rp</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::samples</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00132">misdn_jb::size</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00138">misdn_jb::state_buffer</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00136">misdn_jb::state_empty</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00137">misdn_jb::state_full</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00133">misdn_jb::upper_threshold</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00135">misdn_jb::wp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">misdn_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l12651"></a><span class="lineno">12651</span>&#160;{</div><div class="line"><a name="l12652"></a><span class="lineno">12652</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l12653"></a><span class="lineno">12653</span>&#160;   <span class="keywordtype">int</span> j;</div><div class="line"><a name="l12654"></a><span class="lineno">12654</span>&#160;   <span class="keywordtype">int</span> rp;</div><div class="line"><a name="l12655"></a><span class="lineno">12655</span>&#160;   <span class="keywordtype">int</span> wp;</div><div class="line"><a name="l12656"></a><span class="lineno">12656</span>&#160;</div><div class="line"><a name="l12657"></a><span class="lineno">12657</span>&#160;   <span class="keywordflow">if</span> (!jb || ! data) {</div><div class="line"><a name="l12658"></a><span class="lineno">12658</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12659"></a><span class="lineno">12659</span>&#160;   }</div><div class="line"><a name="l12660"></a><span class="lineno">12660</span>&#160;</div><div class="line"><a name="l12661"></a><span class="lineno">12661</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12662"></a><span class="lineno">12662</span>&#160;</div><div class="line"><a name="l12663"></a><span class="lineno">12663</span>&#160;   wp = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">wp</a>;</div><div class="line"><a name="l12664"></a><span class="lineno">12664</span>&#160;   rp = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a>;</div><div class="line"><a name="l12665"></a><span class="lineno">12665</span>&#160;</div><div class="line"><a name="l12666"></a><span class="lineno">12666</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; i++) {</div><div class="line"><a name="l12667"></a><span class="lineno">12667</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>[wp] = data[i];</div><div class="line"><a name="l12668"></a><span class="lineno">12668</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>[wp] = 1;</div><div class="line"><a name="l12669"></a><span class="lineno">12669</span>&#160;      wp = (wp != jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - 1) ? wp + 1 : 0;</div><div class="line"><a name="l12670"></a><span class="lineno">12670</span>&#160;</div><div class="line"><a name="l12671"></a><span class="lineno">12671</span>&#160;      <span class="keywordflow">if</span> (wp == jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a>) {</div><div class="line"><a name="l12672"></a><span class="lineno">12672</span>&#160;         jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a3a37500a95df498e39867dd4fa5bae15">state_full</a> = 1;</div><div class="line"><a name="l12673"></a><span class="lineno">12673</span>&#160;      }</div><div class="line"><a name="l12674"></a><span class="lineno">12674</span>&#160;   }</div><div class="line"><a name="l12675"></a><span class="lineno">12675</span>&#160;</div><div class="line"><a name="l12676"></a><span class="lineno">12676</span>&#160;   <span class="keywordflow">if</span> (wp &gt;= rp) {</div><div class="line"><a name="l12677"></a><span class="lineno">12677</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a> = wp - rp;</div><div class="line"><a name="l12678"></a><span class="lineno">12678</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12679"></a><span class="lineno">12679</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a> = jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - rp + wp;</div><div class="line"><a name="l12680"></a><span class="lineno">12680</span>&#160;   }</div><div class="line"><a name="l12681"></a><span class="lineno">12681</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, 0, <span class="stringliteral">&quot;misdn_jb_fill: written:%d | Buffer status:%d p:%p\n&quot;</span>, len, jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">state_buffer</a>, jb);</div><div class="line"><a name="l12682"></a><span class="lineno">12682</span>&#160;</div><div class="line"><a name="l12683"></a><span class="lineno">12683</span>&#160;   <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a3a37500a95df498e39867dd4fa5bae15">state_full</a>) {</div><div class="line"><a name="l12684"></a><span class="lineno">12684</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">wp</a> = wp;</div><div class="line"><a name="l12685"></a><span class="lineno">12685</span>&#160;</div><div class="line"><a name="l12686"></a><span class="lineno">12686</span>&#160;      rp = wp;</div><div class="line"><a name="l12687"></a><span class="lineno">12687</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">upper_threshold</a>; j++) {</div><div class="line"><a name="l12688"></a><span class="lineno">12688</span>&#160;         rp = (rp != 0) ? rp - 1 : jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> - 1;</div><div class="line"><a name="l12689"></a><span class="lineno">12689</span>&#160;      }</div><div class="line"><a name="l12690"></a><span class="lineno">12690</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">rp</a> = rp;</div><div class="line"><a name="l12691"></a><span class="lineno">12691</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a3a37500a95df498e39867dd4fa5bae15">state_full</a> = 0;</div><div class="line"><a name="l12692"></a><span class="lineno">12692</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">state_empty</a> = 1;</div><div class="line"><a name="l12693"></a><span class="lineno">12693</span>&#160;</div><div class="line"><a name="l12694"></a><span class="lineno">12694</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12695"></a><span class="lineno">12695</span>&#160;</div><div class="line"><a name="l12696"></a><span class="lineno">12696</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12697"></a><span class="lineno">12697</span>&#160;   }</div><div class="line"><a name="l12698"></a><span class="lineno">12698</span>&#160;</div><div class="line"><a name="l12699"></a><span class="lineno">12699</span>&#160;   <span class="keywordflow">if</span> (!jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">state_empty</a>) {</div><div class="line"><a name="l12700"></a><span class="lineno">12700</span>&#160;      jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a88de0bdcc88618e79680e87d43c52806">bytes_wrote</a> += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l12701"></a><span class="lineno">12701</span>&#160;      <span class="keywordflow">if</span> (jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a88de0bdcc88618e79680e87d43c52806">bytes_wrote</a> &gt;= jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">upper_threshold</a>) {</div><div class="line"><a name="l12702"></a><span class="lineno">12702</span>&#160;         jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">state_empty</a> = 1;</div><div class="line"><a name="l12703"></a><span class="lineno">12703</span>&#160;         jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a88de0bdcc88618e79680e87d43c52806">bytes_wrote</a> = 0;</div><div class="line"><a name="l12704"></a><span class="lineno">12704</span>&#160;      }</div><div class="line"><a name="l12705"></a><span class="lineno">12705</span>&#160;   }</div><div class="line"><a name="l12706"></a><span class="lineno">12706</span>&#160;   jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">wp</a> = wp;</div><div class="line"><a name="l12707"></a><span class="lineno">12707</span>&#160;</div><div class="line"><a name="l12708"></a><span class="lineno">12708</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12709"></a><span class="lineno">12709</span>&#160;</div><div class="line"><a name="l12710"></a><span class="lineno">12710</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12711"></a><span class="lineno">12711</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aed384c3d09ac23ca7e91dd5228895cab"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">misdn_jb::mutexjb</a></div><div class="ttdeci">ast_mutex_t mutexjb</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00140">chan_misdn.c:140</a></div></div>
<div class="ttc" id="structmisdn__jb_html_af203f5ddbac4a47afed1a07b97e7e477"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#af203f5ddbac4a47afed1a07b97e7e477">misdn_jb::wp</a></div><div class="ttdeci">int wp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00135">chan_misdn.c:135</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a507fe8d0880446ea29b9ef3c406b193a"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">misdn_jb::ok</a></div><div class="ttdeci">char * ok</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">misdn_jb::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00132">chan_misdn.c:132</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a11e82d877020d6f0dadf0a2af23f52f0"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a11e82d877020d6f0dadf0a2af23f52f0">misdn_jb::state_buffer</a></div><div class="ttdeci">int state_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00138">chan_misdn.c:138</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structmisdn__jb_html_abc9a40738ac7a2f0c49808a180b249a7"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">misdn_jb::samples</a></div><div class="ttdeci">char * samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aeb71ca49f25e00e13aaa5c1a06dafd92"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aeb71ca49f25e00e13aaa5c1a06dafd92">misdn_jb::rp</a></div><div class="ttdeci">int rp</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00135">chan_misdn.c:135</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a9b7136305e44258797951022a46a742b"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">misdn_jb::upper_threshold</a></div><div class="ttdeci">int upper_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00133">chan_misdn.c:133</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a3a37500a95df498e39867dd4fa5bae15"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a3a37500a95df498e39867dd4fa5bae15">misdn_jb::state_full</a></div><div class="ttdeci">int state_full</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00137">chan_misdn.c:137</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a88de0bdcc88618e79680e87d43c52806"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a88de0bdcc88618e79680e87d43c52806">misdn_jb::bytes_wrote</a></div><div class="ttdeci">int bytes_wrote</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00139">chan_misdn.c:139</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aed9875545100bb0bce80bde9443f0b17"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed9875545100bb0bce80bde9443f0b17">misdn_jb::state_empty</a></div><div class="ttdeci">int state_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00136">chan_misdn.c:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a56c181dc92bad4a8c732cd2b77e391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a56c181dc92bad4a8c732cd2b77e391">&#9670;&nbsp;</a></span>misdn_jb_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> * misdn_jb_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>upper_threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocates the jb-structure and initialize the elements </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12602">12602</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00140">misdn_jb::mutexjb</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::ok</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00134">misdn_jb::samples</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00132">misdn_jb::size</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00133">misdn_jb::upper_threshold</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">config_jitterbuffer()</a>.</p>
<div class="fragment"><div class="line"><a name="l12603"></a><span class="lineno">12603</span>&#160;{</div><div class="line"><a name="l12604"></a><span class="lineno">12604</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a> *jb;</div><div class="line"><a name="l12605"></a><span class="lineno">12605</span>&#160;</div><div class="line"><a name="l12606"></a><span class="lineno">12606</span>&#160;   jb = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*jb));</div><div class="line"><a name="l12607"></a><span class="lineno">12607</span>&#160;   <span class="keywordflow">if</span> (!jb) {</div><div class="line"><a name="l12608"></a><span class="lineno">12608</span>&#160;       <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, 0, <span class="stringliteral">&quot;No free Mem for jb\n&quot;</span>);</div><div class="line"><a name="l12609"></a><span class="lineno">12609</span>&#160;       <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l12610"></a><span class="lineno">12610</span>&#160;   }</div><div class="line"><a name="l12611"></a><span class="lineno">12611</span>&#160;   jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a>;</div><div class="line"><a name="l12612"></a><span class="lineno">12612</span>&#160;   jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">upper_threshold</a> = <a class="code" href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">upper_threshold</a>;</div><div class="line"><a name="l12613"></a><span class="lineno">12613</span>&#160;   <span class="comment">//jb-&gt;wp = 0;</span></div><div class="line"><a name="l12614"></a><span class="lineno">12614</span>&#160;   <span class="comment">//jb-&gt;rp = 0;</span></div><div class="line"><a name="l12615"></a><span class="lineno">12615</span>&#160;   <span class="comment">//jb-&gt;state_full = 0;</span></div><div class="line"><a name="l12616"></a><span class="lineno">12616</span>&#160;   <span class="comment">//jb-&gt;state_empty = 0;</span></div><div class="line"><a name="l12617"></a><span class="lineno">12617</span>&#160;   <span class="comment">//jb-&gt;bytes_wrote = 0;</span></div><div class="line"><a name="l12618"></a><span class="lineno">12618</span>&#160;   jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <span class="keyword">sizeof</span>(*jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>));</div><div class="line"><a name="l12619"></a><span class="lineno">12619</span>&#160;   <span class="keywordflow">if</span> (!jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>) {</div><div class="line"><a name="l12620"></a><span class="lineno">12620</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb);</div><div class="line"><a name="l12621"></a><span class="lineno">12621</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, 0, <span class="stringliteral">&quot;No free Mem for jb-&gt;samples\n&quot;</span>);</div><div class="line"><a name="l12622"></a><span class="lineno">12622</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l12623"></a><span class="lineno">12623</span>&#160;   }</div><div class="line"><a name="l12624"></a><span class="lineno">12624</span>&#160;</div><div class="line"><a name="l12625"></a><span class="lineno">12625</span>&#160;   jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(<a class="code" href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <span class="keyword">sizeof</span>(*jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>));</div><div class="line"><a name="l12626"></a><span class="lineno">12626</span>&#160;   <span class="keywordflow">if</span> (!jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">ok</a>) {</div><div class="line"><a name="l12627"></a><span class="lineno">12627</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">samples</a>);</div><div class="line"><a name="l12628"></a><span class="lineno">12628</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(jb);</div><div class="line"><a name="l12629"></a><span class="lineno">12629</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, 0, <span class="stringliteral">&quot;No free Mem for jb-&gt;ok\n&quot;</span>);</div><div class="line"><a name="l12630"></a><span class="lineno">12630</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l12631"></a><span class="lineno">12631</span>&#160;   }</div><div class="line"><a name="l12632"></a><span class="lineno">12632</span>&#160;</div><div class="line"><a name="l12633"></a><span class="lineno">12633</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;jb-&gt;<a class="code" href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">mutexjb</a>);</div><div class="line"><a name="l12634"></a><span class="lineno">12634</span>&#160;</div><div class="line"><a name="l12635"></a><span class="lineno">12635</span>&#160;   <span class="keywordflow">return</span> jb;</div><div class="line"><a name="l12636"></a><span class="lineno">12636</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__jb_html_aed384c3d09ac23ca7e91dd5228895cab"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#aed384c3d09ac23ca7e91dd5228895cab">misdn_jb::mutexjb</a></div><div class="ttdeci">ast_mutex_t mutexjb</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00140">chan_misdn.c:140</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a507fe8d0880446ea29b9ef3c406b193a"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a507fe8d0880446ea29b9ef3c406b193a">misdn_jb::ok</a></div><div class="ttdeci">char * ok</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a439227feff9d7f55384e8780cfc2eb82">misdn_jb::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00132">chan_misdn.c:132</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structmisdn__jb_html"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html">misdn_jb</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00131">chan_misdn.c:131</a></div></div>
<div class="ttc" id="structmisdn__jb_html_abc9a40738ac7a2f0c49808a180b249a7"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#abc9a40738ac7a2f0c49808a180b249a7">misdn_jb::samples</a></div><div class="ttdeci">char * samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00134">chan_misdn.c:134</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structmisdn__jb_html_a9b7136305e44258797951022a46a742b"><div class="ttname"><a href="../../d6/dfa/structmisdn__jb.html#a9b7136305e44258797951022a46a742b">misdn_jb::upper_threshold</a></div><div class="ttdeci">int upper_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00133">chan_misdn.c:133</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab707fc0cf9fb25221fcf046a9583d839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab707fc0cf9fb25221fcf046a9583d839">&#9670;&nbsp;</a></span>misdn_l1_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_l1_task </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>vdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03619">3619</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, and <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03049">misdn_lib_isdn_l1watcher()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;{</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">int</span> *data = vdata;</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a69e6b059e10922db37fd2bd5d48c7c6f">misdn_lib_isdn_l1watcher</a>(*data);</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, *data, <span class="stringliteral">&quot;L1watcher timeout\n&quot;</span>);</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a69e6b059e10922db37fd2bd5d48c7c6f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a69e6b059e10922db37fd2bd5d48c7c6f">misdn_lib_isdn_l1watcher</a></div><div class="ttdeci">void misdn_lib_isdn_l1watcher(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03049">isdn_lib.c:3049</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e0668ab60f561d89f4135bfbc600575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0668ab60f561d89f4135bfbc600575">&#9670;&nbsp;</a></span>misdn_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> * misdn_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">8174</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00428">ast_party_caller::ani</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01259">ast_channel_alloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00677">ast_channel_nativeformats_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00448">ast_channel_priority_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00457">ast_channel_rings_set()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02431">ast_channel_set_fd()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00828">ast_channel_set_rawreadformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00832">ast_channel_set_rawwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00836">ast_channel_set_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00840">ast_channel_set_writeformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00773">ast_channel_tech_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/d1d/abstract__jb_8c_source.html#l00593">ast_jb_configure()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00040">AST_STATE_RING</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_list_ref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00684">MISDN_ASTERISK_TECH_PVT_SET</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01271">misdn_get_global_jbconf()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00053">misdn_lib_port_is_pri()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_list::pipe</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;{</div><div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *native;</div><div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;   <span class="keywordtype">int</span> chan_offset = 0;</div><div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;   <span class="keywordtype">int</span> tmp_port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0);</div><div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmpfmt;</div><div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;</div><div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;   native = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;   <span class="keywordflow">if</span> (!native) {</div><div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;   }</div><div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;</div><div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;   <span class="keywordflow">for</span> (; tmp_port &gt; 0; tmp_port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(tmp_port)) {</div><div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;      <span class="keywordflow">if</span> (tmp_port == port) {</div><div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;      }</div><div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;      chan_offset += <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0397696531bb8058c4f712aa8428d492">misdn_lib_port_is_pri</a>(tmp_port) ? 30 : 2;</div><div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;   }</div><div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &lt; 0) {</div><div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = 0;</div><div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;   }</div><div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;</div><div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;   <span class="keywordflow">if</span> (callerid) {</div><div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;      <a class="code" href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a>(callerid, &amp;cid_name, &amp;cid_num);</div><div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;   }</div><div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;</div><div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;   tmp = <a class="code" href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a>(1, <a class="code" href="../../d4/d88/structstate.html">state</a>, cid_num, cid_name, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="stringliteral">&quot;&quot;</span>, assignedids, requestor, 0, <span class="stringliteral">&quot;%s/%s%d-u%d&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>, <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;tmp&quot;</span>, chan_offset + <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abfc471c68ae50a47ef9babacc43af0a9">glob_channel</a>++);</div><div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;   <span class="keywordflow">if</span> (tmp) {</div><div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; * NEW CHANNEL dialed:%s caller:%s\n&quot;</span>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, callerid);</div><div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;</div><div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;      tmpfmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(cap, 0);</div><div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(native, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>, 0);</div><div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(tmp, native);</div><div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(tmp, tmpfmt);</div><div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;</div><div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmpfmt, -1);</div><div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;</div><div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;      <span class="comment">/* Link the channel and private together */</span></div><div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a>(chlist, <span class="stringliteral">&quot;Give a reference to ast_channel&quot;</span>);</div><div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a>(tmp, chlist);</div><div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;      chlist-&gt;ast = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;</div><div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(tmp, &amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>);</div><div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;</div><div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(tmp, 1);</div><div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;</div><div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>) {</div><div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(tmp, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>);</div><div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;misdn_new: no exten given.\n&quot;</span>);</div><div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;      }</div><div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;</div><div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cid_num)) {</div><div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;         <span class="comment">/* Don&#39;t use ast_set_callerid() here because it will</span></div><div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;<span class="comment">          * generate a needless NewCallerID event */</span></div><div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_num);</div><div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;      }</div><div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;</div><div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;      <span class="keywordflow">if</span> (pipe(chlist-&gt;pipe) &lt; 0) {</div><div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Pipe failed\n&quot;</span>);</div><div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;      }</div><div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(tmp, 0, chlist-&gt;pipe[0]);</div><div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;</div><div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a>(tmp, (<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>) ? 1 : 0);</div><div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;</div><div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;      <a class="code" href="../../dc/d14/abstract__jb_8h.html#a0981c84ac90dd79bc2a0fdd90aa6efba">ast_jb_configure</a>(tmp, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a5a03113b2d6233d9deaf423b8aa59d64">misdn_get_global_jbconf</a>());</div><div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;</div><div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(tmp);</div><div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, 0, <span class="stringliteral">&quot;Unable to allocate channel structure\n&quot;</span>);</div><div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;   }</div><div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;</div><div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(native, -1);</div><div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;</div><div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="channel_8h_html_afac6d7d115c1edfe3ad8a8c7fa5d59d1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a></div><div class="ttdeci">void ast_channel_set_writeformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00840">channel_internal_api.c:840</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_aa2df58e77751b741b6891afe210b5b8c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a></div><div class="ttdeci">void ast_channel_set_rawwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00832">channel_internal_api.c:832</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a5a03113b2d6233d9deaf423b8aa59d64"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a5a03113b2d6233d9deaf423b8aa59d64">misdn_get_global_jbconf</a></div><div class="ttdeci">struct ast_jb_conf * misdn_get_global_jbconf(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01271">misdn_config.c:1271</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_af0566a4937a5bb1323825e4ef89c0e5a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a></div><div class="ttdeci">void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00773">channel_internal_api.c:773</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a921a2d48faa9ed99a59d33e7aefa7888"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a></div><div class="ttdeci">void ast_channel_set_rawreadformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00828">channel_internal_api.c:828</a></div></div>
<div class="ttc" id="structast__party__caller_html_aeeb8c05290fd113bd0d1a3129898fd49"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ast_party_caller::ani</a></div><div class="ttdeci">struct ast_party_id ani</div><div class="ttdoc">Automatic Number Identification (ANI) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00428">channel.h:428</a></div></div>
<div class="ttc" id="channel_8h_html_a0c25448e9c6e2630a8a9cc96b7482cfe"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0c25448e9c6e2630a8a9cc96b7482cfe">ast_channel_rings_set</a></div><div class="ttdeci">void ast_channel_rings_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00457">channel_internal_api.c:457</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ab3786cbbff7a03241fc75dafa0c8a1c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a></div><div class="ttdeci">void ast_channel_set_readformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00836">channel_internal_api.c:836</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a33084d9452c895d2cdc1364e28902a9f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT_SET(ast, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00684">chan_misdn.c:684</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abfc471c68ae50a47ef9babacc43af0a9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abfc471c68ae50a47ef9babacc43af0a9">glob_channel</a></div><div class="ttdeci">static int glob_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08148">chan_misdn.c:8148</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8c81d5f4de36016de0ecba7520828e0a"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a></div><div class="ttdeci">static struct ast_channel_tech misdn_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08130">chan_misdn.c:8130</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7c2a890d3276dd7527774a08c3d99385"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7c2a890d3276dd7527774a08c3d99385">chan_list_ref</a></div><div class="ttdeci">#define chan_list_ref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00371">chan_misdn.c:371</a></div></div>
<div class="ttc" id="channel_8h_html_aca37ca2f3d55a223d26617329ed48a3e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a></div><div class="ttdeci">void ast_channel_set_fd(struct ast_channel *chan, int which, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02431">channel.c:2431</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_a0981c84ac90dd79bc2a0fdd90aa6efba"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#a0981c84ac90dd79bc2a0fdd90aa6efba">ast_jb_configure</a></div><div class="ttdeci">void ast_jb_configure(struct ast_channel *chan, const struct ast_jb_conf *conf)</div><div class="ttdoc">Configures a jitterbuffer on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/abstract__jb_8c_source.html#l00593">abstract_jb.c:593</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0397696531bb8058c4f712aa8428d492"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0397696531bb8058c4f712aa8428d492">misdn_lib_port_is_pri</a></div><div class="ttdeci">int misdn_lib_port_is_pri(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00053">isdn_lib.c:53</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="channel_8h_html_a2f18aafad0442206e71033ac6676dbb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a></div><div class="ttdeci">#define ast_channel_alloc(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01259">channel.h:1259</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="callerid_8h_html_a39e03ca4e8df3a1d2c75e888d76201df"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *instr, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24fb8b2cce05250a12724f761e5e9e4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fb8b2cce05250a12724f761e5e9e4b">&#9670;&nbsp;</a></span>misdn_overlap_dial_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_overlap_dial_task </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">3628</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_list::context</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00147">EVENT_DISCONNECT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00339">MISDN_CLEANING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00330">MISDN_DIALING</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00327">MISDN_WAITING4DIGS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_list::overlap_dial</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_list::overlap_dial_task</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00603">chan_list::overlap_tv</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_list::overlap_tv_lock</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08438">pbx_start_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">stop_indicate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;{</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;   <span class="keyword">struct </span>timeval tv_end, tv_now;</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;   <span class="keywordtype">int</span> diff;</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch = (<span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *) data;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;   <span class="keywordtype">char</span> *dad;</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;overlap dial task, chan_state: %d\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a>);</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>) {</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> = -1;</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   }</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;   tv_end = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a6324067fc3743b5c48c0907b90d83c5d">overlap_tv</a>;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   tv_end.tv_sec += ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   tv_now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;   diff = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(tv_end, tv_now);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;   <span class="keywordflow">if</span> (100 &lt; diff) {</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;      <span class="keywordflow">return</span> diff;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   }</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;   <span class="comment">/* if we are 100ms near the timeout, we are satisfied.. */</span></div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a>(ch);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      dad = <span class="stringliteral">&quot;s&quot;</span>;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, dad);</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;      dad = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>;</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;   }</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, dad, 1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>)) {</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a>;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a>(ch) &lt; 0) {</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;ast_pbx_start returned &lt; 0 in misdn_overlap_dial_task\n&quot;</span>);</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;         <span class="keywordflow">goto</span> misdn_overlap_dial_task_disconnect;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      }</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;misdn_overlap_dial_task_disconnect:</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">out_cause</a> = <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a>);</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   }</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> = -1;</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a892219d53f0cf14c2d6933dc77464def"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a892219d53f0cf14c2d6933dc77464def">stop_indicate</a></div><div class="ttdeci">static int stop_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07743">chan_misdn.c:7743</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abd97d108065ced9bfacd2cf140965f95"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a></div><div class="ttdeci">static int pbx_start_chan(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08438">chan_misdn.c:8438</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structchan__list_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">chan_list::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdoc">Incoming call dialplan context identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_misdn.c:553</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structchan__list_html_a6324067fc3743b5c48c0907b90d83c5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#a6324067fc3743b5c48c0907b90d83c5d">chan_list::overlap_tv</a></div><div class="ttdeci">struct timeval overlap_tv</div><div class="ttdoc">Overlap timer start time. Timer restarted for every digit received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00603">chan_misdn.c:603</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a6bf98b76af0ed7d2a371064fbece1dd4">MISDN_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00330">chan_misdn.c:330</a></div></div>
<div class="ttc" id="structchan__list_html_a2732815e64648f2863e56c8fd7ce31df"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">chan_list::overlap_dial_task</a></div><div class="ttdeci">int overlap_dial_task</div><div class="ttdoc">Overlap dialing timeout Task ID. -1 if not running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_misdn.c:593</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0ac781d6bf6560fdb5855ef73245e8516c">EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00147">isdn_lib.h:147</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="structchan__list_html_a10319e9c46a8957e2931aed29eeb6f81"><div class="ttname"><a href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">chan_list::overlap_tv_lock</a></div><div class="ttdeci">ast_mutex_t overlap_tv_lock</div><div class="ttdoc">overlap_tv access lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_misdn.c:598</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1b724daeb32d8d023765605586269a02"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1b724daeb32d8d023765605586269a02">misdn_bchannel::out_cause</a></div><div class="ttdeci">int out_cause</div><div class="ttdoc">Q.931 Cause for disconnection code (sent) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00677">isdn_lib.h:677</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00327">chan_misdn.c:327</a></div></div>
<div class="ttc" id="structchan__list_html_a01dcdeb372a388f2081495b58e69d280"><div class="ttname"><a href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">chan_list::overlap_dial</a></div><div class="ttdeci">int overlap_dial</div><div class="ttdoc">Enables overlap dialing for the set amount of seconds. (0 = Disabled) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_misdn.c:588</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d977eebb4ed94cf78548100ab4fde50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d977eebb4ed94cf78548100ab4fde50">&#9670;&nbsp;</a></span>misdn_prefix_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_prefix_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str_prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str_main</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03381">3381</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00132">misdn_jb::size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">misdn_add_number_prefix()</a>.</p>
<div class="fragment"><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;{</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   <span class="keywordtype">size_t</span> len_over;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <span class="keywordtype">size_t</span> len_total;</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;   <span class="keywordtype">size_t</span> len_main;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   <span class="keywordtype">size_t</span> len_prefix;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   len_prefix = strlen(str_prefix);</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   <span class="keywordflow">if</span> (!len_prefix) {</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;      <span class="comment">/* There is no prefix to prepend. */</span></div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;   }</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   len_main = strlen(str_main);</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   len_total = len_prefix + len_main;</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;   <span class="keywordflow">if</span> (size &lt;= len_total) {</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;      <span class="comment">/* We need to truncate since the buffer is too small. */</span></div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      len_over = len_total + 1 - size;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      <span class="keywordflow">if</span> (len_over &lt;= len_main) {</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;         len_main -= len_over;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;         len_over -= len_main;</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;         len_main = 0;</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;         len_prefix -= len_over;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      }</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   }</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <span class="keywordflow">if</span> (len_main) {</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      memmove(str_main + len_prefix, str_main, len_main);</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   }</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;   memcpy(str_main, str_prefix, len_prefix);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;   str_main[len_prefix + len_main] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a111caae6df52e50ee929cdcbe2fac780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a111caae6df52e50ee929cdcbe2fac780">&#9670;&nbsp;</a></span>misdn_queue_connected_line_update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_queue_connected_line_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1b">AST_CONNECTED_LINE_UPDATE_SOURCE</a>&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cid_tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">6135</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l09202">ast_channel_queue_connected_line_update()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01750">ast_set_party_id_all()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00459">ast_party_connected_line::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00492">ast_set_party_connected_line::id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02000">misdn_to_ast_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02117">misdn_to_ast_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02210">misdn_to_ast_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01874">misdn_to_ast_ton()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00366">ast_set_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00496">ast_set_party_connected_line::priv</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00483">ast_party_connected_line::source</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06210">misdn_update_remote_party()</a>.</p>
<div class="fragment"><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;{</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> update_connected;</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;   memset(&amp;update_connected, 0, <span class="keyword">sizeof</span>(update_connected));</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;   update_connected.id.number = 1;</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.valid = 1;</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.str = (<span class="keywordtype">char</span> *) id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>;</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.plan = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>)</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.number.presentation = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>)</div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;</div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;<span class="comment">    * Make sure that any earlier private connected id</span></div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;<span class="comment">    * representation at the remote end is invalidated</span></div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa095ba128741aac1e9306e4956be8707">ast_set_party_id_all</a>(&amp;update_connected.priv);</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.id.tag = cid_tag;</div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>.source = source;</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a>(ast, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, &amp;update_connected);</div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;}</div><div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6cd818b3d3a858ccbed06fe1675147af"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a></div><div class="ttdeci">static int misdn_to_ast_plan(enum mISDN_NUMBER_PLAN number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02000">chan_misdn.c:2000</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a809192e8588d50a33a4242ede2873b71"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a></div><div class="ttdeci">static int misdn_to_ast_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02117">chan_misdn.c:2117</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="channel_8h_html_ade57349a78b2f32d3a7d1bc01fb3bf96"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a></div><div class="ttdeci">void ast_channel_queue_connected_line_update(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Queue a connected line update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09202">channel.c:9202</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab53c3ed364439bed4bbdd74e3d873c86"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a></div><div class="ttdeci">static int misdn_to_ast_ton(enum mISDN_NUMBER_TYPE number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01874">chan_misdn.c:1874</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a></div><div class="ttdoc">Indicate what information in ast_party_connected_line should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00490">channel.h:490</a></div></div>
<div class="ttc" id="channel_8h_html_aa095ba128741aac1e9306e4956be8707"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa095ba128741aac1e9306e4956be8707">ast_set_party_id_all</a></div><div class="ttdeci">void ast_set_party_id_all(struct ast_set_party_id *update_id)</div><div class="ttdoc">Set the update marker to update all information of a corresponding party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01750">channel.c:1750</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3f11b00546ef6bc9e47853ab516ad8dd"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a></div><div class="ttdeci">static int misdn_to_ast_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02210">chan_misdn.c:2210</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8e7ca7ce7b6f177b7ed8ba3b8ff716b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8e7ca7ce7b6f177b7ed8ba3b8ff716b">&#9670;&nbsp;</a></span>misdn_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* misdn_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07393">7393</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_list::ast_dsp</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00449">chan_list::ast_rd_buf</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_list::faxdetect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_list::faxdetect_timeout</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00473">chan_list::faxdetect_tv</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00478">chan_list::faxhandled</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00454">chan_list::frame</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_list::pipe</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07318">process_ast_dsp()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;{</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, t;</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;   <span class="keyword">struct </span>pollfd pfd = { .fd = -1, .events = POLLIN };</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;</div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;misdn_read called without ast\n&quot;</span>);</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;   }</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;   <span class="keywordflow">if</span> (!(tmp = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;misdn_read called without ast-&gt;pvt\n&quot;</span>);</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;   }</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;   <span class="keywordflow">if</span> (!tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> &amp;&amp; tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;misdn_read called without bc\n&quot;</span>);</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;   }</div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;</div><div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;   pfd.fd = tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[0];</div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;   t = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(&amp;pfd, 1, 20);</div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;</div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;   <span class="keywordflow">if</span> (t &lt; 0) {</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;poll() error (err=%s)\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;   }</div><div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;   <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;poll() timed out\n&quot;</span>);</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;      len = 160;</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pfd.revents &amp; POLLIN) {</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;      len = read(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">pipe</a>[0], tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac10eba8e04026f57b7c165d13f16029d">ast_rd_buf</a>, <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac10eba8e04026f57b7c165d13f16029d">ast_rd_buf</a>));</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;</div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;      <span class="keywordflow">if</span> (len &lt;= 0) {</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;         <span class="comment">/* we hangup here, since our pipe is closed */</span></div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_read: Pipe closed, hanging up\n&quot;</span>);</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;      }</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;   }</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>;</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = 0;</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a> = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;   tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac10eba8e04026f57b7c165d13f16029d">ast_rd_buf</a>;</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> &amp;&amp; !tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97b2897a727afea71afc82d3eef8cbb8">faxhandled</a>) {</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;      <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>) {</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a773ce49b000ee273c180e3f154830c4c">faxdetect_tv</a>)) {</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;            tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a773ce49b000ee273c180e3f154830c4c">faxdetect_tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;faxdetect: starting detection with timeout: %ds ...\n&quot;</span>, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>);</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a>(tmp, &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>);</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;            <span class="keyword">struct </span>timeval tv_now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;            <span class="keywordtype">int</span> diff = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(tv_now, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a773ce49b000ee273c180e3f154830c4c">faxdetect_tv</a>);</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;            <span class="keywordflow">if</span> (diff &lt;= (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a> * 1000)) {</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;faxdetect: detecting ...\n&quot;</span>);</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a>(tmp, &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>);</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;faxdetect: stopping detection (time ran out) ...\n&quot;</span>);</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;               tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> = 0;</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;               <span class="keywordflow">return</span> &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>;</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;            }</div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;         }</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;faxdetect: detecting ... (no timeout)\n&quot;</span>);</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a>(tmp, &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>);</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;      }</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;      <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>) {</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a>(tmp, &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>);</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;         <span class="keywordflow">return</span> &amp;tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">frame</a>;</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;      }</div><div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;   }</div><div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac82ffb8db8fafdb375088f6580f47cb2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">chan_list::ast_dsp</a></div><div class="ttdeci">int ast_dsp</div><div class="ttdoc">TRUE if we will use the Asterisk DSP to detect DTMF/Fax. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_misdn.c:484</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structchan__list_html_a55ee15076b418946e327a5ada52f808e"><div class="ttname"><a href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">chan_list::faxdetect</a></div><div class="ttdeci">int faxdetect</div><div class="ttdoc">Fax detection option. (0:no 1:yes 2:yes+nojump) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_misdn.c:461</a></div></div>
<div class="ttc" id="structchan__list_html_ac10eba8e04026f57b7c165d13f16029d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac10eba8e04026f57b7c165d13f16029d">chan_list::ast_rd_buf</a></div><div class="ttdeci">char ast_rd_buf[4096]</div><div class="ttdoc">Read buffer for inbound audio from pipe[0]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00449">chan_misdn.c:449</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structchan__list_html_a67646b28a1d0efc1226de7291833b5ec"><div class="ttname"><a href="../../df/d00/structchan__list.html#a67646b28a1d0efc1226de7291833b5ec">chan_list::pipe</a></div><div class="ttdeci">int pipe[2]</div><div class="ttdoc">Pipe file descriptor handles array. Read from pipe[0], write to pipe[1]. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00444">chan_misdn.c:444</a></div></div>
<div class="ttc" id="structchan__list_html_ab3f309860ee36512bc8bba783df26b1c"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">chan_list::faxdetect_timeout</a></div><div class="ttdeci">int faxdetect_timeout</div><div class="ttdoc">Number of seconds to detect a Fax machine when detection enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_misdn.c:468</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structchan__list_html_a36e35238f4a2626a00689da3e438a561"><div class="ttname"><a href="../../df/d00/structchan__list.html#a36e35238f4a2626a00689da3e438a561">chan_list::frame</a></div><div class="ttdeci">struct ast_frame frame</div><div class="ttdoc">Inbound audio frame returned by misdn_read(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00454">chan_misdn.c:454</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a26630f293c5ce4c71389909fd5b97388"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a26630f293c5ce4c71389909fd5b97388">process_ast_dsp</a></div><div class="ttdeci">static struct ast_frame * process_ast_dsp(struct chan_list *tmp, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07318">chan_misdn.c:7318</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structchan__list_html_a773ce49b000ee273c180e3f154830c4c"><div class="ttname"><a href="../../df/d00/structchan__list.html#a773ce49b000ee273c180e3f154830c4c">chan_list::faxdetect_tv</a></div><div class="ttdeci">struct timeval faxdetect_tv</div><div class="ttdoc">Starting time of fax detection with timeout when nonzero. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00473">chan_misdn.c:473</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="structchan__list_html_a97b2897a727afea71afc82d3eef8cbb8"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97b2897a727afea71afc82d3eef8cbb8">chan_list::faxhandled</a></div><div class="ttdeci">int faxhandled</div><div class="ttdoc">TRUE if a fax has been detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00478">chan_misdn.c:478</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16f0c10df28d09e92fb2f4f9b2934941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f0c10df28d09e92fb2f4f9b2934941">&#9670;&nbsp;</a></span>misdn_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* misdn_request </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *&#160;</td>
          <td class="paramname"><em>assignedids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>requestor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">7855</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">AST_NONSTANDARD_APP_ARGS</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_list_init()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00411">misdn_bchannel::channel</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00622">robin_list::channel</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08377">cl_queue_chan()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00395">misdn_bchannel::dec</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l00147">ext</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00641">get_robin_position()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00126">METHOD_ROUND_ROBIN</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00127">METHOD_STANDARD_DEC</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00946">misdn_cfg_get_next_port_spin()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00031">MISDN_CFG_GROUPNAME</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00744">misdn_cfg_is_group_method()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00037">MISDN_CFG_PMP_L1_CHECK</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03205">misdn_lib_get_free_bc()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00137">misdn_lib_get_maxchans()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01821">misdn_lib_port_up()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l01759">misdn_lib_release()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08174">misdn_new()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_list::need_hangup</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00621">robin_list::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;{</div><div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast;</div><div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d3/d08/structgroup.html">group</a>[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;   <span class="keywordtype">char</span> dial_str[128];</div><div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;   <span class="keywordtype">char</span> *dest_cp;</div><div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;   <span class="keywordtype">char</span> *p = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d84/structchannel.html">channel</a> = 0;</div><div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *newbc = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a04e41b69f1017a234f0cfe958c99be93">dec</a> = 0;</div><div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;   <span class="keywordtype">int</span> cc_retry_call = 0;  <span class="comment">/* TRUE if this is a call completion retry call */</span></div><div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;   <span class="keywordtype">long</span> record_id = -1;</div><div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;   <span class="keyword">struct </span>misdn_cc_record *cc_record;</div><div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *err_msg;</div><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *cl;</div><div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;</div><div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(intf);   <span class="comment">/* interface token */</span></div><div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a>); <span class="comment">/* extension token */</span></div><div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(opts);   <span class="comment">/* options token */</span></div><div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;   );</div><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;</div><div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;   snprintf(dial_str, <span class="keyword">sizeof</span>(dial_str), <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>, data);</div><div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;</div><div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;<span class="comment">    * data is ---v</span></div><div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;<span class="comment">    * Dial(mISDN/g:group_name[/extension[/options]])</span></div><div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;<span class="comment">    * Dial(mISDN/port[:preselected_channel][/extension[/options]])</span></div><div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;<span class="comment">    * Dial(mISDN/cc/cc-record-id)</span></div><div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;<span class="comment">    * The dial extension could be empty if you are using MISDN_KEYPAD</span></div><div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;<span class="comment">    * to control ISDN provider features.</span></div><div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;   dest_cp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, dest_cp, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext) {</div><div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;      <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;   }</div><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;</div><div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf)) {</div><div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf[0] == <span class="charliteral">&#39;g&#39;</span> &amp;&amp; <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf[1] == <span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;         <span class="comment">/* We make a group call lets checkout which ports are in my group */</span></div><div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf += 2;</div><div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(group, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf, <span class="keyword">sizeof</span>(group));</div><div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, 0, <span class="stringliteral">&quot; --&gt; Group Call group: %s\n&quot;</span>, group);</div><div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf, <span class="stringliteral">&quot;cc&quot;</span>) == 0) {</div><div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;         cc_retry_call = 1;</div><div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((p = strchr(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf, <span class="charliteral">&#39;:&#39;</span>))) {</div><div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;         <span class="comment">/* we have a preselected channel */</span></div><div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;         *p++ = 0;</div><div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;         channel = atoi(p);</div><div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;         port = atoi(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf);</div><div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; Call on preselected Channel (%d).\n&quot;</span>, channel);</div><div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;         port = atoi(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.intf);</div><div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;      }</div><div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! IND : Dial(%s) WITHOUT Port or Group, check extensions.conf\n&quot;</span>, dial_str);</div><div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;   }</div><div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;</div><div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;   <span class="keywordflow">if</span> (cc_retry_call) {</div><div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext)) {</div><div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! IND : Dial(%s) WITHOUT cc-record-id, check extensions.conf\n&quot;</span>, dial_str);</div><div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;      }</div><div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;      <span class="keywordflow">if</span> (!isdigit(*<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext)) {</div><div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! IND : Dial(%s) cc-record-id must be a number.\n&quot;</span>, dial_str);</div><div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;      }</div><div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;      record_id = atol(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext);</div><div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;</div><div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;      cc_record = misdn_cc_find_by_id(record_id);</div><div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;      <span class="keywordflow">if</span> (!cc_record) {</div><div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;         err_msg = misdn_cc_record_not_found;</div><div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! IND : Dial(%s) %s.\n&quot;</span>, dial_str, err_msg);</div><div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;      }</div><div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;      <span class="keywordflow">if</span> (!cc_record-&gt;activated) {</div><div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;         err_msg = <span class="stringliteral">&quot;Call completion has not been activated&quot;</span>;</div><div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot; --&gt; ! IND : Dial(%s) %s.\n&quot;</span>, dial_str, err_msg);</div><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;      }</div><div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;      port = cc_record-&gt;port;</div><div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;misdn_cc_records_db);</div><div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;   }</div><div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;</div><div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#abd7fda190c06742b1b32025dfa1776b5">misdn_cfg_is_group_method</a>(group, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92abe93bc1ee9b0980c424e3442874ee818">METHOD_STANDARD_DEC</a>)) {</div><div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, port, <span class="stringliteral">&quot; --&gt; STARTING STANDARD DEC...\n&quot;</span>);</div><div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;      dec = 1;</div><div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;   }</div><div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;</div><div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(group)) {</div><div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;      <span class="keywordtype">char</span> cfg_group[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d60/structrobin__list.html">robin_list</a> *rr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;</div><div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;      <span class="comment">/* Group dial */</span></div><div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;</div><div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#abd7fda190c06742b1b32025dfa1776b5">misdn_cfg_is_group_method</a>(group, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92aae039733b86f215ef5e8e0f7472e178b">METHOD_ROUND_ROBIN</a>)) {</div><div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, port, <span class="stringliteral">&quot; --&gt; STARTING ROUND ROBIN...\n&quot;</span>);</div><div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;         rr = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2c5e71fd7d73198e58f64bba83ce22dd">get_robin_position</a>(group);</div><div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;      }</div><div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;</div><div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;      <span class="keywordflow">if</span> (rr) {</div><div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;         <span class="keywordtype">int</span> port_start;</div><div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;         <span class="keywordtype">int</span> bchan_start;</div><div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;         <span class="keywordtype">int</span> port_up;</div><div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;         <span class="keywordtype">int</span> check;</div><div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;         <span class="keywordtype">int</span> maxbchans;</div><div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;         <span class="keywordtype">int</span> wraped = 0;</div><div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;</div><div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;         <span class="keywordflow">if</span> (!rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>) {</div><div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;            rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a>(0);</div><div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;         }</div><div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;</div><div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;         <span class="keywordflow">if</span> (!rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>) {</div><div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;            rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 1;</div><div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;         }</div><div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;</div><div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;         bchan_start = rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>;</div><div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;         port_start = rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;         <span class="keywordflow">do</span> {</div><div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>, cfg_group, <span class="keyword">sizeof</span>(cfg_group));</div><div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;            <span class="keywordflow">if</span> (strcasecmp(cfg_group, group)) {</div><div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;               wraped = 1;</div><div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 1;</div><div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;            }</div><div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;</div><div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa64335a712087c9b8d9895fa30febcf64">MISDN_CFG_PMP_L1_CHECK</a>, &amp;check, <span class="keyword">sizeof</span>(check));</div><div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;            port_up = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, check);</div><div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;</div><div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;            <span class="keywordflow">if</span> (!port_up) {</div><div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;L1 is not Up on this Port\n&quot;</span>);</div><div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 1;</div><div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port_up &lt; 0) {</div><div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;This port (%d) is blocked\n&quot;</span>, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;               rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 1;</div><div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;portup\n&quot;</span>);</div><div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;               maxbchans = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0ea1ee03bd6a45acb752b8046ed1fd30">misdn_lib_get_maxchans</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;</div><div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;               <span class="keywordflow">for</span> (;rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> &lt;= maxbchans;rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>++) {</div><div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;                  <span class="comment">/* ive come full circle and can stop now */</span></div><div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;                  <span class="keywordflow">if</span> (wraped &amp;&amp; (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> == port_start) &amp;&amp; (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> == bchan_start)) {</div><div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;                  }</div><div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;</div><div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;                  <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Checking channel %d\n&quot;</span>,  rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;</div><div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;                  <span class="keywordflow">if</span> ((newbc = <a class="code" href="../../de/dfe/isdn__lib_8c.html#aa0fb761776d759bbd96a56bf38fe8c06">misdn_lib_get_free_bc</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>, 0, 0))) {</div><div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;                     <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; Success! Found port:%d channel:%d\n&quot;</span>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, newbc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>);</div><div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;                     rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>++;</div><div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;                  }</div><div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;               }</div><div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;               <span class="keywordflow">if</span> (wraped &amp;&amp; (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> == port_start) &amp;&amp; (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> &lt;= bchan_start)) {</div><div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!newbc || (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> == maxbchans)) {</div><div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;                  rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a>(rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;                  rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a> = 1;</div><div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;               }</div><div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;</div><div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;            }</div><div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;            wraped = 1;</div><div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;         } <span class="keywordflow">while</span> (!newbc &amp;&amp; (rr-&gt;<a class="code" href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">port</a> &gt; 0));</div><div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;         <span class="keywordflow">for</span> (port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0); port &gt; 0;</div><div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;            port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(port)) {</div><div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a>, cfg_group, <span class="keyword">sizeof</span>(cfg_group));</div><div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;</div><div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, port, <span class="stringliteral">&quot;Group [%s] Port [%d]\n&quot;</span>, group, port);</div><div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(cfg_group, group)) {</div><div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;               <span class="keywordtype">int</span> port_up;</div><div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;               <span class="keywordtype">int</span> check;</div><div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;</div><div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;               <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa64335a712087c9b8d9895fa30febcf64">MISDN_CFG_PMP_L1_CHECK</a>, &amp;check, <span class="keyword">sizeof</span>(check));</div><div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;               port_up = <a class="code" href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a>(port, check);</div><div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;</div><div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, port, <span class="stringliteral">&quot;portup:%d\n&quot;</span>, port_up);</div><div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;</div><div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;               <span class="keywordflow">if</span> (port_up &gt; 0) {</div><div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;                  newbc = <a class="code" href="../../de/dfe/isdn__lib_8c.html#aa0fb761776d759bbd96a56bf38fe8c06">misdn_lib_get_free_bc</a>(port, 0, 0, dec);</div><div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;                  <span class="keywordflow">if</span> (newbc) {</div><div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;                  }</div><div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;               }</div><div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;            }</div><div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;         }</div><div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;      }</div><div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;</div><div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;      <span class="comment">/* Group dial failed ?*/</span></div><div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;      <span class="keywordflow">if</span> (!newbc) {</div><div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;            <span class="stringliteral">&quot;Could not Dial out on group &#39;%s&#39;.\n&quot;</span></div><div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;            <span class="stringliteral">&quot;\tEither the L2 and L1 on all of these ports where DOWN (see &#39;show application misdn_check_l2l1&#39;)\n&quot;</span></div><div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;            <span class="stringliteral">&quot;\tOr there was no free channel on none of the ports\n\n&quot;</span>,</div><div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;            group);</div><div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;      }</div><div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;      <span class="comment">/* &#39;Normal&#39; Port dial * Port dial */</span></div><div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;      <span class="keywordflow">if</span> (channel) {</div><div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot; --&gt; preselected_channel: %d\n&quot;</span>, channel);</div><div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;      }</div><div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;      newbc = <a class="code" href="../../de/dfe/isdn__lib_8c.html#aa0fb761776d759bbd96a56bf38fe8c06">misdn_lib_get_free_bc</a>(port, channel, 0, dec);</div><div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;      <span class="keywordflow">if</span> (!newbc) {</div><div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not create channel on port:%d for Dial(%s)\n&quot;</span>, port, dial_str);</div><div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;      }</div><div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;   }</div><div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;</div><div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;   <span class="comment">/* create ast_channel and link all the objects together */</span></div><div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;   cl = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a50699bbbd48dbd7728bfed50b0d00547">chan_list_init</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>);</div><div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;   <span class="keywordflow">if</span> (!cl) {</div><div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#afc3a516ffc421e9ded54345e2ed59248">misdn_lib_release</a>(newbc);</div><div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create call record for Dial(%s)\n&quot;</span>, dial_str);</div><div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;   }</div><div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a> = newbc;</div><div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;</div><div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;   ast = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0e0668ab60f561d89f4135bfbc600575">misdn_new</a>(cl, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.ext, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cap, assignedids, requestor, port, channel);</div><div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(cl, <span class="stringliteral">&quot;Failed to create a new channel&quot;</span>);</div><div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#afc3a516ffc421e9ded54345e2ed59248">misdn_lib_release</a>(newbc);</div><div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create Asterisk channel for Dial(%s)\n&quot;</span>, dial_str);</div><div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;   }</div><div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;</div><div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;   cl-&gt;record_id = record_id;</div><div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;</div><div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;   <span class="comment">/* register chan in local list */</span></div><div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3ace3bd096d1676e348a4ef23a20a7fc">cl_queue_chan</a>(cl);</div><div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;</div><div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;   <span class="comment">/* fill in the config into the objects */</span></div><div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#acac8a3f512ee09cfb5ed9283b66804eb">read_config</a>(cl);</div><div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;</div><div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;   <span class="comment">/* important */</span></div><div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a> = 0;</div><div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;</div><div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(cl, <span class="stringliteral">&quot;Successful misdn_request()&quot;</span>);</div><div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;   <span class="keywordflow">return</span> ast;</div><div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa55472c893826f203a64663878f556d41">MISDN_CFG_GROUPNAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00031">chan_misdn_config.h:31</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af9a945b0921e0914c751795dc40af6ea"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af9a945b0921e0914c751795dc40af6ea">misdn_cfg_get_next_port_spin</a></div><div class="ttdeci">int misdn_cfg_get_next_port_spin(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00946">misdn_config.c:946</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_acac8a3f512ee09cfb5ed9283b66804eb"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#acac8a3f512ee09cfb5ed9283b66804eb">read_config</a></div><div class="ttdeci">static int read_config(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05922">chan_misdn.c:5922</a></div></div>
<div class="ttc" id="structchan__list_html_ab8aa4ba47ba9bd53b22a8c30af419827"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">chan_list::need_hangup</a></div><div class="ttdeci">int need_hangup</div><div class="ttdoc">TRUE if a channel can be hung up by calling asterisk directly when done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_misdn.c:397</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0e0668ab60f561d89f4135bfbc600575"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0e0668ab60f561d89f4135bfbc600575">misdn_new</a></div><div class="ttdeci">static struct ast_channel * misdn_new(struct chan_list *cl, int state, char *exten, char *callerid, struct ast_format_cap *cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, int port, int c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08174">chan_misdn.c:8174</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3ace3bd096d1676e348a4ef23a20a7fc"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3ace3bd096d1676e348a4ef23a20a7fc">cl_queue_chan</a></div><div class="ttdeci">static void cl_queue_chan(struct chan_list *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08377">chan_misdn.c:8377</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a9ce7b5b14a6c33d74b03a70feab95c92abe93bc1ee9b0980c424e3442874ee818"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92abe93bc1ee9b0980c424e3442874ee818">METHOD_STANDARD_DEC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00127">chan_misdn_config.h:127</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="http_8c_html_af9b32121c4ad80b0887a3d73fd24de5f"><div class="ttname"><a href="../../dd/d43/http_8c.html#af9b32121c4ad80b0887a3d73fd24de5f">ext</a></div><div class="ttdeci">const char * ext</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d43/http_8c_source.html#l00147">http.c:147</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0ea1ee03bd6a45acb752b8046ed1fd30"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0ea1ee03bd6a45acb752b8046ed1fd30">misdn_lib_get_maxchans</a></div><div class="ttdeci">int misdn_lib_get_maxchans(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00137">isdn_lib.c:137</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_abd7fda190c06742b1b32025dfa1776b5"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#abd7fda190c06742b1b32025dfa1776b5">misdn_cfg_is_group_method</a></div><div class="ttdeci">int misdn_cfg_is_group_method(char *group, enum misdn_cfg_method meth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00744">misdn_config.c:744</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="structrobin__list_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d60/structrobin__list.html#a63c89c04d1feae07ca35558055155ffb">robin_list::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00621">chan_misdn.c:621</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structrobin__list_html"><div class="ttname"><a href="../../de/d60/structrobin__list.html">robin_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00619">chan_misdn.c:619</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_afc3a516ffc421e9ded54345e2ed59248"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#afc3a516ffc421e9ded54345e2ed59248">misdn_lib_release</a></div><div class="ttdeci">void misdn_lib_release(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01759">isdn_lib.c:1759</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa64335a712087c9b8d9895fa30febcf64"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa64335a712087c9b8d9895fa30febcf64">MISDN_CFG_PMP_L1_CHECK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00037">chan_misdn_config.h:37</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a9ce7b5b14a6c33d74b03a70feab95c92aae039733b86f215ef5e8e0f7472e178b"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a9ce7b5b14a6c33d74b03a70feab95c92aae039733b86f215ef5e8e0f7472e178b">METHOD_ROUND_ROBIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00126">chan_misdn_config.h:126</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a04e41b69f1017a234f0cfe958c99be93"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a04e41b69f1017a234f0cfe958c99be93">misdn_bchannel::dec</a></div><div class="ttdeci">int dec</div><div class="ttdoc">TRUE if allocate higher B channels first. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00395">isdn_lib.h:395</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structrobin__list_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../de/d60/structrobin__list.html#adf7dff2c57c0da9a4a2b70e3e815be31">robin_list::channel</a></div><div class="ttdeci">int channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00622">chan_misdn.c:622</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_accfcb380df76a64251d88ef49c2dd4e3"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_NONSTANDARD_APP_ARGS(args, parse, sep)</div><div class="ttdoc">Performs the &amp;#39;nonstandard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">include/asterisk/app.h:1300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_aa0fb761776d759bbd96a56bf38fe8c06"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#aa0fb761776d759bbd96a56bf38fe8c06">misdn_lib_get_free_bc</a></div><div class="ttdeci">struct misdn_bchannel * misdn_lib_get_free_bc(int port, int channel, int inout, int dec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03205">isdn_lib.c:3205</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a6f06df375dc3530408a6c2f8488b2440"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a6f06df375dc3530408a6c2f8488b2440">misdn_lib_port_up</a></div><div class="ttdeci">int misdn_lib_port_up(int port, int check)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l01821">isdn_lib.c:1821</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a50699bbbd48dbd7728bfed50b0d00547"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a50699bbbd48dbd7728bfed50b0d00547">chan_list_init</a></div><div class="ttdeci">static struct chan_list * chan_list_init(int orig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07831">chan_misdn.c:7831</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">misdn_bchannel::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Assigned B channel number B1, B2... 0 if not assigned. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00411">isdn_lib.h:411</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2c5e71fd7d73198e58f64bba83ce22dd"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2c5e71fd7d73198e58f64bba83ce22dd">get_robin_position</a></div><div class="ttdeci">static struct robin_list * get_robin_position(char *group)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00641">chan_misdn.c:641</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5115e37e01c0dc8a6ba640b2413a3bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5115e37e01c0dc8a6ba640b2413a3bf9">&#9670;&nbsp;</a></span>misdn_send_text()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_send_text </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08115">8115</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00642">misdn_bchannel::display</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00154">EVENT_INFORMATION</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>
<div class="fragment"><div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;{</div><div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(chan);</div><div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;</div><div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;   <span class="keywordflow">if</span> (tmp &amp;&amp; tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>) {</div><div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>, <a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>, <span class="keyword">sizeof</span>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>));</div><div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a>);</div><div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No chan_list but send_text request?\n&quot;</span>);</div><div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;   }</div><div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;</div><div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a89b6e11f1f5add3aec515c40e0cbc44c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">misdn_bchannel::display</a></div><div class="ttdeci">char display[84]</div><div class="ttdoc">Display message that can be displayed by the user phone. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00642">isdn_lib.h:642</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a156fcf20a91aa8bd12e745decca3ea46">EVENT_INFORMATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00154">isdn_lib.h:154</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6de645b40ee13ae95c366d0273367837"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6de645b40ee13ae95c366d0273367837">&#9670;&nbsp;</a></span>misdn_set_opt_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_set_opt_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12365">12365</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_list::ast_dsp</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01745">ast_dsp_new()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">config_jitterbuffer()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00529">misdn_bchannel::crypt_key</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00642">misdn_bchannel::display</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_list::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00028">DSP_FEATURE_DIGIT_DETECT</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00029">DSP_FEATURE_FAX_DETECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00693">misdn_bchannel::ec_deftaps</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00688">misdn_bchannel::ec_enable</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_list::faxdetect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_list::faxdetect_timeout</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_list::ignore_dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00176">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_list::jb_len</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_list::jb_upper_threshold</a>, <a class="el" href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00101">MISDN_CFG_FAXDETECT_TIMEOUT</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00117">MISDN_GEN_CRYPT_KEYS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00474">misdn_bchannel::nodsp</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00477">misdn_bchannel::nojitter</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00702">misdn_bchannel::orig</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00600">misdn_bchannel::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00714">misdn_bchannel::rxgain</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00457">misdn_bchannel::send_dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00603">misdn_bchannel::set_presentation</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00708">misdn_bchannel::txgain</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l12366"></a><span class="lineno">12366</span>&#160;{</div><div class="line"><a name="l12367"></a><span class="lineno">12367</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(chan);</div><div class="line"><a name="l12368"></a><span class="lineno">12368</span>&#160;   <span class="keywordtype">char</span> *tok;</div><div class="line"><a name="l12369"></a><span class="lineno">12369</span>&#160;   <span class="keywordtype">char</span> *tokb;</div><div class="line"><a name="l12370"></a><span class="lineno">12370</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l12371"></a><span class="lineno">12371</span>&#160;   <span class="keywordtype">int</span> keyidx = 0;</div><div class="line"><a name="l12372"></a><span class="lineno">12372</span>&#160;   <span class="keywordtype">int</span> rxgain = 0;</div><div class="line"><a name="l12373"></a><span class="lineno">12373</span>&#160;   <span class="keywordtype">int</span> txgain = 0;</div><div class="line"><a name="l12374"></a><span class="lineno">12374</span>&#160;   <span class="keywordtype">int</span> change_jitter = 0;</div><div class="line"><a name="l12375"></a><span class="lineno">12375</span>&#160;</div><div class="line"><a name="l12376"></a><span class="lineno">12376</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>)) {</div><div class="line"><a name="l12377"></a><span class="lineno">12377</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_set_opt makes sense only with %s channels!\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>);</div><div class="line"><a name="l12378"></a><span class="lineno">12378</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12379"></a><span class="lineno">12379</span>&#160;   }</div><div class="line"><a name="l12380"></a><span class="lineno">12380</span>&#160;</div><div class="line"><a name="l12381"></a><span class="lineno">12381</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>((<span class="keywordtype">char</span> *) data)) {</div><div class="line"><a name="l12382"></a><span class="lineno">12382</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;misdn_set_opt Requires arguments\n&quot;</span>);</div><div class="line"><a name="l12383"></a><span class="lineno">12383</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l12384"></a><span class="lineno">12384</span>&#160;   }</div><div class="line"><a name="l12385"></a><span class="lineno">12385</span>&#160;</div><div class="line"><a name="l12386"></a><span class="lineno">12386</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l12387"></a><span class="lineno">12387</span>&#160;   <span class="keywordflow">for</span> (tok = strtok_r(parse, <span class="stringliteral">&quot;:&quot;</span>, &amp;tokb);</div><div class="line"><a name="l12388"></a><span class="lineno">12388</span>&#160;      tok;</div><div class="line"><a name="l12389"></a><span class="lineno">12389</span>&#160;      tok = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;:&quot;</span>, &amp;tokb)) {</div><div class="line"><a name="l12390"></a><span class="lineno">12390</span>&#160;      <span class="keywordtype">int</span> neglect = 0;</div><div class="line"><a name="l12391"></a><span class="lineno">12391</span>&#160;</div><div class="line"><a name="l12392"></a><span class="lineno">12392</span>&#160;      <span class="keywordflow">if</span> (tok[0] == <span class="charliteral">&#39;!&#39;</span>) {</div><div class="line"><a name="l12393"></a><span class="lineno">12393</span>&#160;         neglect = 1;</div><div class="line"><a name="l12394"></a><span class="lineno">12394</span>&#160;         tok++;</div><div class="line"><a name="l12395"></a><span class="lineno">12395</span>&#160;      }</div><div class="line"><a name="l12396"></a><span class="lineno">12396</span>&#160;</div><div class="line"><a name="l12397"></a><span class="lineno">12397</span>&#160;      <span class="keywordflow">switch</span>(tok[0]) {</div><div class="line"><a name="l12398"></a><span class="lineno">12398</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span> :</div><div class="line"><a name="l12399"></a><span class="lineno">12399</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>, ++tok, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>));</div><div class="line"><a name="l12400"></a><span class="lineno">12400</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Display:%s\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>);</div><div class="line"><a name="l12401"></a><span class="lineno">12401</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12402"></a><span class="lineno">12402</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l12403"></a><span class="lineno">12403</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: No DSP\n&quot;</span>);</div><div class="line"><a name="l12404"></a><span class="lineno">12404</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a134855bcd1a1ba0d1733faa7a4e94389">nodsp</a> = 1;</div><div class="line"><a name="l12405"></a><span class="lineno">12405</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12406"></a><span class="lineno">12406</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;j&#39;</span>:</div><div class="line"><a name="l12407"></a><span class="lineno">12407</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: jitter\n&quot;</span>);</div><div class="line"><a name="l12408"></a><span class="lineno">12408</span>&#160;         tok++;</div><div class="line"><a name="l12409"></a><span class="lineno">12409</span>&#160;         change_jitter = 1;</div><div class="line"><a name="l12410"></a><span class="lineno">12410</span>&#160;</div><div class="line"><a name="l12411"></a><span class="lineno">12411</span>&#160;         <span class="keywordflow">switch</span> (tok[0]) {</div><div class="line"><a name="l12412"></a><span class="lineno">12412</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div><div class="line"><a name="l12413"></a><span class="lineno">12413</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a> = atoi(++tok);</div><div class="line"><a name="l12414"></a><span class="lineno">12414</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; buffer_len:%d\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a>);</div><div class="line"><a name="l12415"></a><span class="lineno">12415</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12416"></a><span class="lineno">12416</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span> :</div><div class="line"><a name="l12417"></a><span class="lineno">12417</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a> = atoi(++tok);</div><div class="line"><a name="l12418"></a><span class="lineno">12418</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; upper_threshold:%d\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a>);</div><div class="line"><a name="l12419"></a><span class="lineno">12419</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12420"></a><span class="lineno">12420</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l12421"></a><span class="lineno">12421</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">nojitter</a> = 1;</div><div class="line"><a name="l12422"></a><span class="lineno">12422</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; nojitter\n&quot;</span>);</div><div class="line"><a name="l12423"></a><span class="lineno">12423</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12424"></a><span class="lineno">12424</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l12425"></a><span class="lineno">12425</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a> = 4000;</div><div class="line"><a name="l12426"></a><span class="lineno">12426</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a> = 0;</div><div class="line"><a name="l12427"></a><span class="lineno">12427</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; buffer_len:%d (default)\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a>);</div><div class="line"><a name="l12428"></a><span class="lineno">12428</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; upper_threshold:%d (default)\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a>);</div><div class="line"><a name="l12429"></a><span class="lineno">12429</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12430"></a><span class="lineno">12430</span>&#160;         }</div><div class="line"><a name="l12431"></a><span class="lineno">12431</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12432"></a><span class="lineno">12432</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div><div class="line"><a name="l12433"></a><span class="lineno">12433</span>&#160;         tok++;</div><div class="line"><a name="l12434"></a><span class="lineno">12434</span>&#160;</div><div class="line"><a name="l12435"></a><span class="lineno">12435</span>&#160;         <span class="keywordflow">switch</span> (tok[0]) {</div><div class="line"><a name="l12436"></a><span class="lineno">12436</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span> :</div><div class="line"><a name="l12437"></a><span class="lineno">12437</span>&#160;            rxgain = atoi(++tok);</div><div class="line"><a name="l12438"></a><span class="lineno">12438</span>&#160;            <span class="keywordflow">if</span> (rxgain &lt; -8) {</div><div class="line"><a name="l12439"></a><span class="lineno">12439</span>&#160;               rxgain = -8;</div><div class="line"><a name="l12440"></a><span class="lineno">12440</span>&#160;            }</div><div class="line"><a name="l12441"></a><span class="lineno">12441</span>&#160;            <span class="keywordflow">if</span> (rxgain &gt; 8) {</div><div class="line"><a name="l12442"></a><span class="lineno">12442</span>&#160;               rxgain = 8;</div><div class="line"><a name="l12443"></a><span class="lineno">12443</span>&#160;            }</div><div class="line"><a name="l12444"></a><span class="lineno">12444</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">rxgain</a> = rxgain;</div><div class="line"><a name="l12445"></a><span class="lineno">12445</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Volume:%d\n&quot;</span>, rxgain);</div><div class="line"><a name="l12446"></a><span class="lineno">12446</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12447"></a><span class="lineno">12447</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div><div class="line"><a name="l12448"></a><span class="lineno">12448</span>&#160;            txgain = atoi(++tok);</div><div class="line"><a name="l12449"></a><span class="lineno">12449</span>&#160;            <span class="keywordflow">if</span> (txgain &lt; -8) {</div><div class="line"><a name="l12450"></a><span class="lineno">12450</span>&#160;               txgain = -8;</div><div class="line"><a name="l12451"></a><span class="lineno">12451</span>&#160;            }</div><div class="line"><a name="l12452"></a><span class="lineno">12452</span>&#160;            <span class="keywordflow">if</span> (txgain &gt; 8) {</div><div class="line"><a name="l12453"></a><span class="lineno">12453</span>&#160;               txgain = 8;</div><div class="line"><a name="l12454"></a><span class="lineno">12454</span>&#160;            }</div><div class="line"><a name="l12455"></a><span class="lineno">12455</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">txgain</a> = txgain;</div><div class="line"><a name="l12456"></a><span class="lineno">12456</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Volume:%d\n&quot;</span>, txgain);</div><div class="line"><a name="l12457"></a><span class="lineno">12457</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12458"></a><span class="lineno">12458</span>&#160;         }</div><div class="line"><a name="l12459"></a><span class="lineno">12459</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12460"></a><span class="lineno">12460</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div><div class="line"><a name="l12461"></a><span class="lineno">12461</span>&#160;         keyidx = atoi(++tok);</div><div class="line"><a name="l12462"></a><span class="lineno">12462</span>&#160;         {</div><div class="line"><a name="l12463"></a><span class="lineno">12463</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="../../d2/df1/structkeys.html">keys</a>[4096];</div><div class="line"><a name="l12464"></a><span class="lineno">12464</span>&#160;            <span class="keywordtype">char</span> *key = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l12465"></a><span class="lineno">12465</span>&#160;            <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a>;</div><div class="line"><a name="l12466"></a><span class="lineno">12466</span>&#160;            <span class="keywordtype">int</span> i;</div><div class="line"><a name="l12467"></a><span class="lineno">12467</span>&#160;</div><div class="line"><a name="l12468"></a><span class="lineno">12468</span>&#160;            <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaacd5c6e18a3904a1b6934b9f57f89322">MISDN_GEN_CRYPT_KEYS</a>, keys, <span class="keyword">sizeof</span>(keys));</div><div class="line"><a name="l12469"></a><span class="lineno">12469</span>&#160;</div><div class="line"><a name="l12470"></a><span class="lineno">12470</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; keyidx; i++) {</div><div class="line"><a name="l12471"></a><span class="lineno">12471</span>&#160;               key = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tmp, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l12472"></a><span class="lineno">12472</span>&#160;            }</div><div class="line"><a name="l12473"></a><span class="lineno">12473</span>&#160;</div><div class="line"><a name="l12474"></a><span class="lineno">12474</span>&#160;            <span class="keywordflow">if</span> (key) {</div><div class="line"><a name="l12475"></a><span class="lineno">12475</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">crypt_key</a>, key, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">crypt_key</a>));</div><div class="line"><a name="l12476"></a><span class="lineno">12476</span>&#160;            }</div><div class="line"><a name="l12477"></a><span class="lineno">12477</span>&#160;</div><div class="line"><a name="l12478"></a><span class="lineno">12478</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: crypt with key:%s\n&quot;</span>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">crypt_key</a>);</div><div class="line"><a name="l12479"></a><span class="lineno">12479</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l12480"></a><span class="lineno">12480</span>&#160;         }</div><div class="line"><a name="l12481"></a><span class="lineno">12481</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:</div><div class="line"><a name="l12482"></a><span class="lineno">12482</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: EchoCancel\n&quot;</span>);</div><div class="line"><a name="l12483"></a><span class="lineno">12483</span>&#160;</div><div class="line"><a name="l12484"></a><span class="lineno">12484</span>&#160;         <span class="keywordflow">if</span> (neglect) {</div><div class="line"><a name="l12485"></a><span class="lineno">12485</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; disabled\n&quot;</span>);</div><div class="line"><a name="l12486"></a><span class="lineno">12486</span>&#160;<span class="preprocessor">#ifdef MISDN_1_2</span></div><div class="line"><a name="l12487"></a><span class="lineno">12487</span>&#160;            *ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;pipeline = 0;</div><div class="line"><a name="l12488"></a><span class="lineno">12488</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l12489"></a><span class="lineno">12489</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a> = 0;</div><div class="line"><a name="l12490"></a><span class="lineno">12490</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l12491"></a><span class="lineno">12491</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l12492"></a><span class="lineno">12492</span>&#160;<span class="preprocessor">#ifdef MISDN_1_2</span></div><div class="line"><a name="l12493"></a><span class="lineno">12493</span>&#160;            update_pipeline_config(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l12494"></a><span class="lineno">12494</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l12495"></a><span class="lineno">12495</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a> = 1;</div><div class="line"><a name="l12496"></a><span class="lineno">12496</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9e217f04c0fbbe53b5ad22ba4eb2af25">orig</a> = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>;</div><div class="line"><a name="l12497"></a><span class="lineno">12497</span>&#160;            tok++;</div><div class="line"><a name="l12498"></a><span class="lineno">12498</span>&#160;            <span class="keywordflow">if</span> (*tok) {</div><div class="line"><a name="l12499"></a><span class="lineno">12499</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf0690a26c02528e63f3cb623d1bd4a7">ec_deftaps</a> = atoi(tok);</div><div class="line"><a name="l12500"></a><span class="lineno">12500</span>&#160;            }</div><div class="line"><a name="l12501"></a><span class="lineno">12501</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l12502"></a><span class="lineno">12502</span>&#160;         }</div><div class="line"><a name="l12503"></a><span class="lineno">12503</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12504"></a><span class="lineno">12504</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div><div class="line"><a name="l12505"></a><span class="lineno">12505</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Digital\n&quot;</span>);</div><div class="line"><a name="l12506"></a><span class="lineno">12506</span>&#160;</div><div class="line"><a name="l12507"></a><span class="lineno">12507</span>&#160;         <span class="keywordflow">if</span> (strlen(tok) &gt; 1 &amp;&amp; tok[1] == <span class="charliteral">&#39;1&#39;</span>) {</div><div class="line"><a name="l12508"></a><span class="lineno">12508</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: HDLC \n&quot;</span>);</div><div class="line"><a name="l12509"></a><span class="lineno">12509</span>&#160;            <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a>) {</div><div class="line"><a name="l12510"></a><span class="lineno">12510</span>&#160;               ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 1;</div><div class="line"><a name="l12511"></a><span class="lineno">12511</span>&#160;            }</div><div class="line"><a name="l12512"></a><span class="lineno">12512</span>&#160;         }</div><div class="line"><a name="l12513"></a><span class="lineno">12513</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>;</div><div class="line"><a name="l12514"></a><span class="lineno">12514</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12515"></a><span class="lineno">12515</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l12516"></a><span class="lineno">12516</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Send DTMF\n&quot;</span>);</div><div class="line"><a name="l12517"></a><span class="lineno">12517</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">send_dtmf</a> = 1;</div><div class="line"><a name="l12518"></a><span class="lineno">12518</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12519"></a><span class="lineno">12519</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div><div class="line"><a name="l12520"></a><span class="lineno">12520</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: Faxdetect\n&quot;</span>);</div><div class="line"><a name="l12521"></a><span class="lineno">12521</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> = 1;</div><div class="line"><a name="l12522"></a><span class="lineno">12522</span>&#160;         <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63">MISDN_CFG_FAXDETECT_TIMEOUT</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>));</div><div class="line"><a name="l12523"></a><span class="lineno">12523</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12524"></a><span class="lineno">12524</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div><div class="line"><a name="l12525"></a><span class="lineno">12525</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: AST_DSP (for DTMF)\n&quot;</span>);</div><div class="line"><a name="l12526"></a><span class="lineno">12526</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a> = 1;</div><div class="line"><a name="l12527"></a><span class="lineno">12527</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12528"></a><span class="lineno">12528</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div><div class="line"><a name="l12529"></a><span class="lineno">12529</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: callerpres: %s\n&quot;</span>, &amp;tok[1]);</div><div class="line"><a name="l12530"></a><span class="lineno">12530</span>&#160;         <span class="comment">/* CRICH: callingpres!!! */</span></div><div class="line"><a name="l12531"></a><span class="lineno">12531</span>&#160;         <span class="keywordflow">if</span> (strstr(tok, <span class="stringliteral">&quot;allowed&quot;</span>)) {</div><div class="line"><a name="l12532"></a><span class="lineno">12532</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 0;</div><div class="line"><a name="l12533"></a><span class="lineno">12533</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">set_presentation</a> = 1;</div><div class="line"><a name="l12534"></a><span class="lineno">12534</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(tok, <span class="stringliteral">&quot;restricted&quot;</span>)) {</div><div class="line"><a name="l12535"></a><span class="lineno">12535</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;</div><div class="line"><a name="l12536"></a><span class="lineno">12536</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">set_presentation</a> = 1;</div><div class="line"><a name="l12537"></a><span class="lineno">12537</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(tok, <span class="stringliteral">&quot;not_screened&quot;</span>)) {</div><div class="line"><a name="l12538"></a><span class="lineno">12538</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: callerpres: not_screened is deprecated\n&quot;</span>);</div><div class="line"><a name="l12539"></a><span class="lineno">12539</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;</div><div class="line"><a name="l12540"></a><span class="lineno">12540</span>&#160;            ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">set_presentation</a> = 1;</div><div class="line"><a name="l12541"></a><span class="lineno">12541</span>&#160;         }</div><div class="line"><a name="l12542"></a><span class="lineno">12542</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12543"></a><span class="lineno">12543</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span> :</div><div class="line"><a name="l12544"></a><span class="lineno">12544</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Ignoring dtmf tones, just use them inband\n&quot;</span>);</div><div class="line"><a name="l12545"></a><span class="lineno">12545</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">ignore_dtmf</a> = 1;</div><div class="line"><a name="l12546"></a><span class="lineno">12546</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12547"></a><span class="lineno">12547</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l12548"></a><span class="lineno">12548</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l12549"></a><span class="lineno">12549</span>&#160;      }</div><div class="line"><a name="l12550"></a><span class="lineno">12550</span>&#160;   }</div><div class="line"><a name="l12551"></a><span class="lineno">12551</span>&#160;</div><div class="line"><a name="l12552"></a><span class="lineno">12552</span>&#160;   <span class="keywordflow">if</span> (change_jitter) {</div><div class="line"><a name="l12553"></a><span class="lineno">12553</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a908c29953e5e94cf4df5200fbc4ca11f">config_jitterbuffer</a>(ch);</div><div class="line"><a name="l12554"></a><span class="lineno">12554</span>&#160;   }</div><div class="line"><a name="l12555"></a><span class="lineno">12555</span>&#160;</div><div class="line"><a name="l12556"></a><span class="lineno">12556</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> || ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>) {</div><div class="line"><a name="l12557"></a><span class="lineno">12557</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l12558"></a><span class="lineno">12558</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>();</div><div class="line"><a name="l12559"></a><span class="lineno">12559</span>&#160;      }</div><div class="line"><a name="l12560"></a><span class="lineno">12560</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l12561"></a><span class="lineno">12561</span>&#160;         <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, <a class="code" href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a> | <a class="code" href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a>);</div><div class="line"><a name="l12562"></a><span class="lineno">12562</span>&#160;      }</div><div class="line"><a name="l12563"></a><span class="lineno">12563</span>&#160;   }</div><div class="line"><a name="l12564"></a><span class="lineno">12564</span>&#160;</div><div class="line"><a name="l12565"></a><span class="lineno">12565</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>) {</div><div class="line"><a name="l12566"></a><span class="lineno">12566</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;SETOPT: with AST_DSP we deactivate mISDN_dsp\n&quot;</span>);</div><div class="line"><a name="l12567"></a><span class="lineno">12567</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a134855bcd1a1ba0d1733faa7a4e94389">nodsp</a> = 1;</div><div class="line"><a name="l12568"></a><span class="lineno">12568</span>&#160;   }</div><div class="line"><a name="l12569"></a><span class="lineno">12569</span>&#160;</div><div class="line"><a name="l12570"></a><span class="lineno">12570</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l12571"></a><span class="lineno">12571</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac82ffb8db8fafdb375088f6580f47cb2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">chan_list::ast_dsp</a></div><div class="ttdeci">int ast_dsp</div><div class="ttdoc">TRUE if we will use the Asterisk DSP to detect DTMF/Fax. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_misdn.c:484</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structchan__list_html_a07282113b825722384e367076e68795f"><div class="ttname"><a href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">chan_list::jb_len</a></div><div class="ttdeci">int jb_len</div><div class="ttdoc">Jitterbuffer length. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_misdn.c:490</a></div></div>
<div class="ttc" id="structchan__list_html_a55ee15076b418946e327a5ada52f808e"><div class="ttname"><a href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">chan_list::faxdetect</a></div><div class="ttdeci">int faxdetect</div><div class="ttdoc">Fax detection option. (0:no 1:yes 2:yes+nojump) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_misdn.c:461</a></div></div>
<div class="ttc" id="structchan__list_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">chan_list::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdoc">Allocated DSP controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_misdn.c:510</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a134855bcd1a1ba0d1733faa7a4e94389"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a134855bcd1a1ba0d1733faa7a4e94389">misdn_bchannel::nodsp</a></div><div class="ttdeci">int nodsp</div><div class="ttdoc">TRUE if we will not use jollys dsp. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00474">isdn_lib.h:474</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a709429a6031e18717677d5254d38586f"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">misdn_bchannel::txgain</a></div><div class="ttdeci">int txgain</div><div class="ttdoc">Tx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00708">isdn_lib.h:708</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aeafef525b8bac4713c119b593780ca69"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">misdn_bchannel::ec_enable</a></div><div class="ttdeci">int ec_enable</div><div class="ttdoc">TRUE if the echo cancellor is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00688">isdn_lib.h:688</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00176">isdn_lib.h:176</a></div></div>
<div class="ttc" id="structchan__list_html_aa8664ec2550c16483dbb615fa28a6a10"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">chan_list::ignore_dtmf</a></div><div class="ttdeci">int ignore_dtmf</div><div class="ttdoc">TRUE if DTMF digits are to be passed inband only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_misdn.c:438</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3df9119032baa1743f2db71344bd7cac">misdn_bchannel::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">User set presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00600">isdn_lib.h:600</a></div></div>
<div class="ttc" id="dsp_8h_html_a84818b360426bdd5f588cdca463e15be"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00028">dsp.h:28</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structchan__list_html_ab3f309860ee36512bc8bba783df26b1c"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">chan_list::faxdetect_timeout</a></div><div class="ttdeci">int faxdetect_timeout</div><div class="ttdoc">Number of seconds to detect a Fax machine when detection enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_misdn.c:468</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="structchan__list_html_a2cbe6476569972d16740b7ee7e4273a9"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">chan_list::jb_upper_threshold</a></div><div class="ttdeci">int jb_upper_threshold</div><div class="ttdoc">Jitterbuffer upper threshold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_misdn.c:496</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a908c29953e5e94cf4df5200fbc4ca11f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a908c29953e5e94cf4df5200fbc4ca11f">config_jitterbuffer</a></div><div class="ttdeci">static void config_jitterbuffer(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05817">chan_misdn.c:5817</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9aa37e2112fabf2ca6694c70d2f0ff24"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9aa37e2112fabf2ca6694c70d2f0ff24">misdn_bchannel::crypt_key</a></div><div class="ttdeci">char crypt_key[255]</div><div class="ttdoc">Blowfish encryption key string (secret) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00529">isdn_lib.h:529</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aed5b46635418b99add3c2a5a98f2571b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aed5b46635418b99add3c2a5a98f2571b">misdn_bchannel::set_presentation</a></div><div class="ttdeci">int set_presentation</div><div class="ttdoc">TRUE if the user set the presentation restriction code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00603">isdn_lib.h:603</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a89b6e11f1f5add3aec515c40e0cbc44c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">misdn_bchannel::display</a></div><div class="ttdeci">char display[84]</div><div class="ttdoc">Display message that can be displayed by the user phone. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00642">isdn_lib.h:642</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="dsp_8h_html_a92045e8a8ad56b9b31d24db325fa95ab"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_FAX_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00029">dsp.h:29</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6bb23a220a9276463546e4b5faa28e36"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">misdn_bchannel::nojitter</a></div><div class="ttdeci">int nojitter</div><div class="ttdoc">TRUE if we will not use the jitter buffer system. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00477">isdn_lib.h:477</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a80d0395aae5582433d6b02af3f8c270a"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">misdn_bchannel::rxgain</a></div><div class="ttdeci">int rxgain</div><div class="ttdoc">Rx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00714">isdn_lib.h:714</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1f467e7dfa18d05d423b9daff1b4e94c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">misdn_bchannel::send_dtmf</a></div><div class="ttdeci">int send_dtmf</div><div class="ttdoc">TRUE if we should produce DTMF tones ourselves. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00457">isdn_lib.h:457</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="structkeys_html"><div class="ttname"><a href="../../d2/df1/structkeys.html">keys</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00094">res_crypto.c:94</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63">MISDN_CFG_FAXDETECT_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00101">chan_misdn_config.h:101</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf0690a26c02528e63f3cb623d1bd4a7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf0690a26c02528e63f3cb623d1bd4a7">misdn_bchannel::ec_deftaps</a></div><div class="ttdeci">int ec_deftaps</div><div class="ttdoc">Number of taps in the echo cancellor when enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00693">isdn_lib.h:693</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaacd5c6e18a3904a1b6934b9f57f89322"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaacd5c6e18a3904a1b6934b9f57f89322">MISDN_GEN_CRYPT_KEYS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00117">chan_misdn_config.h:117</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a8a693dfece66e7d97b54bf506ed25b86"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a8a693dfece66e7d97b54bf506ed25b86">keys</a></div><div class="ttdeci">static struct keys keys</div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9e217f04c0fbbe53b5ad22ba4eb2af25"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9e217f04c0fbbe53b5ad22ba4eb2af25">misdn_bchannel::orig</a></div><div class="ttdeci">int orig</div><div class="ttdoc">Who originated the call (ORG_AST, ORG_MISDN) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00702">isdn_lib.h:702</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac60203ac1e950f50c3f36c5a9c2dc16a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac60203ac1e950f50c3f36c5a9c2dc16a">&#9670;&nbsp;</a></span>misdn_tasks_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_tasks_add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03604">3604</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03591">_misdn_tasks_add_variable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;{</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7f504583b6e79bde5bcc9b34e051e05d">_misdn_tasks_add_variable</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, callback, data, 0);</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7f504583b6e79bde5bcc9b34e051e05d"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7f504583b6e79bde5bcc9b34e051e05d">_misdn_tasks_add_variable</a></div><div class="ttdeci">static int _misdn_tasks_add_variable(int timeout, ast_sched_cb callback, const void *data, int variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03591">chan_misdn.c:3591</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f82046b64a8e353a912e8535033af81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f82046b64a8e353a912e8535033af81">&#9670;&nbsp;</a></span>misdn_tasks_add_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_tasks_add_variable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d00/sched_8h.html#ae9f272c016f465e567c9178180ada899">ast_sched_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03609">3609</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03591">_misdn_tasks_add_variable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;{</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7f504583b6e79bde5bcc9b34e051e05d">_misdn_tasks_add_variable</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, callback, data, 1);</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;}</div><div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7f504583b6e79bde5bcc9b34e051e05d"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7f504583b6e79bde5bcc9b34e051e05d">_misdn_tasks_add_variable</a></div><div class="ttdeci">static int _misdn_tasks_add_variable(int timeout, ast_sched_cb callback, const void *data, int variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03591">chan_misdn.c:3591</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae402ad3ef621a7e1a2669f5248d4dd23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae402ad3ef621a7e1a2669f5248d4dd23">&#9670;&nbsp;</a></span>misdn_tasks_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_tasks_destroy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03574">3574</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00032">cb_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00671">misdn_tasks_thread</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;{</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>) {</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, 0, <span class="stringliteral">&quot;Killing misdn_tasks thread\n&quot;</span>);</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;      <span class="keywordflow">if</span> (pthread_cancel(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a>) == 0) {</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(4, 0, <span class="stringliteral">&quot;Joining misdn_tasks thread\n&quot;</span>);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;         pthread_join(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;      }</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>);</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   }</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afffc82bd9b6717abebe613f896f7ecd6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a></div><div class="ttdeci">static pthread_t misdn_tasks_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00671">chan_misdn.c:671</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac7601fa9b0fcc72915a9470c8fa0297e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a></div><div class="ttdeci">static struct ast_sched_context * misdn_tasks</div><div class="ttdoc">the main schedule context for stuff like l1 watcher, overlap dial, ... </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00670">chan_misdn.c:670</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abef6c81cea5f1eccbaaf0007a6750e21"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a></div><div class="ttdeci">void(* cb_log)(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00032">isdn_lib.c:32</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada0f69d2ed0b939a95127679a19e82f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada0f69d2ed0b939a95127679a19e82f0">&#9670;&nbsp;</a></span>misdn_tasks_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_tasks_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03554">3554</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00671">misdn_tasks_thread</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03528">misdn_tasks_thread_func()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00640">pthread_create</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03591">_misdn_tasks_add_variable()</a>.</p>
<div class="fragment"><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;{</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;   sem_t blocker;</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;   <span class="keywordtype">int</span> i = 5;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;   <span class="keywordflow">if</span> (sem_init(&amp;blocker, 0, 0)) {</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      perror(<span class="stringliteral">&quot;chan_misdn: Failed to initialize semaphore!&quot;</span>);</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;      exit(1);</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;   }</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, 0, <span class="stringliteral">&quot;Starting misdn_tasks thread\n&quot;</span>);</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>();</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a3c7d37cba2d420a45309a93b799d9db9">pthread_create</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a623ed0cdc0f4d9b05023f55e99e61f4a">misdn_tasks_thread_func</a>, &amp;blocker);</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;   <span class="keywordflow">while</span> (sem_wait(&amp;blocker) &amp;&amp; --i) {</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;   }</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   sem_destroy(&amp;blocker);</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afffc82bd9b6717abebe613f896f7ecd6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a></div><div class="ttdeci">static pthread_t misdn_tasks_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00671">chan_misdn.c:671</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac7601fa9b0fcc72915a9470c8fa0297e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a></div><div class="ttdeci">static struct ast_sched_context * misdn_tasks</div><div class="ttdoc">the main schedule context for stuff like l1 watcher, overlap dial, ... </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00670">chan_misdn.c:670</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a623ed0cdc0f4d9b05023f55e99e61f4a"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a623ed0cdc0f4d9b05023f55e99e61f4a">misdn_tasks_thread_func</a></div><div class="ttdeci">static void * misdn_tasks_thread_func(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03528">chan_misdn.c:3528</a></div></div>
<div class="ttc" id="lock_8h_html_a3c7d37cba2d420a45309a93b799d9db9"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a3c7d37cba2d420a45309a93b799d9db9">pthread_create</a></div><div class="ttdeci">#define pthread_create</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00640">lock.h:640</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01a8b17fdb011644dfd0928c4e51f75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a8b17fdb011644dfd0928c4e51f75e">&#9670;&nbsp;</a></span>misdn_tasks_remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_tasks_remove </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>task_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03614">3614</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07792">chan_list_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;{</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>, task_id);</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;}</div><div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac7601fa9b0fcc72915a9470c8fa0297e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a></div><div class="ttdeci">static struct ast_sched_context * misdn_tasks</div><div class="ttdoc">the main schedule context for stuff like l1 watcher, overlap dial, ... </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00670">chan_misdn.c:670</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a623ed0cdc0f4d9b05023f55e99e61f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a623ed0cdc0f4d9b05023f55e99e61f4a">&#9670;&nbsp;</a></span>misdn_tasks_thread_func()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* misdn_tasks_thread_func </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03528">3528</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03524">sighandler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03554">misdn_tasks_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;{</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;   <span class="keywordtype">int</span> wait;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   <span class="keyword">struct </span>sigaction sa;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   sa.sa_handler = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a>;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   sa.sa_flags = SA_NODEFER;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;   sigemptyset(&amp;sa.sa_mask);</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;   sigaddset(&amp;sa.sa_mask, SIGUSR1);</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;   sigaction(SIGUSR1, &amp;sa, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;   sem_post((sem_t *)data);</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      wait = <a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>);</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <span class="keywordflow">if</span> (wait &lt; 0) {</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;         wait = 8000;</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      }</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      <span class="keywordflow">if</span> (poll(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, wait) &lt; 0) {</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, 0, <span class="stringliteral">&quot;Waking up misdn_tasks thread\n&quot;</span>);</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;      }</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a>);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;   }</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2be1284fe65357755b6161a039fb59e4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a></div><div class="ttdeci">static void sighandler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03524">chan_misdn.c:3524</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac7601fa9b0fcc72915a9470c8fa0297e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac7601fa9b0fcc72915a9470c8fa0297e">misdn_tasks</a></div><div class="ttdeci">static struct ast_sched_context * misdn_tasks</div><div class="ttdoc">the main schedule context for stuff like l1 watcher, overlap dial, ... </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00670">chan_misdn.c:670</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8affc2fb8c618a8d617d8f8be6607bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8affc2fb8c618a8d617d8f8be6607bf2">&#9670;&nbsp;</a></span>misdn_tasks_wakeup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_tasks_wakeup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03586">3586</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00671">misdn_tasks_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03591">_misdn_tasks_add_variable()</a>.</p>
<div class="fragment"><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;{</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;   pthread_kill(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a>, SIGUSR1);</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_afffc82bd9b6717abebe613f896f7ecd6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afffc82bd9b6717abebe613f896f7ecd6">misdn_tasks_thread</a></div><div class="ttdeci">static pthread_t misdn_tasks_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00671">chan_misdn.c:671</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cd818b3d3a858ccbed06fe1675147af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd818b3d3a858ccbed06fe1675147af">&#9670;&nbsp;</a></span>misdn_to_ast_plan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_to_ast_plan </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a>&#160;</td>
          <td class="paramname"><em>number_plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02000">2000</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00095">NUMPLAN_DATA</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00097">NUMPLAN_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00098">NUMPLAN_PRIVATE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00096">NUMPLAN_TELEX</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">misdn_queue_connected_line_update()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">misdn_update_caller_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;{</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="keywordtype">int</span> ast_number_plan;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <span class="keywordflow">switch</span> (number_plan) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>:</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>:</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a>:</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a>;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a>:</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a>:</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a>;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a>:</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      ast_number_plan = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a>;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   <span class="keywordflow">return</span> ast_number_plan;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00095">isdn_lib.h:95</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00097">isdn_lib.h:97</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00098">isdn_lib.h:98</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00096">isdn_lib.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a809192e8588d50a33a4242ede2873b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809192e8588d50a33a4242ede2873b71">&#9670;&nbsp;</a></span>misdn_to_ast_pres()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_to_ast_pres </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>presentation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02117">2117</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00324">AST_PRES_ALLOWED</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00325">AST_PRES_RESTRICTED</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00326">AST_PRES_UNAVAILABLE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">misdn_queue_connected_line_update()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">misdn_update_caller_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;{</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   <span class="keywordflow">switch</span> (presentation) {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      presentation = <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      presentation = <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      presentation = <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   }</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <span class="keywordflow">return</span> presentation;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;}</div><div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="callerid_8h_html_a2981008d349635cf996bb8629d15a926"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a></div><div class="ttdeci">#define AST_PRES_UNAVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00326">callerid.h:326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7efd7aa77a455e5aaf82e41cfcf5815e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efd7aa77a455e5aaf82e41cfcf5815e">&#9670;&nbsp;</a></span>misdn_to_ast_reason()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a> misdn_to_ast_reason </td>
          <td>(</td>
          <td class="paramtype">const enum <a class="el" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662">mISDN_REDIRECTING_REASON</a>&#160;</td>
          <td class="paramname"><em>q931</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02314">2314</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00402">AST_REDIRECTING_REASON_CALL_FWD_DTE</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00398">AST_REDIRECTING_REASON_DEFLECTION</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00393">AST_REDIRECTING_REASON_NO_ANSWER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00400">AST_REDIRECTING_REASON_OUT_OF_ORDER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00395">AST_REDIRECTING_REASON_UNCONDITIONAL</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00391">AST_REDIRECTING_REASON_UNKNOWN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00392">AST_REDIRECTING_REASON_USER_BUSY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00210">mISDN_REDIRECTING_REASON_CALL_FWD</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00200">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00208">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00204">mISDN_REDIRECTING_REASON_DEFLECTION</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00202">mISDN_REDIRECTING_REASON_NO_REPLY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00206">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00198">mISDN_REDIRECTING_REASON_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>.</p>
<div class="fragment"><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;{</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a> ast;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   <span class="keywordflow">switch</span> (q931) {</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a>:</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a>;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a>:</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf">AST_REDIRECTING_REASON_USER_BUSY</a>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a>:</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5">AST_REDIRECTING_REASON_NO_ANSWER</a>;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a>:</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1">AST_REDIRECTING_REASON_DEFLECTION</a>;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a>:</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745">AST_REDIRECTING_REASON_OUT_OF_ORDER</a>;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a>:</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1">AST_REDIRECTING_REASON_CALL_FWD_DTE</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f">mISDN_REDIRECTING_REASON_CALL_FWD</a>:</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      ast = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e">AST_REDIRECTING_REASON_UNCONDITIONAL</a>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   }</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">return</span> ast;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662acaa1c2ea49b44e814dae421f38f5d713">mISDN_REDIRECTING_REASON_OUT_OF_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00206">isdn_lib.h:206</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a44d73d03e9d22a95d04fecb97a4a96a5">AST_REDIRECTING_REASON_NO_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00393">callerid.h:393</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00391">callerid.h:391</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169aeb1c62f996a259e85eed7e6e529addaf">AST_REDIRECTING_REASON_USER_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00392">callerid.h:392</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169acf01207d0c5c1abbd707780705955745">AST_REDIRECTING_REASON_OUT_OF_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00400">callerid.h:400</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a7ab9a77115b7833b9816805386ac1f21">mISDN_REDIRECTING_REASON_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00204">isdn_lib.h:204</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad4d3362f5ac0ceff755e34eccecc1a1f">mISDN_REDIRECTING_REASON_CALL_FWD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00210">isdn_lib.h:210</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662ad7593b11b87ef2ef3037a8baefa8e56e">mISDN_REDIRECTING_REASON_NO_REPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00202">isdn_lib.h:202</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a266e87e67864877cf2259cfe3aa9563a">mISDN_REDIRECTING_REASON_CALL_FWD_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00200">isdn_lib.h:200</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a5db9728affaaf11546574f1c193f480a">mISDN_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00198">isdn_lib.h:198</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac0b65b437eabc6c251883b9094d74b5e">AST_REDIRECTING_REASON_UNCONDITIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00395">callerid.h:395</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ab66eaca00d890abee0495c676b5789b1">AST_REDIRECTING_REASON_DEFLECTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00398">callerid.h:398</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169">AST_REDIRECTING_REASON</a></div><div class="ttdeci">AST_REDIRECTING_REASON</div><div class="ttdoc">redirecting reason codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00390">callerid.h:390</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169ac57883f0a89129c2e236fea0bcb08ce1">AST_REDIRECTING_REASON_CALL_FWD_DTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00402">callerid.h:402</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a2e460cdcfd0ba505d4c8941c29997662a9fe3d2065262f4ac2f12baac532ac192">mISDN_REDIRECTING_REASON_CALL_FWD_DTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00208">isdn_lib.h:208</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f11b00546ef6bc9e47853ab516ad8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f11b00546ef6bc9e47853ab516ad8dd">&#9670;&nbsp;</a></span>misdn_to_ast_screen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_to_ast_screen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>screening</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02210">2210</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d47/callerid_8h_source.html#l00321">AST_PRES_NETWORK_NUMBER</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00320">AST_PRES_USER_NUMBER_FAILED_SCREEN</a>, <a class="el" href="../../de/d47/callerid_8h_source.html#l00319">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>, and <a class="el" href="../../de/d47/callerid_8h_source.html#l00318">AST_PRES_USER_NUMBER_UNSCREENED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">misdn_queue_connected_line_update()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">misdn_update_caller_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;{</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keywordflow">switch</span> (screening) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      screening = <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      screening = <a class="code" href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a>;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      screening = <a class="code" href="../../de/d47/callerid_8h.html#ab103476cd94e4c3dfeadf3dff48bb51f">AST_PRES_USER_NUMBER_FAILED_SCREEN</a>;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      screening = <a class="code" href="../../de/d47/callerid_8h.html#a681f7db5cdf14387bac29c1d220fe3b0">AST_PRES_NETWORK_NUMBER</a>;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordflow">return</span> screening;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="ttc" id="callerid_8h_html_ab103476cd94e4c3dfeadf3dff48bb51f"><div class="ttname"><a href="../../de/d47/callerid_8h.html#ab103476cd94e4c3dfeadf3dff48bb51f">AST_PRES_USER_NUMBER_FAILED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_FAILED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00320">callerid.h:320</a></div></div>
<div class="ttc" id="callerid_8h_html_a681f7db5cdf14387bac29c1d220fe3b0"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a681f7db5cdf14387bac29c1d220fe3b0">AST_PRES_NETWORK_NUMBER</a></div><div class="ttdeci">#define AST_PRES_NETWORK_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00321">callerid.h:321</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="callerid_8h_html_a373e33a23b1df10c39311947fc724b11"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a373e33a23b1df10c39311947fc724b11">AST_PRES_USER_NUMBER_PASSED_SCREEN</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_PASSED_SCREEN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00319">callerid.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab53c3ed364439bed4bbdd74e3d873c86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53c3ed364439bed4bbdd74e3d873c86">&#9670;&nbsp;</a></span>misdn_to_ast_ton()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_to_ast_ton </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a>&#160;</td>
          <td class="paramname"><em>number_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01874">1874</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06437">misdn_copy_redirecting_to_ast()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">misdn_queue_connected_line_update()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">misdn_update_caller_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;{</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <span class="keywordtype">int</span> ast_number_type;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   <span class="keywordflow">switch</span> (number_type) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>:</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a> &lt;&lt; 4;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>:</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a> &lt;&lt; 4;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>:</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a> &lt;&lt; 4;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>:</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a> &lt;&lt; 4;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>:</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a> &lt;&lt; 4;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>:</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      ast_number_type = <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a> &lt;&lt; 4;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <span class="keywordflow">return</span> ast_number_type;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00104">isdn_lib.h:104</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00105">isdn_lib.h:105</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00106">isdn_lib.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00103">isdn_lib.h:103</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00107">isdn_lib.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5478f292b178f9c27949ef8dd7810206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5478f292b178f9c27949ef8dd7810206">&#9670;&nbsp;</a></span>misdn_to_str_plan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* misdn_to_str_plan </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567">mISDN_NUMBER_PLAN</a>&#160;</td>
          <td class="paramname"><em>number_plan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01958">1958</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00095">NUMPLAN_DATA</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00097">NUMPLAN_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00098">NUMPLAN_PRIVATE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00096">NUMPLAN_TELEX</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00093">NUMPLAN_UNKNOWN</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;{</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   <span class="keywordflow">switch</span> (number_plan) {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a>:</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      str = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>:</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      str = <span class="stringliteral">&quot;ISDN&quot;</span>;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a>:</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      str = <span class="stringliteral">&quot;Data&quot;</span>;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a>:</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      str = <span class="stringliteral">&quot;Telex&quot;</span>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a>:</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      str = <span class="stringliteral">&quot;National&quot;</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a>:</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      str = <span class="stringliteral">&quot;Private&quot;</span>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   }</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a9093d8472890012de32b962fe0a7fe1c">NUMPLAN_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00095">isdn_lib.h:95</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567aaf49dd2ad7b18526c9310b8a9dffd765">NUMPLAN_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00097">isdn_lib.h:97</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567ab8eefeed418329833559d9d6adf84037">NUMPLAN_PRIVATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00098">isdn_lib.h:98</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a8c4c5d8a169e3036d743d513b0811f4a">NUMPLAN_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00093">isdn_lib.h:93</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a618045afc6ab25cf67d010e3b3e25f7a">NUMPLAN_TELEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00096">isdn_lib.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1cf9411a71645f03e0628dcea770b1ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cf9411a71645f03e0628dcea770b1ad">&#9670;&nbsp;</a></span>misdn_to_str_pres()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* misdn_to_str_pres </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>presentation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02084">2084</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;{</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <span class="keywordflow">switch</span> (presentation) {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      str = <span class="stringliteral">&quot;Allowed&quot;</span>;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      str = <span class="stringliteral">&quot;Restricted&quot;</span>;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      str = <span class="stringliteral">&quot;Unavailable&quot;</span>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      str = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45975791307e0a9cdaff63af4dc9492c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45975791307e0a9cdaff63af4dc9492c">&#9670;&nbsp;</a></span>misdn_to_str_screen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* misdn_to_str_screen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>screening</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02173">2173</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">update_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;{</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;   <span class="keywordflow">switch</span> (screening) {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      str = <span class="stringliteral">&quot;Unscreened&quot;</span>;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      str = <span class="stringliteral">&quot;Passed Screen&quot;</span>;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      str = <span class="stringliteral">&quot;Failed Screen&quot;</span>;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      str = <span class="stringliteral">&quot;Network Number&quot;</span>;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      str = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   }</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af70683c24ce8bc518f5541dfde4763e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70683c24ce8bc518f5541dfde4763e7">&#9670;&nbsp;</a></span>misdn_to_str_ton()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* misdn_to_str_ton </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1">mISDN_NUMBER_TYPE</a>&#160;</td>
          <td class="paramname"><em>number_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01832">1832</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00107">NUMTYPE_ABBREVIATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00103">NUMTYPE_INTERNATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00104">NUMTYPE_NATIONAL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00105">NUMTYPE_NETWORK_SPECIFIC</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00106">NUMTYPE_SUBSCRIBER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00102">NUMTYPE_UNKNOWN</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;{</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordflow">switch</span> (number_type) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a>:</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      str = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a>:</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      str = <span class="stringliteral">&quot;International&quot;</span>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a>:</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      str = <span class="stringliteral">&quot;National&quot;</span>;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a>:</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      str = <span class="stringliteral">&quot;Network Specific&quot;</span>;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a>:</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      str = <span class="stringliteral">&quot;Subscriber&quot;</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a>:</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      str = <span class="stringliteral">&quot;Abbreviated&quot;</span>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;}</div><div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a082c755fbe83233c150c9515579821d9">NUMTYPE_NATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00104">isdn_lib.h:104</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a68ab98bc094f821744a71a319271e3d9">NUMTYPE_NETWORK_SPECIFIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00105">isdn_lib.h:105</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a69ba74ee88b2c0cedf7dfecd79de410b">NUMTYPE_SUBSCRIBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00106">isdn_lib.h:106</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1adb7aaec535a514df9188b9f3769851fc">NUMTYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00102">isdn_lib.h:102</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1aaf33a663f3c038b1442d2f7784ef5881">NUMTYPE_INTERNATIONAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00103">isdn_lib.h:103</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab90959fd83d83f7ed660c792cd7403b1a2058369e396943374a5d5e5e99654cb4">NUMTYPE_ABBREVIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00107">isdn_lib.h:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73ea7311b780b364afa4488cfdcc6f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73ea7311b780b364afa4488cfdcc6f16">&#9670;&nbsp;</a></span>misdn_update_caller_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_update_caller_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cid_tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">6171</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l00428">ast_party_caller::ani</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00445">ast_set_party_caller::ani</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07472">ast_channel_set_caller_event()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01999">ast_party_caller_set_init()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00443">ast_set_party_caller::id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02000">misdn_to_ast_plan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02117">misdn_to_ast_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02210">misdn_to_ast_screen()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l01874">misdn_to_ast_ton()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00366">ast_set_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00288">misdn_party_id::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00294">ast_party_number::plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00296">ast_party_number::presentation</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00355">ast_party_id::tag</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06210">misdn_update_remote_party()</a>.</p>
<div class="fragment"><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;{</div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> caller;</div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a> update_caller;</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;   memset(&amp;update_caller, 0, <span class="keyword">sizeof</span>(update_caller));</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;   update_caller.id.number = 1;</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;   update_caller.ani.number = 1;</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a84a85d871e634a86b2421ac9354b50c6">ast_party_caller_set_init</a>(&amp;caller, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast));</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;   caller.id.number.valid = 1;</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;   caller.id.number.str = (<span class="keywordtype">char</span> *) id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>;</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;   caller.id.number.plan = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>)</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">number_plan</a>);</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;   caller.id.number.presentation = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>)</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;      | <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a>(id-&gt;<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;   caller.ani.number = caller.id.number;</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;</div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;   caller.id.tag = cid_tag;</div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;   caller.ani.tag = cid_tag;</div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a>(ast, &amp;caller, &amp;update_caller);</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a46837c158733334d2bb155bbd827ddb8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a></div><div class="ttdeci">void ast_channel_set_caller_event(struct ast_channel *chan, const struct ast_party_caller *caller, const struct ast_set_party_caller *update)</div><div class="ttdoc">Set the caller id information in the Asterisk channel and generate an AMI event if the caller id name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07472">channel.c:7472</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6cd818b3d3a858ccbed06fe1675147af"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6cd818b3d3a858ccbed06fe1675147af">misdn_to_ast_plan</a></div><div class="ttdeci">static int misdn_to_ast_plan(enum mISDN_NUMBER_PLAN number_plan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02000">chan_misdn.c:2000</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a809192e8588d50a33a4242ede2873b71"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a809192e8588d50a33a4242ede2873b71">misdn_to_ast_pres</a></div><div class="ttdeci">static int misdn_to_ast_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02117">chan_misdn.c:2117</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="structast__set__party__caller_html"><div class="ttname"><a href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a></div><div class="ttdoc">Indicate what information in ast_party_caller should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00441">channel.h:441</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab53c3ed364439bed4bbdd74e3d873c86"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab53c3ed364439bed4bbdd74e3d873c86">misdn_to_ast_ton</a></div><div class="ttdeci">static int misdn_to_ast_ton(enum mISDN_NUMBER_TYPE number_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l01874">chan_misdn.c:1874</a></div></div>
<div class="ttc" id="structast__party__caller_html"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html">ast_party_caller</a></div><div class="ttdoc">Caller Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00419">channel.h:419</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_a84a85d871e634a86b2421ac9354b50c6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a84a85d871e634a86b2421ac9354b50c6">ast_party_caller_set_init</a></div><div class="ttdeci">void ast_party_caller_set_init(struct ast_party_caller *init, const struct ast_party_caller *guide)</div><div class="ttdoc">Initialize the given caller structure using the given guide for a set update operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01999">channel.c:1999</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a3f11b00546ef6bc9e47853ab516ad8dd"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3f11b00546ef6bc9e47853ab516ad8dd">misdn_to_ast_screen</a></div><div class="ttdeci">static int misdn_to_ast_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02210">chan_misdn.c:2210</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a7702c5efe5017498eebdc711588af310">misdn_party_id::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00288">isdn_lib.h:288</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a536c1957358bfacc834f5fcbb64c9b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536c1957358bfacc834f5fcbb64c9b97">&#9670;&nbsp;</a></span>misdn_update_connected_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_update_connected_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>originator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">6300</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00353">misdn_bchannel::connected</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00152">EVENT_NOTIFY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00337">MISDN_CONNECTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06226">misdn_get_connected_line()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00128">misdn_lib_is_ptp()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00065">misdn_lib_port_is_nt()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00229">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00606">misdn_bchannel::notify_description_code</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">ORG_MISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00594">misdn_bchannel::outgoing_colp</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00319">misdn_party_redirecting::to_changed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>.</p>
<div class="fragment"><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;{</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch;</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c92a44993137a53aa6bf0aaef1d647b">misdn_get_connected_line</a>(ast, bc, <a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a>);</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>) {</div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">connected</a>;</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>;</div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;   }</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;   <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>) {</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;   <span class="keywordflow">case</span> 1:<span class="comment">/* restricted */</span></div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;   <span class="keywordflow">case</span> 2:<span class="comment">/* blocked */</span></div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;      <span class="comment">/* Don&#39;t tell the remote party that the call was transferred. */</span></div><div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;   }</div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;</div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;   ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast);</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;      || <a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>) {</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;      <span class="keywordtype">int</span> is_ptmp;</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;      is_ptmp = !<a class="code" href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;      <span class="keywordflow">if</span> (is_ptmp) {</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;<span class="comment">          * We should not send these messages to the network if we are</span></div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;<span class="comment">          * the CPE side since phones do not transfer calls within</span></div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;<span class="comment">          * themselves.  Well... If you consider handing the handset to</span></div><div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;<span class="comment">          * someone else a transfer then how is the network to know?</span></div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>)) {</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;         }</div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a>) {</div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;            <span class="comment">/* Send NOTIFY(Nie(transfer-active), RDNie(redirecting.to data)) */</span></div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 1;</div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>;</div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a>);</div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;            <span class="comment">/* Send FACILITY(Fie(RequestSubaddress), Nie(transfer-active), RDNie(redirecting.to data)) */</span></div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 1;</div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a>;</div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_RequestSubaddress;</div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.RequestSubaddress.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;</div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;            <span class="comment">/* Send message */</span></div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;         }</div><div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;         <span class="comment">/* Send FACILITY(Fie(EctInform(transfer-active, redirecting.to data))) */</span></div><div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_EctInform;</div><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.EctInform.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.EctInform.Status = 1;<span class="comment">/* active */</span></div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.EctInform.RedirectionPresent = 1;<span class="comment">/* Must be present when status is active */</span></div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;         misdn_PresentedNumberUnscreened_fill(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.EctInform.Redirection,</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;            &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>);</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;         <span class="comment">/* Send message */</span></div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;      }</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;   }</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;}</div><div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00152">isdn_lib.h:152</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a54d4a7ef01a4074469ac37421f843333"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">misdn_bchannel::outgoing_colp</a></div><div class="ttdeci">int outgoing_colp</div><div class="ttdoc">Select what to do with outgoing COLP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00594">isdn_lib.h:594</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00151">isdn_lib.h:151</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5aa249cf6aeec5d1e9ecc56df0adb47946">MISDN_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00337">chan_misdn.c:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abb98bbaed704a93d67663012188d4f46"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a></div><div class="ttdeci">int misdn_lib_is_ptp(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00128">isdn_lib.c:128</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ac80dac92eeab3a4a76076dd60688344e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ac80dac92eeab3a4a76076dd60688344e">misdn_bchannel::connected</a></div><div class="ttdeci">struct misdn_party_id connected</div><div class="ttdoc">Connected-Party/Connected-Line ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00353">isdn_lib.h:353</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05ad88a5a881afdcc128fa1de13ec89ac7d">mISDN_NOTIFY_CODE_CALL_TRANSFER_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00229">isdn_lib.h:229</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8a4b3d4e49a79f6634beed424d5e14b1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a></div><div class="ttdeci">#define ORG_MISDN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00345">chan_misdn.c:345</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_af7c94af767216508e15fd4f55131abc1"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a></div><div class="ttdeci">int misdn_lib_port_is_nt(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00065">isdn_lib.c:65</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a93ba5e99b8615eda660af31763210b30"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">misdn_party_redirecting::to_changed</a></div><div class="ttdeci">int to_changed</div><div class="ttdoc">TRUE if the redirecting.to information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00319">isdn_lib.h:319</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9876ef2ee48779efd4a739c46b5c34f7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">misdn_bchannel::notify_description_code</a></div><div class="ttdeci">enum mISDN_NOTIFY_CODE notify_description_code</div><div class="ttdoc">Notification indicator ie description code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00606">isdn_lib.h:606</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c92a44993137a53aa6bf0aaef1d647b"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c92a44993137a53aa6bf0aaef1d647b">misdn_get_connected_line</a></div><div class="ttdeci">static void misdn_get_connected_line(struct ast_channel *ast, struct misdn_bchannel *bc, int originator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06226">chan_misdn.c:6226</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4630be6c1dd7de4f7f12d700109eb996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4630be6c1dd7de4f7f12d700109eb996">&#9670;&nbsp;</a></span>misdn_update_redirecting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_update_redirecting </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>originator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06483">6483</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00152">EVENT_NOTIFY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06382">misdn_copy_redirecting_from_ast()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00128">misdn_lib_is_ptp()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00065">misdn_lib_port_is_nt()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00223">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00606">misdn_bchannel::notify_description_code</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00345">ORG_MISDN</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00594">misdn_bchannel::outgoing_colp</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00313">misdn_party_redirecting::reason</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00319">misdn_party_redirecting::to_changed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>.</p>
<div class="fragment"><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;{</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;   <span class="keywordtype">int</span> is_ptmp;</div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;</div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a115226990899ee9eb82f99539279bf21">misdn_copy_redirecting_from_ast</a>(bc, ast);</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;   <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>) {</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;   <span class="keywordflow">case</span> 1:<span class="comment">/* restricted */</span></div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = 1;<span class="comment">/* restricted */</span></div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;   <span class="keywordflow">case</span> 2:<span class="comment">/* blocked */</span></div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;      <span class="comment">/* Don&#39;t tell the remote party that the call was redirected. */</span></div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;   }</div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;</div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a>) {</div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;   }</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;   is_ptmp = !<a class="code" href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>);</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;   <span class="keywordflow">if</span> (is_ptmp) {</div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;<span class="comment">       * We should not send these messages to the network if we are</span></div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;<span class="comment">       * the CPE side since phones do not redirect calls within</span></div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;<span class="comment">       * themselves.  Well... If you consider someone else picking up</span></div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;<span class="comment">       * the handset a redirection then how is the network to know?</span></div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>)) {</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;      }</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;      <span class="comment">/* Send NOTIFY(call-is-diverting, redirecting.to data) */</span></div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">to_changed</a> = 1;</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">notify_description_code</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a>;</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a>);</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;  <span class="comment">/* TRUE if the dialed number matches the redirecting to number */</span></div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;      match = (strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) == 0) ? 1 : 0;</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;      <span class="keywordflow">if</span> (!bc-&gt;div_leg_3_tx_pending</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;         || !match) {</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;         <span class="comment">/* Send DivertingLegInformation1 */</span></div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_DivertingLegInformation1;</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation1.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation1.DiversionReason =</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;            misdn_to_diversion_reason(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">reason</a>);</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation1.SubscriptionOption = 2;<span class="comment">/* notificationWithDivertedToNr */</span></div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation1.DivertedToPresent = 1;</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;         misdn_PresentedNumberUnscreened_fill(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation1.DivertedTo, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>);</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;      }</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;      bc-&gt;div_leg_3_tx_pending = 0;</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;      <span class="comment">/* Send DivertingLegInformation3 */</span></div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.Function = Fac_DivertingLegInformation3;</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation3.InvokeID = ++misdn_invoke_id;</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>.u.DivertingLegInformation3.PresentationAllowedIndicator =</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> == 0 ? 1 : 0;</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a>(&amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">fac_out</a>, bc);</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a>);</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;   }</div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;}</div><div class="ttc" id="structmisdn__bchannel_html_a985f4b3f8cb9f5dcd667ba89431a3975"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a985f4b3f8cb9f5dcd667ba89431a3975">misdn_bchannel::fac_out</a></div><div class="ttdeci">struct FacParm fac_out</div><div class="ttdoc">Outbound FACILITY message function type and contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00512">isdn_lib.h:512</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a82e018a4224ef6ec2cd98f3735a89e41">EVENT_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00152">isdn_lib.h:152</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a54d4a7ef01a4074469ac37421f843333"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">misdn_bchannel::outgoing_colp</a></div><div class="ttdeci">int outgoing_colp</div><div class="ttdoc">Select what to do with outgoing COLP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00594">isdn_lib.h:594</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a5f527aa944a9f849b2ebf446c3875bce">EVENT_FACILITY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00151">isdn_lib.h:151</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad972a2f75429887bad891050e3aa4ae0"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad972a2f75429887bad891050e3aa4ae0">print_facility</a></div><div class="ttdeci">static void print_facility(const struct FacParm *fac, const struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02762">chan_misdn.c:2762</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abb98bbaed704a93d67663012188d4f46"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abb98bbaed704a93d67663012188d4f46">misdn_lib_is_ptp</a></div><div class="ttdeci">int misdn_lib_is_ptp(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00128">isdn_lib.c:128</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a3de2a133df587a36816d2225ee98df05adf36b7a443ee5f9fc738262d2390ce11">mISDN_NOTIFY_CODE_CALL_IS_DIVERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00223">isdn_lib.h:223</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8a4b3d4e49a79f6634beed424d5e14b1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8a4b3d4e49a79f6634beed424d5e14b1">ORG_MISDN</a></div><div class="ttdeci">#define ORG_MISDN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00345">chan_misdn.c:345</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a115226990899ee9eb82f99539279bf21"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a115226990899ee9eb82f99539279bf21">misdn_copy_redirecting_from_ast</a></div><div class="ttdeci">static void misdn_copy_redirecting_from_ast(struct misdn_bchannel *bc, struct ast_channel *ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06382">chan_misdn.c:6382</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_af7c94af767216508e15fd4f55131abc1"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#af7c94af767216508e15fd4f55131abc1">misdn_lib_port_is_nt</a></div><div class="ttdeci">int misdn_lib_port_is_nt(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00065">isdn_lib.c:65</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a93ba5e99b8615eda660af31763210b30"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a93ba5e99b8615eda660af31763210b30">misdn_party_redirecting::to_changed</a></div><div class="ttdeci">int to_changed</div><div class="ttdoc">TRUE if the redirecting.to information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00319">isdn_lib.h:319</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_a7031ce0d30178aa970eaf7c23dd37eaf"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#a7031ce0d30178aa970eaf7c23dd37eaf">misdn_party_redirecting::reason</a></div><div class="ttdeci">enum mISDN_REDIRECTING_REASON reason</div><div class="ttdoc">Reason a call is being redirected (Q.931 field value) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00313">isdn_lib.h:313</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a9876ef2ee48779efd4a739c46b5c34f7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a9876ef2ee48779efd4a739c46b5c34f7">misdn_bchannel::notify_description_code</a></div><div class="ttdeci">enum mISDN_NOTIFY_CODE notify_description_code</div><div class="ttdoc">Notification indicator ie description code. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00606">isdn_lib.h:606</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b47ad58ed34948095980ac7d10e3add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b47ad58ed34948095980ac7d10e3add">&#9670;&nbsp;</a></span>misdn_update_remote_party()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void misdn_update_remote_party </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/de3/structmisdn__party__id.html">misdn_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1b">AST_CONNECTED_LINE_UPDATE_SOURCE</a>&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cid_tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06210">6210</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06135">misdn_queue_connected_line_update()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06171">misdn_update_caller_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;{</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a73ea7311b780b364afa4488cfdcc6f16">misdn_update_caller_id</a>(ast, <span class="keywordtype">id</span>, cid_tag);</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a111caae6df52e50ee929cdcbe2fac780">misdn_queue_connected_line_update</a>(ast, <span class="keywordtype">id</span>, source, cid_tag);</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a73ea7311b780b364afa4488cfdcc6f16"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a73ea7311b780b364afa4488cfdcc6f16">misdn_update_caller_id</a></div><div class="ttdeci">static void misdn_update_caller_id(struct ast_channel *ast, const struct misdn_party_id *id, char *cid_tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06171">chan_misdn.c:6171</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a111caae6df52e50ee929cdcbe2fac780"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a111caae6df52e50ee929cdcbe2fac780">misdn_queue_connected_line_update</a></div><div class="ttdeci">static void misdn_queue_connected_line_update(struct ast_channel *ast, const struct misdn_party_id *id, enum AST_CONNECTED_LINE_UPDATE_SOURCE source, char *cid_tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l06135">chan_misdn.c:6135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7958b312230f580ef3cf765c80efdd7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7958b312230f580ef3cf765c80efdd7c">&#9670;&nbsp;</a></span>misdn_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int misdn_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07478">7478</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00537">misdn_bchannel::active</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00429">misdn_bchannel::addr</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00208">AST_BRIDGE_COMPLETE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02382">AST_BRIDGE_DTMF_CHANNEL_0</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02384">AST_BRIDGE_DTMF_CHANNEL_1</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00209">AST_BRIDGE_FAILED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00210">AST_BRIDGE_FAILED_NOWARN</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04391">ast_channel_hangupcause_hash_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">AST_CONTROL_PVT_CAUSE_CODE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00091">ast_format_alaw</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03166">ast_waitfor_n()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05189">ast_write()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00547">misdn_bchannel::bc_state</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00081">BCHAN_ACTIVATED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00082">BCHAN_BRIDGED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00032">cb_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00564">chan_list::dropped_frame_cnt</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_list::ignore_dtmf</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_list::jb</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00399">misdn_bchannel::l3_id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00436">misdn_cap_is_speech()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00087">MISDN_CFG_BRIDGING</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00112">MISDN_GEN_BRIDGING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">misdn_get_ch_state()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12650">misdn_jb_fill()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04728">misdn_lib_bridge()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04751">misdn_lib_split_bridge()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l02271">misdn_lib_tone_generator_start()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04382">misdn_lib_tx2misdn_frm()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00477">misdn_bchannel::nojitter</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_list::notxtone</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_list::ts</a>.</p>
<div class="fragment"><div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;{</div><div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ch;</div><div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;</div><div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;   <span class="keywordflow">if</span> (!ast || !(ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast))) {</div><div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;   }</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;</div><div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(7, 0, <span class="stringliteral">&quot;misdn_write: Returning because hold active\n&quot;</span>);</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;   }</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;   <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>) {</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;private but no bc\n&quot;</span>);</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;   }</div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">notxtone</a>) {</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(7, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_write: Returning because notxtone\n&quot;</span>);</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;   }</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;   <span class="keywordflow">if</span> (!frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) {</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_write: * prods us\n&quot;</span>);</div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;   }</div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Got Unsupported Frame with Format:%s\n&quot;</span>,</div><div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;   }</div><div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;</div><div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;</div><div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;   <span class="keywordflow">if</span> (!frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>) {</div><div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_write: zero write\n&quot;</span>);</div><div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;</div><div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;      <span class="keywordflow">if</span> (!strcmp(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>,<span class="stringliteral">&quot;ast_prod&quot;</span>)) {</div><div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_write: state (%s) prodded.\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(ch));</div><div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;</div><div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a>) {</div><div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(4, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Starting Playtones\n&quot;</span>);</div><div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#adf9d3ad762e15818c788ac1035f6cb06">misdn_lib_tone_generator_start</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;         }</div><div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;      }</div><div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;</div><div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;   }</div><div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;</div><div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;   <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>) {</div><div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(8, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;misdn_write: no addr for bc dropping:%d\n&quot;</span>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;   }</div><div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;</div><div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;<span class="preprocessor">#ifdef MISDN_DEBUG</span></div><div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;   {</div><div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = 5 &gt; frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> ? frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> : 5;</div><div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;</div><div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;write2mISDN %p %d bytes: &quot;</span>, p, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;</div><div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>; i++) {</div><div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;%02hhx &quot;</span>, ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>)[i]);</div><div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;      }</div><div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;   }</div><div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;</div><div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;   <span class="keywordflow">switch</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">bc_state</a>) {</div><div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a8ac183371c27715fa370f6c9aeb3e4c4a1b7d7fde2aa8ceca170c3d0f8283fbc0">BCHAN_ACTIVATED</a>:</div><div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a8ac183371c27715fa370f6c9aeb3e4c4a660c00210e9cd580ec7f1b0250c3ce6e">BCHAN_BRIDGED</a>:</div><div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a1d9ee2f8b7c8ef9ae96caa4265f5ad3f">dropped_frame_cnt</a>) {</div><div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;            <span class="stringliteral">&quot;BC not active (nor bridged) dropping: %d frames addr:%x exten:%s cid:%s ch-&gt;state:%s bc_state:%d l3id:%x\n&quot;</span>,</div><div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;            frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(ch), ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">bc_state</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;      }</div><div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;</div><div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;      <span class="keywordflow">if</span> (++ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a1d9ee2f8b7c8ef9ae96caa4265f5ad3f">dropped_frame_cnt</a> &gt; 100) {</div><div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a1d9ee2f8b7c8ef9ae96caa4265f5ad3f">dropped_frame_cnt</a> = 0;</div><div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;BC not active (nor bridged) dropping: %d frames addr:%x  dropped &gt; 100 frames!\n&quot;</span>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>);</div><div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;      }</div><div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;</div><div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;   }</div><div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;</div><div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(9, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Sending :%d bytes to MISDN\n&quot;</span>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;   <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">nojitter</a> &amp;&amp; <a class="code" href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>)) {</div><div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;      <span class="comment">/* Buffered Transmit (triggered by read from isdn side)*/</span></div><div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab0b03517b5aa9b9c98d46159e47beaa3">misdn_jb_fill</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">jb</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>) &lt; 0) {</div><div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;         <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a>) {</div><div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;            <a class="code" href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a>(0, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Misdn Jitterbuffer Overflow.\n&quot;</span>);</div><div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;         }</div><div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;      }</div><div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;</div><div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;      <span class="comment">/* transmit without jitterbuffer */</span></div><div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;      <a class="code" href="../../de/dfe/isdn__lib_8c.html#a017d9391bbd17db8104fcb1c7761918a">misdn_lib_tx2misdn_frm</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;   }</div><div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;</div><div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structchan__list_html_a97f61939951f649404581f2de713e396"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97f61939951f649404581f2de713e396">chan_list::jb</a></div><div class="ttdeci">struct misdn_jb * jb</div><div class="ttdoc">Allocated jitterbuffer controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00503">chan_misdn.c:503</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab0b03517b5aa9b9c98d46159e47beaa3"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab0b03517b5aa9b9c98d46159e47beaa3">misdn_jb_fill</a></div><div class="ttdeci">int misdn_jb_fill(struct misdn_jb *jb, const char *data, int len)</div><div class="ttdoc">fills the jitterbuffer with len data returns &lt; 0 if there was an error (buffer overrun). </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12650">chan_misdn.c:12650</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_adf9d3ad762e15818c788ac1035f6cb06"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#adf9d3ad762e15818c788ac1035f6cb06">misdn_lib_tone_generator_start</a></div><div class="ttdeci">void misdn_lib_tone_generator_start(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l02271">isdn_lib.c:2271</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6c07f69dab53f96457d548d8dc004345"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a></div><div class="ttdeci">static const char * misdn_get_ch_state(struct chan_list *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04102">chan_misdn.c:4102</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="structchan__list_html_a85d7b17a82d4d04aabe2a4d634bbb7c3"><div class="ttname"><a href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">chan_list::notxtone</a></div><div class="ttdeci">int notxtone</div><div class="ttdoc">TRUE if we are not to generate tones (Playtones) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_misdn.c:420</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_acaefa07620d12d0dc4f979c9e3c3f73e"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#acaefa07620d12d0dc4f979c9e3c3f73e">misdn_cap_is_speech</a></div><div class="ttdeci">int misdn_cap_is_speech(int cap)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00436">isdn_lib.c:436</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="structchan__list_html_a1d9ee2f8b7c8ef9ae96caa4265f5ad3f"><div class="ttname"><a href="../../df/d00/structchan__list.html#a1d9ee2f8b7c8ef9ae96caa4265f5ad3f">chan_list::dropped_frame_cnt</a></div><div class="ttdeci">int dropped_frame_cnt</div><div class="ttdoc">Number of outgoing audio frames dropped since last debug gripe message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00564">chan_misdn.c:564</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6bb23a220a9276463546e4b5faa28e36"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6bb23a220a9276463546e4b5faa28e36">misdn_bchannel::nojitter</a></div><div class="ttdeci">int nojitter</div><div class="ttdoc">TRUE if we will not use the jitter buffer system. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00477">isdn_lib.h:477</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a017d9391bbd17db8104fcb1c7761918a"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a017d9391bbd17db8104fcb1c7761918a">misdn_lib_tx2misdn_frm</a></div><div class="ttdeci">int misdn_lib_tx2misdn_frm(struct misdn_bchannel *bc, void *data, int len)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04382">isdn_lib.c:4382</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aafb8164f20f79a2dd0290502a25367d1"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">misdn_bchannel::addr</a></div><div class="ttdeci">int addr</div><div class="ttdoc">B Channel mISDN driver layer ID from mISDN_get_layerid() </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00429">isdn_lib.h:429</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa5805c5e936174e5092bf7a5b78e7e64">misdn_bchannel::active</a></div><div class="ttdeci">int active</div><div class="ttdoc">Seems to have been intended for something to do with the jitter buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00537">isdn_lib.h:537</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a8ac183371c27715fa370f6c9aeb3e4c4a660c00210e9cd580ec7f1b0250c3ce6e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a8ac183371c27715fa370f6c9aeb3e4c4a660c00210e9cd580ec7f1b0250c3ce6e">BCHAN_BRIDGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00082">isdn_lib.h:82</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="structchan__list_html_ad30b22ae8fc57203eae5d30c3e9243e2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">chan_list::ts</a></div><div class="ttdeci">struct ast_tone_zone_sound * ts</div><div class="ttdoc">Tone zone sound used for dialtone generation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_misdn.c:582</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf4c3863e7ccb99c1b55a3fc74ef8d3e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">misdn_bchannel::bc_state</a></div><div class="ttdeci">enum bchannel_state bc_state</div><div class="ttdoc">Current B Channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00547">isdn_lib.h:547</a></div></div>
<div class="ttc" id="format__cache_8h_html_a95c058fe6adef68780f026d6aec2481c"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a95c058fe6adef68780f026d6aec2481c">ast_format_alaw</a></div><div class="ttdeci">struct ast_format * ast_format_alaw</div><div class="ttdoc">Built-in cached alaw format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00091">format_cache.c:91</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a8ac183371c27715fa370f6c9aeb3e4c4a1b7d7fde2aa8ceca170c3d0f8283fbc0"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a8ac183371c27715fa370f6c9aeb3e4c4a1b7d7fde2aa8ceca170c3d0f8283fbc0">BCHAN_ACTIVATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00081">isdn_lib.h:81</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_abef6c81cea5f1eccbaaf0007a6750e21"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#abef6c81cea5f1eccbaaf0007a6750e21">cb_log</a></div><div class="ttdeci">void(* cb_log)(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00032">isdn_lib.c:32</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a2a616bc0b9f450c55ea28ea3a5c9e8e4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">misdn_bchannel::l3_id</a></div><div class="ttdeci">int l3_id</div><div class="ttdoc">Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00399">isdn_lib.h:399</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd97d108065ced9bfacd2cf140965f95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd97d108065ced9bfacd2cf140965f95">&#9670;&nbsp;</a></span>pbx_start_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pbx_start_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Channel Queue End </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08438">8438</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04712">ast_pbx_start()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_list::need_hangup</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08659">do_immediate_setup()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">misdn_overlap_dial_task()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">start_pbx()</a>.</p>
<div class="fragment"><div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;{</div><div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;   <span class="keywordtype">int</span> ret = <a class="code" href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>);</div><div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;</div><div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">need_hangup</a> = (ret &gt;= 0) ? 0 : 1;</div><div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;</div><div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;}</div><div class="ttc" id="structchan__list_html_ab8aa4ba47ba9bd53b22a8c30af419827"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab8aa4ba47ba9bd53b22a8c30af419827">chan_list::need_hangup</a></div><div class="ttdeci">int need_hangup</div><div class="ttdoc">TRUE if a channel can be hung up by calling asterisk directly when done. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00397">chan_misdn.c:397</a></div></div>
<div class="ttc" id="pbx_8h_html_a9a937fbb3b5f4e68880a9c5714a29ce5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_start(struct ast_channel *c)</div><div class="ttdoc">Create a new thread and start the PBX. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04712">pbx.c:4712</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae748f83e6f424de7b039a8079f707fd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae748f83e6f424de7b039a8079f707fd4">&#9670;&nbsp;</a></span>print_bc_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_bc_info </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>help</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04167">4167</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00537">misdn_bchannel::active</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00429">misdn_bchannel::addr</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00547">chan_list::addr</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00547">misdn_bchannel::bc_state</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00617">bc_state2str()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02373">bearer2str()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00411">misdn_bchannel::channel</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00642">misdn_bchannel::display</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00688">misdn_bchannel::ec_enable</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00307">misdn_party_redirecting::from</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00556">misdn_bchannel::holded</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00399">misdn_bchannel::l3_id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_list::l3id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04102">misdn_get_ch_state()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_list::norxtone</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_list::notxtone</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00358">misdn_bchannel::redirecting</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00310">misdn_party_redirecting::to</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04303">handle_cli_misdn_show_channel()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04230">handle_cli_misdn_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;{</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = help-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd,</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;      <span class="stringliteral">&quot;* Pid:%d Port:%d Ch:%d Mode:%s Orig:%s dialed:%s\n&quot;</span></div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      <span class="stringliteral">&quot;  --&gt; caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;      <span class="stringliteral">&quot;  --&gt; redirecting-from:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span></div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      <span class="stringliteral">&quot;  --&gt; redirecting-to:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;      <span class="stringliteral">&quot;  --&gt; context:%s state:%s\n&quot;</span>,</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>,</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">channel</a>,</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> ? <span class="stringliteral">&quot;NT&quot;</span> : <span class="stringliteral">&quot;TE&quot;</span>,</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      help-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a> ? <span class="stringliteral">&quot;*&quot;</span> : <span class="stringliteral">&quot;I&quot;</span>,</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      ast ? <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      (ast &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str)</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;      (ast &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str)</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;         ? <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">from</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>,</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">redirecting</a>.<a class="code" href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">to</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>,</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      ast ? <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a>(help));</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>] &gt; 0) {</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd,</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;         <span class="stringliteral">&quot;  --&gt; astname: %s\n&quot;</span></div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;         <span class="stringliteral">&quot;  --&gt; ch_l3id: %x\n&quot;</span></div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;         <span class="stringliteral">&quot;  --&gt; ch_addr: %x\n&quot;</span></div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;         <span class="stringliteral">&quot;  --&gt; bc_addr: %x\n&quot;</span></div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;         <span class="stringliteral">&quot;  --&gt; bc_l3id: %x\n&quot;</span></div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;         <span class="stringliteral">&quot;  --&gt; display: %s\n&quot;</span></div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;         <span class="stringliteral">&quot;  --&gt; activated: %d\n&quot;</span></div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;         <span class="stringliteral">&quot;  --&gt; state: %s\n&quot;</span></div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;         <span class="stringliteral">&quot;  --&gt; capability: %s\n&quot;</span></div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;#ifdef MISDN_1_2</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;         <span class="stringliteral">&quot;  --&gt; pipeline: %s\n&quot;</span></div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;         <span class="stringliteral">&quot;  --&gt; echo_cancel: %d\n&quot;</span></div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;#endif</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;         <span class="stringliteral">&quot;  --&gt; notone : rx %d tx:%d\n&quot;</span></div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;         <span class="stringliteral">&quot;  --&gt; bc_hold: %d\n&quot;</span>,</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;         ast ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;         help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">l3id</a>,</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;         help-&gt;<a class="code" href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>,</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">addr</a>,</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>,</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">display</a>,</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a>,</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#ae2f4cc55968e9014a4daa06d1be05bef">bc_state2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">bc_state</a>),</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>),</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;#ifdef MISDN_1_2</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;         bc-&gt;pipeline,</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a>,</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;#endif</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;         help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">norxtone</a>, help-&gt;<a class="code" href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">notxtone</a>,</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a17ef6ae19b9fca79e3e2f7ce9525f089">holded</a>);</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;   }</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="structchan__list_html_aafb8164f20f79a2dd0290502a25367d1"><div class="ttname"><a href="../../df/d00/structchan__list.html#aafb8164f20f79a2dd0290502a25367d1">chan_list::addr</a></div><div class="ttdeci">int addr</div><div class="ttdoc">From associated B channel: B Channel mISDN driver layer ID from mISDN_get_layerid() ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00547">chan_misdn.c:547</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aeafef525b8bac4713c119b593780ca69"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">misdn_bchannel::ec_enable</a></div><div class="ttdeci">int ec_enable</div><div class="ttdoc">TRUE if the echo cancellor is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00688">isdn_lib.h:688</a></div></div>
<div class="ttc" id="structchan__list_html_a522a11718c8bcec41db4714e6bedc2b2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">chan_list::norxtone</a></div><div class="ttdeci">int norxtone</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_misdn.c:415</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a6c07f69dab53f96457d548d8dc004345"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a6c07f69dab53f96457d548d8dc004345">misdn_get_ch_state</a></div><div class="ttdeci">static const char * misdn_get_ch_state(struct chan_list *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04102">chan_misdn.c:4102</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ad9bc456f64b9b24368b9506134aad75e"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ad9bc456f64b9b24368b9506134aad75e">misdn_party_redirecting::to</a></div><div class="ttdeci">struct misdn_party_id to</div><div class="ttdoc">Where the call is being redirected toward (Sent to the calling party) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00310">isdn_lib.h:310</a></div></div>
<div class="ttc" id="structchan__list_html_a85d7b17a82d4d04aabe2a4d634bbb7c3"><div class="ttname"><a href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">chan_list::notxtone</a></div><div class="ttdeci">int notxtone</div><div class="ttdoc">TRUE if we are not to generate tones (Playtones) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_misdn.c:420</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a89b6e11f1f5add3aec515c40e0cbc44c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a89b6e11f1f5add3aec515c40e0cbc44c">misdn_bchannel::display</a></div><div class="ttdeci">char display[84]</div><div class="ttdoc">Display message that can be displayed by the user phone. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00642">isdn_lib.h:642</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a17ef6ae19b9fca79e3e2f7ce9525f089"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a17ef6ae19b9fca79e3e2f7ce9525f089">misdn_bchannel::holded</a></div><div class="ttdeci">int holded</div><div class="ttdoc">TRUE if this channel is on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00556">isdn_lib.h:556</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ae2f4cc55968e9014a4daa06d1be05bef"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ae2f4cc55968e9014a4daa06d1be05bef">bc_state2str</a></div><div class="ttdeci">char * bc_state2str(enum bchannel_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00617">isdn_lib.c:617</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__party__redirecting_html_ae965aabce82a22218590ec6c7c662a2d"><div class="ttname"><a href="../../d6/d49/structmisdn__party__redirecting.html#ae965aabce82a22218590ec6c7c662a2d">misdn_party_redirecting::from</a></div><div class="ttdeci">struct misdn_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00307">isdn_lib.h:307</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad61ca821b2c91e20569e54196167c403"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a></div><div class="ttdeci">static const char * bearer2str(int cap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02373">chan_misdn.c:2373</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7001e245513227132070c789a25eb560"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7001e245513227132070c789a25eb560">misdn_bchannel::redirecting</a></div><div class="ttdeci">struct misdn_party_redirecting redirecting</div><div class="ttdoc">Redirecting information struct (Where a call diversion or transfer was invoked) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00358">isdn_lib.h:358</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aafb8164f20f79a2dd0290502a25367d1"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aafb8164f20f79a2dd0290502a25367d1">misdn_bchannel::addr</a></div><div class="ttdeci">int addr</div><div class="ttdoc">B Channel mISDN driver layer ID from mISDN_get_layerid() </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00429">isdn_lib.h:429</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa5805c5e936174e5092bf7a5b78e7e64">misdn_bchannel::active</a></div><div class="ttdeci">int active</div><div class="ttdoc">Seems to have been intended for something to do with the jitter buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00537">isdn_lib.h:537</a></div></div>
<div class="ttc" id="structchan__list_html_a82cf9d436f7733e7b20ae438e62372f1"><div class="ttname"><a href="../../df/d00/structchan__list.html#a82cf9d436f7733e7b20ae438e62372f1">chan_list::l3id</a></div><div class="ttdeci">unsigned int l3id</div><div class="ttdoc">From associated B channel: Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00541">chan_misdn.c:541</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf7dff2c57c0da9a4a2b70e3e815be31"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf7dff2c57c0da9a4a2b70e3e815be31">misdn_bchannel::channel</a></div><div class="ttdeci">int channel</div><div class="ttdoc">Assigned B channel number B1, B2... 0 if not assigned. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00411">isdn_lib.h:411</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf4c3863e7ccb99c1b55a3fc74ef8d3e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf4c3863e7ccb99c1b55a3fc74ef8d3e">misdn_bchannel::bc_state</a></div><div class="ttdeci">enum bchannel_state bc_state</div><div class="ttdoc">Current B Channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00547">isdn_lib.h:547</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a2a616bc0b9f450c55ea28ea3a5c9e8e4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">misdn_bchannel::l3_id</a></div><div class="ttdeci">int l3_id</div><div class="ttdoc">Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00399">isdn_lib.h:399</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a695d9a32f28a058deed150c684b94db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a695d9a32f28a058deed150c684b94db4">&#9670;&nbsp;</a></span>print_bearer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_bearer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03355">3355</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02373">bearer2str()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00234">INFO_CODEC_ALAW</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00233">INFO_CODEC_ULAW</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00612">misdn_bchannel::law</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;{</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Bearer: %s\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>));</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;   <span class="keywordflow">switch</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a17dd7b17c0e736754e01e575ca8d8cb8">law</a>) {</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a5584fee7841d9376fb0394600e9ed81aa25426c03ab5d4728a4e7110a02879ccc">INFO_CODEC_ALAW</a>:</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Codec: Alaw\n&quot;</span>);</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#a5584fee7841d9376fb0394600e9ed81aa0f0ecc0b19e14d83cea145089f77440b">INFO_CODEC_ULAW</a>:</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Codec: Ulaw\n&quot;</span>);</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;   }</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a5584fee7841d9376fb0394600e9ed81aa25426c03ab5d4728a4e7110a02879ccc"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a5584fee7841d9376fb0394600e9ed81aa25426c03ab5d4728a4e7110a02879ccc">INFO_CODEC_ALAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00234">isdn_lib.h:234</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ad61ca821b2c91e20569e54196167c403"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ad61ca821b2c91e20569e54196167c403">bearer2str</a></div><div class="ttdeci">static const char * bearer2str(int cap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02373">chan_misdn.c:2373</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_a5584fee7841d9376fb0394600e9ed81aa0f0ecc0b19e14d83cea145089f77440b"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#a5584fee7841d9376fb0394600e9ed81aa0f0ecc0b19e14d83cea145089f77440b">INFO_CODEC_ULAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00233">isdn_lib.h:233</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a17dd7b17c0e736754e01e575ca8d8cb8"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a17dd7b17c0e736754e01e575ca8d8cb8">misdn_bchannel::law</a></div><div class="ttdeci">int law</div><div class="ttdoc">Companding ALaw/uLaw encoding (INFO_CODEC_ALAW / INFO_CODEC_ULAW) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00612">isdn_lib.h:612</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad972a2f75429887bad891050e3aa4ae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad972a2f75429887bad891050e3aa4ae0">&#9670;&nbsp;</a></span>print_facility()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_facility </td>
          <td>(</td>
          <td class="paramtype">const struct FacParm *&#160;</td>
          <td class="paramname"><em>fac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">2762</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05183">handle_cli_misdn_send_facility()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12168">misdn_facility_exec()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09095">misdn_facility_ie_handler()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06300">misdn_update_connected_line()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06483">misdn_update_redirecting()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08889">wait_for_digits()</a>.</p>
<div class="fragment"><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;{</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;   <span class="keywordtype">unsigned</span> Index;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;   <span class="keywordflow">switch</span> (fac-&gt;Function) {</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   <span class="keywordflow">case</span> Fac_ActivationDiversion:</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; ActivationDiversion: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;         fac-&gt;u.ActivationDiversion.InvokeID);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.ActivationDiversion.ComponentType) {</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: Procedure:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            fac-&gt;u.ActivationDiversion.Component.Invoke.Procedure,</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;            fac-&gt;u.ActivationDiversion.Component.Invoke.BasicService);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   ForwardedTo:\n&quot;</span>);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;         print_facility_Address(3, &amp;fac-&gt;u.ActivationDiversion.Component.Invoke.ForwardedTo, bc);</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   ServedUserNr:\n&quot;</span>);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;         print_facility_ServedUserNr(3, &amp;fac-&gt;u.ActivationDiversion.Component.Invoke.ServedUser, bc);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result\n&quot;</span>);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <span class="keywordflow">case</span> Fac_DeactivationDiversion:</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DeactivationDiversion: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;         fac-&gt;u.DeactivationDiversion.InvokeID);</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.DeactivationDiversion.ComponentType) {</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: Procedure:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            fac-&gt;u.DeactivationDiversion.Component.Invoke.Procedure,</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;            fac-&gt;u.DeactivationDiversion.Component.Invoke.BasicService);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   ServedUserNr:\n&quot;</span>);</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;         print_facility_ServedUserNr(3, &amp;fac-&gt;u.DeactivationDiversion.Component.Invoke.ServedUser, bc);</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result\n&quot;</span>);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      }</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;   <span class="keywordflow">case</span> Fac_ActivationStatusNotificationDiv:</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; ActivationStatusNotificationDiv: InvokeID:%d Procedure:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;         fac-&gt;u.ActivationStatusNotificationDiv.InvokeID,</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;         fac-&gt;u.ActivationStatusNotificationDiv.Procedure,</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;         fac-&gt;u.ActivationStatusNotificationDiv.BasicService);</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  ForwardedTo:\n&quot;</span>);</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      print_facility_Address(2, &amp;fac-&gt;u.ActivationStatusNotificationDiv.ForwardedTo, bc);</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  ServedUserNr:\n&quot;</span>);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      print_facility_ServedUserNr(2, &amp;fac-&gt;u.ActivationStatusNotificationDiv.ServedUser, bc);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;   <span class="keywordflow">case</span> Fac_DeactivationStatusNotificationDiv:</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DeactivationStatusNotificationDiv: InvokeID:%d Procedure:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;         fac-&gt;u.DeactivationStatusNotificationDiv.InvokeID,</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;         fac-&gt;u.DeactivationStatusNotificationDiv.Procedure,</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;         fac-&gt;u.DeactivationStatusNotificationDiv.BasicService);</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  ServedUserNr:\n&quot;</span>);</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      print_facility_ServedUserNr(2, &amp;fac-&gt;u.DeactivationStatusNotificationDiv.ServedUser, bc);</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;   <span class="keywordflow">case</span> Fac_InterrogationDiversion:</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; InterrogationDiversion: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;         fac-&gt;u.InterrogationDiversion.InvokeID);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.InterrogationDiversion.ComponentType) {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: Procedure:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;            fac-&gt;u.InterrogationDiversion.Component.Invoke.Procedure,</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            fac-&gt;u.InterrogationDiversion.Component.Invoke.BasicService);</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   ServedUserNr:\n&quot;</span>);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;         print_facility_ServedUserNr(3, &amp;fac-&gt;u.InterrogationDiversion.Component.Invoke.ServedUser, bc);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result:\n&quot;</span>);</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.InterrogationDiversion.Component.Result.NumRecords) {</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;            <span class="keywordflow">for</span> (Index = 0; Index &lt; fac-&gt;u.InterrogationDiversion.Component.Result.NumRecords; ++Index) {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   IntResult[%d]:\n&quot;</span>, Index);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;               print_facility_IntResult(3, &amp;fac-&gt;u.InterrogationDiversion.Component.Result.List[Index], bc);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;            }</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;         }</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      }</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   <span class="keywordflow">case</span> Fac_DiversionInformation:</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DiversionInformation: InvokeID:%d Reason:%d BasicService:%d\n&quot;</span>,</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;         fac-&gt;u.DiversionInformation.InvokeID,</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;         fac-&gt;u.DiversionInformation.DiversionReason,</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;         fac-&gt;u.DiversionInformation.BasicService);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.ServedUserSubaddress.Length) {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  ServedUserSubaddress:\n&quot;</span>);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;         print_facility_Subaddress(2, &amp;fac-&gt;u.DiversionInformation.ServedUserSubaddress, bc);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;      }</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.CallingAddressPresent) {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  CallingAddress:\n&quot;</span>);</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;         print_facility_PresentedAddressScreened(2, &amp;fac-&gt;u.DiversionInformation.CallingAddress, bc);</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      }</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.OriginalCalledPresent) {</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  OriginalCalledNr:\n&quot;</span>);</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.DiversionInformation.OriginalCalled, bc);</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.LastDivertingPresent) {</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  LastDivertingNr:\n&quot;</span>);</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.DiversionInformation.LastDiverting, bc);</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;      }</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.LastDivertingReasonPresent) {</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  LastDivertingReason:%d\n&quot;</span>, fac-&gt;u.DiversionInformation.LastDivertingReason);</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      }</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DiversionInformation.UserInfo.Length) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  UserInfo Length:%d\n&quot;</span>, fac-&gt;u.DiversionInformation.UserInfo.Length);</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   <span class="keywordflow">case</span> Fac_CallDeflection:</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CallDeflection: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;         fac-&gt;u.CallDeflection.InvokeID);</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CallDeflection.ComponentType) {</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke:\n&quot;</span>);</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUserPresent) {</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   PresentationAllowed:%d\n&quot;</span>,</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;               fac-&gt;u.CallDeflection.Component.Invoke.PresentationAllowedToDivertedToUser);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;         }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   DeflectionAddress:\n&quot;</span>);</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;         print_facility_Address(3, &amp;fac-&gt;u.CallDeflection.Component.Invoke.Deflection, bc);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result\n&quot;</span>);</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;   <span class="keywordflow">case</span> Fac_CallRerouteing:</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CallRerouteing: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;         fac-&gt;u.CallRerouteing.InvokeID);</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CallRerouteing.ComponentType) {</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: Reason:%d Counter:%d\n&quot;</span>,</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;            fac-&gt;u.CallRerouteing.Component.Invoke.ReroutingReason,</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            fac-&gt;u.CallRerouteing.Component.Invoke.ReroutingCounter);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CalledAddress:\n&quot;</span>);</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;         print_facility_Address(3, &amp;fac-&gt;u.CallRerouteing.Component.Invoke.CalledAddress, bc);</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;         print_facility_Q931_Bc_Hlc_Llc_Uu(2, &amp;fac-&gt;u.CallRerouteing.Component.Invoke.Q931ie, bc);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   LastReroutingNr:\n&quot;</span>);</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;         print_facility_PresentedNumberUnscreened(3, &amp;fac-&gt;u.CallRerouteing.Component.Invoke.LastRerouting, bc);</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   SubscriptionOption:%d\n&quot;</span>,</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            fac-&gt;u.CallRerouteing.Component.Invoke.SubscriptionOption);</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CallRerouteing.Component.Invoke.CallingPartySubaddress.Length) {</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CallingParty:\n&quot;</span>);</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            print_facility_Subaddress(3, &amp;fac-&gt;u.CallRerouteing.Component.Invoke.CallingPartySubaddress, bc);</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;         }</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result\n&quot;</span>);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      }</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">case</span> Fac_InterrogateServedUserNumbers:</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; InterrogateServedUserNumbers: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;         fac-&gt;u.InterrogateServedUserNumbers.InvokeID);</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.InterrogateServedUserNumbers.ComponentType) {</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result:\n&quot;</span>);</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.InterrogateServedUserNumbers.Component.Result.NumRecords) {</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            <span class="keywordflow">for</span> (Index = 0; Index &lt; fac-&gt;u.InterrogateServedUserNumbers.Component.Result.NumRecords; ++Index) {</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   ServedUserNr[%d]:\n&quot;</span>, Index);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;               print_facility_PartyNumber(3, &amp;fac-&gt;u.InterrogateServedUserNumbers.Component.Result.List[Index], bc);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;            }</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;         }</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      }</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation1:</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DivertingLegInformation1: InvokeID:%d Reason:%d SubscriptionOption:%d\n&quot;</span>,</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;         fac-&gt;u.DivertingLegInformation1.InvokeID,</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         fac-&gt;u.DivertingLegInformation1.DiversionReason,</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;         fac-&gt;u.DivertingLegInformation1.SubscriptionOption);</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DivertingLegInformation1.DivertedToPresent) {</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  DivertedToNr:\n&quot;</span>);</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.DivertingLegInformation1.DivertedTo, bc);</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      }</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation2:</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DivertingLegInformation2: InvokeID:%d Reason:%d Count:%d\n&quot;</span>,</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;         fac-&gt;u.DivertingLegInformation2.InvokeID,</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;         fac-&gt;u.DivertingLegInformation2.DiversionReason,</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;         fac-&gt;u.DivertingLegInformation2.DiversionCounter);</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DivertingLegInformation2.DivertingPresent) {</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  DivertingNr:\n&quot;</span>);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.DivertingLegInformation2.Diverting, bc);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      }</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.DivertingLegInformation2.OriginalCalledPresent) {</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  OriginalCalledNr:\n&quot;</span>);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.DivertingLegInformation2.OriginalCalled, bc);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      }</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;   <span class="keywordflow">case</span> Fac_DivertingLegInformation3:</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; DivertingLegInformation3: InvokeID:%d PresentationAllowed:%d\n&quot;</span>,</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;         fac-&gt;u.DivertingLegInformation3.InvokeID,</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;         fac-&gt;u.DivertingLegInformation3.PresentationAllowedIndicator);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   <span class="keywordflow">case</span> Fac_CD:</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; calldeflect to: %s, presentable: %s\n&quot;</span>, fac-&gt;u.CDeflection.DeflectedToNumber,</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;         fac-&gt;u.CDeflection.PresentationAllowed ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* !defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDCurrency:</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.AOCDcur.chargeNotAvailable) {</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD currency: charge not available\n&quot;</span>);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fac-&gt;u.AOCDcur.freeOfCharge) {</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD currency: free of charge\n&quot;</span>);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fac-&gt;u.AOCDchu.billingId &gt;= 0) {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD currency: currency:%s amount:%d multiplier:%d typeOfChargingInfo:%s billingId:%d\n&quot;</span>,</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;            fac-&gt;u.AOCDcur.currency, fac-&gt;u.AOCDcur.currencyAmount, fac-&gt;u.AOCDcur.multiplier,</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            (fac-&gt;u.AOCDcur.typeOfChargingInfo == 0) ? <span class="stringliteral">&quot;subTotal&quot;</span> : <span class="stringliteral">&quot;total&quot;</span>, fac-&gt;u.AOCDcur.billingId);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD currency: currency:%s amount:%d multiplier:%d typeOfChargingInfo:%s\n&quot;</span>,</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            fac-&gt;u.AOCDcur.currency, fac-&gt;u.AOCDcur.currencyAmount, fac-&gt;u.AOCDcur.multiplier,</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;            (fac-&gt;u.AOCDcur.typeOfChargingInfo == 0) ? <span class="stringliteral">&quot;subTotal&quot;</span> : <span class="stringliteral">&quot;total&quot;</span>);</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;      }</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;   <span class="keywordflow">case</span> Fac_AOCDChargingUnit:</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.AOCDchu.chargeNotAvailable) {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD charging unit: charge not available\n&quot;</span>);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fac-&gt;u.AOCDchu.freeOfCharge) {</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD charging unit: free of charge\n&quot;</span>);</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fac-&gt;u.AOCDchu.billingId &gt;= 0) {</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD charging unit: recordedUnits:%d typeOfChargingInfo:%s billingId:%d\n&quot;</span>,</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            fac-&gt;u.AOCDchu.recordedUnits, (fac-&gt;u.AOCDchu.typeOfChargingInfo == 0) ? <span class="stringliteral">&quot;subTotal&quot;</span> : <span class="stringliteral">&quot;total&quot;</span>, fac-&gt;u.AOCDchu.billingId);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; AOCD charging unit: recordedUnits:%d typeOfChargingInfo:%s\n&quot;</span>,</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            fac-&gt;u.AOCDchu.recordedUnits, (fac-&gt;u.AOCDchu.typeOfChargingInfo == 0) ? <span class="stringliteral">&quot;subTotal&quot;</span> : <span class="stringliteral">&quot;total&quot;</span>);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;      }</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   <span class="keywordflow">case</span> Fac_ERROR:</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; ERROR: InvokeID:%d, Code:0x%02x\n&quot;</span>,</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;         fac-&gt;u.ERROR.invokeId, fac-&gt;u.ERROR.errorValue);</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   <span class="keywordflow">case</span> Fac_RESULT:</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; RESULT: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;         fac-&gt;u.RESULT.InvokeID);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   <span class="keywordflow">case</span> Fac_REJECT:</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.REJECT.InvokeIDPresent) {</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; REJECT: InvokeID:%d, Code:0x%02x\n&quot;</span>,</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            fac-&gt;u.REJECT.InvokeID, fac-&gt;u.REJECT.Code);</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; REJECT: Code:0x%02x\n&quot;</span>,</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            fac-&gt;u.REJECT.Code);</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      }</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;   <span class="keywordflow">case</span> Fac_EctExecute:</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EctExecute: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;         fac-&gt;u.EctExecute.InvokeID);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;   <span class="keywordflow">case</span> Fac_ExplicitEctExecute:</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; ExplicitEctExecute: InvokeID:%d LinkID:%d\n&quot;</span>,</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;         fac-&gt;u.ExplicitEctExecute.InvokeID,</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;         fac-&gt;u.ExplicitEctExecute.LinkID);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;   <span class="keywordflow">case</span> Fac_RequestSubaddress:</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; RequestSubaddress: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;         fac-&gt;u.RequestSubaddress.InvokeID);</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;   <span class="keywordflow">case</span> Fac_SubaddressTransfer:</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; SubaddressTransfer: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;         fac-&gt;u.SubaddressTransfer.InvokeID);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;      print_facility_Subaddress(1, &amp;fac-&gt;u.SubaddressTransfer.Subaddress, bc);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;   <span class="keywordflow">case</span> Fac_EctLinkIdRequest:</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EctLinkIdRequest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;         fac-&gt;u.EctLinkIdRequest.InvokeID);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.EctLinkIdRequest.ComponentType) {</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: LinkID:%d\n&quot;</span>,</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;            fac-&gt;u.EctLinkIdRequest.Component.Result.LinkID);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      }</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keywordflow">case</span> Fac_EctInform:</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EctInform: InvokeID:%d Status:%d\n&quot;</span>,</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;         fac-&gt;u.EctInform.InvokeID,</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;         fac-&gt;u.EctInform.Status);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      <span class="keywordflow">if</span> (fac-&gt;u.EctInform.RedirectionPresent) {</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Redirection Number\n&quot;</span>);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;         print_facility_PresentedNumberUnscreened(2, &amp;fac-&gt;u.EctInform.Redirection, bc);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      }</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   <span class="keywordflow">case</span> Fac_EctLoopTest:</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EctLoopTest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;         fac-&gt;u.EctLoopTest.InvokeID);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.EctLoopTest.ComponentType) {</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: CallTransferID:%d\n&quot;</span>,</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;            fac-&gt;u.EctLoopTest.Component.Invoke.CallTransferID);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: LoopResult:%d\n&quot;</span>,</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            fac-&gt;u.EctLoopTest.Component.Result.LoopResult);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      }</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <span class="keywordflow">case</span> Fac_StatusRequest:</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; StatusRequest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;         fac-&gt;u.StatusRequest.InvokeID);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.StatusRequest.ComponentType) {</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: Compatibility:%d\n&quot;</span>,</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;            fac-&gt;u.StatusRequest.Component.Invoke.CompatibilityMode);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: Status:%d\n&quot;</span>,</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;            fac-&gt;u.StatusRequest.Component.Result.Status);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      }</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;   <span class="keywordflow">case</span> Fac_CallInfoRetain:</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CallInfoRetain: InvokeID:%d, LinkageID:%d\n&quot;</span>,</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;         fac-&gt;u.CallInfoRetain.InvokeID, fac-&gt;u.CallInfoRetain.CallLinkageID);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSDeactivate:</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSDeactivate: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;         fac-&gt;u.CCBSDeactivate.InvokeID);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCBSDeactivate.ComponentType) {</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: CCBSReference:%d\n&quot;</span>,</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;            fac-&gt;u.CCBSDeactivate.Component.Invoke.CCBSReference);</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result\n&quot;</span>);</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSErase:</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSErase: InvokeID:%d, CCBSReference:%d RecallMode:%d, Reason:%d\n&quot;</span>,</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;         fac-&gt;u.CCBSErase.InvokeID, fac-&gt;u.CCBSErase.CCBSReference,</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;         fac-&gt;u.CCBSErase.RecallMode, fac-&gt;u.CCBSErase.Reason);</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  AddressOfB\n&quot;</span>);</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;      print_facility_Address(2, &amp;fac-&gt;u.CCBSErase.AddressOfB, bc);</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      print_facility_Q931_Bc_Hlc_Llc(1, &amp;fac-&gt;u.CCBSErase.Q931ie, bc);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSRemoteUserFree:</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSRemoteUserFree: InvokeID:%d, CCBSReference:%d RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;         fac-&gt;u.CCBSRemoteUserFree.InvokeID, fac-&gt;u.CCBSRemoteUserFree.CCBSReference,</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;         fac-&gt;u.CCBSRemoteUserFree.RecallMode);</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  AddressOfB\n&quot;</span>);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      print_facility_Address(2, &amp;fac-&gt;u.CCBSRemoteUserFree.AddressOfB, bc);</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      print_facility_Q931_Bc_Hlc_Llc(1, &amp;fac-&gt;u.CCBSRemoteUserFree.Q931ie, bc);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSCall:</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSCall: InvokeID:%d, CCBSReference:%d\n&quot;</span>,</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;         fac-&gt;u.CCBSCall.InvokeID, fac-&gt;u.CCBSCall.CCBSReference);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSStatusRequest:</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSStatusRequest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;         fac-&gt;u.CCBSStatusRequest.InvokeID);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCBSStatusRequest.ComponentType) {</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: CCBSReference:%d RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            fac-&gt;u.CCBSStatusRequest.Component.Invoke.CCBSReference,</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            fac-&gt;u.CCBSStatusRequest.Component.Invoke.RecallMode);</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;         print_facility_Q931_Bc_Hlc_Llc(2, &amp;fac-&gt;u.CCBSStatusRequest.Component.Invoke.Q931ie, bc);</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: Free:%d\n&quot;</span>,</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            fac-&gt;u.CCBSStatusRequest.Component.Result.Free);</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      }</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSBFree:</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSBFree: InvokeID:%d, CCBSReference:%d RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;         fac-&gt;u.CCBSBFree.InvokeID, fac-&gt;u.CCBSBFree.CCBSReference,</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;         fac-&gt;u.CCBSBFree.RecallMode);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  AddressOfB\n&quot;</span>);</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      print_facility_Address(2, &amp;fac-&gt;u.CCBSBFree.AddressOfB, bc);</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      print_facility_Q931_Bc_Hlc_Llc(1, &amp;fac-&gt;u.CCBSBFree.Q931ie, bc);</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   <span class="keywordflow">case</span> Fac_EraseCallLinkageID:</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; EraseCallLinkageID: InvokeID:%d, LinkageID:%d\n&quot;</span>,</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;         fac-&gt;u.EraseCallLinkageID.InvokeID, fac-&gt;u.EraseCallLinkageID.CallLinkageID);</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSStopAlerting:</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSStopAlerting: InvokeID:%d, CCBSReference:%d\n&quot;</span>,</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;         fac-&gt;u.CCBSStopAlerting.InvokeID, fac-&gt;u.CCBSStopAlerting.CCBSReference);</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSRequest:</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSRequest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;         fac-&gt;u.CCBSRequest.InvokeID);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCBSRequest.ComponentType) {</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: LinkageID:%d\n&quot;</span>,</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;            fac-&gt;u.CCBSRequest.Component.Invoke.CallLinkageID);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: CCBSReference:%d RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            fac-&gt;u.CCBSRequest.Component.Result.CCBSReference,</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;            fac-&gt;u.CCBSRequest.Component.Result.RecallMode);</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      }</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;   <span class="keywordflow">case</span> Fac_CCBSInterrogate:</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBSInterrogate: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;         fac-&gt;u.CCBSInterrogate.InvokeID);</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCBSInterrogate.ComponentType) {</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBSInterrogate.Component.Invoke.CCBSReferencePresent) {</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CCBSReference:%d\n&quot;</span>,</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;               fac-&gt;u.CCBSInterrogate.Component.Invoke.CCBSReference);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;         }</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBSInterrogate.Component.Invoke.AParty.LengthOfNumber) {</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   AParty\n&quot;</span>);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;            print_facility_PartyNumber(3, &amp;fac-&gt;u.CCBSInterrogate.Component.Invoke.AParty, bc);</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;         }</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;            fac-&gt;u.CCBSInterrogate.Component.Result.RecallMode);</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBSInterrogate.Component.Result.NumRecords) {</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;            <span class="keywordflow">for</span> (Index = 0; Index &lt; fac-&gt;u.CCBSInterrogate.Component.Result.NumRecords; ++Index) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CallDetails[%d]:\n&quot;</span>, Index);</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;               print_facility_CallInformation(3, &amp;fac-&gt;u.CCBSInterrogate.Component.Result.CallDetails[Index], bc);</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;            }</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;         }</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;      }</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;   <span class="keywordflow">case</span> Fac_CCNRRequest:</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCNRRequest: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;         fac-&gt;u.CCNRRequest.InvokeID);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCNRRequest.ComponentType) {</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke: LinkageID:%d\n&quot;</span>,</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            fac-&gt;u.CCNRRequest.Component.Invoke.CallLinkageID);</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: CCBSReference:%d RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            fac-&gt;u.CCNRRequest.Component.Result.CCBSReference,</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;            fac-&gt;u.CCNRRequest.Component.Result.RecallMode);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;      }</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;   <span class="keywordflow">case</span> Fac_CCNRInterrogate:</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCNRInterrogate: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;         fac-&gt;u.CCNRInterrogate.InvokeID);</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCNRInterrogate.ComponentType) {</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNRInterrogate.Component.Invoke.CCBSReferencePresent) {</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CCBSReference:%d\n&quot;</span>,</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;               fac-&gt;u.CCNRInterrogate.Component.Invoke.CCBSReference);</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;         }</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNRInterrogate.Component.Invoke.AParty.LengthOfNumber) {</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   AParty\n&quot;</span>);</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            print_facility_PartyNumber(3, &amp;fac-&gt;u.CCNRInterrogate.Component.Invoke.AParty, bc);</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;         }</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: RecallMode:%d\n&quot;</span>,</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            fac-&gt;u.CCNRInterrogate.Component.Result.RecallMode);</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNRInterrogate.Component.Result.NumRecords) {</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;            <span class="keywordflow">for</span> (Index = 0; Index &lt; fac-&gt;u.CCNRInterrogate.Component.Result.NumRecords; ++Index) {</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;               <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   CallDetails[%d]:\n&quot;</span>, Index);</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;               print_facility_CallInformation(3, &amp;fac-&gt;u.CCNRInterrogate.Component.Result.CallDetails[Index], bc);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            }</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;         }</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      }</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Call:</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_Call: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;         fac-&gt;u.CCBS_T_Call.InvokeID);</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Suspend:</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_Suspend: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;         fac-&gt;u.CCBS_T_Suspend.InvokeID);</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Resume:</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_Resume: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;         fac-&gt;u.CCBS_T_Resume.InvokeID);</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_RemoteUserFree:</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_RemoteUserFree: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;         fac-&gt;u.CCBS_T_RemoteUserFree.InvokeID);</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Available:</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_Available: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;         fac-&gt;u.CCBS_T_Available.InvokeID);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   <span class="keywordflow">case</span> Fac_CCBS_T_Request:</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCBS_T_Request: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;         fac-&gt;u.CCBS_T_Request.InvokeID);</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCBS_T_Request.ComponentType) {</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   DestinationAddress:\n&quot;</span>);</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;         print_facility_Address(3, &amp;fac-&gt;u.CCBS_T_Request.Component.Invoke.Destination, bc);</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;         print_facility_Q931_Bc_Hlc_Llc(2, &amp;fac-&gt;u.CCBS_T_Request.Component.Invoke.Q931ie, bc);</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBS_T_Request.Component.Invoke.RetentionSupported) {</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   RetentionSupported:1\n&quot;</span>);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;         }</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBS_T_Request.Component.Invoke.PresentationAllowedIndicatorPresent) {</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   PresentationAllowed:%d\n&quot;</span>,</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;               fac-&gt;u.CCBS_T_Request.Component.Invoke.PresentationAllowedIndicator);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;         }</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCBS_T_Request.Component.Invoke.Originating.Party.LengthOfNumber) {</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   OriginatingAddress:\n&quot;</span>);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            print_facility_Address(3, &amp;fac-&gt;u.CCBS_T_Request.Component.Invoke.Originating, bc);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;         }</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: RetentionSupported:%d\n&quot;</span>,</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;            fac-&gt;u.CCBS_T_Request.Component.Result.RetentionSupported);</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;      }</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   <span class="keywordflow">case</span> Fac_CCNR_T_Request:</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CCNR_T_Request: InvokeID:%d\n&quot;</span>,</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;         fac-&gt;u.CCNR_T_Request.InvokeID);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <span class="keywordflow">switch</span> (fac-&gt;u.CCNR_T_Request.ComponentType) {</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;      <span class="keywordflow">case</span> FacComponent_Invoke:</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Invoke\n&quot;</span>);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   DestinationAddress:\n&quot;</span>);</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;         print_facility_Address(3, &amp;fac-&gt;u.CCNR_T_Request.Component.Invoke.Destination, bc);</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;         print_facility_Q931_Bc_Hlc_Llc(2, &amp;fac-&gt;u.CCNR_T_Request.Component.Invoke.Q931ie, bc);</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNR_T_Request.Component.Invoke.RetentionSupported) {</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   RetentionSupported:1\n&quot;</span>);</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;         }</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNR_T_Request.Component.Invoke.PresentationAllowedIndicatorPresent) {</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   PresentationAllowed:%d\n&quot;</span>,</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;               fac-&gt;u.CCNR_T_Request.Component.Invoke.PresentationAllowedIndicator);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;         }</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;         <span class="keywordflow">if</span> (fac-&gt;u.CCNR_T_Request.Component.Invoke.Originating.Party.LengthOfNumber) {</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;   OriginatingAddress:\n&quot;</span>);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;            print_facility_Address(3, &amp;fac-&gt;u.CCNR_T_Request.Component.Invoke.Originating, bc);</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;         }</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;      <span class="keywordflow">case</span> FacComponent_Result:</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt;  Result: RetentionSupported:%d\n&quot;</span>,</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;            fac-&gt;u.CCNR_T_Request.Component.Result.RetentionSupported);</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      }</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;   <span class="keywordflow">case</span> Fac_None:</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      <span class="comment">/* No facility so print nothing */</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; unknown facility\n&quot;</span>);</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;   }</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26630f293c5ce4c71389909fd5b97388"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26630f293c5ce4c71389909fd5b97388">&#9670;&nbsp;</a></span>process_ast_dsp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> * process_ast_dsp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>tmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07318">7318</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l07011">ast_async_goto()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00362">ast_channel_macrocontext()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_list::ast_dsp</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01494">ast_dsp_process()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_list::dsp</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00688">misdn_bchannel::ec_enable</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_list::faxdetect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00478">chan_list::faxhandled</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04462">isdn_lib_stop_dtmf()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04450">isdn_lib_update_ec()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04440">isdn_lib_update_rxgain()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04445">isdn_lib_update_txgain()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00100">MISDN_CFG_FAXDETECT_CONTEXT</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00714">misdn_bchannel::rxgain</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00708">misdn_bchannel::txgain</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07393">misdn_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;{</div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;      f = <a class="code" href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, frame);</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;No DSP-Path found\n&quot;</span>);</div><div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;   }</div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;</div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;   <span class="keywordflow">if</span> (!f || (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>)) {</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;      <span class="keywordflow">return</span> f;</div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;   }</div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;</div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Detected inband DTMF digit: %c\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <span class="charliteral">&#39;f&#39;</span>)) {</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;      <span class="comment">/* Fax tone -- Handle and return NULL */</span></div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;      <span class="keywordflow">if</span> (!tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97b2897a727afea71afc82d3eef8cbb8">faxhandled</a>) {</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;         tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a97b2897a727afea71afc82d3eef8cbb8">faxhandled</a>++;</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;Fax detected, preparing %s for fax transfer.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;         tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">rxgain</a> = 0;</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a24f360030ed342dce44792ae7541629b">isdn_lib_update_rxgain</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;         tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">txgain</a> = 0;</div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0e7e33031fca33e7d0bb916c424a8e12">isdn_lib_update_txgain</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;<span class="preprocessor">#ifdef MISDN_1_2</span></div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;         *tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;pipeline = 0;</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;         tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a> = 0;</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a44f15a2eb1d3bf690ba43f330382db84">isdn_lib_update_ec</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#add4f07db0191adc97a1a06cabd84a1b1">isdn_lib_stop_dtmf</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;         <span class="keywordflow">switch</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a>) {</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;         <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;            <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast), <span class="stringliteral">&quot;fax&quot;</span>)) {</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;               <span class="keywordtype">char</span> context_tmp[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;               <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa4b42c135859f0229b12066348cfcc97e">MISDN_CFG_FAXDETECT_CONTEXT</a>, &amp;context_tmp, <span class="keyword">sizeof</span>(context_tmp));</div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;               context = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(context_tmp, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(ast), <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast)));</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(ast, context, <span class="stringliteral">&quot;fax&quot;</span>, 1,</div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Redirecting %s to fax extension (context:%s)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), context);</div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;                  <span class="comment">/* Save the DID/DNIS when we transfer the fax call to a &quot;fax&quot; extension */</span></div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;                  <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ast,<span class="stringliteral">&quot;FAXEXTEN&quot;</span>,<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast));</div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(ast, context, <span class="stringliteral">&quot;fax&quot;</span>, 1)) {</div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to async goto &#39;%s&#39; into fax of &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast), context);</div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;                  }</div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Fax detected but no fax extension, context:%s exten:%s\n&quot;</span>, context, <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast));</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;               }</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Already in a fax extension, not redirecting\n&quot;</span>);</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;            }</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;         <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Not redirecting %s to fax extension, nojump is set.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(ast));</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;         }</div><div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Fax already handled\n&quot;</span>);</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;      }</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;   }</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;   <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a> &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> != <span class="charliteral">&#39;f&#39;</span>)) {</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, tmp-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; * SEND: DTMF (AST_DSP) :%c\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;   }</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac82ffb8db8fafdb375088f6580f47cb2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">chan_list::ast_dsp</a></div><div class="ttdeci">int ast_dsp</div><div class="ttdoc">TRUE if we will use the Asterisk DSP to detect DTMF/Fax. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_misdn.c:484</a></div></div>
<div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="dsp_8h_html_ab6387ee12a3544d3d2068db61d9576ad"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#ab6387ee12a3544d3d2068db61d9576ad">ast_dsp_process</a></div><div class="ttdeci">struct ast_frame * ast_dsp_process(struct ast_channel *chan, struct ast_dsp *dsp, struct ast_frame *inf)</div><div class="ttdoc">Return AST_FRAME_NULL frames when there is silence, AST_FRAME_BUSY on busies, and call progress...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01494">dsp.c:1494</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structchan__list_html_a55ee15076b418946e327a5ada52f808e"><div class="ttname"><a href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">chan_list::faxdetect</a></div><div class="ttdeci">int faxdetect</div><div class="ttdoc">Fax detection option. (0:no 1:yes 2:yes+nojump) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_misdn.c:461</a></div></div>
<div class="ttc" id="structchan__list_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">chan_list::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdoc">Allocated DSP controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_misdn.c:510</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a709429a6031e18717677d5254d38586f"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">misdn_bchannel::txgain</a></div><div class="ttdeci">int txgain</div><div class="ttdoc">Tx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00708">isdn_lib.h:708</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aeafef525b8bac4713c119b593780ca69"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">misdn_bchannel::ec_enable</a></div><div class="ttdeci">int ec_enable</div><div class="ttdoc">TRUE if the echo cancellor is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00688">isdn_lib.h:688</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa4b42c135859f0229b12066348cfcc97e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa4b42c135859f0229b12066348cfcc97e">MISDN_CFG_FAXDETECT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00100">chan_misdn_config.h:100</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a24f360030ed342dce44792ae7541629b"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a24f360030ed342dce44792ae7541629b">isdn_lib_update_rxgain</a></div><div class="ttdeci">void isdn_lib_update_rxgain(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04440">isdn_lib.c:4440</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0e7e33031fca33e7d0bb916c424a8e12"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0e7e33031fca33e7d0bb916c424a8e12">isdn_lib_update_txgain</a></div><div class="ttdeci">void isdn_lib_update_txgain(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04445">isdn_lib.c:4445</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a44f15a2eb1d3bf690ba43f330382db84"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a44f15a2eb1d3bf690ba43f330382db84">isdn_lib_update_ec</a></div><div class="ttdeci">void isdn_lib_update_ec(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04450">isdn_lib.c:4450</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a80d0395aae5582433d6b02af3f8c270a"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">misdn_bchannel::rxgain</a></div><div class="ttdeci">int rxgain</div><div class="ttdoc">Rx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00714">isdn_lib.h:714</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structchan__list_html_a97b2897a727afea71afc82d3eef8cbb8"><div class="ttname"><a href="../../df/d00/structchan__list.html#a97b2897a727afea71afc82d3eef8cbb8">chan_list::faxhandled</a></div><div class="ttdeci">int faxhandled</div><div class="ttdoc">TRUE if a fax has been detected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00478">chan_misdn.c:478</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="pbx_8h_html_ae0ba2eb966a9e3376de61d30513f7302"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a></div><div class="ttdeci">int ast_async_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdoc">Set the channel to next execute the specified dialplan location. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07011">pbx.c:7011</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_add4f07db0191adc97a1a06cabd84a1b1"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#add4f07db0191adc97a1a06cabd84a1b1">isdn_lib_stop_dtmf</a></div><div class="ttdeci">void isdn_lib_stop_dtmf(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04462">isdn_lib.c:4462</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_adf593d68a333075c1fcae8a73b68c069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a></div><div class="ttdeci">const char * ast_channel_macrocontext(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00362">channel_internal_api.c:362</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acac8a3f512ee09cfb5ed9283b66804eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac8a3f512ee09cfb5ed9283b66804eb">&#9670;&nbsp;</a></span>read_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">5922</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00381">chan_list::allowed_bearers</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00515">misdn_bchannel::AOCDtype</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01078">ast_channel_callgroup_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00348">ast_channel_context_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00357">ast_channel_exten_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01094">ast_channel_named_callgroups_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01103">ast_channel_named_pickupgroups_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01086">ast_channel_pickupgroup_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_list::ast_dsp</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01745">ast_dsp_new()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01755">ast_dsp_set_features()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08133">ast_print_group()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08158">ast_print_namedgroups()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../db/d09/func__realtime_8c_source.html#l00179">buf2</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">cid_name</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">cid_num</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05817">config_jitterbuffer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_list::context</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05853">debug_numtype()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00573">misdn_bchannel::display_connected</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00585">misdn_bchannel::display_setup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_list::dsp</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00028">DSP_FEATURE_DIGIT_DETECT</a>, <a class="el" href="../../d3/d08/dsp_8h_source.html#l00029">DSP_FEATURE_FAX_DETECT</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00449">misdn_bchannel::early_bconnect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00570">chan_list::far_alerting</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_list::faxdetect</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_list::faxdetect_timeout</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_list::ignore_dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00348">misdn_bchannel::incoming_cid_tag</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00432">chan_list::incoming_early_audio</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00177">INFO_CAPABILITY_DIGITAL_RESTRICTED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00176">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_list::jb_len</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_list::jb_upper_threshold</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00647">misdn_bchannel::keypad</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03424">misdn_add_number_prefix()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00032">MISDN_CFG_ALLOWED_BEARERS</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00065">MISDN_CFG_ASTDTMF</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00044">MISDN_CFG_CALLERID</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00090">MISDN_CFG_CALLGROUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00041">MISDN_CFG_CONTEXT</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00048">MISDN_CFG_DIALPLAN</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00059">MISDN_CFG_DISPLAY_CONNECTED</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00060">MISDN_CFG_DISPLAY_SETUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00067">MISDN_CFG_EARLY_BCONNECT</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00033">MISDN_CFG_FAR_ALERTING</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00099">MISDN_CFG_FAXDETECT</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00101">MISDN_CFG_FAXDETECT_TIMEOUT</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00040">MISDN_CFG_HDLC</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00045">MISDN_CFG_INCOMING_CALLERID_TAG</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00068">MISDN_CFG_INCOMING_EARLY_AUDIO</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00088">MISDN_CFG_JITTERBUFFER</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00089">MISDN_CFG_JITTERBUFFER_UPPER_THRESHOLD</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00042">MISDN_CFG_LANGUAGE</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00043">MISDN_CFG_MUSICCLASS</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00092">MISDN_CFG_NAMEDCALLGROUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00093">MISDN_CFG_NAMEDPICKUPGROUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00084">MISDN_CFG_NEED_MORE_INFOS</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00085">MISDN_CFG_NOAUTORESPOND_ON_SETUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00086">MISDN_CFG_NTTIMEOUT</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00071">MISDN_CFG_OUTGOING_COLP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00097">MISDN_CFG_OVERLAP_DIAL</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00091">MISDN_CFG_PICKUPGROUP</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00034">MISDN_CFG_RXGAIN</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00064">MISDN_CFG_SENDDTMF</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00036">MISDN_CFG_TE_CHOOSE_CHANNEL</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00035">MISDN_CFG_TXGAIN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00559">chan_list::mohinterpret</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00295">misdn_party_id::name</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00465">misdn_bchannel::need_more_infos</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_list::noautorespond_on_setup</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00576">chan_list::nttimeout</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00298">misdn_party_id::number</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00263">misdn_party_dialing::number_plan</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00285">misdn_party_id::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00260">misdn_party_dialing::number_type</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00094">NUMPLAN_ISDN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00594">misdn_bchannel::outgoing_colp</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_list::overlap_dial</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_list::overlap_dial_task</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_list::overlap_tv_lock</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00714">misdn_bchannel::rxgain</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00457">misdn_bchannel::send_dtmf</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00444">misdn_bchannel::te_choose_channel</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00708">misdn_bchannel::txgain</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05903">update_ec_config()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07855">misdn_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;{</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast;</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 0;</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;   <span class="keywordtype">char</span> lang[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;   <span class="keywordtype">char</span> faxdetect[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../db/d09/func__realtime_8c.html#a13d23fea305bed9188c360e245c5c9f1">buf2</a>[256];</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> pg;</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> cg;</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;   <span class="keyword">struct </span>ast_namedgroups *npg;</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;   <span class="keyword">struct </span>ast_namedgroups *ncg;</div><div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *tmp_str;</div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot configure without chanlist\n&quot;</span>);</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;   }</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;   ast = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;   bc = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;   <span class="keywordflow">if</span> (! ast || ! bc) {</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot configure without ast || bc\n&quot;</span>);</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;   }</div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;   port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot;read_config: Getting Config\n&quot;</span>);</div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;</div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa53656db2e4faebc5aa1430b3a5560e67">MISDN_CFG_LANGUAGE</a>, lang, <span class="keyword">sizeof</span>(lang));</div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;   ast_channel_language_set(ast, lang);</div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;</div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa0290565a9bb7788123e3146f947829e">MISDN_CFG_MUSICCLASS</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#af689da2b77d1265192a78a5b0994a1d5">mohinterpret</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#af689da2b77d1265192a78a5b0994a1d5">mohinterpret</a>));</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa79ed1457f88463d9b7f0a620edf91f87">MISDN_CFG_TXGAIN</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">txgain</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">txgain</a>));</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa28b6ec109ef1c2e3d2a4852e05eb286e">MISDN_CFG_RXGAIN</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">rxgain</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">rxgain</a>));</div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;</div><div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa78a5357e8af2a0d191436fdf12307467">MISDN_CFG_INCOMING_EARLY_AUDIO</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#adb84283db099b71dd2bba1f88b78dc43">incoming_early_audio</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#adb84283db099b71dd2bba1f88b78dc43">incoming_early_audio</a>));</div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;</div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa0397bab2056b56ac849cd042367a0095">MISDN_CFG_SENDDTMF</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">send_dtmf</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">send_dtmf</a>));</div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;</div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa5427637d0d273b717c2fc60cecbc1b84">MISDN_CFG_ASTDTMF</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>) {</div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">ignore_dtmf</a> = 1;</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;   }</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aacbfdbb8cf8eef2737b961cec237222c7">MISDN_CFG_NEED_MORE_INFOS</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ab7ab21c4af667d26899c1f22a4e6e920">need_more_infos</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ab7ab21c4af667d26899c1f22a4e6e920">need_more_infos</a>));</div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa7c0d9d71f6e4a3655befa6258ae2946f">MISDN_CFG_NTTIMEOUT</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab1a40897d0bbfed758b3e20cd0ef544f">nttimeout</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab1a40897d0bbfed758b3e20cd0ef544f">nttimeout</a>));</div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;</div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1df5fb282a4dbb040ebb269c05986cd3">MISDN_CFG_NOAUTORESPOND_ON_SETUP</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">noautorespond_on_setup</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">noautorespond_on_setup</a>));</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;</div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3378ea921d35f1a8db7c2e9d4b728ed1">MISDN_CFG_FAR_ALERTING</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a18ac918bce4ec022cf1316d031f78cff">far_alerting</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a18ac918bce4ec022cf1316d031f78cff">far_alerting</a>));</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa0fc9a3291b3570d7ae4ff6509e3c4175">MISDN_CFG_ALLOWED_BEARERS</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">allowed_bearers</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">allowed_bearers</a>));</div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;</div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa53619f42e92edd92884e70d99d8e1186">MISDN_CFG_FAXDETECT</a>, faxdetect, <span class="keyword">sizeof</span>(faxdetect));</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;</div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090">MISDN_CFG_HDLC</a>, &amp;hdlc, <span class="keyword">sizeof</span>(hdlc));</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;   <span class="keywordflow">if</span> (hdlc) {</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) {</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>:</div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c">INFO_CAPABILITY_DIGITAL_RESTRICTED</a>:</div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CONF HDLC\n&quot;</span>);</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 1;</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;      }</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;</div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;   }</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;   <span class="comment">/*Initialize new Jitterbuffer*/</span></div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3c28851e02fb60880920790680261893">MISDN_CFG_JITTERBUFFER</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">jb_len</a>));</div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1b2e7b752d2e02a1624c1e6505ff1731">MISDN_CFG_JITTERBUFFER_UPPER_THRESHOLD</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">jb_upper_threshold</a>));</div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;</div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a908c29953e5e94cf4df5200fbc4ca11f">config_jitterbuffer</a>(ch);</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;</div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabaf5dd0190bcf5e7f1eb97eabdda2825">MISDN_CFG_CONTEXT</a>, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>));</div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;</div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(ast, ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;</div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;<span class="preprocessor">#ifdef MISDN_1_2</span></div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;   update_pipeline_config(bc);</div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a870ab6bac01ce35f615fbfe7386f8319">update_ec_config</a>(bc);</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab3dacbcbc41e2fff5e8acd8354ca4cec">MISDN_CFG_EARLY_BCONNECT</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0069ce490efd72751c789525317e2cf4">early_bconnect</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a0069ce490efd72751c789525317e2cf4">early_bconnect</a>));</div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa44f88257ad94a1be7ad9f6477aaed6ee">MISDN_CFG_DISPLAY_CONNECTED</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7f7a3d3eea2b401d4a2976052da16baf">display_connected</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a7f7a3d3eea2b401d4a2976052da16baf">display_connected</a>));</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa30c9f510f5f55c5a5e64aa1dd1eeac9a">MISDN_CFG_DISPLAY_SETUP</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a45e281e7e417db8c791b593c9f27644c">display_setup</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a45e281e7e417db8c791b593c9f27644c">display_setup</a>));</div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c47732b4bd4052162158bdf0c09b83c">MISDN_CFG_OUTGOING_COLP</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">outgoing_colp</a>));</div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;</div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab62334d4fb963a1d96603915248fcfbf">MISDN_CFG_PICKUPGROUP</a>, &amp;pg, <span class="keyword">sizeof</span>(pg));</div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa92d27e8d3511f9715ba7c9b20a49e44">MISDN_CFG_CALLGROUP</a>, &amp;cg, <span class="keyword">sizeof</span>(cg));</div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, port, <span class="stringliteral">&quot; --&gt; * CallGrp:%s PickupGrp:%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a092d4e67b0bda0f99b02a1534ee75408">ast_print_group</a>(buf, <span class="keyword">sizeof</span>(buf), cg), <a class="code" href="../../d5/d7b/channel_8h.html#a092d4e67b0bda0f99b02a1534ee75408">ast_print_group</a>(buf2, <span class="keyword">sizeof</span>(buf2), pg));</div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a>(ast, pg);</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a>(ast, cg);</div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad6c90334c66e2d1884aa24461acb1084">MISDN_CFG_NAMEDPICKUPGROUP</a>, &amp;npg, <span class="keyword">sizeof</span>(npg));</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa6a1c6054e457473534302abbbb51a40">MISDN_CFG_NAMEDCALLGROUP</a>, &amp;ncg, <span class="keyword">sizeof</span>(ncg));</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;   tmp_str = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;   <span class="keywordflow">if</span> (tmp_str) {</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, port, <span class="stringliteral">&quot; --&gt; * NamedCallGrp:%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a37b17bdab87cd5278435ccb62f2414da">ast_print_namedgroups</a>(&amp;tmp_str, ncg));</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(tmp_str);</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, port, <span class="stringliteral">&quot; --&gt; * NamedPickupGrp:%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a37b17bdab87cd5278435ccb62f2414da">ast_print_namedgroups</a>(&amp;tmp_str, npg));</div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmp_str);</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;   }</div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a>(ast, npg);</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a>(ast, ncg);</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>) {</div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;      <span class="keywordtype">char</span> callerid[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a> + 1];</div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;</div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;      <span class="comment">/* ORIGINATOR Asterisk (outgoing call) */</span></div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;</div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa51fc893ce032204f67eb70f7d6149c69">MISDN_CFG_TE_CHOOSE_CHANNEL</a>, &amp;(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae822c229e6877cf2310db8e68f733611">te_choose_channel</a>), <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae822c229e6877cf2310db8e68f733611">te_choose_channel</a>));</div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;</div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;      <span class="keywordflow">if</span> (strstr(faxdetect, <span class="stringliteral">&quot;outgoing&quot;</span>) || strstr(faxdetect, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> = strstr(faxdetect, <span class="stringliteral">&quot;nojump&quot;</span>) ? 2 : 1;</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;      }</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa04f72918b990207c9b90096462bd6de">MISDN_CFG_CALLERID</a>, callerid, <span class="keyword">sizeof</span>(callerid));</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(callerid)) {</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;</div><div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;         <a class="code" href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a>(callerid, &amp;cid_name, &amp;cid_num);</div><div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;         <span class="keywordflow">if</span> (cid_name) {</div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>, cid_name, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>));</div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;         }</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;         <span class="keywordflow">if</span> (cid_num) {</div><div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, cid_num, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;            bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;         }</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot; --&gt; * Setting caller to \&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">name</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;      }</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;</div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa6beababcb69d8c4125f07df481846ba4">MISDN_CFG_DIALPLAN</a>, &amp;bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>));</div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">number_plan</a> = <a class="code" href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a>;</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a>(port, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, <span class="stringliteral">&quot;TON&quot;</span>);</div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a> = 0;</div><div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;      <span class="comment">/* ORIGINATOR MISDN (incoming call) */</span></div><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;</div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;      <span class="keywordflow">if</span> (strstr(faxdetect, <span class="stringliteral">&quot;incoming&quot;</span>) || strstr(faxdetect, <span class="stringliteral">&quot;both&quot;</span>)) {</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> = (strstr(faxdetect, <span class="stringliteral">&quot;nojump&quot;</span>)) ? 2 : 1;</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;      }</div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;      <span class="comment">/* Add configured prefix to caller.number */</span></div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;</div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>)) {</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">keypad</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;      }</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;      <span class="comment">/* Add configured prefix to dialed.number */</span></div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">number_type</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>));</div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(ast, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>);</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;</div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa7bd1c1cdde2e3cfe2a2dbf0707fdc2c2">MISDN_CFG_OVERLAP_DIAL</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">overlap_dial</a>));</div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">overlap_tv_lock</a>);</div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;   } <span class="comment">/* ORIG MISDN END */</span></div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;</div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2fcbccded2f0759f18778074d1bc3658">MISDN_CFG_INCOMING_CALLERID_TAG</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>, <span class="keyword">sizeof</span>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>));</div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>)) {</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, port, <span class="stringliteral">&quot; --&gt; * Setting incoming caller id tag to \&quot;%s\&quot;\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">incoming_cid_tag</a>);</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;   }</div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">overlap_dial_task</a> = -1;</div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a>  || ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">ast_dsp</a>) {</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;      <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63">MISDN_CFG_FAXDETECT_TIMEOUT</a>, &amp;ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>, <span class="keyword">sizeof</span>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">faxdetect_timeout</a>));</div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;         ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a> = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>();</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;      }</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>) {</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;         <a class="code" href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a>(ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">dsp</a>, <a class="code" href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a> | (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">faxdetect</a> ? <a class="code" href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a> : 0));</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;      }</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;   }</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;   <span class="comment">/* AOCD initialization */</span></div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;   bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">AOCDtype</a> = Fac_None;</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac82ffb8db8fafdb375088f6580f47cb2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac82ffb8db8fafdb375088f6580f47cb2">chan_list::ast_dsp</a></div><div class="ttdeci">int ast_dsp</div><div class="ttdoc">TRUE if we will use the Asterisk DSP to detect DTMF/Fax. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00484">chan_misdn.c:484</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa53619f42e92edd92884e70d99d8e1186"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa53619f42e92edd92884e70d99d8e1186">MISDN_CFG_FAXDETECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00099">chan_misdn_config.h:99</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa7bd1c1cdde2e3cfe2a2dbf0707fdc2c2"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa7bd1c1cdde2e3cfe2a2dbf0707fdc2c2">MISDN_CFG_OVERLAP_DIAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00097">chan_misdn_config.h:97</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="channel_8h_html_a641d81d0c5c8df99d43eff69aede3bfd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a></div><div class="ttdeci">unsigned long long ast_group_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00214">channel.h:214</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a3030517292a60e045b7aeedc419ad180"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a3030517292a60e045b7aeedc419ad180">misdn_bchannel::keypad</a></div><div class="ttdeci">char keypad[MISDN_MAX_KEYPAD_LEN]</div><div class="ttdoc">Q.931 Keypad Facility IE contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00647">isdn_lib.h:647</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa9c47732b4bd4052162158bdf0c09b83c"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9c47732b4bd4052162158bdf0c09b83c">MISDN_CFG_OUTGOING_COLP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00071">chan_misdn_config.h:71</a></div></div>
<div class="ttc" id="channel_8h_html_ae9542942f37422e284dd5c8a3fa7c7b6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae9542942f37422e284dd5c8a3fa7c7b6">ast_channel_pickupgroup_set</a></div><div class="ttdeci">void ast_channel_pickupgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01086">channel_internal_api.c:1086</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a45e281e7e417db8c791b593c9f27644c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a45e281e7e417db8c791b593c9f27644c">misdn_bchannel::display_setup</a></div><div class="ttdeci">int display_setup</div><div class="ttdoc">Put a display ie in the SETUP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00585">isdn_lib.h:585</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structchan__list_html_a07282113b825722384e367076e68795f"><div class="ttname"><a href="../../df/d00/structchan__list.html#a07282113b825722384e367076e68795f">chan_list::jb_len</a></div><div class="ttdeci">int jb_len</div><div class="ttdoc">Jitterbuffer length. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00490">chan_misdn.c:490</a></div></div>
<div class="ttc" id="structchan__list_html_a55ee15076b418946e327a5ada52f808e"><div class="ttname"><a href="../../df/d00/structchan__list.html#a55ee15076b418946e327a5ada52f808e">chan_list::faxdetect</a></div><div class="ttdeci">int faxdetect</div><div class="ttdoc">Fax detection option. (0:no 1:yes 2:yes+nojump) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00461">chan_misdn.c:461</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a7915b63b76329bbf4c3f434841a8bf41"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a7915b63b76329bbf4c3f434841a8bf41">debug_numtype</a></div><div class="ttdeci">void debug_numtype(int port, int numtype, char *type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05853">chan_misdn.c:5853</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa6beababcb69d8c4125f07df481846ba4"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa6beababcb69d8c4125f07df481846ba4">MISDN_CFG_DIALPLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00048">chan_misdn_config.h:48</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_id::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Phone number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00298">isdn_lib.h:298</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa0290565a9bb7788123e3146f947829e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa0290565a9bb7788123e3146f947829e">MISDN_CFG_MUSICCLASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00043">chan_misdn_config.h:43</a></div></div>
<div class="ttc" id="structchan__list_html_ab9deccb020b39c3f7ac94b1af99cac5d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab9deccb020b39c3f7ac94b1af99cac5d">chan_list::dsp</a></div><div class="ttdeci">struct ast_dsp * dsp</div><div class="ttdoc">Allocated DSP controller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00510">chan_misdn.c:510</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aab3dacbcbc41e2fff5e8acd8354ca4cec"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab3dacbcbc41e2fff5e8acd8354ca4cec">MISDN_CFG_EARLY_BCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00067">chan_misdn_config.h:67</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa1b2e7b752d2e02a1624c1e6505ff1731"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1b2e7b752d2e02a1624c1e6505ff1731">MISDN_CFG_JITTERBUFFER_UPPER_THRESHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00089">chan_misdn_config.h:89</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa28b6ec109ef1c2e3d2a4852e05eb286e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa28b6ec109ef1c2e3d2a4852e05eb286e">MISDN_CFG_RXGAIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00034">chan_misdn_config.h:34</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a709429a6031e18717677d5254d38586f"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a709429a6031e18717677d5254d38586f">misdn_bchannel::txgain</a></div><div class="ttdeci">int txgain</div><div class="ttdoc">Tx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00708">isdn_lib.h:708</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ae28caf1e05f165a0c6016a2fafba615e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ae28caf1e05f165a0c6016a2fafba615e">misdn_bchannel::AOCDtype</a></div><div class="ttdeci">enum FacFunction AOCDtype</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00515">isdn_lib.h:515</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00176">isdn_lib.h:176</a></div></div>
<div class="ttc" id="structchan__list_html_aa8664ec2550c16483dbb615fa28a6a10"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa8664ec2550c16483dbb615fa28a6a10">chan_list::ignore_dtmf</a></div><div class="ttdeci">int ignore_dtmf</div><div class="ttdoc">TRUE if DTMF digits are to be passed inband only. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00438">chan_misdn.c:438</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa5427637d0d273b717c2fc60cecbc1b84"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa5427637d0d273b717c2fc60cecbc1b84">MISDN_CFG_ASTDTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00065">chan_misdn_config.h:65</a></div></div>
<div class="ttc" id="dsp_8h_html_a84818b360426bdd5f588cdca463e15be"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a84818b360426bdd5f588cdca463e15be">DSP_FEATURE_DIGIT_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00028">dsp.h:28</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa44f88257ad94a1be7ad9f6477aaed6ee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa44f88257ad94a1be7ad9f6477aaed6ee">MISDN_CFG_DISPLAY_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00059">chan_misdn_config.h:59</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa6a1c6054e457473534302abbbb51a40"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa6a1c6054e457473534302abbbb51a40">MISDN_CFG_NAMEDCALLGROUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00092">chan_misdn_config.h:92</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a6fcf0e0104e3ee88f0944544207a2b03"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a6fcf0e0104e3ee88f0944544207a2b03">misdn_bchannel::incoming_cid_tag</a></div><div class="ttdeci">char incoming_cid_tag[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Incoming Caller ID string tag for special purpose. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00348">isdn_lib.h:348</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa04f72918b990207c9b90096462bd6de"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa04f72918b990207c9b90096462bd6de">MISDN_CFG_CALLERID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00044">chan_misdn_config.h:44</a></div></div>
<div class="ttc" id="structchan__list_html_ab3f309860ee36512bc8bba783df26b1c"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3f309860ee36512bc8bba783df26b1c">chan_list::faxdetect_timeout</a></div><div class="ttdeci">int faxdetect_timeout</div><div class="ttdoc">Number of seconds to detect a Fax machine when detection enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00468">chan_misdn.c:468</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="structchan__list_html_a2cbe6476569972d16740b7ee7e4273a9"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2cbe6476569972d16740b7ee7e4273a9">chan_list::jb_upper_threshold</a></div><div class="ttdeci">int jb_upper_threshold</div><div class="ttdoc">Jitterbuffer upper threshold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00496">chan_misdn.c:496</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a54d4a7ef01a4074469ac37421f843333"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a54d4a7ef01a4074469ac37421f843333">misdn_bchannel::outgoing_colp</a></div><div class="ttdeci">int outgoing_colp</div><div class="ttdoc">Select what to do with outgoing COLP information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00594">isdn_lib.h:594</a></div></div>
<div class="ttc" id="channel_8h_html_a9824ec754695fd10c2ad3ca929afba34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9824ec754695fd10c2ad3ca929afba34">ast_channel_callgroup_set</a></div><div class="ttdeci">void ast_channel_callgroup_set(struct ast_channel *chan, ast_group_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01078">channel_internal_api.c:1078</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a908c29953e5e94cf4df5200fbc4ca11f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a908c29953e5e94cf4df5200fbc4ca11f">config_jitterbuffer</a></div><div class="ttdeci">static void config_jitterbuffer(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05817">chan_misdn.c:5817</a></div></div>
<div class="ttc" id="channel_8h_html_a0d78cf79bf535beab2c8928f68632c2e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a></div><div class="ttdeci">void ast_channel_named_pickupgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01103">channel_internal_api.c:1103</a></div></div>
<div class="ttc" id="func__realtime_8c_html_a13d23fea305bed9188c360e245c5c9f1"><div class="ttname"><a href="../../db/d09/func__realtime_8c.html#a13d23fea305bed9188c360e245c5c9f1">buf2</a></div><div class="ttdeci">static struct ast_threadstorage buf2</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d09/func__realtime_8c_source.html#l00179">func_realtime.c:179</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa30c9f510f5f55c5a5e64aa1dd1eeac9a"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa30c9f510f5f55c5a5e64aa1dd1eeac9a">MISDN_CFG_DISPLAY_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00060">chan_misdn_config.h:60</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structchan__list_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac25ea00ee3f082df06e0cf468cbde240">chan_list::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdoc">Incoming call dialplan context identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00553">chan_misdn.c:553</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aab62334d4fb963a1d96603915248fcfbf"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aab62334d4fb963a1d96603915248fcfbf">MISDN_CFG_PICKUPGROUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00091">chan_misdn_config.h:91</a></div></div>
<div class="ttc" id="structchan__list_html_af689da2b77d1265192a78a5b0994a1d5"><div class="ttname"><a href="../../df/d00/structchan__list.html#af689da2b77d1265192a78a5b0994a1d5">chan_list::mohinterpret</a></div><div class="ttdeci">char mohinterpret[MAX_MUSICCLASS]</div><div class="ttdoc">The configured music-on-hold class to use for this call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00559">chan_misdn.c:559</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa0397bab2056b56ac849cd042367a0095"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa0397bab2056b56ac849cd042367a0095">MISDN_CFG_SENDDTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00064">chan_misdn_config.h:64</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="channel_8h_html_a092d4e67b0bda0f99b02a1534ee75408"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a092d4e67b0bda0f99b02a1534ee75408">ast_print_group</a></div><div class="ttdeci">char * ast_print_group(char *buf, int buflen, ast_group_t group)</div><div class="ttdoc">Print call and pickup groups into buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08133">channel.c:8133</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa53656db2e4faebc5aa1430b3a5560e67"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa53656db2e4faebc5aa1430b3a5560e67">MISDN_CFG_LANGUAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00042">chan_misdn_config.h:42</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aacbfdbb8cf8eef2737b961cec237222c7"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aacbfdbb8cf8eef2737b961cec237222c7">MISDN_CFG_NEED_MORE_INFOS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00084">chan_misdn_config.h:84</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa2fcbccded2f0759f18778074d1bc3658"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa2fcbccded2f0759f18778074d1bc3658">MISDN_CFG_INCOMING_CALLERID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00045">chan_misdn_config.h:45</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c">INFO_CAPABILITY_DIGITAL_RESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00177">isdn_lib.h:177</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa0fc9a3291b3570d7ae4ff6509e3c4175"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa0fc9a3291b3570d7ae4ff6509e3c4175">MISDN_CFG_ALLOWED_BEARERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00032">chan_misdn_config.h:32</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="structchan__list_html_a2732815e64648f2863e56c8fd7ce31df"><div class="ttname"><a href="../../df/d00/structchan__list.html#a2732815e64648f2863e56c8fd7ce31df">chan_list::overlap_dial_task</a></div><div class="ttdeci">int overlap_dial_task</div><div class="ttdoc">Overlap dialing timeout Task ID. -1 if not running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00593">chan_misdn.c:593</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_id::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00285">isdn_lib.h:285</a></div></div>
<div class="ttc" id="dsp_8h_html_a92045e8a8ad56b9b31d24db325fa95ab"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a92045e8a8ad56b9b31d24db325fa95ab">DSP_FEATURE_FAX_DETECT</a></div><div class="ttdeci">#define DSP_FEATURE_FAX_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00029">dsp.h:29</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a7f7a3d3eea2b401d4a2976052da16baf"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a7f7a3d3eea2b401d4a2976052da16baf">misdn_bchannel::display_connected</a></div><div class="ttdeci">int display_connected</div><div class="ttdoc">Put a display ie in the CONNECT message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00573">isdn_lib.h:573</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_aebd4bf4e67c28288344bd64cd1c97c29"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#aebd4bf4e67c28288344bd64cd1c97c29">misdn_party_id::name</a></div><div class="ttdeci">char name[MISDN_MAX_NAME_LEN]</div><div class="ttdoc">Subscriber Name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00295">isdn_lib.h:295</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a80d0395aae5582433d6b02af3f8c270a"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a80d0395aae5582433d6b02af3f8c270a">misdn_bchannel::rxgain</a></div><div class="ttdeci">int rxgain</div><div class="ttdoc">Rx gain setting (range -8 to 8) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00714">isdn_lib.h:714</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa51fc893ce032204f67eb70f7d6149c69"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa51fc893ce032204f67eb70f7d6149c69">MISDN_CFG_TE_CHOOSE_CHANNEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00036">chan_misdn_config.h:36</a></div></div>
<div class="ttc" id="structchan__list_html_a18ac918bce4ec022cf1316d031f78cff"><div class="ttname"><a href="../../df/d00/structchan__list.html#a18ac918bce4ec022cf1316d031f78cff">chan_list::far_alerting</a></div><div class="ttdeci">int far_alerting</div><div class="ttdoc">TRUE if we must do the ringback tones. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00570">chan_misdn.c:570</a></div></div>
<div class="ttc" id="structchan__list_html_abafe63857d072be1db1c13acc5622741"><div class="ttname"><a href="../../df/d00/structchan__list.html#abafe63857d072be1db1c13acc5622741">chan_list::allowed_bearers</a></div><div class="ttdeci">char allowed_bearers[BUFFERSIZE+1]</div><div class="ttdoc">The &quot;allowed_bearers&quot; string read in from /etc/asterisk/misdn.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00381">chan_misdn.c:381</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a3f1dc38ab5e7685448ceb19bbad80f0d"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a3f1dc38ab5e7685448ceb19bbad80f0d">misdn_party_dialing::number_type</a></div><div class="ttdeci">enum mISDN_NUMBER_TYPE number_type</div><div class="ttdoc">Type-of-number in ISDN terms for the dialed/called number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00260">isdn_lib.h:260</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ac9bcceb1ecd44bcc1261b9314b1abcd9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ac9bcceb1ecd44bcc1261b9314b1abcd9">misdn_add_number_prefix</a></div><div class="ttdeci">static void misdn_add_number_prefix(int port, enum mISDN_NUMBER_TYPE number_type, char *number, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03424">chan_misdn.c:3424</a></div></div>
<div class="ttc" id="channel_8h_html_aac93557ad0a1e7bcf861c208e1d8fdc4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a></div><div class="ttdeci">void ast_channel_named_callgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01094">channel_internal_api.c:1094</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a1f467e7dfa18d05d423b9daff1b4e94c"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a1f467e7dfa18d05d423b9daff1b4e94c">misdn_bchannel::send_dtmf</a></div><div class="ttdeci">int send_dtmf</div><div class="ttdoc">TRUE if we should produce DTMF tones ourselves. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00457">isdn_lib.h:457</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa3c28851e02fb60880920790680261893"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3c28851e02fb60880920790680261893">MISDN_CFG_JITTERBUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00088">chan_misdn_config.h:88</a></div></div>
<div class="ttc" id="structchan__list_html_adb84283db099b71dd2bba1f88b78dc43"><div class="ttname"><a href="../../df/d00/structchan__list.html#adb84283db099b71dd2bba1f88b78dc43">chan_list::incoming_early_audio</a></div><div class="ttdeci">int incoming_early_audio</div><div class="ttdoc">TRUE if you want to send Tone Indications to an incoming ISDN channel on a TE Port. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00432">chan_misdn.c:432</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="structchan__list_html_a10319e9c46a8957e2931aed29eeb6f81"><div class="ttname"><a href="../../df/d00/structchan__list.html#a10319e9c46a8957e2931aed29eeb6f81">chan_list::overlap_tv_lock</a></div><div class="ttdeci">ast_mutex_t overlap_tv_lock</div><div class="ttdoc">overlap_tv access lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00598">chan_misdn.c:598</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa1df5fb282a4dbb040ebb269c05986cd3"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa1df5fb282a4dbb040ebb269c05986cd3">MISDN_CFG_NOAUTORESPOND_ON_SETUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00085">chan_misdn_config.h:85</a></div></div>
<div class="ttc" id="dsp_8h_html_aedc7fa20fba91e3c018f6989e95c714b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aedc7fa20fba91e3c018f6989e95c714b">ast_dsp_set_features</a></div><div class="ttdeci">void ast_dsp_set_features(struct ast_dsp *dsp, int features)</div><div class="ttdoc">Select feature set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01755">dsp.c:1755</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa7c0d9d71f6e4a3655befa6258ae2946f"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa7c0d9d71f6e4a3655befa6258ae2946f">MISDN_CFG_NTTIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00086">chan_misdn_config.h:86</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa3378ea921d35f1a8db7c2e9d4b728ed1"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3378ea921d35f1a8db7c2e9d4b728ed1">MISDN_CFG_FAR_ALERTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00033">chan_misdn_config.h:33</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aad6c90334c66e2d1884aa24461acb1084"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad6c90334c66e2d1884aa24461acb1084">MISDN_CFG_NAMEDPICKUPGROUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00093">chan_misdn_config.h:93</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a870ab6bac01ce35f615fbfe7386f8319"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a870ab6bac01ce35f615fbfe7386f8319">update_ec_config</a></div><div class="ttdeci">static int update_ec_config(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05903">chan_misdn.c:5903</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aabaf5dd0190bcf5e7f1eb97eabdda2825"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabaf5dd0190bcf5e7f1eb97eabdda2825">MISDN_CFG_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00041">chan_misdn_config.h:41</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ab7ab21c4af667d26899c1f22a4e6e920"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ab7ab21c4af667d26899c1f22a4e6e920">misdn_bchannel::need_more_infos</a></div><div class="ttdeci">int need_more_infos</div><div class="ttdoc">TRUE if we send SETUP_ACKNOWLEDGE on incoming calls anyway (instead of PROCEEDING). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00465">isdn_lib.h:465</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac92e09a838eac6984d79fe4a762c7c63">MISDN_CFG_FAXDETECT_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00101">chan_misdn_config.h:101</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aae0adf4b80e71ed76a2019d8c9fad567a69cffb984b677db2b979462fb12766e4">NUMPLAN_ISDN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00094">isdn_lib.h:94</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaa92d27e8d3511f9715ba7c9b20a49e44"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaa92d27e8d3511f9715ba7c9b20a49e44">MISDN_CFG_CALLGROUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00090">chan_misdn_config.h:90</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ae822c229e6877cf2310db8e68f733611"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ae822c229e6877cf2310db8e68f733611">misdn_bchannel::te_choose_channel</a></div><div class="ttdeci">int te_choose_channel</div><div class="ttdoc">TRUE if the TE side should choose the B channel to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00444">isdn_lib.h:444</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa79ed1457f88463d9b7f0a620edf91f87"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa79ed1457f88463d9b7f0a620edf91f87">MISDN_CFG_TXGAIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00035">chan_misdn_config.h:35</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090">MISDN_CFG_HDLC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00040">chan_misdn_config.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a37b17bdab87cd5278435ccb62f2414da"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a37b17bdab87cd5278435ccb62f2414da">ast_print_namedgroups</a></div><div class="ttdeci">char * ast_print_namedgroups(struct ast_str **buf, struct ast_namedgroups *groups)</div><div class="ttdoc">Print named call groups and named pickup groups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08158">channel.c:8158</a></div></div>
<div class="ttc" id="structchan__list_html_a01dcdeb372a388f2081495b58e69d280"><div class="ttname"><a href="../../df/d00/structchan__list.html#a01dcdeb372a388f2081495b58e69d280">chan_list::overlap_dial</a></div><div class="ttdeci">int overlap_dial</div><div class="ttdoc">Enables overlap dialing for the set amount of seconds. (0 = Disabled) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00588">chan_misdn.c:588</a></div></div>
<div class="ttc" id="structchan__list_html_ae9d7293e857cb31edd7bd53b68ffb39d"><div class="ttname"><a href="../../df/d00/structchan__list.html#ae9d7293e857cb31edd7bd53b68ffb39d">chan_list::noautorespond_on_setup</a></div><div class="ttdeci">int noautorespond_on_setup</div><div class="ttdoc">TRUE of we are not to respond immediately to a SETUP message. Check the dialplan first. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00413">chan_misdn.c:413</a></div></div>
<div class="ttc" id="structmisdn__party__dialing_html_a7702c5efe5017498eebdc711588af310"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a7702c5efe5017498eebdc711588af310">misdn_party_dialing::number_plan</a></div><div class="ttdeci">enum mISDN_NUMBER_PLAN number_plan</div><div class="ttdoc">Type-of-number numbering plan. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00263">isdn_lib.h:263</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa78a5357e8af2a0d191436fdf12307467"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa78a5357e8af2a0d191436fdf12307467">MISDN_CFG_INCOMING_EARLY_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00068">chan_misdn_config.h:68</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a0069ce490efd72751c789525317e2cf4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a0069ce490efd72751c789525317e2cf4">misdn_bchannel::early_bconnect</a></div><div class="ttdeci">int early_bconnect</div><div class="ttdoc">TRUE if the call progress indicators can indicate an inband audio message for the user to listen to...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00449">isdn_lib.h:449</a></div></div>
<div class="ttc" id="callerid_8h_html_a39e03ca4e8df3a1d2c75e888d76201df"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a39e03ca4e8df3a1d2c75e888d76201df">ast_callerid_parse</a></div><div class="ttdeci">int ast_callerid_parse(char *instr, char **name, char **location)</div><div class="ttdoc">Destructively parse inbuf into name and location (or number) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd5/callerid_8c_source.html#l01008">callerid.c:1008</a></div></div>
<div class="ttc" id="structchan__list_html_ab1a40897d0bbfed758b3e20cd0ef544f"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab1a40897d0bbfed758b3e20cd0ef544f">chan_list::nttimeout</a></div><div class="ttdeci">int nttimeout</div><div class="ttdoc">TRUE if NT should disconnect an overlap dialing call when a timeout occurs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00576">chan_misdn.c:576</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1d529cc11090d7d2009e5cde3188ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d529cc11090d7d2009e5cde3188ac7">&#9670;&nbsp;</a></span>release_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void release_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08495">8495</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02947">ast_channel_trylock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08398">cl_dequeue_chan()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00374">DEADLOCK_AVOIDANCE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00399">misdn_bchannel::l3_id</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00684">MISDN_ASTERISK_TECH_PVT_SET</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00339">MISDN_CLEANING</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;{</div><div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast;</div><div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;</div><div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(5, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;release_chan: bc with pid:%d l3id: %x\n&quot;</span>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">l3_id</a>);</div><div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;</div><div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;      ast = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;      <span class="keywordflow">if</span> (!ast || !<a class="code" href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a>(ast)) {</div><div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;      }</div><div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;   }</div><div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0b57a38a097758231e9e04be29a7572f">cl_dequeue_chan</a>(ch)) {</div><div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;      <span class="comment">/* Someone already released it. */</span></div><div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;      <span class="keywordflow">if</span> (ast) {</div><div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;      }</div><div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;   }</div><div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>;</div><div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;   <span class="keywordflow">if</span> (ast) {</div><div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ast_ch;</div><div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;</div><div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;      ast_ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast);</div><div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;         <span class="stringliteral">&quot;* RELEASING CHANNEL pid:%d context:%s dialed:%s caller:\&quot;%s\&quot; &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a>,</div><div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(ast),</div><div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(ast),</div><div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;</div><div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>) {</div><div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; Setting AST State to down\n&quot;</span>);</div><div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;      }</div><div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;      <span class="keywordflow">if</span> (ast_ch) {</div><div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ast_ch, <span class="stringliteral">&quot;Release ast_channel reference.&quot;</span>);</div><div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;      }</div><div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;   }</div><div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;</div><div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>) {</div><div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;      --<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>];</div><div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;      --<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>];</div><div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;   }</div><div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;</div><div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="lock_8h_html_a851106e971b4611a38cb4be8b39d9fcf"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a></div><div class="ttdeci">#define DEADLOCK_AVOIDANCE(lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00374">lock.h:374</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0b57a38a097758231e9e04be29a7572f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0b57a38a097758231e9e04be29a7572f">cl_dequeue_chan</a></div><div class="ttdeci">static int cl_dequeue_chan(struct chan_list *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08398">chan_misdn.c:8398</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aac56f2c53779cee00e7f7e98d773b82c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a></div><div class="ttdeci">static ast_mutex_t release_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00323">chan_misdn.c:323</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a33084d9452c895d2cdc1364e28902a9f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT_SET(ast, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00684">chan_misdn.c:684</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
<div class="ttc" id="channel_8h_html_a7dc0d696d897c864c6f41a3a1795c82e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a></div><div class="ttdeci">#define ast_channel_trylock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02947">channel.h:2947</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a2a616bc0b9f450c55ea28ea3a5c9e8e4"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a2a616bc0b9f450c55ea28ea3a5c9e8e4">misdn_bchannel::l3_id</a></div><div class="ttdeci">int l3_id</div><div class="ttdoc">Layer 3 process ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00399">isdn_lib.h:399</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abef41ea6eea90bfde80023e7f2cd8bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abef41ea6eea90bfde80023e7f2cd8bbb">&#9670;&nbsp;</a></span>release_chan_early()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void release_chan_early </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08561">8561</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02947">ast_channel_trylock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07486">ast_setstate()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00037">AST_STATE_RESERVED</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_list_unref</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08398">cl_dequeue_chan()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00374">DEADLOCK_AVOIDANCE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_list::hold</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00683">MISDN_ASTERISK_TECH_PVT</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00684">MISDN_ASTERISK_TECH_PVT_SET</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00339">MISDN_CLEANING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00348">MISDN_HOLD_IDLE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00343">ORG_AST</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_list::originator</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00362">hold_info::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00357">hold_info::state</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;{</div><div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast;</div><div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;</div><div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;      ast = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;      <span class="keywordflow">if</span> (!ast || !<a class="code" href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a>(ast)) {</div><div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;      }</div><div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;   }</div><div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0b57a38a097758231e9e04be29a7572f">cl_dequeue_chan</a>(ch)) {</div><div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;      <span class="comment">/* Someone already released it. */</span></div><div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;      <span class="keywordflow">if</span> (ast) {</div><div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;      }</div><div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;   }</div><div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a>;</div><div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;   <span class="keywordflow">if</span> (ast) {</div><div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d00/structchan__list.html">chan_list</a> *ast_ch;</div><div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;</div><div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;      ast_ch = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a>(ast);</div><div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a>(ast, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;</div><div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(ast) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>) {</div><div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;         <a class="code" href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a>(ast, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>);</div><div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;      }</div><div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;      <span class="keywordflow">if</span> (ast_ch) {</div><div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a>(ast_ch, <span class="stringliteral">&quot;Release ast_channel reference.&quot;</span>);</div><div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;      }</div><div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;   }</div><div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;</div><div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;   <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">state</a> != <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a>) {</div><div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;      <span class="keywordflow">if</span> (ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">originator</a> == <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a>) {</div><div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;         --<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>[ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>];</div><div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;         --<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>[ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">hold</a>.<a class="code" href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">port</a>];</div><div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;      }</div><div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;   }</div><div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;</div><div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a>);</div><div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2d70165673a49458ad6e7cd17dc705dbaa03455548d1fbcf1b8f2cf997c18d81e">MISDN_HOLD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00348">chan_misdn.c:348</a></div></div>
<div class="ttc" id="lock_8h_html_a851106e971b4611a38cb4be8b39d9fcf"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a851106e971b4611a38cb4be8b39d9fcf">DEADLOCK_AVOIDANCE</a></div><div class="ttdeci">#define DEADLOCK_AVOIDANCE(lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00374">lock.h:374</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0b57a38a097758231e9e04be29a7572f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0b57a38a097758231e9e04be29a7572f">cl_dequeue_chan</a></div><div class="ttdeci">static int cl_dequeue_chan(struct chan_list *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08398">chan_misdn.c:8398</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="structchan__list_html_a33f37fd335fc40369158ca58459611ce"><div class="ttname"><a href="../../df/d00/structchan__list.html#a33f37fd335fc40369158ca58459611ce">chan_list::hold</a></div><div class="ttdeci">struct hold_info hold</div><div class="ttdoc">HELD channel call information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00535">chan_misdn.c:535</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0c4dc54929d9b029eb498a340c1241c7"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0c4dc54929d9b029eb498a340c1241c7">MISDN_ASTERISK_TECH_PVT</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT(ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00683">chan_misdn.c:683</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aac56f2c53779cee00e7f7e98d773b82c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aac56f2c53779cee00e7f7e98d773b82c">release_lock</a></div><div class="ttdeci">static ast_mutex_t release_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00323">chan_misdn.c:323</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a33084d9452c895d2cdc1364e28902a9f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a33084d9452c895d2cdc1364e28902a9f">MISDN_ASTERISK_TECH_PVT_SET</a></div><div class="ttdeci">#define MISDN_ASTERISK_TECH_PVT_SET(ast, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00684">chan_misdn.c:684</a></div></div>
<div class="ttc" id="structhold__info_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a63c89c04d1feae07ca35558055155ffb">hold_info::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical port the channel call record is HELD on because the B channel is no longer associated...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00362">chan_misdn.c:362</a></div></div>
<div class="ttc" id="structchan__list_html_ab3aa8159b91c9e85b5821a6876f9dff0"><div class="ttname"><a href="../../df/d00/structchan__list.html#ab3aa8159b91c9e85b5821a6876f9dff0">chan_list::originator</a></div><div class="ttdeci">int originator</div><div class="ttdoc">Who originally created this channel. ORG_AST or ORG_MISDN. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00407">chan_misdn.c:407</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a032c9caf961e1e6a825e04a512a25990">MISDN_CLEANING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00339">chan_misdn.c:339</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structchan__list_html"><div class="ttname"><a href="../../df/d00/structchan__list.html">chan_list</a></div><div class="ttdoc">Channel call record structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00377">chan_misdn.c:377</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
<div class="ttc" id="structhold__info_html_a0d786ddfbe1fec06dba16d67b777f9a1"><div class="ttname"><a href="../../de/d5b/structhold__info.html#a0d786ddfbe1fec06dba16d67b777f9a1">hold_info::state</a></div><div class="ttdeci">enum misdn_hold_state state</div><div class="ttdoc">Call HOLD state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00357">chan_misdn.c:357</a></div></div>
<div class="ttc" id="channelstate_8h_html_ad9d8f7d9e228b5af98a7b40db9f06448"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#ad9d8f7d9e228b5af98a7b40db9f06448">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae29868fa62c0ec0c2e76cae1fa7a67f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae29868fa62c0ec0c2e76cae1fa7a67f6">ORG_AST</a></div><div class="ttdeci">#define ORG_AST</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00343">chan_misdn.c:343</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
<div class="ttc" id="channel_8h_html_a7dc0d696d897c864c6f41a3a1795c82e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a></div><div class="ttdeci">#define ast_channel_trylock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02947">channel.h:2947</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_af8e719b0d03a14ebbc97c8c06d7eb016"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#af8e719b0d03a14ebbc97c8c06d7eb016">chan_list_unref</a></div><div class="ttdeci">#define chan_list_unref(obj, debug)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00372">chan_misdn.c:372</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1982509765f4870f1f63412a53ea668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1982509765f4870f1f63412a53ea668">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">11538</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02390">ast_channel_datastore_add()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00769">ast_channel_tech()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00089">ast_datastore_alloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01266">AST_DEFINE_APP_ARGS_TYPE</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">ast_false()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00193">DATASTORE_INHERIT_FOREVER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00129">EVENT_REGISTER</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00073">ast_datastore::inheritance</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00070">MISDN_CFG_CC_REQUEST_RETENTION</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00065">misdn_lib_port_is_nt()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00077">misdn_make_dummy()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00677">misdn_bchannel::out_cause</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">priority</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00436">ptp</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l11539"></a><span class="lineno">11539</span>&#160;{</div><div class="line"><a name="l11540"></a><span class="lineno">11540</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a3cd5340b1a2a7103296105d029b8de50">reload_config</a>();</div><div class="line"><a name="l11541"></a><span class="lineno">11541</span>&#160;</div><div class="line"><a name="l11542"></a><span class="lineno">11542</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11543"></a><span class="lineno">11543</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a3cd5340b1a2a7103296105d029b8de50"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a3cd5340b1a2a7103296105d029b8de50">reload_config</a></div><div class="ttdeci">static void reload_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l04123">chan_misdn.c:4123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cd5340b1a2a7103296105d029b8de50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd5340b1a2a7103296105d029b8de50">&#9670;&nbsp;</a></span>reload_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reload_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">4123</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00629">free_robin_list()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00129">g_config_initialized</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00127">global_tracefile</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00696">max_ports</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01182">misdn_cfg_reload()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01113">misdn_cfg_update_ptp()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00110">MISDN_GEN_DEBUG</a>, and <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00111">MISDN_GEN_TRACEFILE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04144">handle_cli_misdn_reload()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;{</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;   <span class="keywordtype">int</span> i, cfg_debug;</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a>) {</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;chan_misdn is not initialized properly, still reloading ?\n&quot;</span>);</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;      return ;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   }</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a1fb654d1fbb5b25904cbab043016c887">free_robin_list</a>();</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af82466ea24146caeace6cdd5d7aba315">misdn_cfg_reload</a>();</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac2740a8103bd868c78d5f7f6c0985d6d">misdn_cfg_update_ptp</a>();</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3">MISDN_GEN_TRACEFILE</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a>));</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(0, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566">MISDN_GEN_DEBUG</a>, &amp;cfg_debug, <span class="keyword">sizeof</span>(cfg_debug));</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;   <span class="keywordflow">for</span> (i = 0;  i &lt;= <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a>; i++) {</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>[i] = cfg_debug;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>[i] = 0;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;   }</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aad989fee91500a3ca31db1f9c7ccda5f3">MISDN_GEN_TRACEFILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00111">chan_misdn_config.h:111</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af82466ea24146caeace6cdd5d7aba315"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af82466ea24146caeace6cdd5d7aba315">misdn_cfg_reload</a></div><div class="ttdeci">void misdn_cfg_reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01182">misdn_config.c:1182</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a24bb5f2898b28cecc69c86bb429f7517"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a24bb5f2898b28cecc69c86bb429f7517">max_ports</a></div><div class="ttdeci">static int max_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00696">chan_misdn.c:696</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a0fde55e91042b09488c4c1b522172a87"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a0fde55e91042b09488c4c1b522172a87">global_tracefile</a></div><div class="ttdeci">static char global_tracefile[BUFFERSIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00127">chan_misdn.c:127</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac2740a8103bd868c78d5f7f6c0985d6d"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac2740a8103bd868c78d5f7f6c0985d6d">misdn_cfg_update_ptp</a></div><div class="ttdeci">void misdn_cfg_update_ptp(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01113">misdn_config.c:1113</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a1fb654d1fbb5b25904cbab043016c887"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a1fb654d1fbb5b25904cbab043016c887">free_robin_list</a></div><div class="ttdeci">static void free_robin_list(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00629">chan_misdn.c:629</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2676e3da728326daba3532f859b33c75"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a></div><div class="ttdeci">static int g_config_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00129">chan_misdn.c:129</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aac641427d0a358649849911d5f0eb0566">MISDN_GEN_DEBUG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00110">chan_misdn_config.h:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb7c4bdc49a560ef361a1cba4b792ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7c4bdc49a560ef361a1cba4b792ef2">&#9670;&nbsp;</a></span>send_cause2ast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_cause2ast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>ast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if can hangup after calling. </td></tr>
    <tr><td class="paramname">0</td><td>if cannot hangup after calling. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08725">8725</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00110">AST_CAUSE_CALL_REJECTED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00114">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00099">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00098">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00111">AST_CAUSE_NUMBER_CHANGED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00097">AST_CAUSE_UNALLOCATED</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00106">AST_CAUSE_USER_BUSY</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01231">ast_queue_control()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00671">misdn_bchannel::cause</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00336">MISDN_BUSY</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_list::need_busy</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00402">misdn_bchannel::pid</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08447">hangup_chan()</a>.</p>
<div class="fragment"><div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;{</div><div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;   <span class="keywordtype">int</span> can_hangup;</div><div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;</div><div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;send_cause2ast: No Ast\n&quot;</span>);</div><div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;   }</div><div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;   <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;send_cause2ast: No BC\n&quot;</span>);</div><div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;   }</div><div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, 0, <span class="stringliteral">&quot;send_cause2ast: No Ch\n&quot;</span>);</div><div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;   }</div><div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;</div><div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(ast, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;</div><div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;   can_hangup = -1;</div><div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;   <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>) {</div><div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>:</div><div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a>:</div><div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>:</div><div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;   <span class="keywordflow">case</span> 4:  <span class="comment">/* Send special information tone */</span></div><div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a>:</div><div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>:</div><div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;      <span class="comment">/* Congestion Cases */</span></div><div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;<span class="comment">       * Not Queueing the Congestion anymore, since we want to hear</span></div><div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;<span class="comment">       * the inband message</span></div><div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;<span class="comment">      chan_misdn_log(1, bc ? bc-&gt;port : 0, &quot; --&gt; * SEND: Queue Congestion pid:%d\n&quot;, bc ? bc-&gt;pid : -1);</span></div><div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;<span class="comment">      ch-&gt;state = MISDN_BUSY;</span></div><div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;<span class="comment">      ast_queue_control(ast, AST_CONTROL_CONGESTION);</span></div><div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;</div><div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>:</div><div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>:</div><div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a>;</div><div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;</div><div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;      <span class="keywordflow">if</span> (!ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">need_busy</a>) {</div><div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc ? bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0, <span class="stringliteral">&quot;Queued busy already\n&quot;</span>);</div><div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;      }</div><div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;      ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">need_busy</a> = 0;</div><div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;</div><div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc ? bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> : 0, <span class="stringliteral">&quot; --&gt; * SEND: Queue Busy pid:%d\n&quot;</span>, bc ? bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">pid</a> : -1);</div><div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(ast, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>);</div><div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;</div><div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;      <span class="comment">/* The BUSY is likely to cause a hangup or the user needs to hear it. */</span></div><div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;      can_hangup = 0;</div><div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;   }</div><div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;   <span class="keywordflow">return</span> can_hangup;</div><div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;}</div><div class="ttc" id="structchan__list_html_ac0bf4083f9fee43b521e291685b6b0bf"><div class="ttname"><a href="../../df/d00/structchan__list.html#ac0bf4083f9fee43b521e291685b6b0bf">chan_list::need_busy</a></div><div class="ttdeci">int need_busy</div><div class="ttdoc">TRUE if we could send an AST_CONTROL_BUSY if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00402">chan_misdn.c:402</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="channel_8h_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame without payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="causes_8h_html_ac4b4141fb57b00f56083307b3e5fe9f8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_TRANSIT_NET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00098">causes.h:98</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="causes_8h_html_a51ccdf5c6aa26375323fd14cfef02618"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_DESTINATION_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00114">causes.h:114</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#af500917c052066b40cf47f96b43c607b">misdn_bchannel::pid</a></div><div class="ttdeci">int pid</div><div class="ttdoc">B channel process ID (1-5000) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00402">isdn_lib.h:402</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="causes_8h_html_a19c43722b8b1260faa56227e481479c6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a></div><div class="ttdeci">#define AST_CAUSE_NUMBER_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00111">causes.h:111</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5afab9e7bc560e0bdc8e89cbabbe78b012">MISDN_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00336">chan_misdn.c:336</a></div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa4d0ccb9d0904892652f2f258c5ad225">misdn_bchannel::cause</a></div><div class="ttdeci">int cause</div><div class="ttdoc">Q.931 Cause for disconnection code (received) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00671">isdn_lib.h:671</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a25f94996ca2c5032eb290f2eec5da9b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25f94996ca2c5032eb290f2eec5da9b7">&#9670;&nbsp;</a></span>send_digit_to_chan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_digit_to_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03681">3681</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">handle_cli_misdn_send_digit()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06915">misdn_digit_end()</a>.</p>
<div class="fragment"><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;{</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> dtmf_tones[] = {</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="comment">/* *INDENT-OFF* */</span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;      <span class="stringliteral">&quot;!941+1336/100,!0/100&quot;</span>, <span class="comment">/* 0 */</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;      <span class="stringliteral">&quot;!697+1209/100,!0/100&quot;</span>, <span class="comment">/* 1 */</span></div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      <span class="stringliteral">&quot;!697+1336/100,!0/100&quot;</span>, <span class="comment">/* 2 */</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;      <span class="stringliteral">&quot;!697+1477/100,!0/100&quot;</span>, <span class="comment">/* 3 */</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;      <span class="stringliteral">&quot;!770+1209/100,!0/100&quot;</span>, <span class="comment">/* 4 */</span></div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      <span class="stringliteral">&quot;!770+1336/100,!0/100&quot;</span>, <span class="comment">/* 5 */</span></div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <span class="stringliteral">&quot;!770+1477/100,!0/100&quot;</span>, <span class="comment">/* 6 */</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      <span class="stringliteral">&quot;!852+1209/100,!0/100&quot;</span>, <span class="comment">/* 7 */</span></div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <span class="stringliteral">&quot;!852+1336/100,!0/100&quot;</span>, <span class="comment">/* 8 */</span></div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <span class="stringliteral">&quot;!852+1477/100,!0/100&quot;</span>, <span class="comment">/* 9 */</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      <span class="stringliteral">&quot;!697+1633/100,!0/100&quot;</span>, <span class="comment">/* A */</span></div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <span class="stringliteral">&quot;!770+1633/100,!0/100&quot;</span>, <span class="comment">/* B */</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <span class="stringliteral">&quot;!852+1633/100,!0/100&quot;</span>, <span class="comment">/* C */</span></div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="stringliteral">&quot;!941+1633/100,!0/100&quot;</span>, <span class="comment">/* D */</span></div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;      <span class="stringliteral">&quot;!941+1209/100,!0/100&quot;</span>, <span class="comment">/* * */</span></div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <span class="stringliteral">&quot;!941+1477/100,!0/100&quot;</span>, <span class="comment">/* # */</span></div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="comment">/* *INDENT-ON* */</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   };</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;=<span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;0&#39;</span>], 0);</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &lt;= <span class="charliteral">&#39;D&#39;</span>) {</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> - <span class="charliteral">&#39;A&#39;</span> + 10], 0);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[14], 0);</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[15], 0);</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;      <span class="comment">/* not handled */</span></div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to handle DTMF tone &#39;%c&#39; for &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;   }</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a316a60c7bff187078c5dc4b396c483c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a316a60c7bff187078c5dc4b396c483c4">&#9670;&nbsp;</a></span>show_config_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void show_config_description </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3a">misdn_cfg_elements</a>&#160;</td>
          <td class="paramname"><em>elem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03962">3962</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">BUFFERSIZE</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00062">COLOR_BRWHITE</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00054">COLOR_YELLOW</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00073">desc</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00681">misdn_cfg_get_desc()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00655">misdn_cfg_get_name()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">MISDN_CFG_LAST</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03987">handle_cli_misdn_show_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;{</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;   <span class="keywordtype">char</span> section[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;   <span class="keywordtype">char</span> def[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[<a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>];</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a5d5c67cc756ded480d5742ca65a3e36f">misdn_cfg_get_name</a>(elem, tmp, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;   <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(name, tmp, <a class="code" href="../../db/d45/term_8h.html#aa25d3faed7c00a4612beb33f7306d251">COLOR_BRWHITE</a>, 0, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab4fe73c162f2208a725cef8825a36de9">misdn_cfg_get_desc</a>(elem, desc, <span class="keyword">sizeof</span>(desc), def, <span class="keyword">sizeof</span>(def));</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   <span class="keywordflow">if</span> (elem &lt; <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a>) {</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;      <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(section, <span class="stringliteral">&quot;PORTS SECTION&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a4534b577b74a58b0f4b7be027af664e0">COLOR_YELLOW</a>, 0, <span class="keyword">sizeof</span>(section));</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;      <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(section, <span class="stringliteral">&quot;GENERAL SECTION&quot;</span>, <a class="code" href="../../db/d45/term_8h.html#a4534b577b74a58b0f4b7be027af664e0">COLOR_YELLOW</a>, 0, <span class="keyword">sizeof</span>(section));</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;   }</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   <span class="keywordflow">if</span> (*def) {</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;[%s] %s   (Default: %s)\n\t%s\n&quot;</span>, section, name, def, desc);</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <span class="stringliteral">&quot;[%s] %s\n\t%s\n&quot;</span>, section, name, desc);</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;   }</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;}</div><div class="ttc" id="term_8h_html_a4534b577b74a58b0f4b7be027af664e0"><div class="ttname"><a href="../../db/d45/term_8h.html#a4534b577b74a58b0f4b7be027af664e0">COLOR_YELLOW</a></div><div class="ttdeci">#define COLOR_YELLOW</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00054">term.h:54</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="term_8h_html_aa25d3faed7c00a4612beb33f7306d251"><div class="ttname"><a href="../../db/d45/term_8h.html#aa25d3faed7c00a4612beb33f7306d251">COLOR_BRWHITE</a></div><div class="ttdeci">#define COLOR_BRWHITE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00062">term.h:62</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a5d5c67cc756ded480d5742ca65a3e36f"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a5d5c67cc756ded480d5742ca65a3e36f">misdn_cfg_get_name</a></div><div class="ttdeci">void misdn_cfg_get_name(enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00655">misdn_config.c:655</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ac3146f1e9227301bb4aa518f4d336cee"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a></div><div class="ttdeci">#define BUFFERSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00025">chan_misdn_config.h:25</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa9e8475d2359cfa83d9061f41c1f3ec1e">MISDN_CFG_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00103">chan_misdn_config.h:103</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab4fe73c162f2208a725cef8825a36de9"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab4fe73c162f2208a725cef8825a36de9">misdn_cfg_get_desc</a></div><div class="ttdeci">void misdn_cfg_get_desc(enum misdn_cfg_elements elem, void *buf, int bufsize, void *buf_default, int bufsize_default)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00681">misdn_config.c:681</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2be1284fe65357755b6161a039fb59e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2be1284fe65357755b6161a039fb59e4">&#9670;&nbsp;</a></span>sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03524">3524</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03528">misdn_tasks_thread_func()</a>.</p>
<div class="fragment"><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;{</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a4b3afda0545d09cce0d2bc81466baf57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3afda0545d09cce0d2bc81466baf57">&#9670;&nbsp;</a></span>start_bc_tones()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int start_bc_tones </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07764">7764</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l02276">misdn_lib_tone_generator_stop()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_list::norxtone</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_list::notxtone</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>.</p>
<div class="fragment"><div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;{</div><div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a25fc25d4f6566e90a0f8d992719c0e9e">misdn_lib_tone_generator_stop</a>(cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">notxtone</a> = 0;</div><div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">norxtone</a> = 0;</div><div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;}</div><div class="ttc" id="structchan__list_html_a522a11718c8bcec41db4714e6bedc2b2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">chan_list::norxtone</a></div><div class="ttdeci">int norxtone</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_misdn.c:415</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a25fc25d4f6566e90a0f8d992719c0e9e"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a25fc25d4f6566e90a0f8d992719c0e9e">misdn_lib_tone_generator_stop</a></div><div class="ttdeci">void misdn_lib_tone_generator_stop(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l02276">isdn_lib.c:2276</a></div></div>
<div class="ttc" id="structchan__list_html_a85d7b17a82d4d04aabe2a4d634bbb7c3"><div class="ttname"><a href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">chan_list::notxtone</a></div><div class="ttdeci">int notxtone</div><div class="ttdoc">TRUE if we are not to generate tones (Playtones) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_misdn.c:420</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e825078cd89b5e86d2099b89b700445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e825078cd89b5e86d2099b89b700445">&#9670;&nbsp;</a></span>start_pbx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_pbx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08875">8875</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00149">EVENT_RELEASE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00150">EVENT_RELEASE_COMPLETE</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08447">hangup_chan()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07738">hanguptone_indicate()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08438">pbx_start_chan()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;{</div><div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a>(ch) &lt; 0) {</div><div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a>(ch, bc);</div><div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(-1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;ast_pbx_start returned &lt;0 in SETUP\n&quot;</span>);</div><div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a>) {</div><div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a>(ch);</div><div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a>);</div><div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;         <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a>);</div><div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;      }</div><div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;   }</div><div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5a3eb36bbe9b4f4fc50f1144f4426746"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5a3eb36bbe9b4f4fc50f1144f4426746">hanguptone_indicate</a></div><div class="ttdeci">static void hanguptone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07738">chan_misdn.c:7738</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abd97d108065ced9bfacd2cf140965f95"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abd97d108065ced9bfacd2cf140965f95">pbx_start_chan</a></div><div class="ttdeci">static int pbx_start_chan(struct chan_list *ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08438">chan_misdn.c:8438</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a2473594848bb5e1cb2eafb862337f51a">EVENT_RELEASE_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00150">isdn_lib.h:150</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0abe8648d8a43122eac550c72a1babcb07">EVENT_RELEASE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00149">isdn_lib.h:149</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8bfd9eaf966babb8dce679b5e909cc01"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8bfd9eaf966babb8dce679b5e909cc01">hangup_chan</a></div><div class="ttdeci">static void hangup_chan(struct chan_list *ch, struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08447">chan_misdn.c:8447</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4194cb1021ae6d8ea9be1219c0853a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4194cb1021ae6d8ea9be1219c0853a8">&#9670;&nbsp;</a></span>stop_bc_tones()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stop_bc_tones </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07772">7772</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_list::norxtone</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_list::notxtone</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07117">misdn_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;{</div><div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;   <span class="keywordflow">if</span> (!cl) {</div><div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;   }</div><div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;</div><div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">notxtone</a> = 1;</div><div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;   cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">norxtone</a> = 1;</div><div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;</div><div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;}</div><div class="ttc" id="structchan__list_html_a522a11718c8bcec41db4714e6bedc2b2"><div class="ttname"><a href="../../df/d00/structchan__list.html#a522a11718c8bcec41db4714e6bedc2b2">chan_list::norxtone</a></div><div class="ttdeci">int norxtone</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00415">chan_misdn.c:415</a></div></div>
<div class="ttc" id="structchan__list_html_a85d7b17a82d4d04aabe2a4d634bbb7c3"><div class="ttname"><a href="../../df/d00/structchan__list.html#a85d7b17a82d4d04aabe2a4d634bbb7c3">chan_list::notxtone</a></div><div class="ttdeci">int notxtone</div><div class="ttdoc">TRUE if we are not to generate tones (Playtones) </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00420">chan_misdn.c:420</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a892219d53f0cf14c2d6933dc77464def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a892219d53f0cf14c2d6933dc77464def">&#9670;&nbsp;</a></span>stop_indicate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stop_indicate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07743">7743</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00393">ast_playtones_stop()</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00227">ast_tone_zone_sound_unref()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l02276">misdn_lib_tone_generator_stop()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_list::ts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06975">misdn_indication()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03628">misdn_overlap_dial_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;{</div><div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast = cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;</div><div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;   <span class="keywordflow">if</span> (!ast) {</div><div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(0, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot;No Ast in stop_indicate\n&quot;</span>);</div><div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;   }</div><div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;</div><div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; None\n&quot;</span>);</div><div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a25fc25d4f6566e90a0f8d992719c0e9e">misdn_lib_tone_generator_stop</a>(cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>);</div><div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;   <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(ast);</div><div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;</div><div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;   <span class="keywordflow">if</span> (cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a>) {</div><div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;      cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a> = <a class="code" href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a>(cl-&gt;<a class="code" href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">ts</a>);</div><div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;   }</div><div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;</div><div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a25fc25d4f6566e90a0f8d992719c0e9e"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a25fc25d4f6566e90a0f8d992719c0e9e">misdn_lib_tone_generator_stop</a></div><div class="ttdeci">void misdn_lib_tone_generator_stop(struct misdn_bchannel *bc)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l02276">isdn_lib.c:2276</a></div></div>
<div class="ttc" id="indications_8h_html_a9d5be069b7060d326a213f5d60b8dc77"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a></div><div class="ttdeci">void ast_playtones_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop playing tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00393">indications.c:393</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="indications_8h_html_a8b52ace68f21c0ac24414f038471647d"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a></div><div class="ttdeci">static struct ast_tone_zone_sound * ast_tone_zone_sound_unref(struct ast_tone_zone_sound *ts)</div><div class="ttdoc">Release a reference to an ast_tone_zone_sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00227">indications.h:227</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html_ad30b22ae8fc57203eae5d30c3e9243e2"><div class="ttname"><a href="../../df/d00/structchan__list.html#ad30b22ae8fc57203eae5d30c3e9243e2">chan_list::ts</a></div><div class="ttdeci">struct ast_tone_zone_sound * ts</div><div class="ttdoc">Tone zone sound used for dialtone generation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00582">chan_misdn.c:582</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TE STUFF END </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">11262</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00392">ast_unregister_application()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00629">free_robin_list()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00129">g_config_initialized</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l01187">misdn_cfg_destroy()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l04285">misdn_lib_destroy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00673">misdn_ports</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03574">misdn_tasks_destroy()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l11263"></a><span class="lineno">11263</span>&#160;{</div><div class="line"><a name="l11264"></a><span class="lineno">11264</span>&#160;   <span class="comment">/* First, take us out of the channel loop */</span></div><div class="line"><a name="l11265"></a><span class="lineno">11265</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(0, <span class="stringliteral">&quot;-- Unregistering mISDN Channel Driver --\n&quot;</span>);</div><div class="line"><a name="l11266"></a><span class="lineno">11266</span>&#160;</div><div class="line"><a name="l11267"></a><span class="lineno">11267</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#ae402ad3ef621a7e1a2669f5248d4dd23">misdn_tasks_destroy</a>();</div><div class="line"><a name="l11268"></a><span class="lineno">11268</span>&#160;</div><div class="line"><a name="l11269"></a><span class="lineno">11269</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a>) {</div><div class="line"><a name="l11270"></a><span class="lineno">11270</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11271"></a><span class="lineno">11271</span>&#160;   }</div><div class="line"><a name="l11272"></a><span class="lineno">11272</span>&#160;</div><div class="line"><a name="l11273"></a><span class="lineno">11273</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a>) / <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>));</div><div class="line"><a name="l11274"></a><span class="lineno">11274</span>&#160;</div><div class="line"><a name="l11275"></a><span class="lineno">11275</span>&#160;   <span class="comment">/* ast_unregister_application(&quot;misdn_crypt&quot;); */</span></div><div class="line"><a name="l11276"></a><span class="lineno">11276</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;misdn_set_opt&quot;</span>);</div><div class="line"><a name="l11277"></a><span class="lineno">11277</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;misdn_facility&quot;</span>);</div><div class="line"><a name="l11278"></a><span class="lineno">11278</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;misdn_check_l2l1&quot;</span>);</div><div class="line"><a name="l11279"></a><span class="lineno">11279</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l11280"></a><span class="lineno">11280</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(misdn_command_name);</div><div class="line"><a name="l11281"></a><span class="lineno">11281</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;misdn_cc_function);</div><div class="line"><a name="l11282"></a><span class="lineno">11282</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l11283"></a><span class="lineno">11283</span>&#160;</div><div class="line"><a name="l11284"></a><span class="lineno">11284</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>);</div><div class="line"><a name="l11285"></a><span class="lineno">11285</span>&#160;</div><div class="line"><a name="l11286"></a><span class="lineno">11286</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a1fb654d1fbb5b25904cbab043016c887">free_robin_list</a>();</div><div class="line"><a name="l11287"></a><span class="lineno">11287</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a59f113bee91d678988a1c3d8ddbdb2dc">misdn_cfg_destroy</a>();</div><div class="line"><a name="l11288"></a><span class="lineno">11288</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a3806e75078a3cf3025dd5a9963bc99e1">misdn_lib_destroy</a>();</div><div class="line"><a name="l11289"></a><span class="lineno">11289</span>&#160;</div><div class="line"><a name="l11290"></a><span class="lineno">11290</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a>);</div><div class="line"><a name="l11291"></a><span class="lineno">11291</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a>);</div><div class="line"><a name="l11292"></a><span class="lineno">11292</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a>);</div><div class="line"><a name="l11293"></a><span class="lineno">11293</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a>);</div><div class="line"><a name="l11294"></a><span class="lineno">11294</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a>);</div><div class="line"><a name="l11295"></a><span class="lineno">11295</span>&#160;</div><div class="line"><a name="l11296"></a><span class="lineno">11296</span>&#160;<span class="preprocessor">#if defined(AST_MISDN_ENHANCEMENTS)</span></div><div class="line"><a name="l11297"></a><span class="lineno">11297</span>&#160;   misdn_cc_destroy();</div><div class="line"><a name="l11298"></a><span class="lineno">11298</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(AST_MISDN_ENHANCEMENTS) */</span><span class="preprocessor"></span></div><div class="line"><a name="l11299"></a><span class="lineno">11299</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>);</div><div class="line"><a name="l11300"></a><span class="lineno">11300</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l11301"></a><span class="lineno">11301</span>&#160;</div><div class="line"><a name="l11302"></a><span class="lineno">11302</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11303"></a><span class="lineno">11303</span>&#160;}</div><div class="ttc" id="chan__misdn__config_8h_html_a59f113bee91d678988a1c3d8ddbdb2dc"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a59f113bee91d678988a1c3d8ddbdb2dc">misdn_cfg_destroy</a></div><div class="ttdeci">void misdn_cfg_destroy(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l01187">misdn_config.c:1187</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a79035e58d7d553b30a91b14466422523"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a79035e58d7d553b30a91b14466422523">misdn_debug_only</a></div><div class="ttdeci">static int * misdn_debug_only</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00695">chan_misdn.c:695</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a3806e75078a3cf3025dd5a9963bc99e1"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a3806e75078a3cf3025dd5a9963bc99e1">misdn_lib_destroy</a></div><div class="ttdeci">void misdn_lib_destroy(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l04285">isdn_lib.c:4285</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ae402ad3ef621a7e1a2669f5248d4dd23"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ae402ad3ef621a7e1a2669f5248d4dd23">misdn_tasks_destroy</a></div><div class="ttdeci">static void misdn_tasks_destroy(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l03574">chan_misdn.c:3574</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a392ce5a44d9bda45ea398b525aa6231d"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a392ce5a44d9bda45ea398b525aa6231d">chan_misdn_clis</a></div><div class="ttdeci">static struct ast_cli_entry chan_misdn_clis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l05734">chan_misdn.c:5734</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a1fb654d1fbb5b25904cbab043016c887"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a1fb654d1fbb5b25904cbab043016c887">free_robin_list</a></div><div class="ttdeci">static void free_robin_list(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00629">chan_misdn.c:629</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aad13c74076796a6eb451cf515f436b5e"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aad13c74076796a6eb451cf515f436b5e">misdn_debug</a></div><div class="ttdeci">static int * misdn_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00694">chan_misdn.c:694</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a8c81d5f4de36016de0ecba7520828e0a"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a8c81d5f4de36016de0ecba7520828e0a">misdn_tech</a></div><div class="ttdeci">static struct ast_channel_tech misdn_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08130">chan_misdn.c:8130</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_ab1a7c19d49b122fec380d3901c451dfb"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#ab1a7c19d49b122fec380d3901c451dfb">misdn_ports</a></div><div class="ttdeci">static int * misdn_ports</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00673">chan_misdn.c:673</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a5b0e9dfe5bed0103b9888571ccc349d8"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a5b0e9dfe5bed0103b9888571ccc349d8">misdn_out_calls</a></div><div class="ttdeci">static int * misdn_out_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00699">chan_misdn.c:699</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a2676e3da728326daba3532f859b33c75"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a2676e3da728326daba3532f859b33c75">g_config_initialized</a></div><div class="ttdeci">static int g_config_initialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00129">chan_misdn.c:129</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_aec47a038542750a8ba346bda19799f4f"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#aec47a038542750a8ba346bda19799f4f">misdn_in_calls</a></div><div class="ttdeci">static int * misdn_in_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00698">chan_misdn.c:698</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a879a0c566b9bb9c07bd0f1f13948c373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a879a0c566b9bb9c07bd0f1f13948c373">&#9670;&nbsp;</a></span>update_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates caller ID information from config. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05761">5761</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_list::ast</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02145">ast_to_misdn_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02242">ast_to_misdn_screen()</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_list::bc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00343">misdn_bchannel::caller</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00609">misdn_bchannel::capability</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00635">misdn_bchannel::hdlc</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00177">INFO_CAPABILITY_DIGITAL_RESTRICTED</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00176">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00040">MISDN_CFG_HDLC</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00057">MISDN_CFG_PRES</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00058">MISDN_CFG_SCREEN</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02084">misdn_to_str_pres()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02173">misdn_to_str_screen()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00277">misdn_party_id::presentation</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00282">misdn_party_id::screening</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06554">misdn_call()</a>.</p>
<div class="fragment"><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;{</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 0;</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;   <span class="keywordtype">int</span> pres;</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;   <span class="keywordtype">int</span> screen;</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;   <span class="keywordflow">if</span> (!ch) {</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot configure without chanlist\n&quot;</span>);</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;   }</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;   ast = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">ast</a>;</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;   bc = ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">bc</a>;</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;   <span class="keywordflow">if</span> (! ast || ! bc) {</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot configure without ast || bc\n&quot;</span>);</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;   }</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;   port = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(7, port, <span class="stringliteral">&quot;update_config: Getting Config\n&quot;</span>);</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090">MISDN_CFG_HDLC</a>, &amp;hdlc, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;   <span class="keywordflow">if</span> (hdlc) {</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;      <span class="keywordflow">switch</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">capability</a>) {</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a>:</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c">INFO_CAPABILITY_DIGITAL_RESTRICTED</a>:</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;         <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(1, bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; CONF HDLC\n&quot;</span>);</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;         bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">hdlc</a> = 1;</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;      }</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;   }</div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;</div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;</div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa081eefea700315bc374c8e412810eb19">MISDN_CFG_PRES</a>, &amp;pres, <span class="keyword">sizeof</span>(pres));</div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaee3e055a6155d455c07900e0d6e5bbca">MISDN_CFG_SCREEN</a>, &amp;screen, <span class="keyword">sizeof</span>(screen));</div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;   <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; pres: %d screen: %d\n&quot;</span>, pres, screen);</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;   <span class="keywordflow">if</span> (pres &lt; 0 || screen &lt; 0) {</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; pres: %x\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.presentation);</div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;</div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.presentation);</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; PRES: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a1cf9411a71645f03e0628dcea770b1ad">misdn_to_str_pres</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>);</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(ast)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.presentation);</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(2, port, <span class="stringliteral">&quot; --&gt; SCREEN: %s(%d)\n&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a45975791307e0a9cdaff63af4dc9492c">misdn_to_str_screen</a>(bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>), bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a>);</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">screening</a> = screen;</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">caller</a>.<a class="code" href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = pres;</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;   }</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afb118af6bdca35689358599c1b579b29"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afb118af6bdca35689358599c1b579b29">ast_to_misdn_pres</a></div><div class="ttdeci">static int ast_to_misdn_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02145">chan_misdn.c:2145</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66ba69c4df8f03698f862e10246e1e86880e">INFO_CAPABILITY_DIGITAL_UNRESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00176">isdn_lib.h:176</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a23c37f6ee7f30735975cc3848117a830"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a23c37f6ee7f30735975cc3848117a830">misdn_bchannel::hdlc</a></div><div class="ttdeci">int hdlc</div><div class="ttdoc">TRUE if call made in digital HDLC mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00635">isdn_lib.h:635</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a></div><div class="ttdoc">B channel control structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00324">isdn_lib.h:324</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a3df9119032baa1743f2db71344bd7cac">misdn_party_id::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Number presentation restriction code 0=Allowed, 1=Restricted, 2=Unavailable. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00277">isdn_lib.h:277</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aaee3e055a6155d455c07900e0d6e5bbca"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aaee3e055a6155d455c07900e0d6e5bbca">MISDN_CFG_SCREEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00058">chan_misdn_config.h:58</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_afa05b14ff7f76f303c784c00c4c63fa7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#afa05b14ff7f76f303c784c00c4c63fa7">misdn_bchannel::capability</a></div><div class="ttdeci">int capability</div><div class="ttdoc">SETUP message bearer capability field code value. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00609">isdn_lib.h:609</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a1cf9411a71645f03e0628dcea770b1ad"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a1cf9411a71645f03e0628dcea770b1ad">misdn_to_str_pres</a></div><div class="ttdeci">static const char * misdn_to_str_pres(int presentation)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02084">chan_misdn.c:2084</a></div></div>
<div class="ttc" id="structchan__list_html_aa664b40c3dc19b55ec3c661cebb49c32"><div class="ttname"><a href="../../df/d00/structchan__list.html#aa664b40c3dc19b55ec3c661cebb49c32">chan_list::ast</a></div><div class="ttdeci">struct ast_channel * ast</div><div class="ttdoc">Associated Asterisk channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00515">chan_misdn.c:515</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#aaa1faf9307efabe7471b4443de4ba66badf7a0689e8e3c9cd2d7e6458f555c60c">INFO_CAPABILITY_DIGITAL_RESTRICTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00177">isdn_lib.h:177</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa081eefea700315bc374c8e412810eb19"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa081eefea700315bc374c8e412810eb19">MISDN_CFG_PRES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00057">chan_misdn_config.h:57</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a45975791307e0a9cdaff63af4dc9492c"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a45975791307e0a9cdaff63af4dc9492c">misdn_to_str_screen</a></div><div class="ttdeci">static const char * misdn_to_str_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02173">chan_misdn.c:2173</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad29350e8f80346e004406e8ce3f1bbfb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad29350e8f80346e004406e8ce3f1bbfb">misdn_bchannel::caller</a></div><div class="ttdeci">struct misdn_party_id caller</div><div class="ttdoc">Originating/Caller ID information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00343">isdn_lib.h:343</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a939a80be7808cdb4e608d121b71b36d4"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a939a80be7808cdb4e608d121b71b36d4">ast_to_misdn_screen</a></div><div class="ttdeci">static int ast_to_misdn_screen(int screening)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l02242">chan_misdn.c:2242</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structchan__list_html_a56ba183c883a952020a8331abf18ac02"><div class="ttname"><a href="../../df/d00/structchan__list.html#a56ba183c883a952020a8331abf18ac02">chan_list::bc</a></div><div class="ttdeci">struct misdn_bchannel * bc</div><div class="ttdoc">Associated B channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00520">chan_misdn.c:520</a></div></div>
<div class="ttc" id="structmisdn__party__id_html_a2c7206af6ec505c237645b368bb9b620"><div class="ttname"><a href="../../dc/de3/structmisdn__party__id.html#a2c7206af6ec505c237645b368bb9b620">misdn_party_id::screening</a></div><div class="ttdeci">int screening</div><div class="ttdoc">Number screening code 0=Unscreened, 1=Passed Screen, 2=Failed Screen, 3=Network Number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00282">isdn_lib.h:282</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aa3fc00b937ced5f7098458c4336dd7090">MISDN_CFG_HDLC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00040">chan_misdn_config.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a870ab6bac01ce35f615fbfe7386f8319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a870ab6bac01ce35f615fbfe7386f8319">&#9670;&nbsp;</a></span>update_ec_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_ec_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05903">5903</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00693">misdn_bchannel::ec_deftaps</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00688">misdn_bchannel::ec_enable</a>, <a class="el" href="../../d9/d7e/chan__misdn__config_8h_source.html#l00069">MISDN_CFG_ECHOCANCEL</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_cfg_get()</a>, and <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00370">misdn_bchannel::port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05564">handle_cli_misdn_toggle_echocancel()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05922">read_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;{</div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;   <span class="keywordtype">int</span> ec;</div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a> = bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>;</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;   <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a>(port, <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabf6aabfa601c728547c7a6e25e33719d">MISDN_CFG_ECHOCANCEL</a>, &amp;ec, <span class="keyword">sizeof</span>(ec));</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;   <span class="keywordflow">if</span> (ec == 1) {</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a> = 1;</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ec &gt; 1) {</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">ec_enable</a> = 1;</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;      bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#adf0690a26c02528e63f3cb623d1bd4a7">ec_deftaps</a> = ec;</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;   }</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;}</div><div class="ttc" id="structmisdn__bchannel_html_aeafef525b8bac4713c119b593780ca69"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aeafef525b8bac4713c119b593780ca69">misdn_bchannel::ec_enable</a></div><div class="ttdeci">int ec_enable</div><div class="ttdoc">TRUE if the echo cancellor is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00688">isdn_lib.h:688</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_a0f6a5bee3a29bd963f565c6b474f2b23"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#a0f6a5bee3a29bd963f565c6b474f2b23">misdn_cfg_get</a></div><div class="ttdeci">void misdn_cfg_get(int port, enum misdn_cfg_elements elem, void *buf, int bufsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00569">misdn_config.c:569</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_ab42ce2e5d6c691e8574ff55f3b285e3aabf6aabfa601c728547c7a6e25e33719d"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#ab42ce2e5d6c691e8574ff55f3b285e3aabf6aabfa601c728547c7a6e25e33719d">MISDN_CFG_ECHOCANCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7e/chan__misdn__config_8h_source.html#l00069">chan_misdn_config.h:69</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_adf0690a26c02528e63f3cb623d1bd4a7"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#adf0690a26c02528e63f3cb623d1bd4a7">misdn_bchannel::ec_deftaps</a></div><div class="ttdeci">int ec_deftaps</div><div class="ttdoc">Number of taps in the echo cancellor when enabled. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00693">isdn_lib.h:693</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae14b6d64edd251ea70ad859ffe33a08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae14b6d64edd251ea70ad859ffe33a08f">&#9670;&nbsp;</a></span>update_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void update_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>tmp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08150">8150</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l06854">ast_change_name()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_cfg_get_next_port()</a>, and <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00053">misdn_lib_port_is_pri()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;{</div><div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;   <span class="keywordtype">int</span> chan_offset = 0;</div><div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;   <span class="keywordtype">int</span> tmp_port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(0);</div><div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;   <span class="keywordtype">char</span> newname[255];</div><div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;</div><div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;   <span class="keywordflow">for</span> (; tmp_port &gt; 0; tmp_port = <a class="code" href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a>(tmp_port)) {</div><div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;      <span class="keywordflow">if</span> (tmp_port == <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>) {</div><div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;      }</div><div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;      chan_offset += <a class="code" href="../../de/dfe/isdn__lib_8c.html#a0397696531bb8058c4f712aa8428d492">misdn_lib_port_is_pri</a>(tmp_port) ? 30 : 2;</div><div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;   }</div><div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> &lt; 0) {</div><div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = 0;</div><div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;   }</div><div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;</div><div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;   snprintf(newname, <span class="keyword">sizeof</span>(newname), <span class="stringliteral">&quot;%s/%d-&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>, chan_offset + <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>);</div><div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;   <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp), newname, strlen(newname))) {</div><div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;      snprintf(newname, <span class="keyword">sizeof</span>(newname), <span class="stringliteral">&quot;%s/%d-u%d&quot;</span>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a>, chan_offset + <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <a class="code" href="../../d7/d9b/chan__misdn_8c.html#abfc471c68ae50a47ef9babacc43af0a9">glob_channel</a>++);</div><div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aed0df108a26552c41985e4762e4993d8">ast_change_name</a>(tmp, newname);</div><div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a>(3, <a class="code" href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">port</a>, <span class="stringliteral">&quot; --&gt; updating channel name to [%s]\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp));</div><div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;   }</div><div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;}</div><div class="ttc" id="chan__misdn_8c_html_a19868e68215b587e33ccfffeea3015ae"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a19868e68215b587e33ccfffeea3015ae">chan_misdn_log</a></div><div class="ttdeci">static void chan_misdn_log(int level, int port, char *tmpl,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn.c:12768</a></div></div>
<div class="ttc" id="chan__misdn__config_8h_html_af6e72d0cfa09c4ab2c5441db492397df"><div class="ttname"><a href="../../d9/d7e/chan__misdn__config_8h.html#af6e72d0cfa09c4ab2c5441db492397df">misdn_cfg_get_next_port</a></div><div class="ttdeci">int misdn_cfg_get_next_port(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00929">misdn_config.c:929</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="channel_8h_html_aed0df108a26552c41985e4762e4993d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aed0df108a26552c41985e4762e4993d8">ast_change_name</a></div><div class="ttdeci">void ast_change_name(struct ast_channel *chan, const char *newname)</div><div class="ttdoc">Change channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06854">channel.c:6854</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#a63c89c04d1feae07ca35558055155ffb">misdn_bchannel::port</a></div><div class="ttdeci">int port</div><div class="ttdoc">Logical Layer 1 port associated with this B channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00370">isdn_lib.h:370</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_abfc471c68ae50a47ef9babacc43af0a9"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#abfc471c68ae50a47ef9babacc43af0a9">glob_channel</a></div><div class="ttdeci">static int glob_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l08148">chan_misdn.c:8148</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a27170aa5e1d5147415094040ca8717f6"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a27170aa5e1d5147415094040ca8717f6">misdn_type</a></div><div class="ttdeci">static const char misdn_type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00690">chan_misdn.c:690</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a0397696531bb8058c4f712aa8428d492"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a0397696531bb8058c4f712aa8428d492">misdn_lib_port_is_pri</a></div><div class="ttdeci">int misdn_lib_port_is_pri(int port)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00053">isdn_lib.c:53</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43bee3ea617c99abb55465aa8340e6af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43bee3ea617c99abb55465aa8340e6af">&#9670;&nbsp;</a></span>wait_for_digits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_for_digits </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5a/structmisdn__bchannel.html">misdn_bchannel</a> *&#160;</td>
          <td class="paramname"><em>bc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08889">8889</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l01259">ast_channel_alloc</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00904">ast_channel_dialed()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00448">ast_channel_priority_set()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01584">ast_channel_release()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04712">ast_pbx_start()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00036">AST_STATE_DOWN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00337">misdn_bchannel::dialed</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l07707">dialtone_indicate()</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00151">EVENT_FACILITY</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00132">EVENT_SETUP_ACKNOWLEDGE</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00512">misdn_bchannel::fac_out</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00065">misdn_lib_port_is_nt()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l03523">misdn_lib_send_event()</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00077">misdn_make_dummy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00327">MISDN_WAITING4DIGS</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00364">misdn_bchannel::nt</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d26/isdn__lib_8h_source.html#l00266">misdn_party_dialing::number</a>, <a class="el" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02762">print_facility()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_list::state</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00387">ast_party_dialed::str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l09917">cb_events()</a>.</p>
<div class="fragment"><div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;{</div><div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;   ch-&gt;<a class="code" href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">state</a> = <a class="code" href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a>;</div><div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;   <a class="code" href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a>(bc, <a class="code" href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a>);</div><div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;   <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">nt</a> &amp;&amp; !bc-&gt;<a class="code" href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">dialed</a>.<a class="code" href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">number</a>[0]) {</div><div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;      <a class="code" href="../../d7/d9b/chan__misdn_8c.html#a821d90675a82dc5fc7307c141efae6da">dialtone_indicate</a>(ch);</div><div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;   }</div><div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;}</div><div class="ttc" id="structmisdn__party__dialing_html_a05554fdcf3144538d564b3b5a9b512d8"><div class="ttname"><a href="../../d8/d8c/structmisdn__party__dialing.html#a05554fdcf3144538d564b3b5a9b512d8">misdn_party_dialing::number</a></div><div class="ttdeci">char number[MISDN_MAX_NUMBER_LEN]</div><div class="ttdoc">Dialed/Called Phone Number (Address) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00266">isdn_lib.h:266</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_aa10df685d964a073b6109e024ca6e9ec"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#aa10df685d964a073b6109e024ca6e9ec">misdn_bchannel::nt</a></div><div class="ttdeci">int nt</div><div class="ttdoc">TRUE if NT side of protocol (TE otherwise) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00364">isdn_lib.h:364</a></div></div>
<div class="ttc" id="structchan__list_html_a83b35a3a8ccadfe1b4e484704fdaea3a"><div class="ttname"><a href="../../df/d00/structchan__list.html#a83b35a3a8ccadfe1b4e484704fdaea3a">chan_list::state</a></div><div class="ttdeci">enum misdn_chan_state state</div><div class="ttdoc">State of the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00386">chan_misdn.c:386</a></div></div>
<div class="ttc" id="structmisdn__bchannel_html_ad4cd07a799e85737b9c60e7bb45f5f9e"><div class="ttname"><a href="../../d4/d5a/structmisdn__bchannel.html#ad4cd07a799e85737b9c60e7bb45f5f9e">misdn_bchannel::dialed</a></div><div class="ttdeci">struct misdn_party_dialing dialed</div><div class="ttdoc">Dialed/Called information struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00337">isdn_lib.h:337</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_a821d90675a82dc5fc7307c141efae6da"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#a821d90675a82dc5fc7307c141efae6da">dialtone_indicate</a></div><div class="ttdeci">static int dialtone_indicate(struct chan_list *cl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l07707">chan_misdn.c:7707</a></div></div>
<div class="ttc" id="isdn__lib_8h_html_ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a"><div class="ttname"><a href="../../de/d26/isdn__lib_8h.html#ab84d33304ff89cf68d47913663acbad0a76e873730835e083066b5b1e48e7f97a">EVENT_SETUP_ACKNOWLEDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/isdn__lib_8h_source.html#l00132">isdn_lib.h:132</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_a9b9f5e8fc32b68c5d1a0c28d7ee40fb3"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#a9b9f5e8fc32b68c5d1a0c28d7ee40fb3">misdn_lib_send_event</a></div><div class="ttdeci">int misdn_lib_send_event(struct misdn_bchannel *bc, enum event_e event)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l03523">isdn_lib.c:3523</a></div></div>
<div class="ttc" id="chan__misdn_8c_html_afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1"><div class="ttname"><a href="../../d7/d9b/chan__misdn_8c.html#afe6ad3e9bb6ccdef7838bc0bbe2cc2e5a3b71c311cc0112ba3a8d4bd4f6e4c2d1">MISDN_WAITING4DIGS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/chan__misdn_8c_source.html#l00327">chan_misdn.c:327</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Channel driver for mISDN Support (BRI/PRI)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_CHANNEL_DRIVER, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12838">12838</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="ac3a639b2c4663f01f6e49dcd7aa2c218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a639b2c4663f01f6e49dcd7aa2c218">&#9670;&nbsp;</a></span>allowed_bearers_array</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../df/d87/structallowed__bearers.html">allowed_bearers</a> allowed_bearers_array[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l02362">2362</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12838">12838</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a392ce5a44d9bda45ea398b525aa6231d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392ce5a44d9bda45ea398b525aa6231d">&#9670;&nbsp;</a></span>chan_misdn_clis</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> chan_misdn_clis[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05734">5734</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a104c30b0f9b3fa80d00e5ec142686d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a104c30b0f9b3fa80d00e5ec142686d18">&#9670;&nbsp;</a></span>cl_te</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d00/structchan__list.html">chan_list</a>* cl_te =<a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global channel call record list head. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00704">704</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a292953c24b6a6f070fdc8096adcb4cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292953c24b6a6f070fdc8096adcb4cfc">&#9670;&nbsp;</a></span>cl_te_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> cl_te_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00705">705</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a2676e3da728326daba3532f859b33c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2676e3da728326daba3532f859b33c75">&#9670;&nbsp;</a></span>g_config_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int g_config_initialized = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00129">129</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>

</div>
</div>
<a id="abfc471c68ae50a47ef9babacc43af0a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc471c68ae50a47ef9babacc43af0a9">&#9670;&nbsp;</a></span>glob_channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int glob_channel = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08148">8148</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a0fde55e91042b09488c4c1b522172a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fde55e91042b09488c4c1b522172a87">&#9670;&nbsp;</a></span>global_tracefile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char global_tracefile[<a class="el" href="../../d9/d7e/chan__misdn__config_8h.html#ac3146f1e9227301bb4aa518f4d336cee">BUFFERSIZE</a>+1]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>To use the CCBS/CCNR supplementary service feature and other supplementary services using FACILITY messages requires a modified version of mISDN.</dd>
<dd>
The latest modified mISDN v1.1.x based version is available at: <a href="http://svn.digium.com/svn/thirdparty/mISDN/trunk">http://svn.digium.com/svn/thirdparty/mISDN/trunk</a> <a href="http://svn.digium.com/svn/thirdparty/mISDNuser/trunk">http://svn.digium.com/svn/thirdparty/mISDNuser/trunk</a></dd>
<dd>
Taged versions of the modified mISDN code are available under: <a href="http://svn.digium.com/svn/thirdparty/mISDN/tags">http://svn.digium.com/svn/thirdparty/mISDN/tags</a> <a href="http://svn.digium.com/svn/thirdparty/mISDNuser/tags">http://svn.digium.com/svn/thirdparty/mISDNuser/tags</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00127">127</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l12768">chan_misdn_log()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>.</p>

</div>
</div>
<a id="a24bb5f2898b28cecc69c86bb429f7517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24bb5f2898b28cecc69c86bb429f7517">&#9670;&nbsp;</a></span>max_ports</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int max_ports</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00696">696</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03720">handle_cli_misdn_set_debug()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04123">reload_config()</a>.</p>

</div>
</div>
<a id="a224bdc46e70553698ba782d725622717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a224bdc46e70553698ba782d725622717">&#9670;&nbsp;</a></span>MAXTICS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MAXTICS = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00612">612</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04339">handle_cli_misdn_set_tics()</a>.</p>

</div>
</div>
<a id="aad13c74076796a6eb451cf515f436b5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad13c74076796a6eb451cf515f436b5e">&#9670;&nbsp;</a></span>misdn_debug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* misdn_debug</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00694">694</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a79035e58d7d553b30a91b14466422523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79035e58d7d553b30a91b14466422523">&#9670;&nbsp;</a></span>misdn_debug_only</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* misdn_debug_only</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00695">695</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="aec47a038542750a8ba346bda19799f4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec47a038542750a8ba346bda19799f4f">&#9670;&nbsp;</a></span>misdn_in_calls</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* misdn_in_calls</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00698">698</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a5b0e9dfe5bed0103b9888571ccc349d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b0e9dfe5bed0103b9888571ccc349d8">&#9670;&nbsp;</a></span>misdn_out_calls</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* misdn_out_calls</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00699">699</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="ab1a7c19d49b122fec380d3901c451dfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1a7c19d49b122fec380d3901c451dfb">&#9670;&nbsp;</a></span>misdn_ports</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int* misdn_ports</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00673">673</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11315">load_module()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11262">unload_module()</a>.</p>

</div>
</div>
<a id="ac7601fa9b0fcc72915a9470c8fa0297e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7601fa9b0fcc72915a9470c8fa0297e">&#9670;&nbsp;</a></span>misdn_tasks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* misdn_tasks = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the main schedule context for stuff like l1 watcher, overlap dial, ... </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00670">670</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="afffc82bd9b6717abebe613f896f7ecd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffc82bd9b6717abebe613f896f7ecd6">&#9670;&nbsp;</a></span>misdn_tasks_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t misdn_tasks_thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00671">671</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03574">misdn_tasks_destroy()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03554">misdn_tasks_init()</a>, and <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l03586">misdn_tasks_wakeup()</a>.</p>

</div>
</div>
<a id="a8c81d5f4de36016de0ecba7520828e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c81d5f4de36016de0ecba7520828e0a">&#9670;&nbsp;</a></span>misdn_tech</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> misdn_tech</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l08130">8130</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="a27170aa5e1d5147415094040ca8717f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27170aa5e1d5147415094040ca8717f6">&#9670;&nbsp;</a></span>misdn_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char misdn_type[] = &quot;mISDN&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00690">690</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="aac56f2c53779cee00e7f7e98d773b82c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac56f2c53779cee00e7f7e98d773b82c">&#9670;&nbsp;</a></span>release_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> release_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00323">323</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="ae5607ef5574022ec25b0b74559490431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5607ef5574022ec25b0b74559490431">&#9670;&nbsp;</a></span>robin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d60/structrobin__list.html">robin_list</a>* robin = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00626">626</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00641">get_robin_position()</a>.</p>

</div>
</div>
<a id="a7475bf053cd646e39ddeb8d375d08712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7475bf053cd646e39ddeb8d375d08712">&#9670;&nbsp;</a></span>state_array</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d1/d5a/structstate__struct.html">state_struct</a> state_array[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l04083">4083</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
<a id="aa610396156ba51a6b7d07fe92bea6f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa610396156ba51a6b7d07fe92bea6f24">&#9670;&nbsp;</a></span>tracing</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tracing = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l00692">692</a> of file <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html">chan_misdn.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:10 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
