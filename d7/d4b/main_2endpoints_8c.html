<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: endpoints.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main/endpoints.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Asterisk endpoint API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d61/endpoints_8h_source.html">asterisk/endpoints.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d44/stasis__endpoints_8h_source.html">asterisk/stasis_endpoints.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d78/__private_8h_source.html">asterisk/_private.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main/endpoints.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d78/main_2endpoints_8c__incl.png" border="0" usemap="#endpoints_8c" alt=""/></div>
<map name="endpoints_8c" id="endpoints_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="427,468,511,495"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="2193,393,2328,420"/>
<area shape="rect" id="node32" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2329,244,2480,271"/>
<area shape="rect" id="node35" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2179,244,2305,271"/>
<area shape="rect" id="node40" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1189,468,1346,495"/>
<area shape="rect" id="node44" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1725,80,1914,107"/>
<area shape="rect" id="node47" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2163,80,2358,107"/>
<area shape="rect" id="node49" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="1910,155,2089,196"/>
<area shape="rect" id="node50" href="../../d4/d78/__private_8h.html" title="Prototypes for public functions only of internal interest,. " alt="" coords="2555,80,2694,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="130,692,285,719"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1000,543,1137,569"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,543,140,569"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="134,767,281,793"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1468,617,1611,644"/>
<area shape="rect" id="node23" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1852,543,1965,569"/>
<area shape="rect" id="node26" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2030,692,2177,719"/>
<area shape="rect" id="node31" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="2071,468,2221,495"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1779,617,1841,644"/>
<area shape="rect" id="node29" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1976,617,2127,644"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="2436,617,2563,644"/>
<area shape="rect" id="node33" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="2347,319,2462,345"/>
<area shape="rect" id="node34" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2638,543,2785,569"/>
<area shape="rect" id="node36" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1857,319,2003,345"/>
<area shape="rect" id="node41" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1617,393,1731,420"/>
<area shape="rect" id="node42" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2189,319,2313,345"/>
<area shape="rect" id="node37" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1857,468,1995,495"/>
<area shape="rect" id="node38" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1967,393,2117,420"/>
<area shape="rect" id="node39" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1457,393,1592,420"/>
<area shape="rect" id="node43" href="../../d6/d37/event__defs_8h.html" title="Generic event system. " alt="" coords="2352,393,2511,420"/>
<area shape="rect" id="node45" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1697,162,1835,189"/>
<area shape="rect" id="node46" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1537,244,1681,271"/>
<area shape="rect" id="node48" href="../../d3/d8f/stasis__cache__pattern_8h.html" title="Caching pattern for Stasis Message Bus API topics. " alt="" coords="2164,155,2323,196"/>
</map>
</div>
</div>
<p><a href="../../d7/d4b/main_2endpoints_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a51104bacdc42a8e16e7bd49db871fe42"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a51104bacdc42a8e16e7bd49db871fe42">ENDPOINT_BUCKETS</a>&#160;&#160;&#160;127</td></tr>
<tr class="separator:a51104bacdc42a8e16e7bd49db871fe42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11bcbc446350f3c7ca6f5d1c9c518c93"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a11bcbc446350f3c7ca6f5d1c9c518c93">ENDPOINT_CHANNEL_BUCKETS</a>&#160;&#160;&#160;127</td></tr>
<tr class="separator:a11bcbc446350f3c7ca6f5d1c9c518c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2dae95e204f1a34b7302250c03b7ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#acc2dae95e204f1a34b7302250c03b7ce">TECH_ENDPOINT_BUCKETS</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:acc2dae95e204f1a34b7302250c03b7ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a906684cda6f8960885faf9564809cfe4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a906684cda6f8960885faf9564809cfe4">ast_endpoint_add_channel</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a906684cda6f8960885faf9564809cfe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a channel to the given endpoint.  <a href="#a906684cda6f8960885faf9564809cfe4">More...</a><br /></td></tr>
<tr class="separator:a906684cda6f8960885faf9564809cfe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d7a27b4849c075f31991c8ca796ccf2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a6d7a27b4849c075f31991c8ca796ccf2">ast_endpoint_create</a> (const char *tech, const char *resource)</td></tr>
<tr class="memdesc:a6d7a27b4849c075f31991c8ca796ccf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an endpoint struct.  <a href="#a6d7a27b4849c075f31991c8ca796ccf2">More...</a><br /></td></tr>
<tr class="separator:a6d7a27b4849c075f31991c8ca796ccf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8d97f898208c3a943e16079376d658"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#abc8d97f898208c3a943e16079376d658">ast_endpoint_find_by_id</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="memdesc:abc8d97f898208c3a943e16079376d658"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the endpoint with the given tech[/resource] id.  <a href="#abc8d97f898208c3a943e16079376d658">More...</a><br /></td></tr>
<tr class="separator:abc8d97f898208c3a943e16079376d658"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb88bdfcaf27c5ba3d54c8bb44ec480c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#acb88bdfcaf27c5ba3d54c8bb44ec480c">ast_endpoint_get_id</a> (const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:acb88bdfcaf27c5ba3d54c8bb44ec480c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the tech/resource id of the given endpoint.  <a href="#acb88bdfcaf27c5ba3d54c8bb44ec480c">More...</a><br /></td></tr>
<tr class="separator:acb88bdfcaf27c5ba3d54c8bb44ec480c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa1641cd83857e47418009992cb2de6f"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#afa1641cd83857e47418009992cb2de6f">ast_endpoint_get_resource</a> (const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:afa1641cd83857e47418009992cb2de6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the resource name of the given endpoint.  <a href="#afa1641cd83857e47418009992cb2de6f">More...</a><br /></td></tr>
<tr class="separator:afa1641cd83857e47418009992cb2de6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e4966acb2ca2792aaae9a14c935b90"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a98e4966acb2ca2792aaae9a14c935b90">ast_endpoint_get_state</a> (const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:a98e4966acb2ca2792aaae9a14c935b90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the state of the given endpoint.  <a href="#a98e4966acb2ca2792aaae9a14c935b90">More...</a><br /></td></tr>
<tr class="separator:a98e4966acb2ca2792aaae9a14c935b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf5032869657f115c3cf1303ef0fd0b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a1cf5032869657f115c3cf1303ef0fd0b">ast_endpoint_get_tech</a> (const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:a1cf5032869657f115c3cf1303ef0fd0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the technology of the given endpoint.  <a href="#a1cf5032869657f115c3cf1303ef0fd0b">More...</a><br /></td></tr>
<tr class="separator:a1cf5032869657f115c3cf1303ef0fd0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab556739547c23ff1cfb95818c2c1fd40"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#ab556739547c23ff1cfb95818c2c1fd40">ast_endpoint_init</a> (void)</td></tr>
<tr class="memdesc:ab556739547c23ff1cfb95818c2c1fd40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Endpoint support initialization.  <a href="#ab556739547c23ff1cfb95818c2c1fd40">More...</a><br /></td></tr>
<tr class="separator:ab556739547c23ff1cfb95818c2c1fd40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd57c271c4349ccc25a20774dc92c41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a7dd57c271c4349ccc25a20774dc92c41">ast_endpoint_set_max_channels</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint, int max_channels)</td></tr>
<tr class="memdesc:a7dd57c271c4349ccc25a20774dc92c41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the maximum number of channels an endpoint supports.  <a href="#a7dd57c271c4349ccc25a20774dc92c41">More...</a><br /></td></tr>
<tr class="separator:a7dd57c271c4349ccc25a20774dc92c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04bfc77dacce061c28fa31e2b86827e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a04bfc77dacce061c28fa31e2b86827e8">ast_endpoint_set_state</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint, enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:a04bfc77dacce061c28fa31e2b86827e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the state of the given endpoint.  <a href="#a04bfc77dacce061c28fa31e2b86827e8">More...</a><br /></td></tr>
<tr class="separator:a04bfc77dacce061c28fa31e2b86827e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a92006e96890f26789df16ae8a4994d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a6a92006e96890f26789df16ae8a4994d">ast_endpoint_shutdown</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:a6a92006e96890f26789df16ae8a4994d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutsdown an <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a>.  <a href="#a6a92006e96890f26789df16ae8a4994d">More...</a><br /></td></tr>
<tr class="separator:a6a92006e96890f26789df16ae8a4994d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3fae27e0558b4372735412393520a82"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">ast_endpoint_snapshot_create</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:gaf3fae27e0558b4372735412393520a82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a snapshot of an endpoint.  <a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">More...</a><br /></td></tr>
<tr class="separator:gaf3fae27e0558b4372735412393520a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231c819d45acb4aafb58381ac0d2987c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a231c819d45acb4aafb58381ac0d2987c">ast_endpoint_state_to_string</a> (enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:a231c819d45acb4aafb58381ac0d2987c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string representation of the given endpoint state.  <a href="#a231c819d45acb4aafb58381ac0d2987c">More...</a><br /></td></tr>
<tr class="separator:a231c819d45acb4aafb58381ac0d2987c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga566d4b2133a41b34f8b80de938d82e18"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:ga566d4b2133a41b34f8b80de938d82e18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the topic for a specific endpoint.  <a href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">More...</a><br /></td></tr>
<tr class="separator:ga566d4b2133a41b34f8b80de938d82e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56bc4873f8a6bc6cfa573347abf7560e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga56bc4873f8a6bc6cfa573347abf7560e">ast_endpoint_topic_cached</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="memdesc:ga56bc4873f8a6bc6cfa573347abf7560e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the topic for a specific endpoint.  <a href="../../df/deb/group__StasisTopicsAndMessages.html#ga56bc4873f8a6bc6cfa573347abf7560e">More...</a><br /></td></tr>
<tr class="separator:ga56bc4873f8a6bc6cfa573347abf7560e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6c9e50d4eb22be4459ab9753581573"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a2a6c9e50d4eb22be4459ab9753581573">create_endpoint_snapshot_message</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="separator:a2a6c9e50d4eb22be4459ab9753581573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b0396f601dc6c3ae4145123a06abe8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a82b0396f601dc6c3ae4145123a06abe8">endpoint_cache_clear</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a82b0396f601dc6c3ae4145123a06abe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for channel snapshot update.  <a href="#a82b0396f601dc6c3ae4145123a06abe8">More...</a><br /></td></tr>
<tr class="separator:a82b0396f601dc6c3ae4145123a06abe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab160268aa45758b39fc0e33a7628edb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#aab160268aa45758b39fc0e33a7628edb">endpoint_cleanup</a> (void)</td></tr>
<tr class="separator:aab160268aa45758b39fc0e33a7628edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d80cb2d19cf9dee293f9b3fe21c6d7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a57d80cb2d19cf9dee293f9b3fe21c6d7">endpoint_dtor</a> (void *obj)</td></tr>
<tr class="separator:a57d80cb2d19cf9dee293f9b3fe21c6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a7227bd6739dab418d4798ede69e88"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a35a7227bd6739dab418d4798ede69e88">endpoint_internal_create</a> (const char *tech, const char *resource)</td></tr>
<tr class="separator:a35a7227bd6739dab418d4798ede69e88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77cd4c1a1afca4172ad5db2916d6b919"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a> (struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint)</td></tr>
<tr class="separator:a77cd4c1a1afca4172ad5db2916d6b919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e5ba825a4d78723ecc9401eb06c6c9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#af4e5ba825a4d78723ecc9401eb06c6c9">endpoint_snapshot_dtor</a> (void *obj)</td></tr>
<tr class="separator:af4e5ba825a4d78723ecc9401eb06c6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba22b189a48afe54e257847142717d9d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#aba22b189a48afe54e257847142717d9d">endpoint_subscription_change</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:aba22b189a48afe54e257847142717d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0b6312c44448ff7ed80ac99b3077e438"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></td></tr>
<tr class="separator:a0b6312c44448ff7ed80ac99b3077e438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a></td></tr>
<tr class="separator:a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Asterisk endpoint API. </p>
<dl class="section author"><dt>Author</dt><dd>David M. Lee, II <a href="#" onclick="location.href='mai'+'lto:'+'dle'+'e@'+'dig'+'iu'+'m.c'+'om'; return false;">dlee@<span style="display: none;">.nosp@m.</span>digi<span style="display: none;">.nosp@m.</span>um.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a51104bacdc42a8e16e7bd49db871fe42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51104bacdc42a8e16e7bd49db871fe42">&#9670;&nbsp;</a></span>ENDPOINT_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENDPOINT_BUCKETS&#160;&#160;&#160;127</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buckets for endpoint hash. Keep it prime! </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00045">45</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00496">ast_endpoint_init()</a>.</p>

</div>
</div>
<a id="a11bcbc446350f3c7ca6f5d1c9c518c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11bcbc446350f3c7ca6f5d1c9c518c93">&#9670;&nbsp;</a></span>ENDPOINT_CHANNEL_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENDPOINT_CHANNEL_BUCKETS&#160;&#160;&#160;127</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buckets for endpoint-&gt;channel mappings. Keep it prime! </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00042">42</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>.</p>

</div>
</div>
<a id="acc2dae95e204f1a34b7302250c03b7ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc2dae95e204f1a34b7302250c03b7ce">&#9670;&nbsp;</a></span>TECH_ENDPOINT_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TECH_ENDPOINT_BUCKETS&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Buckets for technology endpoints. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00048">48</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00496">ast_endpoint_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a906684cda6f8960885faf9564809cfe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906684cda6f8960885faf9564809cfe4">&#9670;&nbsp;</a></span>ast_endpoint_add_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_endpoint_add_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a channel to the given endpoint. </p>
<dl class="section since"><dt>Since</dt><dd>12 This updates the endpoint's statistics, as well as forwarding all of the channel's messages to the endpoint's topic.</dd></dl>
<p>The channel is automagically removed from the endpoint when it is disposed of.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td></td></tr>
    <tr><td class="paramname">chan</td><td>Channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">Non-zero</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00164">164</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01511">ast_channel_forward_endpoint()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00206">ast_str_container_add()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">ast_endpoint::channel_ids</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::resource</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l00739">__ast_channel_alloc_ap()</a>, and <a class="el" href="../../d5/d3c/test__stasis__endpoints_8c_source.html#l00206">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>));</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acd2e3858727d5fca479eb8bea71e5618">ast_channel_forward_endpoint</a>(chan, endpoint);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(endpoint);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">channel_ids</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(endpoint);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a>(endpoint);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div><div class="ttc" id="structast__endpoint_html_a00099e4dc585aec5fee1006d07c3bfde"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">ast_endpoint::channel_ids</a></div><div class="ttdeci">struct ao2_container * channel_ids</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">main/endpoints.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_acd2e3858727d5fca479eb8bea71e5618"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acd2e3858727d5fca479eb8bea71e5618">ast_channel_forward_endpoint</a></div><div class="ttdeci">int ast_channel_forward_endpoint(struct ast_channel *chan, struct ast_endpoint *endpoint)</div><div class="ttdoc">Forward channel stasis messages to the given endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01511">channel_internal_api.c:1511</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__endpoint_html_ae2dfc8e2aac2a8f3eed1f3bf8054e358"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">ast_endpoint::resource</a></div><div class="ttdeci">const ast_string_field resource</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a77cd4c1a1afca4172ad5db2916d6b919"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a></div><div class="ttdeci">static void endpoint_publish_snapshot(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">main/endpoints.c:122</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="strings_8h_html_ae2861c04a240bbc90f32ade1e1261afa"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae2861c04a240bbc90f32ade1e1261afa">ast_str_container_add</a></div><div class="ttdeci">int ast_str_container_add(struct ao2_container *str_container, const char *add)</div><div class="ttdoc">Adds a string to a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00206">strings.c:206</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d7a27b4849c075f31991c8ca796ccf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d7a27b4849c075f31991c8ca796ccf2">&#9670;&nbsp;</a></span>ast_endpoint_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a>* ast_endpoint_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>resource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an endpoint struct. </p>
<p>The endpoint is created with a state of UNKNOWN and max_channels of -1 (unlimited). While <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> is AO2 managed, you have to shut it down with <a class="el" href="../../d4/d61/endpoints_8h.html#a6a92006e96890f26789df16ae8a4994d" title="Shutsdown an ast_endpoint. ">ast_endpoint_shutdown()</a> to clean up references from subscriptions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tech</td><td>Technology for this endpoint. </td></tr>
    <tr><td class="paramname">resource</td><td>Name of this endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Newly created endpoint. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00319">319</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01413">persistent_endpoint_find_or_create()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17861">register_verify()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l01701">skinny_device_alloc()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00604">xmpp_client_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tech)) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Endpoint tech cannot be empty\n&quot;</span>);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(resource)) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Endpoint resource cannot be empty\n&quot;</span>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a35a7227bd6739dab418d4798ede69e88">endpoint_internal_create</a>(tech, resource);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a35a7227bd6739dab418d4798ede69e88"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a35a7227bd6739dab418d4798ede69e88">endpoint_internal_create</a></div><div class="ttdeci">static struct ast_endpoint * endpoint_internal_create(const char *tech, const char *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">main/endpoints.c:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc8d97f898208c3a943e16079376d658"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8d97f898208c3a943e16079376d658">&#9670;&nbsp;</a></span>ast_endpoint_find_by_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a>* ast_endpoint_find_by_id </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the endpoint with the given tech[/resource] id. </p>
<p>Endpoints are refcounted, so <a class="el" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup()</a> when you're done.</p>
<dl class="section note"><dt>Note</dt><dd>The resource portion of an ID is optional. If not provided, an aggregate endpoint for the entire technology is returned. These endpoints must not be modified, but can be subscribed to in order to receive updates for all endpoints of a given technology.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Tech[/resource] id to look for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Associated endpoint. </dd>
<dd>
<code>NULL</code> if not found.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00082">82</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d5a/resource__endpoints_8c_source.html#l00085">ast_ari_endpoints_list_by_tech()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01614">endpoint_find()</a>, and <a class="el" href="../../db/d21/messaging_8c_source.html#l00423">messaging_app_unsubscribe_endpoint()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>, <span class="keywordtype">id</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      endpoint = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a>, <span class="keywordtype">id</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">return</span> endpoint;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="structast__endpoint_html"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00054">main/endpoints.c:54</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a></div><div class="ttdeci">static struct ao2_container * tech_endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00052">main/endpoints.c:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb88bdfcaf27c5ba3d54c8bb44ec480c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb88bdfcaf27c5ba3d54c8bb44ec480c">&#9670;&nbsp;</a></span>ast_endpoint_get_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_endpoint_get_id </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the tech/resource id of the given endpoint. </p>
<p>This is unique across all endpoints, and immutable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tech/resource id of the endpoint. </dd>
<dd>
<code>NULL</code> if endpoint is <code>NULL</code>. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00391">391</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::id</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01531">app_subscribe_endpoint()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l00199">forwards_create_endpoint()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00459">get_or_create_subscription()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00394">get_subscription()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00493">messaging_app_subscribe_endpoint()</a>, and <a class="el" href="../../db/d21/messaging_8c_source.html#l00423">messaging_app_unsubscribe_endpoint()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">return</span> endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a7f573636659429c505b8fa845bbb2dc8">id</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__endpoint_html_a7f573636659429c505b8fa845bbb2dc8"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a7f573636659429c505b8fa845bbb2dc8">ast_endpoint::id</a></div><div class="ttdeci">const ast_string_field id</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa1641cd83857e47418009992cb2de6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa1641cd83857e47418009992cb2de6f">&#9670;&nbsp;</a></span>ast_endpoint_get_resource()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_endpoint_get_resource </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the resource name of the given endpoint. </p>
<p>This is unique for the endpoint's technology, and immutable.</p>
<dl class="section note"><dt>Note</dt><dd>If the endpoint being queried is a technology aggregate endpoint, this will be an empty string.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Resource name of the endpoint. </dd>
<dd>
<code>NULL</code> if endpoint is <code>NULL</code>. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00383">383</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::resource</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01296">add_to_regcontext()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01515">ast_sip_get_endpoint_snapshot()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01386">ast_sip_persistent_endpoint_publish_contact_state()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01329">ast_sip_persistent_endpoint_update_state()</a>, <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00075">endpoint_deleted_observer()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00459">get_or_create_subscription()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00394">get_subscription()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00423">messaging_app_unsubscribe_endpoint()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00066">persistent_endpoint_cmp()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00057">persistent_endpoint_hash()</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">return</span> endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="ttc" id="structast__endpoint_html_ae2dfc8e2aac2a8f3eed1f3bf8054e358"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">ast_endpoint::resource</a></div><div class="ttdeci">const ast_string_field resource</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a98e4966acb2ca2792aaae9a14c935b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98e4966acb2ca2792aaae9a14c935b90">&#9670;&nbsp;</a></span>ast_endpoint_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a> ast_endpoint_get_state </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the state of the given endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>state. </dd>
<dd>
<code>AST_ENDPOINT_UNKNOWN</code> if endpoint is <code>NULL</code>. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13.4 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00399">399</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00053">AST_ENDPOINT_UNKNOWN</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00061">ast_endpoint::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01296">add_to_regcontext()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01329">ast_sip_persistent_endpoint_update_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;{</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">return</span> endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a6d02593144c6c3fd9f222fce483d8a65">state</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00053">endpoints.h:53</a></div></div>
<div class="ttc" id="structast__endpoint_html_a6d02593144c6c3fd9f222fce483d8a65"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a6d02593144c6c3fd9f222fce483d8a65">ast_endpoint::state</a></div><div class="ttdeci">enum ast_endpoint_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00061">main/endpoints.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1cf5032869657f115c3cf1303ef0fd0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cf5032869657f115c3cf1303ef0fd0b">&#9670;&nbsp;</a></span>ast_endpoint_get_tech()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_endpoint_get_tech </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the technology of the given endpoint. </p>
<p>This is an immutable string describing the channel provider technology (SIP, IAX2, etc.).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tec of the endpoint. </dd>
<dd>
<code>NULL</code> if endpoint is <code>NULL</code>. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00375">375</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::tech</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01515">ast_sip_get_endpoint_snapshot()</a>, <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01174">chan_pjsip_devicestate()</a>, and <a class="el" href="../../db/d21/messaging_8c_source.html#l00394">get_subscription()</a>.</p>
<div class="fragment"><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;{</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">return</span> endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__endpoint_html_a6379def8cefd9afdea29d5ed673cf8a0"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">ast_endpoint::tech</a></div><div class="ttdeci">const ast_string_field tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab556739547c23ff1cfb95818c2c1fd40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab556739547c23ff1cfb95818c2c1fd40">&#9670;&nbsp;</a></span>ast_endpoint_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_endpoint_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Endpoint support initialization. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
Non-zero on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00496">496</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00045">ENDPOINT_BUCKETS</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00487">endpoint_cleanup()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00048">TECH_ENDPOINT_BUCKETS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#aab160268aa45758b39fc0e33a7628edb">endpoint_cleanup</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a51104bacdc42a8e16e7bd49db871fe42">ENDPOINT_BUCKETS</a>,</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      ast_endpoint_hash_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ast_endpoint_cmp_fn);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#acc2dae95e204f1a34b7302250c03b7ce">TECH_ENDPOINT_BUCKETS</a>, ast_endpoint_hash_fn, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ast_endpoint_cmp_fn);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a>) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a51104bacdc42a8e16e7bd49db871fe42"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a51104bacdc42a8e16e7bd49db871fe42">ENDPOINT_BUCKETS</a></div><div class="ttdeci">#define ENDPOINT_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00045">main/endpoints.c:45</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a></div><div class="ttdeci">static struct ao2_container * tech_endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00052">main/endpoints.c:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_acc2dae95e204f1a34b7302250c03b7ce"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#acc2dae95e204f1a34b7302250c03b7ce">TECH_ENDPOINT_BUCKETS</a></div><div class="ttdeci">#define TECH_ENDPOINT_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00048">main/endpoints.c:48</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_aab160268aa45758b39fc0e33a7628edb"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#aab160268aa45758b39fc0e33a7628edb">endpoint_cleanup</a></div><div class="ttdeci">static void endpoint_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00487">main/endpoints.c:487</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7dd57c271c4349ccc25a20774dc92c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dd57c271c4349ccc25a20774dc92c41">&#9670;&nbsp;</a></span>ast_endpoint_set_max_channels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_endpoint_set_max_channels </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_channels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the maximum number of channels an endpoint supports. </p>
<p>Set to -1 for unlimited channels.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>Endpoint to modify. </td></tr>
    <tr><td class="paramname">max_channels</td><td>Maximum number of concurrent channels this endpoint supports. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00419">419</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00068">ast_endpoint::max_channels</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::resource</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00106">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>));</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(endpoint);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#ade80a1307c60b56d040abb38337e2168">max_channels</a> = <a class="code" href="../../d4/df2/structast__endpoint.html#ade80a1307c60b56d040abb38337e2168">max_channels</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(endpoint);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a>(endpoint);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__endpoint_html_ae2dfc8e2aac2a8f3eed1f3bf8054e358"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">ast_endpoint::resource</a></div><div class="ttdeci">const ast_string_field resource</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a77cd4c1a1afca4172ad5db2916d6b919"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a></div><div class="ttdeci">static void endpoint_publish_snapshot(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">main/endpoints.c:122</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__endpoint_html_ade80a1307c60b56d040abb38337e2168"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ade80a1307c60b56d040abb38337e2168">ast_endpoint::max_channels</a></div><div class="ttdeci">int max_channels</div><div class="ttdoc">Max channels for this endpoint. -1 means unlimited or unknown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00068">main/endpoints.c:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04bfc77dacce061c28fa31e2b86827e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04bfc77dacce061c28fa31e2b86827e8">&#9670;&nbsp;</a></span>ast_endpoint_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_endpoint_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the state of the given endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>Endpoint to modify. </td></tr>
    <tr><td class="paramname">state</td><td>New state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00407">407</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">ast_endpoint::resource</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00061">ast_endpoint::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08898">__expire_registry()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12317">__iax2_poke_noanswer()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01329">ast_sip_persistent_endpoint_update_state()</a>, <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00106">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16646">expire_register()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24962">handle_response_peerpoke()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16961">parse_register_contact()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01413">persistent_endpoint_find_or_create()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17861">register_verify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30523">sip_poke_noanswer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02258">skinny_register()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07466">skinny_session_cleanup()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l10083">socket_process_helper()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08748">unload_module()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09002">update_registry()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00590">xmpp_client_change_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>));</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(endpoint);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a6d02593144c6c3fd9f222fce483d8a65">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(endpoint);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a>(endpoint);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__endpoint_html_ae2dfc8e2aac2a8f3eed1f3bf8054e358"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">ast_endpoint::resource</a></div><div class="ttdeci">const ast_string_field resource</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a77cd4c1a1afca4172ad5db2916d6b919"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a></div><div class="ttdeci">static void endpoint_publish_snapshot(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">main/endpoints.c:122</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__endpoint_html_a6d02593144c6c3fd9f222fce483d8a65"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a6d02593144c6c3fd9f222fce483d8a65">ast_endpoint::state</a></div><div class="ttdeci">enum ast_endpoint_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00061">main/endpoints.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a92006e96890f26789df16ae8a4994d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a92006e96890f26789df16ae8a4994d">&#9670;&nbsp;</a></span>ast_endpoint_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_endpoint_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutsdown an <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>Endpoint to shut down. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00350">350</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">ast_endpoint_topic()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00334">create_endpoint_snapshot_message()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00072">ast_endpoint::router</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router_unsubscribe()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00076">ast_endpoint::tech_forward</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d81/test__endpoints_8c_source.html#l00043">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12766">peer_destructor()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01289">persistent_endpoint_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05309">sip_destroy_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l01722">skinny_device_destroy()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l00545">xmpp_client_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, clear_msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">if</span> (endpoint == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>, endpoint);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a7c6b290affb0a7da7f0d85a1d5756837">tech_forward</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a7c6b290affb0a7da7f0d85a1d5756837">tech_forward</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   clear_msg = <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a2a6c9e50d4eb22be4459ab9753581573">create_endpoint_snapshot_message</a>(endpoint);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">if</span> (clear_msg) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(clear_msg);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a>(endpoint), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   }</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="comment">/* Bump refcount to hold on to the router */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>, +1);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__endpoint_html_a7c6b290affb0a7da7f0d85a1d5756837"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a7c6b290affb0a7da7f0d85a1d5756837">ast_endpoint::tech_forward</a></div><div class="ttdeci">struct stasis_forward * tech_forward</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00076">main/endpoints.c:76</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga566d4b2133a41b34f8b80de938d82e18"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a></div><div class="ttdeci">struct stasis_topic * ast_endpoint_topic(struct ast_endpoint *endpoint)</div><div class="ttdoc">Returns the topic for a specific endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">main/endpoints.c:93</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__endpoint_html_a85c07e3e0d15ea99cf0c5dbe1dfdcb24"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">ast_endpoint::router</a></div><div class="ttdeci">struct stasis_message_router * router</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00072">main/endpoints.c:72</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a2a6c9e50d4eb22be4459ab9753581573"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a2a6c9e50d4eb22be4459ab9753581573">create_endpoint_snapshot_message</a></div><div class="ttdeci">static struct stasis_message * create_endpoint_snapshot_message(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00334">main/endpoints.c:334</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5646e370e39cc29f5faa7a30fda11159"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a></div><div class="ttdeci">void stasis_message_router_unsubscribe(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router.c:258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a231c819d45acb4aafb58381ac0d2987c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231c819d45acb4aafb58381ac0d2987c">&#9670;&nbsp;</a></span>ast_endpoint_state_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_endpoint_state_to_string </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string representation of the given endpoint state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>Endpoint state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of <em>state</em>. </dd>
<dd>
<code>"?"</code> if <em>state</em> isn't in <a class="el" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448e">ast_endpoint_state</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00109">109</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00055">AST_ENDPOINT_OFFLINE</a>, <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00057">AST_ENDPOINT_ONLINE</a>, and <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00053">AST_ENDPOINT_UNKNOWN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/daf/stasis__endpoints_8c_source.html#l00398">ast_endpoint_snapshot_to_json()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d4/d88/structstate.html">state</a>) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a>:</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114">AST_ENDPOINT_OFFLINE</a>:</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;offline&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3">AST_ENDPOINT_ONLINE</a>:</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;online&quot;</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;?&quot;</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00053">endpoints.h:53</a></div></div>
<div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea18800ee482eac39e9d235ddd357b9de3">AST_ENDPOINT_ONLINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00057">endpoints.h:57</a></div></div>
<div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea0c201502490a90f732b9946dc7545114">AST_ENDPOINT_OFFLINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00055">endpoints.h:55</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a6c9e50d4eb22be4459ab9753581573"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a6c9e50d4eb22be4459ab9753581573">&#9670;&nbsp;</a></span>create_endpoint_snapshot_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* create_endpoint_snapshot_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00334">334</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00445">ast_endpoint_snapshot_create()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00350">ast_endpoint_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>()) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">ast_endpoint_snapshot_create</a>(endpoint);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>(), snapshot);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_gaf3fae27e0558b4372735412393520a82"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">ast_endpoint_snapshot_create</a></div><div class="ttdeci">struct ast_endpoint_snapshot * ast_endpoint_snapshot_create(struct ast_endpoint *endpoint)</div><div class="ttdoc">Create a snapshot of an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00445">main/endpoints.c:445</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf23b8f5195f28ae2044eae71be431433"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_endpoint_snapshot_type(void)</div><div class="ttdoc">Message type for ast_endpoint_snapshot. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a></div><div class="ttdoc">A snapshot of an endpoint&amp;#39;s state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00048">stasis_endpoints.h:48</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82b0396f601dc6c3ae4145123a06abe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b0396f601dc6c3ae4145123a06abe8">&#9670;&nbsp;</a></span>endpoint_cache_clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_cache_clear </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for channel snapshot update. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00183">183</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01046">AST_FLAG_DEAD</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00222">ast_str_container_remove()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00146">ast_channel_snapshot::base</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">ast_endpoint::channel_ids</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00155">ast_channel_snapshot::flags</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00175">ast_channel_snapshot_update::new_snapshot</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../d9/d4a/stasis__channels_8h_source.html#l00112">ast_channel_snapshot_base::uniqueid</a>, and <a class="el" href="../../d0/d89/codec__g726_8c_source.html#l00367">update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint = data;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d33/structast__channel__snapshot__update.html">ast_channel_snapshot_update</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="comment">/* Only when the channel is dead do we remove it */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>)) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(endpoint);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ad763671e425c36b3d4c467a32676e0a5">ast_str_container_remove</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">channel_ids</a>, update-&gt;<a class="code" href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">new_snapshot</a>-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(endpoint);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a>(endpoint);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structast__endpoint_html_a00099e4dc585aec5fee1006d07c3bfde"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">ast_endpoint::channel_ids</a></div><div class="ttdeci">struct ao2_container * channel_ids</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">main/endpoints.c:74</a></div></div>
<div class="ttc" id="strings_8h_html_ad763671e425c36b3d4c467a32676e0a5"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ad763671e425c36b3d4c467a32676e0a5">ast_str_container_remove</a></div><div class="ttdeci">void ast_str_container_remove(struct ao2_container *str_container, const char *remove)</div><div class="ttdoc">Removes a string from a string container allocated by ast_str_container_alloc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00222">strings.c:222</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel__snapshot__update_html"><div class="ttname"><a href="../../da/d33/structast__channel__snapshot__update.html">ast_channel_snapshot_update</a></div><div class="ttdoc">Structure representing a change of snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00173">stasis_channels.h:173</a></div></div>
<div class="ttc" id="structast__endpoint_html"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00054">main/endpoints.c:54</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a77cd4c1a1afca4172ad5db2916d6b919"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a></div><div class="ttdeci">static void endpoint_publish_snapshot(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">main/endpoints.c:122</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structast__channel__snapshot__update_html_aab7bdfa0efe2821d545c39d3a67fec38"><div class="ttname"><a href="../../da/d33/structast__channel__snapshot__update.html#aab7bdfa0efe2821d545c39d3a67fec38">ast_channel_snapshot_update::new_snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * new_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00175">stasis_channels.h:175</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#aec78000b2897c094f68ed72559e18acd">ast_channel_snapshot::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00155">stasis_channels.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab160268aa45758b39fc0e33a7628edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab160268aa45758b39fc0e33a7628edb">&#9670;&nbsp;</a></span>endpoint_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00487">487</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00496">ast_endpoint_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;{</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a></div><div class="ttdeci">static struct ao2_container * tech_endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00052">main/endpoints.c:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57d80cb2d19cf9dee293f9b3fe21c6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57d80cb2d19cf9dee293f9b3fe21c6d7">&#9670;&nbsp;</a></span>endpoint_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00145">145</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">ast_endpoint::channel_ids</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00072">ast_endpoint::router</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00189">stasis_cp_single_unsubscribe()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00278">stasis_message_router_is_done()</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00070">ast_endpoint::topics</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint = obj;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="comment">/* The router should be shut down already */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1eae8af1e9345c9cf828966b3d445d09">stasis_message_router_is_done</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">router</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#abe993fdf8286b18a510ea23a45aee48e">stasis_cp_single_unsubscribe</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a40bd93a4f1e068d01d79a1ff6599017c">topics</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a40bd93a4f1e068d01d79a1ff6599017c">topics</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">channel_ids</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">channel_ids</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(endpoint);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div><div class="ttc" id="structast__endpoint_html_a00099e4dc585aec5fee1006d07c3bfde"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a00099e4dc585aec5fee1006d07c3bfde">ast_endpoint::channel_ids</a></div><div class="ttdeci">struct ao2_container * channel_ids</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00074">main/endpoints.c:74</a></div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_abe993fdf8286b18a510ea23a45aee48e"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#abe993fdf8286b18a510ea23a45aee48e">stasis_cp_single_unsubscribe</a></div><div class="ttdeci">void stasis_cp_single_unsubscribe(struct stasis_cp_single *one)</div><div class="ttdoc">Stops caching and forwarding messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00189">stasis_cache_pattern.c:189</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1eae8af1e9345c9cf828966b3d445d09"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1eae8af1e9345c9cf828966b3d445d09">stasis_message_router_is_done</a></div><div class="ttdeci">int stasis_message_router_is_done(struct stasis_message_router *router)</div><div class="ttdoc">Returns whether router has received its final message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00278">stasis_message_router.c:278</a></div></div>
<div class="ttc" id="structast__endpoint_html"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00054">main/endpoints.c:54</a></div></div>
<div class="ttc" id="structast__endpoint_html_a85c07e3e0d15ea99cf0c5dbe1dfdcb24"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a85c07e3e0d15ea99cf0c5dbe1dfdcb24">ast_endpoint::router</a></div><div class="ttdeci">struct stasis_message_router * router</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00072">main/endpoints.c:72</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="structast__endpoint_html_a40bd93a4f1e068d01d79a1ff6599017c"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a40bd93a4f1e068d01d79a1ff6599017c">ast_endpoint::topics</a></div><div class="ttdeci">struct stasis_cp_single * topics</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00070">main/endpoints.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35a7227bd6739dab418d4798ede69e88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a7227bd6739dab418d4798ede69e88">&#9670;&nbsp;</a></span>endpoint_internal_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a>* endpoint_internal_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>resource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">214</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type()</a>, <a class="el" href="../../d3/daf/stasis__endpoints_8c_source.html#l00106">ast_endpoint_cache_all()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">ast_endpoint_topic()</a>, <a class="el" href="../../d4/d61/endpoints_8h_source.html#l00053">AST_ENDPOINT_UNKNOWN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00201">ast_str_container_alloc_options()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00550">ast_string_field_build</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00183">endpoint_cache_clear()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00042">ENDPOINT_CHANNEL_BUCKETS</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00145">endpoint_dtor()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">endpoint_publish_snapshot()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00203">endpoint_subscription_change()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00222">stasis_cp_single_accept_message_type()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00139">stasis_cp_single_create()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00231">stasis_cp_single_set_filter()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00205">stasis_cp_single_topic()</a>, <a class="el" href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00162">stasis_cp_sink_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00077">stasis_message_router_create_pool</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l00300">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00319">ast_endpoint_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *, endpoint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *, tech_endpoint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keywordtype">int</span> r = 0;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="comment">/* Get/create the technology endpoint */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>)) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      tech_endpoint = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a>, <a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">if</span> (!tech_endpoint) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         tech_endpoint = <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a35a7227bd6739dab418d4798ede69e88">endpoint_internal_create</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         <span class="keywordflow">if</span> (!tech_endpoint) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   endpoint = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*endpoint), <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a57d80cb2d19cf9dee293f9b3fe21c6d7">endpoint_dtor</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordflow">if</span> (!endpoint) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   endpoint-&gt;max_channels = -1;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   endpoint-&gt;state = <a class="code" href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(endpoint, 80) != 0) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(endpoint, <a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>, <a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(endpoint, <a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a>(endpoint, <span class="keywordtype">id</span>, <span class="stringliteral">&quot;%s%s%s&quot;</span>,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">tech</a>,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>) ? <span class="stringliteral">&quot;/&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="comment">/* All access to channel_ids should be covered by the endpoint&#39;s</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    * lock; no extra lock needed. */</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   endpoint-&gt;channel_ids = <a class="code" href="../../d6/d90/strings_8h.html#a6764761a6222d4855cbf6f7abf117015">ast_str_container_alloc_options</a>(</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a11bcbc446350f3c7ca6f5d1c9c518c93">ENDPOINT_CHANNEL_BUCKETS</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordflow">if</span> (!endpoint-&gt;channel_ids) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">resource</a>)) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordtype">char</span> *topic_name;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;topic_name, <span class="stringliteral">&quot;endpoint:%s&quot;</span>, endpoint-&gt;id);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      endpoint-&gt;topics = <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a9150c03e027b8e52ab8b393f6dccd1f0">stasis_cp_single_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga43f306f19e883f27adf4f416fb5ec2b4">ast_endpoint_cache_all</a>(),</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;         topic_name);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(topic_name);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">if</span> (!endpoint-&gt;topics) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a94e0169bfeeebe1165d98f138a242b25">stasis_cp_single_accept_message_type</a>(endpoint-&gt;topics, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>());</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a42bb7d39606719a1386d47a46512c343">stasis_cp_single_set_filter</a>(endpoint-&gt;topics, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      endpoint-&gt;router = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a7ba1d69412c7149859c52b8a6664fc31">stasis_message_router_create_pool</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a>(endpoint));</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">if</span> (!endpoint-&gt;router) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      r |= <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(endpoint-&gt;router,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type</a>(), <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a82b0396f601dc6c3ae4145123a06abe8">endpoint_cache_clear</a>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         endpoint);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      r |= <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(endpoint-&gt;router,</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>(), <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#aba22b189a48afe54e257847142717d9d">endpoint_subscription_change</a>,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         endpoint);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span> (r) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      endpoint-&gt;tech_forward = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a03eedec7ea8b0e95fcec188f18cbe6f0">stasis_cp_single_topic</a>(endpoint-&gt;topics),</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a03eedec7ea8b0e95fcec188f18cbe6f0">stasis_cp_single_topic</a>(tech_endpoint-&gt;topics));</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a>(endpoint);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a>, endpoint);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordtype">char</span> *topic_name;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;topic_name, <span class="stringliteral">&quot;endpoint:%s&quot;</span>, endpoint-&gt;id);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      endpoint-&gt;topics = <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#ae85a4f2f0de9cf9a973f7fd87ec643a3">stasis_cp_sink_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga43f306f19e883f27adf4f416fb5ec2b4">ast_endpoint_cache_all</a>(),</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         topic_name);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(topic_name);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (!endpoint-&gt;topics) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a94e0169bfeeebe1165d98f138a242b25">stasis_cp_single_accept_message_type</a>(endpoint-&gt;topics, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>());</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="../../d3/d8f/stasis__cache__pattern_8h.html#a42bb7d39606719a1386d47a46512c343">stasis_cp_single_set_filter</a>(endpoint-&gt;topics, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(<a class="code" href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a>, endpoint);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(endpoint, +1);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">return</span> endpoint;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="stasis__message__router_8h_html_a7ba1d69412c7149859c52b8a6664fc31"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a7ba1d69412c7149859c52b8a6664fc31">stasis_message_router_create_pool</a></div><div class="ttdeci">#define stasis_message_router_create_pool(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00077">stasis_message_router.h:77</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga43f306f19e883f27adf4f416fb5ec2b4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga43f306f19e883f27adf4f416fb5ec2b4">ast_endpoint_cache_all</a></div><div class="ttdeci">struct stasis_cp_all * ast_endpoint_cache_all(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/daf/stasis__endpoints_8c_source.html#l00106">stasis_endpoints.c:106</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf23b8f5195f28ae2044eae71be431433"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_endpoint_snapshot_type(void)</div><div class="ttdoc">Message type for ast_endpoint_snapshot. </div></div>
<div class="ttc" id="main_2endpoints_8c_html_a11bcbc446350f3c7ca6f5d1c9c518c93"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a11bcbc446350f3c7ca6f5d1c9c518c93">ENDPOINT_CHANNEL_BUCKETS</a></div><div class="ttdeci">#define ENDPOINT_CHANNEL_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00042">main/endpoints.c:42</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga566d4b2133a41b34f8b80de938d82e18"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a></div><div class="ttdeci">struct stasis_topic * ast_endpoint_topic(struct ast_endpoint *endpoint)</div><div class="ttdoc">Returns the topic for a specific endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">main/endpoints.c:93</a></div></div>
<div class="ttc" id="structast__endpoint_html_ae2dfc8e2aac2a8f3eed1f3bf8054e358"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#ae2dfc8e2aac2a8f3eed1f3bf8054e358">ast_endpoint::resource</a></div><div class="ttdeci">const ast_string_field resource</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_aba22b189a48afe54e257847142717d9d"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#aba22b189a48afe54e257847142717d9d">endpoint_subscription_change</a></div><div class="ttdeci">static void endpoint_subscription_change(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00203">main/endpoints.c:203</a></div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_a9150c03e027b8e52ab8b393f6dccd1f0"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#a9150c03e027b8e52ab8b393f6dccd1f0">stasis_cp_single_create</a></div><div class="ttdeci">struct stasis_cp_single * stasis_cp_single_create(struct stasis_cp_all *all, const char *name)</div><div class="ttdoc">Create the &amp;#39;one&amp;#39; side of the cache pattern. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00139">stasis_cache_pattern.c:139</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="endpoints_8h_html_a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a00db6879caf0ce423b5a35b57d01448ea412bb8e63ddb843e7638ea71de3dce54">AST_ENDPOINT_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d61/endpoints_8h_source.html#l00053">endpoints.h:53</a></div></div>
<div class="ttc" id="structast__endpoint_html"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00054">main/endpoints.c:54</a></div></div>
<div class="ttc" id="strings_8h_html_a6764761a6222d4855cbf6f7abf117015"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6764761a6222d4855cbf6f7abf117015">ast_str_container_alloc_options</a></div><div class="ttdeci">struct ao2_container * ast_str_container_alloc_options(enum ao2_alloc_opts opts, int buckets)</div><div class="ttdoc">Allocates a hash container for bare strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d48/strings_8c_source.html#l00201">strings.c:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a77cd4c1a1afca4172ad5db2916d6b919"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a77cd4c1a1afca4172ad5db2916d6b919">endpoint_publish_snapshot</a></div><div class="ttdeci">static void endpoint_publish_snapshot(struct ast_endpoint *endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">main/endpoints.c:122</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a0b6312c44448ff7ed80ac99b3077e438"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a0b6312c44448ff7ed80ac99b3077e438">endpoints</a></div><div class="ttdeci">static struct ao2_container * endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">main/endpoints.c:50</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">tech_endpoints</a></div><div class="ttdeci">static struct ao2_container * tech_endpoints</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00052">main/endpoints.c:52</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a57d80cb2d19cf9dee293f9b3fe21c6d7"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a57d80cb2d19cf9dee293f9b3fe21c6d7">endpoint_dtor</a></div><div class="ttdeci">static void endpoint_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00145">main/endpoints.c:145</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__endpoint_html_a6379def8cefd9afdea29d5ed673cf8a0"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a6379def8cefd9afdea29d5ed673cf8a0">ast_endpoint::tech</a></div><div class="ttdeci">const ast_string_field tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00059">main/endpoints.c:59</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_a03eedec7ea8b0e95fcec188f18cbe6f0"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#a03eedec7ea8b0e95fcec188f18cbe6f0">stasis_cp_single_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_cp_single_topic(struct stasis_cp_single *one)</div><div class="ttdoc">Get the topic for this instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00205">stasis_cache_pattern.c:205</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga8fb4dbec86956e211c0489112a6de975"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga8fb4dbec86956e211c0489112a6de975">ast_channel_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_snapshot_type(void)</div><div class="ttdoc">Message type for ast_channel_snapshot_update. </div></div>
<div class="ttc" id="stringfields_8h_html_a8b9f4347fc72720cc5cead952b54abe9"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a8b9f4347fc72720cc5cead952b54abe9">ast_string_field_build</a></div><div class="ttdeci">#define ast_string_field_build(x, field, fmt, args...)</div><div class="ttdoc">Set a field to a complex (built) value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00550">stringfields.h:550</a></div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_a42bb7d39606719a1386d47a46512c343"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#a42bb7d39606719a1386d47a46512c343">stasis_cp_single_set_filter</a></div><div class="ttdeci">int stasis_cp_single_set_filter(struct stasis_cp_single *one, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00231">stasis_cache_pattern.c:231</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a35a7227bd6739dab418d4798ede69e88"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a35a7227bd6739dab418d4798ede69e88">endpoint_internal_create</a></div><div class="ttdeci">static struct ast_endpoint * endpoint_internal_create(const char *tech, const char *resource)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">main/endpoints.c:214</a></div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_a94e0169bfeeebe1165d98f138a242b25"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#a94e0169bfeeebe1165d98f138a242b25">stasis_cp_single_accept_message_type</a></div><div class="ttdeci">int stasis_cp_single_accept_message_type(struct stasis_cp_single *one, struct stasis_message_type *type)</div><div class="ttdoc">Indicate to an instance that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00222">stasis_cache_pattern.c:222</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
<div class="ttc" id="main_2endpoints_8c_html_a82b0396f601dc6c3ae4145123a06abe8"><div class="ttname"><a href="../../d7/d4b/main_2endpoints_8c.html#a82b0396f601dc6c3ae4145123a06abe8">endpoint_cache_clear</a></div><div class="ttdeci">static void endpoint_cache_clear(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdoc">Handler for channel snapshot update. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00183">main/endpoints.c:183</a></div></div>
<div class="ttc" id="stasis__cache__pattern_8h_html_ae85a4f2f0de9cf9a973f7fd87ec643a3"><div class="ttname"><a href="../../d3/d8f/stasis__cache__pattern_8h.html#ae85a4f2f0de9cf9a973f7fd87ec643a3">stasis_cp_sink_create</a></div><div class="ttdeci">struct stasis_cp_single * stasis_cp_sink_create(struct stasis_cp_all *all, const char *name)</div><div class="ttdoc">Create a sink in the cache pattern. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1c/stasis__cache__pattern_8c_source.html#l00162">stasis_cache_pattern.c:162</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77cd4c1a1afca4172ad5db2916d6b919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77cd4c1a1afca4172ad5db2916d6b919">&#9670;&nbsp;</a></span>endpoint_publish_snapshot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_publish_snapshot </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00122">122</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00445">ast_endpoint_snapshot_create()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">ast_endpoint_topic()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00070">ast_endpoint::topics</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00164">ast_endpoint_add_channel()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00419">ast_endpoint_set_max_channels()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00407">ast_endpoint_set_state()</a>, <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00183">endpoint_cache_clear()</a>, and <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a> *, snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint-&gt;<a class="code" href="../../d4/df2/structast__endpoint.html#a40bd93a4f1e068d01d79a1ff6599017c">topics</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>()) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">ast_endpoint_snapshot_create</a>(endpoint);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordflow">if</span> (!snapshot) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a>(), snapshot);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a>(endpoint), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf3fae27e0558b4372735412393520a82"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf3fae27e0558b4372735412393520a82">ast_endpoint_snapshot_create</a></div><div class="ttdeci">struct ast_endpoint_snapshot * ast_endpoint_snapshot_create(struct ast_endpoint *endpoint)</div><div class="ttdoc">Create a snapshot of an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00445">main/endpoints.c:445</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf23b8f5195f28ae2044eae71be431433"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf23b8f5195f28ae2044eae71be431433">ast_endpoint_snapshot_type</a></div><div class="ttdeci">struct stasis_message_type * ast_endpoint_snapshot_type(void)</div><div class="ttdoc">Message type for ast_endpoint_snapshot. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga566d4b2133a41b34f8b80de938d82e18"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga566d4b2133a41b34f8b80de938d82e18">ast_endpoint_topic</a></div><div class="ttdeci">struct stasis_topic * ast_endpoint_topic(struct ast_endpoint *endpoint)</div><div class="ttdoc">Returns the topic for a specific endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00093">main/endpoints.c:93</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a></div><div class="ttdoc">A snapshot of an endpoint&amp;#39;s state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00048">stasis_endpoints.h:48</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__endpoint_html_a40bd93a4f1e068d01d79a1ff6599017c"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html#a40bd93a4f1e068d01d79a1ff6599017c">ast_endpoint::topics</a></div><div class="ttdeci">struct stasis_cp_single * topics</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00070">main/endpoints.c:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4e5ba825a4d78723ecc9401eb06c6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e5ba825a4d78723ecc9401eb06c6c9">&#9670;&nbsp;</a></span>endpoint_snapshot_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_snapshot_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00431">431</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d7/d44/stasis__endpoints_8h_source.html#l00065">ast_endpoint_snapshot::channel_ids</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d7/d44/stasis__endpoints_8h_source.html#l00063">ast_endpoint_snapshot::num_channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00445">ast_endpoint_snapshot_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a> *snapshot = obj;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d4/d84/structchannel.html">channel</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(snapshot != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">for</span> (channel = 0; channel &lt; snapshot-&gt;<a class="code" href="../../da/dd1/structast__endpoint__snapshot.html#a3ebe4beb37744670619a1fb1cb609d91">num_channels</a>; channel++) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(snapshot-&gt;<a class="code" href="../../da/dd1/structast__endpoint__snapshot.html#af8f1f95df0b0112b6e33a612c577df63">channel_ids</a>[channel], -1);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(snapshot);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html_a3ebe4beb37744670619a1fb1cb609d91"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html#a3ebe4beb37744670619a1fb1cb609d91">ast_endpoint_snapshot::num_channels</a></div><div class="ttdeci">int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00063">stasis_endpoints.h:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html">ast_endpoint_snapshot</a></div><div class="ttdoc">A snapshot of an endpoint&amp;#39;s state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00048">stasis_endpoints.h:48</a></div></div>
<div class="ttc" id="structast__endpoint__snapshot_html_af8f1f95df0b0112b6e33a612c577df63"><div class="ttname"><a href="../../da/dd1/structast__endpoint__snapshot.html#af8f1f95df0b0112b6e33a612c577df63">ast_endpoint_snapshot::channel_ids</a></div><div class="ttdeci">char * channel_ids[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d44/stasis__endpoints_8h_source.html#l00065">stasis_endpoints.h:65</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba22b189a48afe54e257847142717d9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba22b189a48afe54e257847142717d9d">&#9670;&nbsp;</a></span>endpoint_subscription_change()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpoint_subscription_change </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00203">203</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01176">stasis_subscription_final_message()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00214">endpoint_internal_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keyword">struct </span>stasis_endpoint *endpoint = data;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message)) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(endpoint);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0b6312c44448ff7ed80ac99b3077e438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b6312c44448ff7ed80ac99b3077e438">&#9670;&nbsp;</a></span>endpoints</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* endpoints</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00050">50</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01162">ami_registrations_endpoints()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01769">ami_show_endpoints()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01228">app_to_json()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02344">ast_sip_get_endpoints()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00913">cli_complete_endpoint()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01301">create_mwi_subscriptions()</a>, <a class="el" href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html#l00097">endpoints_scrape_cb()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01955">load_all_endpoints()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l01960">sip_options_aor_observer_modified_task()</a>, <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01173">stasis_app_to_cli()</a>, and <a class="el" href="../../d6/d6a/res__endpoint__stats_8c_source.html#l00134">unload_module()</a>.</p>

</div>
</div>
<a id="a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04fbfcfd3ca2b6a4fb16cabfd1e9a1f9">&#9670;&nbsp;</a></span>tech_endpoints</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* tech_endpoints</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html#l00052">52</a> of file <a class="el" href="../../d7/d4b/main_2endpoints_8c_source.html">main/endpoints.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:50 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
