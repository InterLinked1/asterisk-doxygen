<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: pbx_dundi.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b304eca70ab284d1e36606462b52a069.html">pbx</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pbx_dundi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Distributed Universal Number Discovery (DUNDi)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d94/network_8h_source.html">asterisk/network.h</a>&quot;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;zlib.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;net/if.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/db0/md5_8h_source.html">asterisk/md5.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d59/dundi_8h_source.html">asterisk/dundi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dac/io_8h_source.html">asterisk/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/da0/crypto_8h_source.html">asterisk/crypto.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d4a/astdb_8h_source.html">asterisk/astdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d59/acl_8h_source.html">asterisk/acl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d78/dundi-parser_8h_source.html">dundi-parser.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pbx_dundi.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d9b/pbx__dundi_8c__incl.png" border="0" usemap="#pbx__dundi_8c" alt=""/></div>
<map name="pbx__dundi_8c" id="pbx__dundi_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="176,304,260,331"/>
<area shape="rect" id="node6" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2695,453,2834,480"/>
<area shape="rect" id="node19" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2203,379,2310,405"/>
<area shape="rect" id="node22" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="563,528,689,555"/>
<area shape="rect" id="node24" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1415,229,1554,256"/>
<area shape="rect" id="node26" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="754,379,869,405"/>
<area shape="rect" id="node27" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1533,453,1647,480"/>
<area shape="rect" id="node33" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2025,304,2152,331"/>
<area shape="rect" id="node35" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="733,304,860,331"/>
<area shape="rect" id="node38" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1860,155,1971,181"/>
<area shape="rect" id="node39" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1953,229,2080,256"/>
<area shape="rect" id="node40" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="581,155,717,181"/>
<area shape="rect" id="node41" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="2155,229,2257,256"/>
<area shape="rect" id="node42" href="../../da/db0/md5_8h.html" title="MD5 digest functions. " alt="" coords="3134,80,3251,107"/>
<area shape="rect" id="node43" href="../../d2/d59/dundi_8h.html" title="Distributed Universal Number Discovery (DUNDi) See also. " alt="" coords="741,155,863,181"/>
<area shape="rect" id="node44" href="../../dc/dac/io_8h.html" title="I/O Management (derived from Cheops&#45;NG) " alt="" coords="2530,379,2629,405"/>
<area shape="rect" id="node45" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2525,453,2671,480"/>
<area shape="rect" id="node46" href="../../da/da0/crypto_8h.html" title="Provide cryptographic signature routines. " alt="" coords="429,155,557,181"/>
<area shape="rect" id="node47" href="../../de/d4a/astdb_8h.html" title="Persistant data storage (akin to *doze registry) " alt="" coords="3275,80,3399,107"/>
<area shape="rect" id="node48" href="../../d5/d59/acl_8h.html" title="Access Control of various sorts. " alt="" coords="2617,304,2723,331"/>
<area shape="rect" id="node49" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2227,304,2339,331"/>
<area shape="rect" id="node50" href="../../de/d78/dundi-parser_8h.html" title="dundi&#45;parser.h" alt="" coords="698,80,813,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="238,677,393,704"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="216,379,353,405"/>
<area shape="rect" id="node5" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,379,140,405"/>
<area shape="rect" id="node23" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="387,603,521,629"/>
<area shape="rect" id="node25" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1198,304,1342,331"/>
<area shape="rect" id="node28" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="617,453,774,480"/>
<area shape="rect" id="node29" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="884,304,1043,331"/>
<area shape="rect" id="node30" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1417,304,1552,331"/>
<area shape="rect" id="node31" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1852,379,2003,405"/>
<area shape="rect" id="node32" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="2336,453,2500,480"/>
<area shape="rect" id="node34" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1854,304,2001,331"/>
<area shape="rect" id="node36" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1067,304,1174,331"/>
<area shape="rect" id="node37" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1679,304,1829,331"/>
</map>
</div>
</div>
<p><a href="../../d1/dc0/pbx__dundi_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d4c/structalltrans.html">alltrans</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dea/structmappings.html">mappings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfc/structdundi__transaction_1_1packetlist.html">dundi_transaction::packetlist</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dea/structpcq.html">pcq</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d20/structpeers.html">peers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d4c/structpermission.html">permission</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d4c/structdundi__peer_1_1permissionlist.html">dundi_peer::permissionlist</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7b/structrequests.html">requests</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3e53e12e302bc296ce4123c63db56ef7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3e53e12e302bc296ce4123c63db56ef7">DUNDI_FLAG_INTERNAL_NOPARTIAL</a>&#160;&#160;&#160;(1 &lt;&lt; 17)</td></tr>
<tr class="separator:a3e53e12e302bc296ce4123c63db56ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b3a555fe31704b952f29a59f33bb81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:a57b3a555fe31704b952f29a59f33bb81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ff7731f29e08bc8019c6bdab908df8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:aa6ff7731f29e08bc8019c6bdab908df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10df83e3e85f772c181a064c1c7d17bb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a>&#160;&#160;&#160;(<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a> | <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>)</td></tr>
<tr class="separator:a10df83e3e85f772c181a064c1c7d17bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac312f5ad9b5a607157fc7f33ae40ef18"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a>&#160;&#160;&#160;<a class="el" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a></td></tr>
<tr class="separator:ac312f5ad9b5a607157fc7f33ae40ef18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e2b63230359081bce0ba36029de761"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ae4e2b63230359081bce0ba36029de761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-20.20s %-41s %s %-6d %-10.10s %-8.8s %-15.15s\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-41s:%5d %-5.5d %-5.5d %-3.3d %-3.3d %-3.3d\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-15s %-15s %-15s %-3.3d %-3.3d\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-12.12s %-7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-12.12s %-12.12s %02d:%02d:%02d\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-12.12s %-16.16s %6d sec  %-18s %-7d %s/%s (%s)\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>&#160;&#160;&#160;&quot;%-12.12s %-16.16s %6d sec  %-18s\n&quot;</td></tr>
<tr class="separator:ac8dc47e3b39c930caed4bfd05b4ba805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-20.20s %-41s     %-6.6s %-10.10s %-8.8s %-15.15s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-47s %-5.5s %-5.5s %-3.3s %-3.3s %-3.3s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-15s %-15s %-15s %-3.3s %-3.3s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-12.12s %-7.7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-12.12s %-12.12s %-10.10s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-12.12s %-16.16s %-10.10s  %-18s %-7s %s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd58ce0ec836919236d7a1908494970"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>&#160;&#160;&#160;&quot;%-12.12s %-16.16s %-10.10s  %-18s\n&quot;</td></tr>
<tr class="separator:acfd58ce0ec836919236d7a1908494970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac066558381a92837abc23f022405d282"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac066558381a92837abc23f022405d282">MAX_OPTS</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:ac066558381a92837abc23f022405d282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a879456c3b8e2853f7044d764e9c180d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a879456c3b8e2853f7044d764e9c180d4">MAX_PACKET_SIZE</a>&#160;&#160;&#160;8192</td></tr>
<tr class="separator:a879456c3b8e2853f7044d764e9c180d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b6635a0aa8eb07e2aed172b4bb0d29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a07b6635a0aa8eb07e2aed172b4bb0d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a943995a7bf30da3587664920856533ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a943995a7bf30da3587664920856533ab">MAX_WEIGHT</a>&#160;&#160;&#160;59999</td></tr>
<tr class="separator:a943995a7bf30da3587664920856533ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2867401d4e0a734de457c75284ab6b67"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a> = (1 &lt;&lt; 2), 
<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a> = (1 &lt;&lt; 3), 
<br />
&#160;&#160;<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a> = (1 &lt;&lt; 4), 
<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a> = (1 &lt;&lt; 5), 
<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a> = (1 &lt;&lt; 6)
<br />
 }</td></tr>
<tr class="separator:a2867401d4e0a734de457c75284ab6b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab771a7f28501ddeb11d8040f202a0a67"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a> = (1 &lt;&lt; 0)
 }</td></tr>
<tr class="separator:ab771a7f28501ddeb11d8040f202a0a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d1b03e1e1fc7a9c20255bbf8b1632e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac5d1b03e1e1fc7a9c20255bbf8b1632e">abort_request</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:ac5d1b03e1e1fc7a9c20255bbf8b1632e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b0109ab0ecc7a30064c41ef7913686d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a8b0109ab0ecc7a30064c41ef7913686d">ack_trans</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, int iseqno)</td></tr>
<tr class="separator:a8b0109ab0ecc7a30064c41ef7913686d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783dbbdb57b411826c3842ba4f678bde"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a> (struct permissionlist *permlist, const char *s, int allow)</td></tr>
<tr class="separator:a783dbbdb57b411826c3842ba4f678bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a530c0df649c86e16e6cb2713ed7265"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4a530c0df649c86e16e6cb2713ed7265">append_transaction</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p, int ttl, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoid[])</td></tr>
<tr class="separator:a4a530c0df649c86e16e6cb2713ed7265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0936612302fea7b97f58c4f196e9b45c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0936612302fea7b97f58c4f196e9b45c">apply_peer</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p)</td></tr>
<tr class="separator:a0936612302fea7b97f58c4f196e9b45c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc279894103eb711a9340434e2beb8c"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a5cc279894103eb711a9340434e2beb8c">avoid_crc32</a> (<a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoid[])</td></tr>
<tr class="separator:a5cc279894103eb711a9340434e2beb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57dfdd2d46918b3f8e7ac4287f164365"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a> (unsigned char *iv)</td></tr>
<tr class="separator:a57dfdd2d46918b3f8e7ac4287f164365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5a5eeed59ae4241e5332167a2fb72bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac5a5eeed59ae4241e5332167a2fb72bb">build_mapping</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="separator:ac5a5eeed59ae4241e5332167a2fb72bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abea805104a13e221adad99663e42050f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#abea805104a13e221adad99663e42050f">build_peer</a> (<a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eid, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *v, int *globalpcmode)</td></tr>
<tr class="separator:abea805104a13e221adad99663e42050f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e07ff59084fdf7d5f96f43509e00744"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3e07ff59084fdf7d5f96f43509e00744">build_secret</a> (char *secret, int seclen)</td></tr>
<tr class="separator:a3e07ff59084fdf7d5f96f43509e00744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b3d0d6b935c050950f18b3436f371e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, int ttl, int <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>, int *foundcache, int *skipped, int blockempty, int nocache, int modeselect, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *skip, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoid[], int directs[])</td></tr>
<tr class="separator:a92b3d0d6b935c050950f18b3436f371e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f1ba8ae26dfa307a484892fa0dc82d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a00f1ba8ae26dfa307a484892fa0dc82d">cache_lookup</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *req, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *peer_eid, uint32_t crc, int *lowexpiration)</td></tr>
<tr class="separator:a00f1ba8ae26dfa307a484892fa0dc82d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2affe422204e00b75e29580543a018a3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a> (time_t now, struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *req, char *key, char *eid_str_full, int *lowexpiration)</td></tr>
<tr class="separator:a2affe422204e00b75e29580543a018a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c96fa5363a438a67eeb7138eb322581"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a6c96fa5363a438a67eeb7138eb322581">cache_save</a> (<a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eidpeer, struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *req, int start, int unaffected, int expiration, int push)</td></tr>
<tr class="separator:a6c96fa5363a438a67eeb7138eb322581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00a7321e9d8e6299b270ba685cb69a8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a00a7321e9d8e6299b270ba685cb69a8e">cache_save_hint</a> (<a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eidpeer, struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *req, struct <a class="el" href="../../d3/d43/structdundi__hint.html">dundi_hint</a> *hint, int expiration)</td></tr>
<tr class="separator:a00a7321e9d8e6299b270ba685cb69a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24325d2346f0e082e206486c94fcc83b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a24325d2346f0e082e206486c94fcc83b">cancel_request</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:a24325d2346f0e082e206486c94fcc83b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5157e2e1865868479d20a0271c6ca0d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a5157e2e1865868479d20a0271c6ca0d7">check_key</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer, unsigned char *newkey, unsigned char *newsig, uint32_t keycrc32)</td></tr>
<tr class="separator:a5157e2e1865868479d20a0271c6ca0d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1068a316e1bbca8e0deb40d1e6f735ce"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a1068a316e1bbca8e0deb40d1e6f735ce">check_password</a> (void)</td></tr>
<tr class="separator:a1068a316e1bbca8e0deb40d1e6f735ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5105c2171d37936498ac78fa74c32edf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a5105c2171d37936498ac78fa74c32edf">check_request</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:a5105c2171d37936498ac78fa74c32edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24d4d24945a872b73c09860610561aa6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a24d4d24945a872b73c09860610561aa6">complete_peer_helper</a> (const char *line, const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, int pos, int <a class="el" href="../../d4/d88/structstate.html">state</a>, int rpos)</td></tr>
<tr class="separator:a24d4d24945a872b73c09860610561aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d9126a95d6ea8069c84c94dbf166c7f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p)</td></tr>
<tr class="separator:a0d9126a95d6ea8069c84c94dbf166c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b6a1b2b1103c0dd0433f7c50243a75"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a17b6a1b2b1103c0dd0433f7c50243a75">decrypt_memcpy</a> (unsigned char *dst, unsigned char *src, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *iv, <a class="el" href="../../da/da0/crypto_8h.html#a984a90be34ec965266cafda936f79306">ast_aes_decrypt_key</a> *dcx)</td></tr>
<tr class="separator:a17b6a1b2b1103c0dd0433f7c50243a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f3da6b901e2d721994302f61cf0a3f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab5f3da6b901e2d721994302f61cf0a3f">deep_copy_peer</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer_dst, const struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer_src)</td></tr>
<tr class="separator:ab5f3da6b901e2d721994302f61cf0a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1d2e8fa6488a8a1f12e868a1f884358"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae1d2e8fa6488a8a1f12e868a1f884358">destroy_map</a> (struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="el" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>)</td></tr>
<tr class="separator:ae1d2e8fa6488a8a1f12e868a1f884358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9010fb39f17f5b9d0cdeb170d5132d5f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a9010fb39f17f5b9d0cdeb170d5132d5f">destroy_packet</a> (struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack, int needfree)</td></tr>
<tr class="separator:a9010fb39f17f5b9d0cdeb170d5132d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fa6796f1a6982002500d235ece540a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a> (struct packetlist *p)</td></tr>
<tr class="separator:a76fa6796f1a6982002500d235ece540a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5784fc1b23431641c74479040de46b6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae5784fc1b23431641c74479040de46b6">destroy_peer</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer)</td></tr>
<tr class="separator:ae5784fc1b23431641c74479040de46b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9863fab76a579a6b38c5c6327fc9671c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a> (struct permissionlist *permlist)</td></tr>
<tr class="separator:a9863fab76a579a6b38c5c6327fc9671c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ddb632952df9d4709c18d8a3568b4b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, int fromtimeout)</td></tr>
<tr class="separator:a08ddb632952df9d4709c18d8a3568b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2da8421495180754f411b87157d2f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afb2da8421495180754f411b87157d2f7">discover_transactions</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:afb2da8421495180754f411b87157d2f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29df082de39c3bc9a3d3c82dd6922b9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a> (const void *data)</td></tr>
<tr class="separator:ab29df082de39c3bc9a3d3c82dd6922b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29ee8c2bd61bae78598415312d8784e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae29ee8c2bd61bae78598415312d8784e">do_qualify</a> (const void *data)</td></tr>
<tr class="separator:ae29ee8c2bd61bae78598415312d8784e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedb77784b2a1af6c9640ea7138b2c8b3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aedb77784b2a1af6c9640ea7138b2c8b3">do_register</a> (const void *data)</td></tr>
<tr class="separator:aedb77784b2a1af6c9640ea7138b2c8b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c4e2ca9ea70a4a84393ac806a5557a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a46c4e2ca9ea70a4a84393ac806a5557a">do_register_expire</a> (const void *data)</td></tr>
<tr class="separator:a46c4e2ca9ea70a4a84393ac806a5557a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca171329072b85f0d18b0df8f1d6e08"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2ca171329072b85f0d18b0df8f1d6e08">drds_destroy</a> (struct <a class="el" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a> *drds)</td></tr>
<tr class="separator:a2ca171329072b85f0d18b0df8f1d6e08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af52df0c5cde9fae01690487be5f66095"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#af52df0c5cde9fae01690487be5f66095">drds_destroy_cb</a> (void *data)</td></tr>
<tr class="separator:af52df0c5cde9fae01690487be5f66095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726e2d64adb9bcbe86e8ecbb2225a456"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, int final)</td></tr>
<tr class="separator:a726e2d64adb9bcbe86e8ecbb2225a456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ca3f873e1d96ac438ed4bb525f4d7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac6ca3f873e1d96ac438ed4bb525f4d7c">dundi_answer_entity</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *ies, char *ccontext)</td></tr>
<tr class="separator:ac6ca3f873e1d96ac438ed4bb525f4d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a8f2863e7bbb20d19a0aff9cb38530f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0a8f2863e7bbb20d19a0aff9cb38530f">dundi_answer_query</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *ies, char *ccontext)</td></tr>
<tr class="separator:a0a8f2863e7bbb20d19a0aff9cb38530f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac217220b54b8e7631bc62e90ceb2517d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac217220b54b8e7631bc62e90ceb2517d">dundi_canmatch</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int <a class="el" href="../../d1/d0c/cel__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, const char *callerid, const char *data)</td></tr>
<tr class="separator:ac217220b54b8e7631bc62e90ceb2517d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f0851aa813c8eb5112a59e88a61685"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a59f0851aa813c8eb5112a59e88a61685">dundi_debug_output</a> (const char *data)</td></tr>
<tr class="separator:a59f0851aa813c8eb5112a59e88a61685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac86c4bc31fd8f916f4d988f70fef4d73"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac86c4bc31fd8f916f4d988f70fef4d73">dundi_decrypt</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, unsigned char *dst, int *dstlen, struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *ohdr, struct <a class="el" href="../../db/d17/structdundi__encblock.html">dundi_encblock</a> *src, int srclen)</td></tr>
<tr class="separator:ac86c4bc31fd8f916f4d988f70fef4d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f50c496d5246d3faad318e018b59d7a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7f50c496d5246d3faad318e018b59d7a">dundi_discover</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans)</td></tr>
<tr class="separator:a7f50c496d5246d3faad318e018b59d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a035ab7013b360a1a93508d5b57cc43"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a8a035ab7013b360a1a93508d5b57cc43">dundi_do_lookup</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a8a035ab7013b360a1a93508d5b57cc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac018246d513f4c2d8c9aa6aefce9b7fc"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac018246d513f4c2d8c9aa6aefce9b7fc">dundi_do_precache</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac018246d513f4c2d8c9aa6aefce9b7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade0a1971d150ea30a714151289d9be3d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ade0a1971d150ea30a714151289d9be3d">dundi_do_query</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ade0a1971d150ea30a714151289d9be3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4317178b7bd2751e99e5fbebe8ec0827"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4317178b7bd2751e99e5fbebe8ec0827">dundi_encrypt</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack)</td></tr>
<tr class="separator:a4317178b7bd2751e99e5fbebe8ec0827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c871e32a7626fa8a94e9070a7a007e5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7c871e32a7626fa8a94e9070a7a007e5">dundi_error_output</a> (const char *data)</td></tr>
<tr class="separator:a7c871e32a7626fa8a94e9070a7a007e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551a53fd829b8c6e932f3155119b90ce"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a551a53fd829b8c6e932f3155119b90ce">dundi_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int <a class="el" href="../../d1/d0c/cel__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, const char *callerid, const char *data)</td></tr>
<tr class="separator:a551a53fd829b8c6e932f3155119b90ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91bf1a4271ce23613e3ab4cd57ee0965"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a91bf1a4271ce23613e3ab4cd57ee0965">dundi_exists</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int <a class="el" href="../../d1/d0c/cel__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, const char *callerid, const char *data)</td></tr>
<tr class="separator:a91bf1a4271ce23613e3ab4cd57ee0965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52fd25e8894176f44a043f1476fb7b8"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac52fd25e8894176f44a043f1476fb7b8">dundi_flush</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac52fd25e8894176f44a043f1476fb7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8154a069fe3f1e17004c53cda97af4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int <a class="el" href="../../d1/d0c/cel__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, const char *data, int <a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</td></tr>
<tr class="separator:a8b8154a069fe3f1e17004c53cda97af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6b8bacf4342d7de910150ff8df2f10"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a6d6b8bacf4342d7de910150ff8df2f10">dundi_ie_append_eid_appropriately</a> (struct <a class="el" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *ied, char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eid, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *us)</td></tr>
<tr class="separator:a6d6b8bacf4342d7de910150ff8df2f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55cb0bb945cb23bfd62b59095b1799ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a> (struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, int maxret, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *dcontext, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int cbypass)</td></tr>
<tr class="memdesc:a55cb0bb945cb23bfd62b59095b1799ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspecified use e164), the given callerid (if specified) and return up to maxret results in the array specified.  <a href="#a55cb0bb945cb23bfd62b59095b1799ed">More...</a><br /></td></tr>
<tr class="separator:a55cb0bb945cb23bfd62b59095b1799ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d660680e9f828d8bfc16e5175d67f4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a> (struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, int maxret, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *dcontext, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int ttl, int blockempty, struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *md, int *expiration, int cybpass, int modeselect, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *skip, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoid[], int direct[])</td></tr>
<tr class="separator:a80d660680e9f828d8bfc16e5175d67f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12db76eda3f0713a2ab9499145f2cd8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab12db76eda3f0713a2ab9499145f2cd8">dundi_lookup_local</a> (struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="el" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>, char *called_number, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *us_eid, int anscnt, struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *hmd)</td></tr>
<tr class="separator:ab12db76eda3f0713a2ab9499145f2cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdfa5326fdccb66cf4a70b740874f7d0"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afdfa5326fdccb66cf4a70b740874f7d0">dundi_lookup_thread</a> (void *data)</td></tr>
<tr class="separator:afdfa5326fdccb66cf4a70b740874f7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb250d2244486c7b54141042663106a7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afb250d2244486c7b54141042663106a7">dundi_matchmore</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int <a class="el" href="../../d1/d0c/cel__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, const char *callerid, const char *data)</td></tr>
<tr class="separator:afb250d2244486c7b54141042663106a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c7021fc5f56a742448d01016e3c37df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2c7021fc5f56a742448d01016e3c37df">dundi_precache</a> (const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>)</td></tr>
<tr class="memdesc:a2c7021fc5f56a742448d01016e3c37df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pre-cache to push upstream peers.  <a href="#a2c7021fc5f56a742448d01016e3c37df">More...</a><br /></td></tr>
<tr class="separator:a2c7021fc5f56a742448d01016e3c37df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee690082f6f678c7be9ae436242bfe0e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aee690082f6f678c7be9ae436242bfe0e">dundi_precache_full</a> (void)</td></tr>
<tr class="separator:aee690082f6f678c7be9ae436242bfe0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ea53fa846aec2bfff4c07eb020c143"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a35ea53fa846aec2bfff4c07eb020c143">dundi_precache_internal</a> (const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, int ttl, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoids[])</td></tr>
<tr class="separator:a35ea53fa846aec2bfff4c07eb020c143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20eec8909d40dac530ad6a2e2c13fce1"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a20eec8909d40dac530ad6a2e2c13fce1">dundi_precache_thread</a> (void *data)</td></tr>
<tr class="separator:a20eec8909d40dac530ad6a2e2c13fce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5d3b39deac4dc26c71992c8f58c440"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3d5d3b39deac4dc26c71992c8f58c440">dundi_prop_precache</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *ies, char *ccontext)</td></tr>
<tr class="separator:a3d5d3b39deac4dc26c71992c8f58c440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa668b9b6c15acbdd4c1532b127c8699"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aaa668b9b6c15acbdd4c1532b127c8699">dundi_query</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans)</td></tr>
<tr class="separator:aaa668b9b6c15acbdd4c1532b127c8699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d4d0ea507459ad46545ed807d75477"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab7d4d0ea507459ad46545ed807d75477">dundi_query_eid</a> (struct <a class="el" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> *dei, const char *dcontext, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> eid)</td></tr>
<tr class="memdesc:ab7d4d0ea507459ad46545ed807d75477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve information on a specific EID.  <a href="#ab7d4d0ea507459ad46545ed807d75477">More...</a><br /></td></tr>
<tr class="separator:ab7d4d0ea507459ad46545ed807d75477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f0699f9f073c18ef3ec9a902494983"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a60f0699f9f073c18ef3ec9a902494983">dundi_query_eid_internal</a> (struct <a class="el" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> *dei, const char *dcontext, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eid, struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *hmd, int ttl, int blockempty, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *avoid[])</td></tr>
<tr class="separator:a60f0699f9f073c18ef3ec9a902494983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9511a7918138f782acccfda40de9c1a3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a9511a7918138f782acccfda40de9c1a3">dundi_query_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a9511a7918138f782acccfda40de9c1a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a861e22a5f9e4db07bc275f7084017794"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a861e22a5f9e4db07bc275f7084017794">dundi_query_thread</a> (void *data)</td></tr>
<tr class="separator:a861e22a5f9e4db07bc275f7084017794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c930f04099e30c67e243ad9519c184"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad4c930f04099e30c67e243ad9519c184">dundi_reject</a> (struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *h, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin)</td></tr>
<tr class="separator:ad4c930f04099e30c67e243ad9519c184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76be0d5e3c5e3de4c972f607fcce98d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a76be0d5e3c5e3de4c972f607fcce98d0">dundi_result_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a76be0d5e3c5e3de4c972f607fcce98d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d2b34cb52152c8707d3e37c392f1eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad2d2b34cb52152c8707d3e37c392f1eb">dundi_rexmit</a> (const void *data)</td></tr>
<tr class="separator:ad2d2b34cb52152c8707d3e37c392f1eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1b9cf4440fe9492c55ceda2bf85488"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, int cmdresp, int flags, int final, struct <a class="el" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *ied)</td></tr>
<tr class="separator:a3b1b9cf4440fe9492c55ceda2bf85488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd53ccaf8768700eff453ab3c375007"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2dd53ccaf8768700eff453ab3c375007">dundi_set_debug</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a2dd53ccaf8768700eff453ab3c375007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9e2a8897efb16d6738d3d1d6e3b99f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#abf9e2a8897efb16d6738d3d1d6e3b99f">dundi_show_cache</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:abf9e2a8897efb16d6738d3d1d6e3b99f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b0ef3d2b46a76736c69665bdab1d64"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a48b0ef3d2b46a76736c69665bdab1d64">dundi_show_entityid</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a48b0ef3d2b46a76736c69665bdab1d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd01603d0d75e3884d635f2080d3b4a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a6cd01603d0d75e3884d635f2080d3b4a">dundi_show_hints</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a6cd01603d0d75e3884d635f2080d3b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a79daf921abc9d999844743abd4dcdd"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7a79daf921abc9d999844743abd4dcdd">dundi_show_mappings</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a7a79daf921abc9d999844743abd4dcdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9c2e7de30a69c56baff738ea9efebc"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ade9c2e7de30a69c56baff738ea9efebc">dundi_show_peer</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ade9c2e7de30a69c56baff738ea9efebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373b3d60373e1d20bd72cbe417f7e71d"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a373b3d60373e1d20bd72cbe417f7e71d">dundi_show_peers</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a373b3d60373e1d20bd72cbe417f7e71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377b303b370d288050d356fab7d06476"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a377b303b370d288050d356fab7d06476">dundi_show_precache</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a377b303b370d288050d356fab7d06476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad991e44f3a6e04790f598f929fe1f626"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad991e44f3a6e04790f598f929fe1f626">dundi_show_requests</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ad991e44f3a6e04790f598f929fe1f626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf2b3b24a3bbbb90525e56d042235379"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aaf2b3b24a3bbbb90525e56d042235379">dundi_show_trans</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:aaf2b3b24a3bbbb90525e56d042235379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953844be2ad76ca7702bcf556ed85a1b"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:a953844be2ad76ca7702bcf556ed85a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad21a986f34179db2afb527a4e615ab3b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad21a986f34179db2afb527a4e615ab3b">dundi_sockaddr_stringify_host</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="separator:ad21a986f34179db2afb527a4e615ab3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468a1553ee766ac19e6cc3a1f5404264"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a468a1553ee766ac19e6cc3a1f5404264">dundi_store_history</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a468a1553ee766ac19e6cc3a1f5404264"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8a88fa5cd2092abe8be15682d04104"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a> (struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack)</td></tr>
<tr class="separator:ace8a88fa5cd2092abe8be15682d04104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4694e2fb89bce1a662f7d1a9276c4ac9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4694e2fb89bce1a662f7d1a9276c4ac9">dundifunc_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *num, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:a4694e2fb89bce1a662f7d1a9276c4ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0324ac09a265e30f033c6469b43936d7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0324ac09a265e30f033c6469b43936d7">encrypt_memcpy</a> (unsigned char *dst, unsigned char *src, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *iv, <a class="el" href="../../da/da0/crypto_8h.html#a5bed29c6bfb9a6278d19a0a7ac5f6654">ast_aes_encrypt_key</a> *ecx)</td></tr>
<tr class="separator:a0324ac09a265e30f033c6469b43936d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db75f1593a29fe97f086bbf4cf0dbfe"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a> (<a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eid)</td></tr>
<tr class="separator:a3db75f1593a29fe97f086bbf4cf0dbfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1848a1edf681275c04d028d85376ac5"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae1848a1edf681275c04d028d85376ac5">find_transaction</a> (struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *hdr, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin)</td></tr>
<tr class="separator:ae1848a1edf681275c04d028d85376ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b179d5eeff54725082d2f00e3cce44"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a> (char *ip, size_t size, const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int family)</td></tr>
<tr class="separator:a80b179d5eeff54725082d2f00e3cce44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab293c9ebc4be88ba25ffb8055c6b096e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a> (struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="el" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>, struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *headp)</td></tr>
<tr class="separator:ab293c9ebc4be88ba25ffb8055c6b096e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3f381e618f8d0be9a452878057b0f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4b3f381e618f8d0be9a452878057b0f9">get_trans_id</a> (void)</td></tr>
<tr class="separator:a4b3f381e618f8d0be9a452878057b0f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3393a06c100c67e6c758efa48ab276d3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3393a06c100c67e6c758efa48ab276d3">handle_command_response</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *hdr, int datalen, int encrypted)</td></tr>
<tr class="separator:a3393a06c100c67e6c758efa48ab276d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaefe1abed021df6d8f2105d5e4ba5a5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aeaefe1abed021df6d8f2105d5e4ba5a5">handle_frame</a> (struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *h, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin, int datalen)</td></tr>
<tr class="separator:aeaefe1abed021df6d8f2105d5e4ba5a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee00d52d3fc2dd80292cf9cc337a500"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a> (struct permissionlist *permlist, char *cont)</td></tr>
<tr class="separator:a4ee00d52d3fc2dd80292cf9cc337a500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ea1ce860ced2100b4d6bcd7297c5895"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0ea1ce860ced2100b4d6bcd7297c5895">load_password</a> (void)</td></tr>
<tr class="separator:a0ea1ce860ced2100b4d6bcd7297c5895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e20351ab6bfbeeede5116299b51ea74"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a5e20351ab6bfbeeede5116299b51ea74">mark_mappings</a> (void)</td></tr>
<tr class="separator:a5e20351ab6bfbeeede5116299b51ea74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a951981db155b9a3e3c625a37a355118c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a951981db155b9a3e3c625a37a355118c">mark_peers</a> (void)</td></tr>
<tr class="separator:a951981db155b9a3e3c625a37a355118c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6cf74d15be14fcc9d17aa2f2b5984b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a> (int model)</td></tr>
<tr class="separator:afd6cf74d15be14fcc9d17aa2f2b5984b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49128caa5ade5fbd7f9a42f39a23476a"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a49128caa5ade5fbd7f9a42f39a23476a">network_thread</a> (void *ignore)</td></tr>
<tr class="separator:a49128caa5ade5fbd7f9a42f39a23476a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38669dd3d9e661107ae2aa06c7e0ec05"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, int <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>)</td></tr>
<tr class="separator:a38669dd3d9e661107ae2aa06c7e0ec05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750726c4f6aeef52b97e95e43a368239"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a750726c4f6aeef52b97e95e43a368239">populate_addr</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer, <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *eid)</td></tr>
<tr class="separator:a750726c4f6aeef52b97e95e43a368239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0510dcd35b2ec0c95316cb94ad7b5cc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab0510dcd35b2ec0c95316cb94ad7b5cc">precache_trans</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans, struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *maps, int mapcount, int *minexp, int *foundanswers)</td></tr>
<tr class="separator:ab0510dcd35b2ec0c95316cb94ad7b5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0a0688c98cfd4372386a75356f71fd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aad0a0688c98cfd4372386a75356f71fd">precache_transactions</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *maps, int mapcount, int *expiration, int *foundanswers)</td></tr>
<tr class="separator:aad0a0688c98cfd4372386a75356f71fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adad3e96eef9a45cf8c4f172bdea92436"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#adad3e96eef9a45cf8c4f172bdea92436">process_clearcache</a> (void *ignore)</td></tr>
<tr class="separator:adad3e96eef9a45cf8c4f172bdea92436"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad5c932e5e55537cfc9bc16dc23d1889"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aad5c932e5e55537cfc9bc16dc23d1889">process_precache</a> (void *ign)</td></tr>
<tr class="separator:aad5c932e5e55537cfc9bc16dc23d1889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a5263214222e75a7ae12b350d61c2f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa3a5263214222e75a7ae12b350d61c2f">prune_mappings</a> (void)</td></tr>
<tr class="separator:aa3a5263214222e75a7ae12b350d61c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55c82d81ce37ebe5125d5a017c12b5ac"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a55c82d81ce37ebe5125d5a017c12b5ac">prune_peers</a> (void)</td></tr>
<tr class="separator:a55c82d81ce37ebe5125d5a017c12b5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ffb3a85b70d6a69590f5059817d536"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer, int schedonly)</td></tr>
<tr class="separator:aa4ffb3a85b70d6a69590f5059817d536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598daaedb8f8db3e4ca84a59a6ea39e3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a598daaedb8f8db3e4ca84a59a6ea39e3">query_transactions</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:a598daaedb8f8db3e4ca84a59a6ea39e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1eda8492ec8beac69adda8b823bb1e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7e1eda8492ec8beac69adda8b823bb1e">register_request</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> **pending)</td></tr>
<tr class="separator:a7e1eda8492ec8beac69adda8b823bb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1982509765f4870f1f63412a53ea668"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr class="separator:ad1982509765f4870f1f63412a53ea668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1614486640519c17b1affd653f6a86ba"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a1614486640519c17b1affd653f6a86ba">reschedule_precache</a> (const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, int expiration)</td></tr>
<tr class="separator:a1614486640519c17b1affd653f6a86ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93cc42c4679166c530e749f1c4e0a015"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a93cc42c4679166c530e749f1c4e0a015">rescomp</a> (const void *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, const void *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="separator:a93cc42c4679166c530e749f1c4e0a015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a078fbd7bba90ea159959f6e3f5e03ec1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a078fbd7bba90ea159959f6e3f5e03ec1">reset_transaction</a> (struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans)</td></tr>
<tr class="separator:a078fbd7bba90ea159959f6e3f5e03ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a9b3f4708bad6a20555b7089d7b8a4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a50a9b3f4708bad6a20555b7089d7b8a4">save_secret</a> (const char *newkey, const char *oldkey)</td></tr>
<tr class="separator:a50a9b3f4708bad6a20555b7089d7b8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a98325d357365a72bef34f5a5ddfe55"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a6a98325d357365a72bef34f5a5ddfe55">set_config</a> (char *<a class="el" href="../../d8/d96/res__smdi_8c.html#abb961ff543844412d044d48e6163b3a8">config_file</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin, int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin2)</td></tr>
<tr class="separator:a6a98325d357365a72bef34f5a5ddfe55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7868cab84bb7a27c4722d6171ceb8a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a8e7868cab84bb7a27c4722d6171ceb8a">set_host_ipaddr</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin)</td></tr>
<tr class="separator:a8e7868cab84bb7a27c4722d6171ceb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a023f892544ad2dde2a7ef3429fbd3a0f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a023f892544ad2dde2a7ef3429fbd3a0f">socket_read</a> (int *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, int fd, short <a class="el" href="../../d2/d4d/astman_8c.html#a271a8325aeaad3b77ff2387c788af2b3">events</a>, void *sock)</td></tr>
<tr class="separator:a023f892544ad2dde2a7ef3429fbd3a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e5ad29e79bbb7ca62f5b007e14b6af"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a> (struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *results, int count)</td></tr>
<tr class="separator:a77e5ad29e79bbb7ca62f5b007e14b6af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6509f01db3676a8f6cd3485afe7b94d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae6509f01db3676a8f6cd3485afe7b94d">start_network_thread</a> (void)</td></tr>
<tr class="separator:ae6509f01db3676a8f6cd3485afe7b94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83f1c7c6f93407f4887453beffc42a7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a83f1c7c6f93407f4887453beffc42a7c">str2tech</a> (char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="separator:a83f1c7c6f93407f4887453beffc42a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91531d6c5dc497077760c3892164a574"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a> (int tech)</td></tr>
<tr class="separator:a91531d6c5dc497077760c3892164a574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac048ffc62ecb2399fa52b16519428f23"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac048ffc62ecb2399fa52b16519428f23">unregister_request</a> (struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *<a class="el" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>)</td></tr>
<tr class="separator:ac048ffc62ecb2399fa52b16519428f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2fee1dc6f3beaf6e86a3399a955ac5d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac2fee1dc6f3beaf6e86a3399a955ac5d">update_key</a> (struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer)</td></tr>
<tr class="separator:ac2fee1dc6f3beaf6e86a3399a955ac5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Distributed Universal Number Discovery (DUNDi)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .reload = reload, .optional_modules = &quot;res_crypto&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1dc34a741ebde7e9310fd43312fc08"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d4c/structalltrans.html">alltrans</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aea1dc34a741ebde7e9310fd43312fc08">alltrans</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td></tr>
<tr class="separator:aea1dc34a741ebde7e9310fd43312fc08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca505bc5b6272f18385b9c7fe6829086"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a></td></tr>
<tr class="memdesc:aca505bc5b6272f18385b9c7fe6829086"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wildcard peer.  <a href="#aca505bc5b6272f18385b9c7fe6829086">More...</a><br /></td></tr>
<tr class="separator:aca505bc5b6272f18385b9c7fe6829086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936591bfc4ac4515aa621afe79dbcd35"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a936591bfc4ac4515aa621afe79dbcd35">authdebug</a> = 0</td></tr>
<tr class="separator:a936591bfc4ac4515aa621afe79dbcd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8decaf64f53b028de928b48db008399"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:af8decaf64f53b028de928b48db008399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a989d6707298899f07c764d259d5d3fcb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a> []</td></tr>
<tr class="separator:a989d6707298899f07c764d259d5d3fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e72b5f331070bc01418a74af199eb9"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a> [80]</td></tr>
<tr class="separator:a03e72b5f331070bc01418a74af199eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539fd30ae5d9ac88c45e52e37bee5a2f"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a> [80]</td></tr>
<tr class="separator:a539fd30ae5d9ac88c45e52e37bee5a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25de026ecefe8c1afecdb329e37c195"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a> = 60</td></tr>
<tr class="separator:ab25de026ecefe8c1afecdb329e37c195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae05dd1de1447814a60b19499c32f7189"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a> [80]</td></tr>
<tr class="separator:ae05dd1de1447814a60b19499c32f7189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72898bf086d5beac2d22aa81c2b1bfb2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a> = <a class="el" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a></td></tr>
<tr class="separator:a72898bf086d5beac2d22aa81c2b1bfb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3e149ad077b387bc99625257cdfa5b9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db0/group__functions.html#gae3e149ad077b387bc99625257cdfa5b9">dundi_function</a></td></tr>
<tr class="separator:gae3e149ad077b387bc99625257cdfa5b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373b9e6699a08955205583779bbbe893"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a373b9e6699a08955205583779bbbe893">dundi_key_ttl</a> = <a class="el" href="../../d2/d59/dundi_8h.html#adfbdc109a4382001e0631c57075054a1">DUNDI_DEFAULT_KEY_EXPIRE</a></td></tr>
<tr class="separator:a373b9e6699a08955205583779bbbe893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427edee20aa126369758234e88d7d637"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a427edee20aa126369758234e88d7d637">dundi_query_function</a></td></tr>
<tr class="separator:a427edee20aa126369758234e88d7d637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8a39990f294e5e38bb6df28c7fb5ad"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7b8a39990f294e5e38bb6df28c7fb5ad">dundi_query_opts</a> [128] = { [ '<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a> }, }</td></tr>
<tr class="separator:a7b8a39990f294e5e38bb6df28c7fb5ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84980405c77a834de60d313f0642e824"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a84980405c77a834de60d313f0642e824">dundi_result_datastore_info</a></td></tr>
<tr class="separator:a84980405c77a834de60d313f0642e824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78fa064a53288c1498570513cfdd7480"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a78fa064a53288c1498570513cfdd7480">dundi_result_function</a></td></tr>
<tr class="separator:a78fa064a53288c1498570513cfdd7480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb4d3a9c625fbabb40d50d2b53d797e"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a7cb4d3a9c625fbabb40d50d2b53d797e">dundi_result_id</a></td></tr>
<tr class="separator:a7cb4d3a9c625fbabb40d50d2b53d797e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa73e8fca9184c251b2983cf9e6788df1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a> = 0</td></tr>
<tr class="separator:aa73e8fca9184c251b2983cf9e6788df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a169ae5c86e91fcc5014f9072ed3dd4cc"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/df6/structast__switch.html">ast_switch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a169ae5c86e91fcc5014f9072ed3dd4cc">dundi_switch</a></td></tr>
<tr class="separator:a169ae5c86e91fcc5014f9072ed3dd4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ffcd4d21da49b299b25534bb7341cb1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a> = <a class="el" href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a></td></tr>
<tr class="separator:a1ffcd4d21da49b299b25534bb7341cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3606ca85702bb0258aec62c4f947875f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a> = 0</td></tr>
<tr class="separator:a3606ca85702bb0258aec62c4f947875f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd75c09e15efa9061997f033b3f224b"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a> [80]</td></tr>
<tr class="separator:aadd75c09e15efa9061997f033b3f224b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a> = { { 0, 0, 0, 0, 0, 0 } }</td></tr>
<tr class="separator:a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46e0890829ef32048f1d443e79bd9e9f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a> = 0</td></tr>
<tr class="separator:a46e0890829ef32048f1d443e79bd9e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0636d6a53edfb41e1afdd3cf63a4ec"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a></td></tr>
<tr class="separator:afc0636d6a53edfb41e1afdd3cf63a4ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65cd854e2d184b5038e9cbdec5feaee5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a> = 0</td></tr>
<tr class="separator:a65cd854e2d184b5038e9cbdec5feaee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda48311b6abe5a4dd8b6904ddde0a6d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d55/structio__context.html">io_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></td></tr>
<tr class="separator:abda48311b6abe5a4dd8b6904ddde0a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe4895c1ad7c3100e5566b3a9257f2e9"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a> [80]</td></tr>
<tr class="separator:abe4895c1ad7c3100e5566b3a9257f2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41e968a3ec944a6d905765d9a44a286f"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a> [80]</td></tr>
<tr class="separator:a41e968a3ec944a6d905765d9a44a286f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02635e45a149a202eea2d926e236910"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/dea/structmappings.html">mappings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac02635e45a149a202eea2d926e236910">mappings</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td></tr>
<tr class="separator:ac02635e45a149a202eea2d926e236910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d899b0c513443c533f0a04813aed58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> = -1</td></tr>
<tr class="separator:a34d899b0c513443c533f0a04813aed58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a13b2041df3b5a35c2c9624e02eac56"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> = -1</td></tr>
<tr class="separator:a3a13b2041df3b5a35c2c9624e02eac56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaccf62d7fc810d5b42da0a3069ba7651"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:aaccf62d7fc810d5b42da0a3069ba7651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51e32c16369e570e5b8eeac50679e74"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a> [80]</td></tr>
<tr class="separator:ad51e32c16369e570e5b8eeac50679e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9c92d9d9f3fce2ef610dd2169a5558"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/dea/structpcq.html">pcq</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a5d9c92d9d9f3fce2ef610dd2169a5558">pcq</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a5d9c92d9d9f3fce2ef610dd2169a5558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0afdd3d7238c7d80018926429eb52170"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d20/structpeers.html">peers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a0afdd3d7238c7d80018926429eb52170">peers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a0afdd3d7238c7d80018926429eb52170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2483a4aba107ceb21350c25ef3e4e2be"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a> [80]</td></tr>
<tr class="separator:a2483a4aba107ceb21350c25ef3e4e2be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85c25ca8e4d47c180435a10433185af1"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:a85c25ca8e4d47c180435a10433185af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ae4572934efa26e8b06780ca320c2b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d7b/structrequests.html">requests</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#af2ae4572934efa26e8b06780ca320c2b">requests</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td></tr>
<tr class="separator:af2ae4572934efa26e8b06780ca320c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67db34020f8303d719cb594849f0f868"><td class="memItemLeft" align="right" valign="top">static time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a></td></tr>
<tr class="separator:a67db34020f8303d719cb594849f0f868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361b448e9abcfc301602a2573a662d3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a361b448e9abcfc301602a2573a662d3c">sched</a></td></tr>
<tr class="separator:a361b448e9abcfc301602a2573a662d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce48059fc557e50d12470e8c086ff57"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a> [80]</td></tr>
<tr class="separator:afce48059fc557e50d12470e8c086ff57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac87afa7a52fa95a8c90ba8e1f61c6957"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a> [80]</td></tr>
<tr class="separator:ac87afa7a52fa95a8c90ba8e1f61c6957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a9305efab3b493ca2519562fcec3d5"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a> = 0</td></tr>
<tr class="separator:a25a9305efab3b493ca2519562fcec3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Distributed Universal Number Discovery (DUNDi) </p>

<p class="definition">Definition in file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3e53e12e302bc296ce4123c63db56ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e53e12e302bc296ce4123c63db56ef7">&#9670;&nbsp;</a></span>DUNDI_FLAG_INTERNAL_NOPARTIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_FLAG_INTERNAL_NOPARTIAL&#160;&#160;&#160;(1 &lt;&lt; 17)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00176">176</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">build_mapping()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>.</p>

</div>
</div>
<a id="a57b3a555fe31704b952f29a59f33bb81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b3a555fe31704b952f29a59f33bb81">&#9670;&nbsp;</a></span>DUNDI_MODEL_INBOUND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_MODEL_INBOUND&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">159</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">model2str()</a>.</p>

</div>
</div>
<a id="aa6ff7731f29e08bc8019c6bdab908df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6ff7731f29e08bc8019c6bdab908df8">&#9670;&nbsp;</a></span>DUNDI_MODEL_OUTBOUND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_MODEL_OUTBOUND&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">160</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">model2str()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>

</div>
</div>
<a id="a10df83e3e85f772c181a064c1c7d17bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10df83e3e85f772c181a064c1c7d17bb">&#9670;&nbsp;</a></span>DUNDI_MODEL_SYMMETRIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_MODEL_SYMMETRIC&#160;&#160;&#160;(<a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a> | <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00161">161</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">model2str()</a>.</p>

</div>
</div>
<a id="ac312f5ad9b5a607157fc7f33ae40ef18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac312f5ad9b5a607157fc7f33ae40ef18">&#9670;&nbsp;</a></span>DUNDI_SECRET_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_SECRET_TIME&#160;&#160;&#160;<a class="el" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00181">181</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">load_password()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">save_secret()</a>.</p>

</div>
</div>
<a id="ae4e2b63230359081bce0ba36029de761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4e2b63230359081bce0ba36029de761">&#9670;&nbsp;</a></span>DUNDI_TIMING_HISTORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUNDI_TIMING_HISTORY&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Keep times of last 10 lookups </p>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">164</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02357">dundi_flush()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>.</p>

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-20.20s %-41s %s %-6d %-10.10s %-8.8s %-15.15s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">dundi_show_cache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03050">dundi_show_hints()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02883">dundi_show_mappings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02917">dundi_show_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02850">dundi_show_requests()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02796">dundi_show_trans()</a>.</p>

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-41s:%5d %-5.5d %-5.5d %-3.3d %-3.3d %-3.3d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-15s %-15s %-15s %-3.3d %-3.3d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-12.12s %-7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-12.12s %-12.12s %02d:%02d:%02d\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-12.12s %-16.16s %6d sec  %-18s %-7d %s/%s (%s)\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8dc47e3b39c930caed4bfd05b4ba805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8dc47e3b39c930caed4bfd05b4ba805">&#9670;&nbsp;</a></span>FORMAT <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT&#160;&#160;&#160;&quot;%-12.12s %-16.16s %6d sec  %-18s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-20.20s %-41s     %-6.6s %-10.10s %-8.8s %-15.15s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">dundi_show_cache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03050">dundi_show_hints()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02883">dundi_show_mappings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02917">dundi_show_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02850">dundi_show_requests()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02796">dundi_show_trans()</a>.</p>

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-47s %-5.5s %-5.5s %-3.3s %-3.3s %-3.3s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-15s %-15s %-15s %-3.3s %-3.3s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-12.12s %-7.7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-12.12s %-12.12s %-10.10s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-12.12s %-16.16s %-10.10s  %-18s %-7s %s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfd58ce0ec836919236d7a1908494970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd58ce0ec836919236d7a1908494970">&#9670;&nbsp;</a></span>FORMAT2 <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT2&#160;&#160;&#160;&quot;%-12.12s %-16.16s %-10.10s  %-18s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac066558381a92837abc23f022405d282"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac066558381a92837abc23f022405d282">&#9670;&nbsp;</a></span>MAX_OPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_OPTS&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04455">4455</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">build_mapping()</a>.</p>

</div>
</div>
<a id="a879456c3b8e2853f7044d764e9c180d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a879456c3b8e2853f7044d764e9c180d4">&#9670;&nbsp;</a></span>MAX_PACKET_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PACKET_SIZE&#160;&#160;&#160;8192</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00155">155</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02083">socket_read()</a>.</p>

</div>
</div>
<a id="a07b6635a0aa8eb07e2aed172b4bb0d29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b6635a0aa8eb07e2aed172b4bb0d29">&#9670;&nbsp;</a></span>MAX_RESULTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RESULTS&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">153</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>.</p>

</div>
</div>
<a id="a943995a7bf30da3587664920856533ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a943995a7bf30da3587664920856533ab">&#9670;&nbsp;</a></span>MAX_WEIGHT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_WEIGHT&#160;&#160;&#160;59999</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00157">157</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">build_mapping()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">get_mapping_weight()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a2867401d4e0a734de457c75284ab6b67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2867401d4e0a734de457c75284ab6b67">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78"></a>FLAG_ISREG&#160;</td><td class="fielddoc"><p>Transaction is register request </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"></a>FLAG_DEAD&#160;</td><td class="fielddoc"><p>Transaction is dead </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f"></a>FLAG_FINAL&#160;</td><td class="fielddoc"><p>Transaction has final message sent </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc"></a>FLAG_ISQUAL&#160;</td><td class="fielddoc"><p>Transaction is a qualification </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48"></a>FLAG_ENCRYPT&#160;</td><td class="fielddoc"><p>Transaction is encrypted wiht ECX/DCX </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae"></a>FLAG_SENDFULLKEY&#160;</td><td class="fielddoc"><p>Send full key on transaction </p>
</td></tr>
<tr><td class="fieldname"><a id="a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686"></a>FLAG_STOREHIST&#160;</td><td class="fielddoc"><p>Record historic performance </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00166">166</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;     {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a> =       (1 &lt;&lt; 0),  <span class="comment">/*!&lt; Transaction is register request */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a> =        (1 &lt;&lt; 1),  <span class="comment">/*!&lt; Transaction is dead */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a> =       (1 &lt;&lt; 2),  <span class="comment">/*!&lt; Transaction has final message sent */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a> =      (1 &lt;&lt; 3),  <span class="comment">/*!&lt; Transaction is a qualification */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a> =     (1 &lt;&lt; 4),  <span class="comment">/*!&lt; Transaction is encrypted wiht ECX/DCX */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a> = (1 &lt;&lt; 5),  <span class="comment">/*!&lt; Send full key on transaction */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a> =   (1 &lt;&lt; 6),  <span class="comment">/*!&lt; Record historic performance */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;};</div><div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">pbx_dundi.c:169</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">pbx_dundi.c:170</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">pbx_dundi.c:172</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00167">pbx_dundi.c:167</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00173">pbx_dundi.c:173</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">pbx_dundi.c:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab771a7f28501ddeb11d8040f202a0a67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab771a7f28501ddeb11d8040f202a0a67">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f"></a>OPT_BYPASS_CACHE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04129">4129</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;     {</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;};</div><div class="ttc" id="pbx__dundi_8c_html_ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04130">pbx_dundi.c:4130</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05278">5278</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05278">5278</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="ac5d1b03e1e1fc7a9c20255bbf8b1632e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d1b03e1e1fc7a9c20255bbf8b1632e">&#9670;&nbsp;</a></span>abort_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void abort_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03688">3688</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;{</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;   <span class="keywordflow">while</span> ((trans = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>))) {</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <span class="comment">/* This will remove the transaction from the list */</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0);</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b0109ab0ecc7a30064c41ef7913686d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b0109ab0ecc7a30064c41ef7913686d">&#9670;&nbsp;</a></span>ack_trans()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ack_trans </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iseqno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02021">2021</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03194">destroy_packet()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">destroy_packets()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">dundi_packet::h</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">dundi_transaction::lasttrans</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, and <a class="el" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;{</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="comment">/* Ack transmitted packet corresponding to iseqno */</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">packets</a>, pack, <a class="code" href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">list</a>) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      <span class="keywordflow">if</span> ((pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> + 1) % 255 == iseqno) {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9010fb39f17f5b9d0cdeb170d5132d5f">destroy_packet</a>(pack, 0);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>)) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Whoa, there was still a last trans?\n&quot;</span>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;         }</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>, pack, <a class="code" href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">list</a>);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;         <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a>);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   }</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a718c14c132b44fde9c0d73d2bed31ed1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">dundi_transaction::lasttrans</a></div><div class="ttdeci">struct packetlist lasttrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">pbx_dundi.c:267</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__packet_html"><div class="ttname"><a href="../../db/de6/structdundi__packet.html">dundi_packet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00221">pbx_dundi.c:221</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structdundi__packet_html_ae3365da6bcb5072291e8e85574d3c247"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">dundi_packet::list</a></div><div class="ttdeci">struct dundi_packet::@436 list</div></div>
<div class="ttc" id="structdundi__transaction_html_a133182c480ff961451c2c0b685fc7087"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a></div><div class="ttdeci">struct dundi_transaction::packetlist packets</div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a9010fb39f17f5b9d0cdeb170d5132d5f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a9010fb39f17f5b9d0cdeb170d5132d5f">destroy_packet</a></div><div class="ttdeci">static void destroy_packet(struct dundi_packet *pack, int needfree)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03194">pbx_dundi.c:3194</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a76fa6796f1a6982002500d235ece540a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a></div><div class="ttdeci">static void destroy_packets(struct packetlist *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">pbx_dundi.c:2010</a></div></div>
<div class="ttc" id="structdundi__packet_html_aaa805b51d34468d4b2796ec731ff5f32"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">dundi_packet::h</a></div><div class="ttdeci">struct dundi_hdr * h</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">pbx_dundi.c:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a783dbbdb57b411826c3842ba4f678bde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a783dbbdb57b411826c3842ba4f678bde">&#9670;&nbsp;</a></span>append_permission()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_permission </td>
          <td>(</td>
          <td class="paramtype">struct permissionlist *&#160;</td>
          <td class="paramname"><em>permlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04442">4442</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">permission::allow</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">permission::name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;{</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d4c/structpermission.html">permission</a> *perm;</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;   <span class="keywordflow">if</span> (!(perm = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*perm) + strlen(s) + 1)))</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;   strcpy(perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, s);</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;   perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a> = <a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a>;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(permlist, perm, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>);</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;}</div><div class="ttc" id="structpermission_html"><div class="ttname"><a href="../../d4/d4c/structpermission.html">permission</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00215">pbx_dundi.c:215</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structpermission_html_a02d58d2ab612ca353b4d94409ce9e6a7"><div class="ttname"><a href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">permission::allow</a></div><div class="ttdeci">int allow</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">pbx_dundi.c:217</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structpermission_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">permission::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">pbx_dundi.c:218</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a530c0df649c86e16e6cb2713ed7265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a530c0df649c86e16e6cb2713ed7265">&#9670;&nbsp;</a></span>append_transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int append_transaction </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoid</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03642">3642</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../db/d68/tdd_8c_source.html#l00058">dr</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00018">DUNDI_MAX_STACK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">dundi_transaction::eidcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">dundi_transaction::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">dundi_request::query_eid</a>, <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">dundi_transaction::ttl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;{</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   <span class="keywordtype">char</span> eid_str2[20];</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;   <span class="comment">/* Ignore if not registered */</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   }</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a> &amp;&amp; ((p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &lt; 0) || (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt;= p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>)))</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>))</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Will query peer &#39;%s&#39; for &#39;%s&#39; (context &#39;%s&#39;)\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str2, <span class="keyword">sizeof</span>(eid_str2), &amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">query_eid</a>), dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Will query peer &#39;%s&#39; for &#39;%s@%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;   trans = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a>(p);</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;   <span class="keywordflow">if</span> (!trans)</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>;</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = <a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;   <span class="keywordflow">for</span> (x = 0; avoid[x] &amp;&amp; (x &lt; <a class="code" href="../../de/d78/dundi-parser_8h.html#a61c222d217b3b8da8389ddcdf7873b86">DUNDI_MAX_STACK</a>); x++)</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[x] = *avoid[x];</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> = x;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>);</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7382e5e1f259570c8b9ce86ddc49a34b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">dundi_transaction::eids</a></div><div class="ttdeci">dundi_eid eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">pbx_dundi.c:248</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_transaction::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">pbx_dundi.c:255</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_transaction::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">pbx_dundi.c:249</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0d9126a95d6ea8069c84c94dbf166c7f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a></div><div class="ttdeci">static struct dundi_transaction * create_transaction(struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">pbx_dundi.c:3137</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a625c7bfebdd52adeaefbf97884ebf3f9"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a></div><div class="ttdeci">struct dundi_transaction::@438 parentlist</div></div>
<div class="ttc" id="structdundi__request_html_abfdf025b2390652ef651f1d671c26885"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">dundi_request::query_eid</a></div><div class="ttdeci">dundi_eid query_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">pbx_dundi.c:276</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="dundi-parser_8h_html_a61c222d217b3b8da8389ddcdf7873b86"><div class="ttname"><a href="../../de/d78/dundi-parser_8h.html#a61c222d217b3b8da8389ddcdf7873b86">DUNDI_MAX_STACK</a></div><div class="ttdeci">#define DUNDI_MAX_STACK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00018">dundi-parser.h:18</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0936612302fea7b97f58c4f196e9b45c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0936612302fea7b97f58c4f196e9b45c">&#9670;&nbsp;</a></span>apply_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void apply_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">1295</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">dundi_transaction::autokilltimeout</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00215">DUNDI_DEFAULT_RETRANS_TIMER</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">FLAG_ENCRYPT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00197">global_autokilltimeout</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">dundi_transaction::retranstimer</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">dundi_peer::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;{</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a> = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a> = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="comment">/* Enable encryption if appropriate */</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>))</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a> = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> = <a class="code" href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt; 1) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> * 2;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;         <span class="comment">/* Keep it from being silly */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;         <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> &lt; 150)</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> = 150;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> &gt; <a class="code" href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a>)</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> = <a class="code" href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;}</div><div class="ttc" id="structdundi__transaction_html_a3dfb0b5875c7ff57d45dfeb31bed78cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">dundi_transaction::autokilltimeout</a></div><div class="ttdeci">int autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">pbx_dundi.c:259</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="dundi_8h_html_ab600dadd9dafb433d43cca1b2071b4da"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a></div><div class="ttdeci">#define DUNDI_DEFAULT_RETRANS_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00215">dundi.h:215</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ae08aaf3c8a51c3850a2d4e610f269496"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">dundi_transaction::retranstimer</a></div><div class="ttdeci">int retranstimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">pbx_dundi.c:257</a></div></div>
<div class="ttc" id="structdundi__peer_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">dundi_peer::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">pbx_dundi.c:308</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a46e0890829ef32048f1d443e79bd9e9f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a></div><div class="ttdeci">static int global_autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00197">pbx_dundi.c:197</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">pbx_dundi.c:171</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05278">5278</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a5cc279894103eb711a9340434e2beb8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc279894103eb711a9340434e2beb8c">&#9670;&nbsp;</a></span>avoid_crc32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned long avoid_crc32 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoid</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03809">3809</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;{</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;   <span class="comment">/* Idea is that we&#39;re calculating a checksum which is independent of</span></div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;<span class="comment">      the order that the EID&#39;s are listed in */</span></div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;   uint32_t acrc32 = 0;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;   <span class="keywordflow">for</span> (x=0;avoid[x];x++) {</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      <span class="comment">/* Order doesn&#39;t matter */</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;      <span class="keywordflow">if</span> (avoid[x+1]) {</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;         acrc32 ^= crc32(0L, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)avoid[x], <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a>));</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;      }</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;   }</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordflow">return</span> acrc32;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;}</div><div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57dfdd2d46918b3f8e7ac4287f164365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57dfdd2d46918b3f8e7ac4287f164365">&#9670;&nbsp;</a></span>build_iv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void build_iv </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>iv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">533</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">build_secret()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">dundi_encrypt()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">update_key()</a>.</p>
<div class="fragment"><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="comment">/* XXX Would be nice to be more random XXX */</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *fluffy;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   fluffy = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)(iv);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;4;x++)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      fluffy[x] = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5a5eeed59ae4241e5332167a2fb72bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5a5eeed59ae4241e5332167a2fb72bb">&#9670;&nbsp;</a></span>build_mapping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void build_mapping </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">4457</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00294">dundi_mapping::_weight</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">dundi_mapping::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">dundi_mapping::dead</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">dundi_mapping::dest</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00078">DUNDI_FLAG_COMMERCIAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00176">DUNDI_FLAG_INTERNAL_NOPARTIAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00080">DUNDI_FLAG_MOBILE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00084">DUNDI_FLAG_NOCOMUNSOLICIT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00082">DUNDI_FLAG_NOUNSOLICITED</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00076">DUNDI_FLAG_RESIDENTIAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">dundi_mapping::lcontext</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00438">map</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04455">MAX_OPTS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00157">MAX_WEIGHT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">dundi_mapping::options</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">str2tech()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">dundi_mapping::tech</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">dundi_mapping::weightstr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;{</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;   <span class="keywordtype">char</span> *t, *fields[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac066558381a92837abc23f022405d282">MAX_OPTS</a>];</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="code" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>;</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;   <span class="keywordtype">int</span> y;</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;   t = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, map, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;      <span class="comment">/* Find a double match */</span></div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) &amp;&amp;</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;         (!strncasecmp(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, strlen(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>)) &amp;&amp;</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;           (!<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>[strlen(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>)] ||</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;            (<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>[strlen(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>)] == <span class="charliteral">&#39;,&#39;</span>))))</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;   }</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;   <span class="keywordflow">if</span> (!map) {</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <span class="keywordflow">if</span> (!(map = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*map))))</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, map, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>);</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   }</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;   map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> = 0;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;   memset(fields, 0, <span class="keyword">sizeof</span>(fields));</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;   x = 0;</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   <span class="keywordflow">while</span> (t &amp;&amp; x &lt; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac066558381a92837abc23f022405d282">MAX_OPTS</a>) {</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;      fields[x++] = t;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      t = strchr(t, <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      <span class="keywordflow">if</span> (t) {</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;         *t = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;         t++;</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;      }</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;   } <span class="comment">/* Russell was here, arrrr! */</span></div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;   <span class="keywordflow">if</span> ((x == 1) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fields[0])) {</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;      <span class="comment">/* Placeholder mapping */</span></div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">sizeof</span>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>));</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;      map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 0;</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= 4) {</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">sizeof</span>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>));</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, fields[0], <span class="keyword">sizeof</span>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>));</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <span class="keywordflow">if</span> ((sscanf(fields[1], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a>) == 1) &amp;&amp; (map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a> &gt;= 0) &amp;&amp; (map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a> &lt;= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a943995a7bf30da3587664920856533ab">MAX_WEIGHT</a>)) {</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>, fields[3], <span class="keyword">sizeof</span>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>));</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;         <span class="keywordflow">if</span> ((map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">tech</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a83f1c7c6f93407f4887453beffc42a7c">str2tech</a>(fields[2])))</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 0;</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(fields[1], <span class="stringliteral">&quot;${&quot;</span>, 2) &amp;&amp; fields[1][strlen(fields[1]) - 1] == <span class="charliteral">&#39;}&#39;</span>) {</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;         map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">weightstr</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(fields[1]);</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>, fields[3], <span class="keyword">sizeof</span>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>));</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;         <span class="keywordflow">if</span> ((map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">tech</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a83f1c7c6f93407f4887453beffc42a7c">str2tech</a>(fields[2])))</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 0;</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid weight &#39;%s&#39; specified, deleting entry &#39;%s/%s&#39;\n&quot;</span>, fields[1], map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>);</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      }</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;      <span class="keywordflow">for</span> (y = 4;y &lt; x; y++) {</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;nounsolicited&quot;</span>))</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ae24393b59d24e328389ebcaef2a8034c">DUNDI_FLAG_NOUNSOLICITED</a>;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;nocomunsolicit&quot;</span>))</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a6e1609f152225fbcebc9222bb8e53bab">DUNDI_FLAG_NOCOMUNSOLICIT</a>;</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;residential&quot;</span>))</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac3373d01d4a39e3fede463f7715c402a">DUNDI_FLAG_RESIDENTIAL</a>;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;commercial&quot;</span>))</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a6d6a610c5263acbc8387ca758e87f25e">DUNDI_FLAG_COMMERCIAL</a>;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;mobile&quot;</span>))</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a10b1a1011e42119014881bca559c3449">DUNDI_FLAG_MOBILE</a>;</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(fields[y], <span class="stringliteral">&quot;nopartial&quot;</span>))</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;            map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3e53e12e302bc296ce4123c63db56ef7">DUNDI_FLAG_INTERNAL_NOPARTIAL</a>;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Don&#39;t know anything about option &#39;%s&#39;\n&quot;</span>, fields[y]);</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      }</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Expected at least %d arguments in map, but got only %d\n&quot;</span>, 4, x);</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;}</div><div class="ttc" id="structdundi__mapping_html_a654f0683d109dbcbaae72ad430e7aede"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dundi_mapping::dest</a></div><div class="ttdeci">char dest[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">pbx_dundi.c:299</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dundi_mapping::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">pbx_dundi.c:292</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a18503b36b5eb83b128ab979b5ff241bf"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">dundi_mapping::lcontext</a></div><div class="ttdeci">char lcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">pbx_dundi.c:293</a></div></div>
<div class="ttc" id="structdundi__mapping_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_mapping::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">pbx_dundi.c:298</a></div></div>
<div class="ttc" id="misdn__config_8c_html_a92a7399cbb76f6349df98d9432ad52c6"><div class="ttname"><a href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a></div><div class="ttdeci">static int * map</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00438">misdn_config.c:438</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3e53e12e302bc296ce4123c63db56ef7"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3e53e12e302bc296ce4123c63db56ef7">DUNDI_FLAG_INTERNAL_NOPARTIAL</a></div><div class="ttdeci">#define DUNDI_FLAG_INTERNAL_NOPARTIAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00176">pbx_dundi.c:176</a></div></div>
<div class="ttc" id="structdundi__mapping_html_ac9453cd045e480d6abf78f7724a075a4"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">dundi_mapping::_weight</a></div><div class="ttdeci">int _weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00294">pbx_dundi.c:294</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a6d6a610c5263acbc8387ca758e87f25e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a6d6a610c5263acbc8387ca758e87f25e">DUNDI_FLAG_COMMERCIAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00078">dundi.h:78</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ac3373d01d4a39e3fede463f7715c402a"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac3373d01d4a39e3fede463f7715c402a">DUNDI_FLAG_RESIDENTIAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00076">dundi.h:76</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ae24393b59d24e328389ebcaef2a8034c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ae24393b59d24e328389ebcaef2a8034c">DUNDI_FLAG_NOUNSOLICITED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00082">dundi.h:82</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a849fa981f121eb25a67e4e14392840ba"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">dundi_mapping::options</a></div><div class="ttdeci">int options</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">pbx_dundi.c:296</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a10b1a1011e42119014881bca559c3449"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a10b1a1011e42119014881bca559c3449">DUNDI_FLAG_MOBILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00080">dundi.h:80</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a3bddf67ed9144cd4492f525bb1612816"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">dundi_mapping::weightstr</a></div><div class="ttdeci">char * weightstr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">pbx_dundi.c:295</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a6e1609f152225fbcebc9222bb8e53bab"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a6e1609f152225fbcebc9222bb8e53bab">DUNDI_FLAG_NOCOMUNSOLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00084">dundi.h:84</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a83f1c7c6f93407f4887453beffc42a7c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a83f1c7c6f93407f4887453beffc42a7c">str2tech</a></div><div class="ttdeci">static int str2tech(char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">pbx_dundi.c:396</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac066558381a92837abc23f022405d282"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac066558381a92837abc23f022405d282">MAX_OPTS</a></div><div class="ttdeci">#define MAX_OPTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04455">pbx_dundi.c:4455</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a943995a7bf30da3587664920856533ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a943995a7bf30da3587664920856533ab">MAX_WEIGHT</a></div><div class="ttdeci">#define MAX_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00157">pbx_dundi.c:157</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a7c185f9a2f9294fce34f8a9429074ba0"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">dundi_mapping::tech</a></div><div class="ttdeci">int tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">pbx_dundi.c:297</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abea805104a13e221adad99663e42050f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abea805104a13e221adad99663e42050f">&#9670;&nbsp;</a></span>build_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void build_peer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>globalpcmode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">4628</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04442">append_permission()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02825">ast_str_to_eid()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">dundi_peer::dead</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l00390">DEFAULT_MAXMS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04374">destroy_permissions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">do_register()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">DUNDI_MODEL_INBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">DUNDI_MODEL_OUTBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00161">DUNDI_MODEL_SYMMETRIC</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00030">DUNDI_PORT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">dundi_peer::dynamic</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00198">global_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">ast_variable::lineno</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">dundi_peer::model</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">dundi_peer::order</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">dundi_peer::outkey</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">dundi_peer::pcmodel</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">populate_addr()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">dundi_peer::qualifyid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">dundi_peer::registerid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">dundi_peer::us_eid</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;{</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> testeid;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;   <span class="keywordtype">int</span> needregister=0;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, eid)) {</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;      }</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;   }</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;   <span class="keywordflow">if</span> (!peer) {</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      <span class="comment">/* Add us into the list */</span></div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      <span class="keywordflow">if</span> (!(peer = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*peer)))) {</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      }</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a> = -1;</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a> = -1;</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a> = -1;</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a750726c4f6aeef52b97e95e43a368239">populate_addr</a>(peer, eid);</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>);</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;   }</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 0;</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a> = *<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a>;</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>);</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>);</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a>);</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;   <span class="keywordflow">for</span> (; v; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;inkey&quot;</span>)) {</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>));</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;outkey&quot;</span>)) {</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>));</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;port&quot;</span>)) {</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;         port = atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;host&quot;</span>)) {</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;dynamic&quot;</span>)) {</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a> = 1;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addrs;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>, AF_UNSPEC) &gt; 0) {</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;addrs[0]);</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;               peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a> = 0;</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(addrs);</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find host &#39;%s&#39; at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;               peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;            }</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;         }</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ustothem&quot;</span>)) {</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a>(&amp;testeid, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>))</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a> = testeid;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid DUNDi Entity Identifier at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;include&quot;</span>)) {</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 1);</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;permit&quot;</span>)) {</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 1);</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;noinclude&quot;</span>)) {</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0);</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;deny&quot;</span>)) {</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, 0);</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;register&quot;</span>)) {</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;         needregister = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;order&quot;</span>)) {</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;primary&quot;</span>))</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> = 0;</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;secondary&quot;</span>))</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> = 1;</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;tertiary&quot;</span>))</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> = 2;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;quartiary&quot;</span>))</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> = 3;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid order, should be primary, secondary, tertiary or quartiary at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;         }</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;qualify&quot;</span>)) {</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;no&quot;</span>)) {</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a> = 0;</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;yes&quot;</span>)) {</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a> = <a class="code" href="../../d5/dff/chan__iax2_8c.html#a960e3be6d1f16d936afd3d6fba7f31b0">DEFAULT_MAXMS</a>;</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) != 1) {</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Qualification of peer &#39;%s&#39; should be &#39;yes&#39;, &#39;no&#39;, or a number of milliseconds at line %d of dundi.conf\n&quot;</span>,</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a> = 0;</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;         }</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;model&quot;</span>)) {</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;inbound&quot;</span>))</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>;</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;outbound&quot;</span>))</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>;</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;symmetric&quot;</span>))</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a>;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;none&quot;</span>))</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> = 0;</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown model &#39;%s&#39;, should be &#39;none&#39;, &#39;outbound&#39;, &#39;inbound&#39;, or &#39;symmetric&#39; at line %d\n&quot;</span>,</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;         }</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;precache&quot;</span>)) {</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;inbound&quot;</span>))</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;outbound&quot;</span>))</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>;</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;symmetric&quot;</span>))</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a>;</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;none&quot;</span>))</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> = 0;</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown pcmodel &#39;%s&#39;, should be &#39;none&#39;, &#39;outbound&#39;, &#39;inbound&#39;, or &#39;symmetric&#39; at line %d\n&quot;</span>,</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;         }</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;      }</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;   }</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, (0 &lt; port) ? port : <a class="code" href="../../d2/d59/dundi_8h.html#a3a0aa89ed893781e5d8a2d59d8f5be7b">DUNDI_PORT</a>);</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;   }</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;   (*globalpcmode) |= peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a>;</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;   <span class="keywordflow">if</span> (!peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp;&amp; !peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a>) {</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; lacks a model or pcmodel, discarding!\n&quot;</span>,</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>) &amp;&amp; (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>)) {</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; may not be both inbound/symmetric model and outbound/symmetric precache model, discarding!\n&quot;</span>,</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>) &amp;&amp; (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>)) {</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; may not be both outbound/symmetric model and inbound/symmetric precache model, discarding!\n&quot;</span>,</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>) &amp;&amp; !(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>) &amp;&amp; !(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>)) {</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; is supposed to be included in outbound searches but isn&#39;t an outbound peer or inbound precache!\n&quot;</span>,</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>) &amp;&amp; !(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>) &amp;&amp; !(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>)) {</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; is supposed to have permission for some inbound searches but isn&#39;t an inbound peer or outbound precache!\n&quot;</span>,</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>)) {</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;         <span class="comment">/* Schedule any items for explicitly configured peers. */</span></div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;         <span class="keywordflow">if</span> (needregister) {</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 2000, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aedb77784b2a1af6c9640ea7138b2c8b3">do_register</a>, peer);</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;         }</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a>(peer, 1);</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;      }</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;   }</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a10df83e3e85f772c181a064c1c7d17bb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a></div><div class="ttdeci">#define DUNDI_MODEL_SYMMETRIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00161">pbx_dundi.c:161</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afc0636d6a53edfb41e1afdd3cf63a4ec"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a></div><div class="ttdeci">static dundi_eid global_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00198">pbx_dundi.c:198</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structdundi__peer_html_a68e949e531b8bd22174267db35f3cf77"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">dundi_peer::qualifyid</a></div><div class="ttdeci">int qualifyid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">pbx_dundi.c:313</a></div></div>
<div class="ttc" id="dundi_8h_html_a3a0aa89ed893781e5d8a2d59d8f5be7b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a3a0aa89ed893781e5d8a2d59d8f5be7b">DUNDI_PORT</a></div><div class="ttdeci">#define DUNDI_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00030">dundi.h:30</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a750726c4f6aeef52b97e95e43a368239"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a750726c4f6aeef52b97e95e43a368239">populate_addr</a></div><div class="ttdeci">static void populate_addr(struct dundi_peer *peer, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">pbx_dundi.c:4588</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a9863fab76a579a6b38c5c6327fc9671c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a></div><div class="ttdeci">static void destroy_permissions(struct permissionlist *permlist)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04374">pbx_dundi.c:4374</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0ac6dcfff533378dbcf9a01b59617d36"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">dundi_peer::outkey</a></div><div class="ttdeci">char outkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">pbx_dundi.c:310</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa4ffb3a85b70d6a69590f5059817d536"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a></div><div class="ttdeci">static void qualify_peer(struct dundi_peer *peer, int schedonly)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">pbx_dundi.c:4565</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aedb77784b2a1af6c9640ea7138b2c8b3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aedb77784b2a1af6c9640ea7138b2c8b3">do_register</a></div><div class="ttdeci">static int do_register(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">pbx_dundi.c:4531</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structdundi__peer_html_ae2293fc2bce6e3ab03af5890486537c5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">dundi_peer::registerid</a></div><div class="ttdeci">int registerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">pbx_dundi.c:312</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57b3a555fe31704b952f29a59f33bb81"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_INBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">pbx_dundi.c:159</a></div></div>
<div class="ttc" id="utils_8h_html_ad60a8c795e1f64b7beeed705425c555f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a></div><div class="ttdeci">int ast_str_to_eid(struct ast_eid *eid, const char *s)</div><div class="ttdoc">Convert a string into an EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02825">main/utils.c:2825</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a783dbbdb57b411826c3842ba4f678bde"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a783dbbdb57b411826c3842ba4f678bde">append_permission</a></div><div class="ttdeci">static void append_permission(struct permissionlist *permlist, const char *s, int allow)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04442">pbx_dundi.c:4442</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a></div><div class="ttdeci">static dundi_eid empty_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">pbx_dundi.c:212</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structdundi__peer_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">dundi_peer::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">pbx_dundi.c:308</a></div></div>
<div class="ttc" id="structdundi__peer_html_ac85d5511fdb8d162a7278bfb440ae420"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">dundi_peer::order</a></div><div class="ttdeci">int order</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">pbx_dundi.c:315</a></div></div>
<div class="ttc" id="structdundi__peer_html_a4dc82f49746246f8bf4f651b6dd27a7c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dundi_peer::dynamic</a></div><div class="ttdeci">unsigned int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">pbx_dundi.c:334</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a960e3be6d1f16d936afd3d6fba7f31b0"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a960e3be6d1f16d936afd3d6fba7f31b0">DEFAULT_MAXMS</a></div><div class="ttdeci">#define DEFAULT_MAXMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00390">chan_iax2.c:390</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="structdundi__peer_html_af127b116515a36d812fad9ade884927f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">dundi_peer::pcmodel</a></div><div class="ttdeci">int pcmodel</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">pbx_dundi.c:332</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structdundi__peer_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_peer::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">pbx_dundi.c:311</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa6ff7731f29e08bc8019c6bdab908df8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_OUTBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">pbx_dundi.c:160</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e07ff59084fdf7d5f96f43509e00744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e07ff59084fdf7d5f96f43509e00744">&#9670;&nbsp;</a></span>build_secret()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void build_secret </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seclen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">2110</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">ast_base64encode()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">build_iv()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02177">check_password()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">load_password()</a>.</p>
<div class="fragment"><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[16];</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a>(tmp);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   secret[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(secret, tmp, <span class="keyword">sizeof</span>(tmp), seclen);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <span class="comment">/* Eliminate potential bad characters */</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   <span class="keywordflow">while</span>((s = strchr(secret, <span class="charliteral">&#39;;&#39;</span>))) *s = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   <span class="keywordflow">while</span>((s = strchr(secret, <span class="charliteral">&#39;/&#39;</span>))) *s = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">while</span>((s = strchr(secret, <span class="charliteral">&#39;:&#39;</span>))) *s = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">while</span>((s = strchr(secret, <span class="charliteral">&#39;@&#39;</span>))) *s = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57dfdd2d46918b3f8e7ac4287f164365"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a></div><div class="ttdeci">static void build_iv(unsigned char *iv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">pbx_dundi.c:533</a></div></div>
<div class="ttc" id="utils_8h_html_a555dad1bd5b23acf01cf08f1affab879"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a></div><div class="ttdeci">int ast_base64encode(char *dst, const unsigned char *src, int srclen, int max)</div><div class="ttdoc">Encode data in base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00404">main/utils.c:404</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a92b3d0d6b935c050950f18b3436f371e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92b3d0d6b935c050950f18b3436f371e">&#9670;&nbsp;</a></span>build_transactions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void build_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>foundcache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>skipped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockempty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nocache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>modeselect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>skip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoid</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>directs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">3700</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03642">append_transaction()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00180">ast_clear_flag_nonstd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">cache_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">DUNDI_MODEL_OUTBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">dundi_request::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">has_permission()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">dundi_peer::model</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">dundi_peer::order</a>, <a class="el" href="../../dc/d12/res__config__ldap_8c_source.html#l00076">pass</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">dundi_peer::pcmodel</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">dundi_peer::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;{</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d12/res__config__ldap_8c.html#a52388ec12a45b52ff62aaf3dfccd0cd5">pass</a>;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;   <span class="keywordtype">int</span> allowconnect;</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, p, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <span class="keywordflow">if</span> (modeselect == 1) {</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;         <span class="comment">/* Send the precache to push upstreams only! */</span></div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;         pass = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>) &amp;&amp; (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>);</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;         allowconnect = 1;</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;         <span class="comment">/* Normal lookup / EID query */</span></div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;         pass = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;         allowconnect = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;      }</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;      <span class="keywordflow">if</span> (skip) {</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(skip, &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>))</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            pass = 0;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;      }</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> &lt;= <a class="code" href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;            <span class="comment">/* Check order first, then check cache, regardless of</span></div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;<span class="comment">               omissions, this gets us more likely to not have an</span></div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;<span class="comment">               affected answer. */</span></div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;            <span class="keywordflow">if</span>((nocache || !(res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a00f1ba8ae26dfa307a484892fa0dc82d">cache_lookup</a>(dr, &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>, &amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#ad6057e40387509de502bdc91007d3238">expiration</a>)))) {</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;               res = 0;</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;               <span class="comment">/* Make sure we haven&#39;t already seen it and that it won&#39;t</span></div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;<span class="comment">                  affect our answer */</span></div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;               <span class="keywordflow">for</span> (x=0;avoid[x];x++) {</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(avoid[x], &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>) || !<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(avoid[x], &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>)) {</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;                     <span class="comment">/* If not a direct connection, it affects our answer */</span></div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;                     <span class="keywordflow">if</span> (directs &amp;&amp; !directs[x])</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;                        <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;                  }</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;               }</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;               <span class="comment">/* Make sure we can ask */</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;               <span class="keywordflow">if</span> (allowconnect) {</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;                  <span class="keywordflow">if</span> (!avoid[x] &amp;&amp; (!blockempty || !<a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>))) {</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;                     <span class="comment">/* Check for a matching or 0 cache entry */</span></div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;                     <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4a530c0df649c86e16e6cb2713ed7265">append_transaction</a>(dr, p, ttl, avoid);</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Avoiding &#39;%s&#39; in transaction\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), avoid[x]));</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;                  }</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;               }</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;            }</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;            *foundcache |= res;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!*skipped || (p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> &lt; *skipped))</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;            *skipped = p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a>;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      }</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;   }</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="res__config__ldap_8c_html_a52388ec12a45b52ff62aaf3dfccd0cd5"><div class="ttname"><a href="../../dc/d12/res__config__ldap_8c.html#a52388ec12a45b52ff62aaf3dfccd0cd5">pass</a></div><div class="ttdeci">static char pass[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d12/res__config__ldap_8c_source.html#l00076">res_config_ldap.c:76</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="utils_8h_html_a2d48f8d71e91b61c5759edf70f71a168"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a></div><div class="ttdeci">#define ast_clear_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00180">utils.h:180</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a00f1ba8ae26dfa307a484892fa0dc82d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a00f1ba8ae26dfa307a484892fa0dc82d">cache_lookup</a></div><div class="ttdeci">static int cache_lookup(struct dundi_request *req, dundi_eid *peer_eid, uint32_t crc, int *lowexpiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">pbx_dundi.c:1242</a></div></div>
<div class="ttc" id="structdundi__request_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#ad6057e40387509de502bdc91007d3238">dundi_request::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">pbx_dundi.c:283</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4ee00d52d3fc2dd80292cf9cc337a500"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a></div><div class="ttdeci">static int has_permission(struct permissionlist *permlist, char *cont)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">pbx_dundi.c:367</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="analys_8c_html_aed7ca058008dc3e5ee131e575abed285"><div class="ttname"><a href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a></div><div class="ttdeci">integer order</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d79/analys_8c_source.html#l00066">analys.c:66</a></div></div>
<div class="ttc" id="structdundi__peer_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">dundi_peer::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">pbx_dundi.c:308</a></div></div>
<div class="ttc" id="structdundi__peer_html_ac85d5511fdb8d162a7278bfb440ae420"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">dundi_peer::order</a></div><div class="ttdeci">int order</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">pbx_dundi.c:315</a></div></div>
<div class="ttc" id="structdundi__request_html_a7ba6d986496f16e7c9bb92ea0265914d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">dundi_request::crc32</a></div><div class="ttdeci">uint32_t crc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">pbx_dundi.c:286</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4a530c0df649c86e16e6cb2713ed7265"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4a530c0df649c86e16e6cb2713ed7265">append_transaction</a></div><div class="ttdeci">static int append_transaction(struct dundi_request *dr, struct dundi_peer *p, int ttl, dundi_eid *avoid[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03642">pbx_dundi.c:3642</a></div></div>
<div class="ttc" id="structdundi__request_html_a8ccda2f23985077bb0b624733a68216c"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">dundi_request::hmd</a></div><div class="ttdeci">struct dundi_hint_metadata * hmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">pbx_dundi.c:280</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="structdundi__peer_html_af127b116515a36d812fad9ade884927f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">dundi_peer::pcmodel</a></div><div class="ttdeci">int pcmodel</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">pbx_dundi.c:332</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa6ff7731f29e08bc8019c6bdab908df8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_OUTBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">pbx_dundi.c:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00f1ba8ae26dfa307a484892fa0dc82d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f1ba8ae26dfa307a484892fa0dc82d">&#9670;&nbsp;</a></span>cache_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cache_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>peer_eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>crc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>lowexpiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">1242</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">cache_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi_eid_to_str_short()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;{</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordtype">char</span> eidroot_str[20];</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   time_t now;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <span class="keywordtype">int</span> res=0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <span class="keywordtype">int</span> res2=0;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <span class="keywordtype">char</span> eid_str_full[20];</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256]=<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="comment">/* Enough space for largest value that can be stored in key. */</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keywordtype">char</span> key[<span class="keyword">sizeof</span>(eid_str) + <span class="keyword">sizeof</span>(tmp) + <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>) + <span class="keyword">sizeof</span>(eidroot_str) + <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;hint////r&quot;</span>)];</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   time(&amp;now);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), peer_eid);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidroot_str, <span class="keyword">sizeof</span>(eidroot_str), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str_full, <span class="keyword">sizeof</span>(eid_str_full), peer_eid);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;%s/%s/%s/e%08x&quot;</span>, eid_str, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, crc);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   res |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;%s/%s/%s/e%08x&quot;</span>, eid_str, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, (<span class="keywordtype">unsigned</span>)0);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   res |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;%s/%s/%s/r%s&quot;</span>, eid_str, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, eidroot_str);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   res |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   x = 0;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <span class="keywordflow">if</span> (!req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">while</span>(!res2) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;         <span class="comment">/* Look and see if we have a hint that would preclude us from looking at this</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">            peer for this number. */</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;         <span class="keywordflow">if</span> (!(tmp[x] = req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>[x]))</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         x++;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="comment">/* Check for hints */</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;         snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;hint/%s/%s/%s/e%08x&quot;</span>, eid_str, tmp, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, crc);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         res2 |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;hint/%s/%s/%s/e%08x&quot;</span>, eid_str, tmp, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, (<span class="keywordtype">unsigned</span>)0);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         res2 |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;         snprintf(key, <span class="keyword">sizeof</span>(key), <span class="stringliteral">&quot;hint/%s/%s/%s/r%s&quot;</span>, eid_str, tmp, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, eidroot_str);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;         res2 |= <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a>(now, req, key, eid_str_full, lowexpiration);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;         <span class="keywordflow">if</span> (res2) {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="keywordflow">if</span> (strlen(tmp) &gt; strlen(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;               <span class="comment">/* Update meta data if appropriate */</span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>, tmp, <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;         }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      res |= res2;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a5026ff3406256404f18b669e48b5b828"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a></div><div class="ttdeci">char * dundi_eid_to_str_short(char *s, int maxlen, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi-parser.c:54</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2affe422204e00b75e29580543a018a3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2affe422204e00b75e29580543a018a3">cache_lookup_internal</a></div><div class="ttdeci">static int cache_lookup_internal(time_t now, struct dundi_request *req, char *key, char *eid_str_full, int *lowexpiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">pbx_dundi.c:1170</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="structdundi__request_html_a8ccda2f23985077bb0b624733a68216c"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">dundi_request::hmd</a></div><div class="ttdeci">struct dundi_hint_metadata * hmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">pbx_dundi.c:280</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">dundi_hint_metadata::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">pbx_dundi.c:233</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2affe422204e00b75e29580543a018a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2affe422204e00b75e29580543a018a3">&#9670;&nbsp;</a></span>cache_lookup_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cache_lookup_internal </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>now</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>eid_str_full</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>lowexpiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">1170</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00180">ast_clear_flag_nonstd</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi_flags2str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi_str_short_to_eid()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00230">dundi_result::eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00231">dundi_result::eid_str</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00200">ast_flags::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">dundi_mapping::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00229">dundi_result::techint</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">weight</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">cache_lookup()</a>.</p>
<div class="fragment"><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;{</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <span class="keywordtype">char</span> data[1024];</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordtype">char</span> *ptr, *term, *src;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordtype">int</span> tech;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="keywordtype">int</span> length;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keywordtype">int</span> z;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordtype">char</span> fs[256];</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   <span class="comment">/* Build request string */</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key, data, <span class="keyword">sizeof</span>(data))) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      time_t <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      ptr = data;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(ptr, &amp;timeout, 0, &amp;length)) {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;         <span class="keywordtype">int</span> expiration = timeout - now;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;         <span class="keywordflow">if</span> (expiration &gt; 0) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Found cache expiring in %d seconds!\n&quot;</span>, expiration);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            ptr += length + 1;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <span class="keywordflow">while</span>((sscanf(ptr, <span class="stringliteral">&quot;%30d/%30d/%30d/%n&quot;</span>, (<span class="keywordtype">int</span> *)&amp;(<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>.flags), &amp;weight, &amp;tech, &amp;length) == 3)) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;               ptr += length;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;               term = strchr(ptr, <span class="charliteral">&#39;|&#39;</span>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;               <span class="keywordflow">if</span> (term) {</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                  *term = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                  src = strrchr(ptr, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                  <span class="keywordflow">if</span> (src) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                     *src = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                     src++;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                  } <span class="keywordflow">else</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                     src = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Found cached answer &#39;%s/%s&#39; originally from &#39;%s&#39; with flags &#39;%s&#39; on behalf of &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                     <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(tech), ptr, src, <a class="code" href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a>(fs, <span class="keyword">sizeof</span>(fs), <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>.flags), eid_str_full);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                  <span class="comment">/* Make sure it&#39;s not already there */</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                  <span class="keywordflow">for</span> (z=0;z&lt;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>;z++) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                     <span class="keywordflow">if</span> ((req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> == tech) &amp;&amp;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                         !strcmp(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, ptr))</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                  }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                  <span class="keywordflow">if</span> (z == req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                     <span class="comment">/* Copy into parent responses */</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>]), &amp;<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                     req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                     req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> = tech;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                     req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = expiration;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                     <a class="code" href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a>(&amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, src);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>,</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                        <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, ptr,</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                        <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>));</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(tech),</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                        <span class="keyword">sizeof</span>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>));</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                     req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>++;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> &gt; weight)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                     req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                  ptr = term + 1;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;               }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="comment">/* We found *something* cached */</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">if</span> (expiration &lt; *lowexpiration)</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;               *lowexpiration = expiration;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;         <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;}</div><div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a2d48f8d71e91b61c5759edf70f71a168"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a></div><div class="ttdeci">#define ast_clear_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00180">utils.h:180</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="structdundi__request_html_a9cc14b8066538d5035977ead66a98867"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dundi_request::dr</a></div><div class="ttdeci">struct dundi_result * dr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">pbx_dundi.c:278</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__result_html_a9f38c22f98ac1c23c8aece0e44de1fbb"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">dundi_result::tech</a></div><div class="ttdeci">char tech[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00232">dundi.h:232</a></div></div>
<div class="ttc" id="structdundi__result_html_a27e688430fbfa33f62807848a30a644b"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">dundi_result::eid_str</a></div><div class="ttdeci">char eid_str[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00231">dundi.h:231</a></div></div>
<div class="ttc" id="structdundi__result_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">dundi_result::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00228">dundi.h:228</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="structdundi__result_html_a8361ea43bdb1990170b1de986c1ff898"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">dundi_result::techint</a></div><div class="ttdeci">int techint</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00229">dundi.h:229</a></div></div>
<div class="ttc" id="structdundi__result_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">dundi_result::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00230">dundi.h:230</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="structdundi__request_html_a8ccda2f23985077bb0b624733a68216c"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">dundi_request::hmd</a></div><div class="ttdeci">struct dundi_hint_metadata * hmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">pbx_dundi.c:280</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1e452d6704b19892c14f47fe6e186b48"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a></div><div class="ttdeci">int dundi_str_short_to_eid(dundi_eid *eid, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi-parser.c:70</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae14237ec6afd0fcccd2de889720984e3"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a></div><div class="ttdeci">char * dundi_flags2str(char *buf, int bufsiz, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi-parser.c:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c96fa5363a438a67eeb7138eb322581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c96fa5363a438a67eeb7138eb322581">&#9670;&nbsp;</a></span>cache_save()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cache_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eidpeer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unaffected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expiration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>push</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">899</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi_eid_to_str_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00230">dundi_result::eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00226">dundi_result::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00229">dundi_result::techint</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordtype">char</span> key1[256];</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keywordtype">char</span> key2[256];</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="keywordtype">char</span> data[1024];</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordtype">char</span> eidpeer_str[20];</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <span class="keywordtype">char</span> eidroot_str[20];</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   time_t <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordflow">if</span> (expiration &lt; 1)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="comment">/* Keep pushes a little longer, cut pulls a little short */</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <span class="keywordflow">if</span> (push)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      expiration += 10;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      expiration -= 10;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <span class="keywordflow">if</span> (expiration &lt; 1)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      expiration = 1;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidpeer_str, <span class="keyword">sizeof</span>(eidpeer_str), eidpeer);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidroot_str, <span class="keyword">sizeof</span>(eidroot_str), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   snprintf(key1, <span class="keyword">sizeof</span>(key1), <span class="stringliteral">&quot;%s/%s/%s/e%08x&quot;</span>, eidpeer_str, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, unaffected ? 0 : req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   snprintf(key2, <span class="keyword">sizeof</span>(key2), <span class="stringliteral">&quot;%s/%s/%s/r%s&quot;</span>, eidpeer_str, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, eidroot_str);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="comment">/* Build request string */</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   time(&amp;timeout);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   timeout += expiration;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   snprintf(data, <span class="keyword">sizeof</span>(data), <span class="stringliteral">&quot;%ld|&quot;</span>, (<span class="keywordtype">long</span>)(timeout));</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">for</span> (x=start;x&lt;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>;x++) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="comment">/* Skip anything with an illegal pipe in it */</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">if</span> (strchr(req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, <span class="charliteral">&#39;|&#39;</span>))</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      snprintf(data + strlen(data), <span class="keyword">sizeof</span>(data) - strlen(data), <span class="stringliteral">&quot;%u/%d/%d/%s/%s|&quot;</span>,</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>,</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidpeer_str, <span class="keyword">sizeof</span>(eidpeer_str), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[x].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key1, data);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key2, data);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;}</div><div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a5026ff3406256404f18b669e48b5b828"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a></div><div class="ttdeci">char * dundi_eid_to_str_short(char *s, int maxlen, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi-parser.c:54</a></div></div>
<div class="ttc" id="structdundi__request_html_a9cc14b8066538d5035977ead66a98867"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dundi_request::dr</a></div><div class="ttdeci">struct dundi_result * dr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">pbx_dundi.c:278</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="structdundi__result_html_a8361ea43bdb1990170b1de986c1ff898"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">dundi_result::techint</a></div><div class="ttdeci">int techint</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00229">dundi.h:229</a></div></div>
<div class="ttc" id="structdundi__request_html_a7ba6d986496f16e7c9bb92ea0265914d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">dundi_request::crc32</a></div><div class="ttdeci">uint32_t crc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">pbx_dundi.c:286</a></div></div>
<div class="ttc" id="structdundi__result_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">dundi_result::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00230">dundi.h:230</a></div></div>
<div class="ttc" id="structdundi__result_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">dundi_result::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00226">dundi.h:226</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00a7321e9d8e6299b270ba685cb69a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00a7321e9d8e6299b270ba685cb69a8e">&#9670;&nbsp;</a></span>cache_save_hint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cache_save_hint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eidpeer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d43/structdundi__hint.html">dundi_hint</a> *&#160;</td>
          <td class="paramname"><em>hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">864</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00173">ast_test_flag_nonstd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00112">dundi_hint::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi_eid_to_str_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keywordtype">int</span> unaffected;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <span class="keywordtype">char</span> key1[256];</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordtype">char</span> key2[256];</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordtype">char</span> eidpeer_str[20];</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordtype">char</span> eidroot_str[20];</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordtype">char</span> data[80];</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   time_t <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keywordflow">if</span> (expiration &lt; 0)</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="comment">/* Only cache hint if &quot;don&#39;t ask&quot; is there... */</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(hint, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>)))</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   unaffected = <a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(hint, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>));</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidpeer_str, <span class="keyword">sizeof</span>(eidpeer_str), eidpeer);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eidroot_str, <span class="keyword">sizeof</span>(eidroot_str), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   snprintf(key1, <span class="keyword">sizeof</span>(key1), <span class="stringliteral">&quot;hint/%s/%s/%s/e%08x&quot;</span>, eidpeer_str, hint-&gt;<a class="code" href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">data</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, unaffected ? 0 : req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   snprintf(key2, <span class="keyword">sizeof</span>(key2), <span class="stringliteral">&quot;hint/%s/%s/%s/r%s&quot;</span>, eidpeer_str, hint-&gt;<a class="code" href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">data</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, eidroot_str);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   time(&amp;timeout);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   timeout += expiration;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   snprintf(data, <span class="keyword">sizeof</span>(data), <span class="stringliteral">&quot;%ld|&quot;</span>, (<span class="keywordtype">long</span>)(timeout));</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key1, data);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Caching hint at &#39;%s&#39;\n&quot;</span>, key1);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, key2, data);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Caching hint at &#39;%s&#39;\n&quot;</span>, key2);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a5026ff3406256404f18b669e48b5b828"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a></div><div class="ttdeci">char * dundi_eid_to_str_short(char *s, int maxlen, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi-parser.c:54</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__hint_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">dundi_hint::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00112">dundi.h:112</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__request_html_a7ba6d986496f16e7c9bb92ea0265914d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">dundi_request::crc32</a></div><div class="ttdeci">uint32_t crc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">pbx_dundi.c:286</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="utils_8h_html_aacbd52db1ede7a4c592037c8d6da7ded"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a></div><div class="ttdeci">#define ast_test_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00173">utils.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24325d2346f0e082e206486c94fcc83b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24325d2346f0e082e206486c94fcc83b">&#9670;&nbsp;</a></span>cancel_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cancel_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">3674</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00171">DUNDI_COMMAND_CANCEL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;{</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;   <span class="keywordflow">while</span> ((trans = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>))) {</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      <span class="comment">/* Orphan transaction from request */</span></div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      <span class="comment">/* Send final cancel */</span></div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;   }</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a625c7bfebdd52adeaefbf97884ebf3f9"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a></div><div class="ttdeci">struct dundi_transaction::@438 parentlist</div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="dundi_8h_html_a9c4c9643a271a051be7013b8df876cdf"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a></div><div class="ttdeci">#define DUNDI_COMMAND_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00171">dundi.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5157e2e1865868479d20a0271c6ca0d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5157e2e1865868479d20a0271c6ca0d7">&#9670;&nbsp;</a></span>check_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>newkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>newsig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>keycrc32</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01492">1492</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00471">ast_aes_set_decrypt_key()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00466">ast_aes_set_encrypt_key()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00416">ast_check_signature_bin()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00336">ast_decrypt_bin()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00141">ast_key_get()</a>, <a class="el" href="../../da/da0/crypto_8h_source.html#l00043">AST_KEY_PRIVATE</a>, <a class="el" href="../../da/da0/crypto_8h_source.html#l00042">AST_KEY_PUBLIC</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">dundi_peer::outkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00317">dundi_peer::rxenckey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00323">dundi_peer::them_dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00322">dundi_peer::them_ecx</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00321">dundi_peer::them_keycrc32</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;{</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dst[128];</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/db2/structast__key.html">ast_key</a> *key, *skey;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Expected &#39;%08x&#39; got &#39;%08x&#39;\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a279da7f6e9b070067074078fe72d48e8">them_keycrc32</a>, keycrc32);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a279da7f6e9b070067074078fe72d48e8">them_keycrc32</a> &amp;&amp; (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a279da7f6e9b070067074078fe72d48e8">them_keycrc32</a> == keycrc32)) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="comment">/* A match */</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!newkey || !newsig)</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">if</span> (!memcmp(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">rxenckey</a>, newkey, 128) &amp;&amp;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;       !memcmp(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">rxenckey</a> + 128, newsig, 128)) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="comment">/* By definition, a match */</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <span class="comment">/* Decrypt key */</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   key = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>, <a class="code" href="../../da/da0/crypto_8h.html#a68b39a796b4ca2c1ad95ba075be38284">AST_KEY_PRIVATE</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   <span class="keywordflow">if</span> (!key) {</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to find key &#39;%s&#39; to decode shared key from &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;         peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   }</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   skey = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>, <a class="code" href="../../da/da0/crypto_8h.html#a5a80fcd381628f496f8b70d60c0386a9">AST_KEY_PUBLIC</a>);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <span class="keywordflow">if</span> (!skey) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to find key &#39;%s&#39; to verify shared key from &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;         peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   }</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   <span class="comment">/* First check signature */</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   res = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ab1d4425a79457d45df892bc4452205e9">ast_check_signature_bin</a>(skey, (<span class="keywordtype">char</span> *)newkey, 128, newsig);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   res = <a class="code" href="../../d7/dbb/res__crypto_8c.html#a4c338ba409486c4f1c6e6423cd305f0c">ast_decrypt_bin</a>(dst, newkey, <span class="keyword">sizeof</span>(dst), key);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordflow">if</span> (res != 16) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">if</span> (res &gt;= 0)</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Weird, key decoded to the wrong size (%d)\n&quot;</span>, res);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   <span class="comment">/* Decrypted, passes signature */</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Wow, new key combo passed signature and decrypt!\n&quot;</span>);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   memcpy(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">rxenckey</a>, newkey, 128);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   memcpy(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">rxenckey</a> + 128, newsig, 128);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a279da7f6e9b070067074078fe72d48e8">them_keycrc32</a> = crc32(0L, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">rxenckey</a>, 128);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <a class="code" href="../../d7/dbb/res__crypto_8c.html#a9194ab9cf75f0925a9c5c9956360a5fc">ast_aes_set_decrypt_key</a>(dst, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa68596ffd6ef6e312a0c68d2310da046">them_dcx</a>);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <a class="code" href="../../d7/dbb/res__crypto_8c.html#a117f48816c45bdc7b955f73000572258">ast_aes_set_encrypt_key</a>(dst, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeb217932c50cae865a598c17f1adab84">them_ecx</a>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div><div class="ttc" id="structast__key_html"><div class="ttname"><a href="../../df/db2/structast__key.html">ast_key</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00074">res_crypto.c:74</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__peer_html_a4e4c3faa8596d8f284a2a9551e40ea74"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a4e4c3faa8596d8f284a2a9551e40ea74">dundi_peer::rxenckey</a></div><div class="ttdeci">unsigned char rxenckey[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00317">pbx_dundi.c:317</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0ac6dcfff533378dbcf9a01b59617d36"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">dundi_peer::outkey</a></div><div class="ttdeci">char outkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">pbx_dundi.c:310</a></div></div>
<div class="ttc" id="structdundi__peer_html_aa68596ffd6ef6e312a0c68d2310da046"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aa68596ffd6ef6e312a0c68d2310da046">dundi_peer::them_dcx</a></div><div class="ttdeci">ast_aes_decrypt_key them_dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00323">pbx_dundi.c:323</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="crypto_8h_html_a68b39a796b4ca2c1ad95ba075be38284"><div class="ttname"><a href="../../da/da0/crypto_8h.html#a68b39a796b4ca2c1ad95ba075be38284">AST_KEY_PRIVATE</a></div><div class="ttdeci">#define AST_KEY_PRIVATE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da0/crypto_8h_source.html#l00043">crypto.h:43</a></div></div>
<div class="ttc" id="structdundi__peer_html_aeb217932c50cae865a598c17f1adab84"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aeb217932c50cae865a598c17f1adab84">dundi_peer::them_ecx</a></div><div class="ttdeci">ast_aes_encrypt_key them_ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00322">pbx_dundi.c:322</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structdundi__peer_html_a279da7f6e9b070067074078fe72d48e8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a279da7f6e9b070067074078fe72d48e8">dundi_peer::them_keycrc32</a></div><div class="ttdeci">uint32_t them_keycrc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00321">pbx_dundi.c:321</a></div></div>
<div class="ttc" id="res__crypto_8c_html_ab1d4425a79457d45df892bc4452205e9"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#ab1d4425a79457d45df892bc4452205e9">ast_check_signature_bin</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_check_signature_bin(struct ast_key *key, const char *msg, int msglen, const unsigned char *dsig)</div><div class="ttdoc">check signature of a message </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00416">res_crypto.c:416</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a117f48816c45bdc7b955f73000572258"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a117f48816c45bdc7b955f73000572258">ast_aes_set_encrypt_key</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_aes_set_encrypt_key(const unsigned char *key, ast_aes_encrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00466">res_crypto.c:466</a></div></div>
<div class="ttc" id="res__crypto_8c_html_ac8b35d32368f7557b05d0610970b9b0a"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a></div><div class="ttdeci">struct ast_key *AST_OPTIONAL_API_NAME() ast_key_get(const char *kname, int ktype)</div><div class="ttdoc">return the ast_key structure for name </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00141">res_crypto.c:141</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a9194ab9cf75f0925a9c5c9956360a5fc"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a9194ab9cf75f0925a9c5c9956360a5fc">ast_aes_set_decrypt_key</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_aes_set_decrypt_key(const unsigned char *key, ast_aes_decrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00471">res_crypto.c:471</a></div></div>
<div class="ttc" id="crypto_8h_html_a5a80fcd381628f496f8b70d60c0386a9"><div class="ttname"><a href="../../da/da0/crypto_8h.html#a5a80fcd381628f496f8b70d60c0386a9">AST_KEY_PUBLIC</a></div><div class="ttdeci">#define AST_KEY_PUBLIC</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da0/crypto_8h_source.html#l00042">crypto.h:42</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a4c338ba409486c4f1c6e6423cd305f0c"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a4c338ba409486c4f1c6e6423cd305f0c">ast_decrypt_bin</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_decrypt_bin(unsigned char *dst, const unsigned char *src, int srclen, struct ast_key *key)</div><div class="ttdoc">decrypt a message </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00336">res_crypto.c:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1068a316e1bbca8e0deb40d1e6f735ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1068a316e1bbca8e0deb40d1e6f735ce">&#9670;&nbsp;</a></span>check_password()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void check_password </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02177">2177</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">build_secret()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">save_secret()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02194">network_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;{</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   <span class="keywordtype">char</span> oldsecret[80];</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   time_t now;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   time(&amp;now);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   printf(<span class="stringliteral">&quot;%ld/%ld\n&quot;</span>, now, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">if</span> ((now - <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a>) &gt;= 0) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="comment">/* Time to rotate keys */</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(oldsecret, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, <span class="keyword">sizeof</span>(oldsecret));</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3e07ff59084fdf7d5f96f43509e00744">build_secret</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>));</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a50a9b3f4708bad6a20555b7089d7b8a4">save_secret</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, oldsecret);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a50a9b3f4708bad6a20555b7089d7b8a4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a50a9b3f4708bad6a20555b7089d7b8a4">save_secret</a></div><div class="ttdeci">static void save_secret(const char *newkey, const char *oldkey)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">pbx_dundi.c:2125</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3e07ff59084fdf7d5f96f43509e00744"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3e07ff59084fdf7d5f96f43509e00744">build_secret</a></div><div class="ttdeci">static void build_secret(char *secret, int seclen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">pbx_dundi.c:2110</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a67db34020f8303d719cb594849f0f868"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a></div><div class="ttdeci">static time_t rotatetime</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00211">pbx_dundi.c:211</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a539fd30ae5d9ac88c45e52e37bee5a2f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a></div><div class="ttdeci">static char cursecret[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00209">pbx_dundi.c:209</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5105c2171d37936498ac78fa74c32edf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5105c2171d37936498ac78fa74c32edf">&#9670;&nbsp;</a></span>check_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03795">3795</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;{</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *cur;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d7b/structrequests.html">requests</a>, cur, <a class="code" href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">list</a>) {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      <span class="keywordflow">if</span> (cur == dr)</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;   }</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;   <span class="keywordflow">return</span> cur ? 1 : 0;</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structrequests_html"><div class="ttname"><a href="../../d2/d7b/structrequests.html">requests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00344">pbx_dundi.c:344</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__request_html_ad20c7b361882199df8e25408dfa8d426"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">dundi_request::list</a></div><div class="ttdeci">struct dundi_request::@441 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24d4d24945a872b73c09860610561aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24d4d24945a872b73c09860610561aa6">&#9670;&nbsp;</a></span>complete_peer_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* complete_peer_helper </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rpos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02417">2417</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;{</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <span class="keywordtype">int</span> which=0, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;   <span class="keywordtype">char</span> *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   <span class="keywordflow">if</span> (pos != rpos)</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, p, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *s = <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, s, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) &amp;&amp; ++which &gt; <a class="code" href="../../d4/d88/structstate.html">state</a>) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;         ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(s);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      }</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d9126a95d6ea8069c84c94dbf166c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d9126a95d6ea8069c84c94dbf166c7f">&#9670;&nbsp;</a></span>create_transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> * create_transaction </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">3137</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">apply_peer()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00215">DUNDI_DEFAULT_RETRANS_TIMER</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">FLAG_SENDFULLKEY</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00173">FLAG_STOREHIST</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">get_trans_id()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">dundi_transaction::retranstimer</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">dundi_peer::sentfullkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00247">dundi_transaction::start</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03642">append_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">do_register()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">find_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">str2tech()</a>.</p>
<div class="fragment"><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;{</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   <span class="keywordtype">int</span> tid;</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   <span class="comment">/* Don&#39;t allow creation of transactions to non-registered peers */</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;   <span class="keywordflow">if</span> (p &amp;&amp; <a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;   }</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;   tid = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4b3f381e618f8d0be9a452878057b0f9">get_trans_id</a>();</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;   <span class="keywordflow">if</span> (tid &lt; 1)</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;   <span class="keywordflow">if</span> (!(trans = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*trans))))</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a>) {</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad80305b5e16da9c2675d5f057bd69386">start</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a>);</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;   }</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a> = <a class="code" href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a>;</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = -1;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0936612302fea7b97f58c4f196e9b45c">apply_peer</a>(trans, p);</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">sentfullkey</a>)</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a>);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;   }</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a> = tid;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d8/d4c/structalltrans.html">alltrans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">all</a>);</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;   <span class="keywordflow">return</span> trans;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;}</div><div class="ttc" id="structalltrans_html"><div class="ttname"><a href="../../d8/d4c/structalltrans.html">alltrans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00345">pbx_dundi.c:345</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0936612302fea7b97f58c4f196e9b45c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0936612302fea7b97f58c4f196e9b45c">apply_peer</a></div><div class="ttdeci">static void apply_peer(struct dundi_transaction *trans, struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">pbx_dundi.c:1295</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7d77356f8ec16caf97d548fef13899bd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a></div><div class="ttdeci">struct dundi_transaction::@439 all</div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">pbx_dundi.c:172</a></div></div>
<div class="ttc" id="dundi_8h_html_ab600dadd9dafb433d43cca1b2071b4da"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab600dadd9dafb433d43cca1b2071b4da">DUNDI_DEFAULT_RETRANS_TIMER</a></div><div class="ttdeci">#define DUNDI_DEFAULT_RETRANS_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00215">dundi.h:215</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ae08aaf3c8a51c3850a2d4e610f269496"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">dundi_transaction::retranstimer</a></div><div class="ttdeci">int retranstimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">pbx_dundi.c:257</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a65cd854e2d184b5038e9cbdec5feaee5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a></div><div class="ttdeci">static int global_storehistory</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00200">pbx_dundi.c:200</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4b3f381e618f8d0be9a452878057b0f9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4b3f381e618f8d0be9a452878057b0f9">get_trans_id</a></div><div class="ttdeci">static int get_trans_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">pbx_dundi.c:480</a></div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad80305b5e16da9c2675d5f057bd69386">dundi_transaction::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00247">pbx_dundi.c:247</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00173">pbx_dundi.c:173</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab7f3bafd1912096a0cc348aada3f30b8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">dundi_peer::sentfullkey</a></div><div class="ttdeci">int sentfullkey</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">pbx_dundi.c:314</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a17b6a1b2b1103c0dd0433f7c50243a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b6a1b2b1103c0dd0433f7c50243a75">&#9670;&nbsp;</a></span>decrypt_memcpy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int decrypt_memcpy </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/da0/crypto_8h.html#a984a90be34ec965266cafda936f79306">ast_aes_decrypt_key</a> *&#160;</td>
          <td class="paramname"><em>dcx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01389">1389</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00481">ast_aes_decrypt()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01406">dundi_decrypt()</a>.</p>
<div class="fragment"><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;{</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> lastblock[16];</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   memcpy(lastblock, iv, <span class="keyword">sizeof</span>(lastblock));</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keywordflow">while</span>(<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &gt; 0) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <a class="code" href="../../d7/dbb/res__crypto_8c.html#a77c916837fa6e975c53fda84b259d483">ast_aes_decrypt</a>(src, dst, <a class="code" href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dcx</a>);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;16;x++)</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;         dst[x] ^= lastblock[x];</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      memcpy(lastblock, src, <span class="keyword">sizeof</span>(lastblock));</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      dst += 16;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      src += 16;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= 16;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;}</div><div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ab0073ccb3c8600726f37b28438094bd8"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dundi_transaction::dcx</a></div><div class="ttdeci">ast_aes_decrypt_key dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">pbx_dundi.c:253</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a77c916837fa6e975c53fda84b259d483"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a77c916837fa6e975c53fda84b259d483">ast_aes_decrypt</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_aes_decrypt(const unsigned char *in, unsigned char *out, const ast_aes_decrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00481">res_crypto.c:481</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5f3da6b901e2d721994302f61cf0a3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5f3da6b901e2d721994302f61cf0a3f">&#9670;&nbsp;</a></span>deep_copy_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void deep_copy_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer_dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01545">1545</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">permission::allow</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">dundi_peer::lookups</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">permission::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">dundi_peer::qualifyid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">dundi_peer::qualtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">dundi_peer::registerid</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">dundi_peer::regtrans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;{</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d4c/structpermission.html">permission</a> *cur, *perm;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   *peer_dst = *peer_src;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(peer_dst, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="comment">/* Scheduled items cannot go with the copy */</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a> = -1;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a> = -1;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a> = -1;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="comment">/* Transactions and lookup history cannot go with the copy either */</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   memset(&amp;peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>, 0, <span class="keyword">sizeof</span>(peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>));</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   memset(&amp;peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, 0, <span class="keyword">sizeof</span>(peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>));</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   memset(&amp;peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, 0, <span class="keyword">sizeof</span>(peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>));</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;peer_src-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, cur, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>) {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="keywordflow">if</span> (!(perm = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*perm) + strlen(cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>) + 1)))</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a> = cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      strcpy(perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, perm, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;peer_src-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, cur, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>) {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordflow">if</span> (!(perm = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*perm) + strlen(cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>) + 1)))</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a> = cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a>;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      strcpy(perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, cur-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;peer_dst-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, perm, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   }</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a24b27f8cc02328781fef5fea81b9975b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">dundi_peer::lookups</a></div><div class="ttdeci">char * lookups[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">pbx_dundi.c:327</a></div></div>
<div class="ttc" id="structdundi__peer_html_a68e949e531b8bd22174267db35f3cf77"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">dundi_peer::qualifyid</a></div><div class="ttdeci">int qualifyid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">pbx_dundi.c:313</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structpermission_html"><div class="ttname"><a href="../../d4/d4c/structpermission.html">permission</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00215">pbx_dundi.c:215</a></div></div>
<div class="ttc" id="structdundi__peer_html_ae2293fc2bce6e3ab03af5890486537c5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">dundi_peer::registerid</a></div><div class="ttdeci">int registerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">pbx_dundi.c:312</a></div></div>
<div class="ttc" id="structpermission_html_a02d58d2ab612ca353b4d94409ce9e6a7"><div class="ttname"><a href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">permission::allow</a></div><div class="ttdeci">int allow</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">pbx_dundi.c:217</a></div></div>
<div class="ttc" id="structdundi__peer_html_ada747500a9732b123266b7c51804dea2"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">dundi_peer::qualtrans</a></div><div class="ttdeci">struct dundi_transaction * qualtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">pbx_dundi.c:330</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="structpermission_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">permission::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">pbx_dundi.c:218</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="structdundi__peer_html_a6fcb0c9ece4c4ecb595ef445c52ae32c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">dundi_peer::regtrans</a></div><div class="ttdeci">struct dundi_transaction * regtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">pbx_dundi.c:329</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1d2e8fa6488a8a1f12e868a1f884358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1d2e8fa6488a8a1f12e868a1f884358">&#9670;&nbsp;</a></span>destroy_map()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04406">4406</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">dundi_mapping::weightstr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">prune_mappings()</a>.</p>
<div class="fragment"><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;{</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">weightstr</a>);</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(map);</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a3bddf67ed9144cd4492f525bb1612816"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">dundi_mapping::weightstr</a></div><div class="ttdeci">char * weightstr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">pbx_dundi.c:295</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9010fb39f17f5b9d0cdeb170d5132d5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9010fb39f17f5b9d0cdeb170d5132d5f">&#9670;&nbsp;</a></span>destroy_packet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_packet </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *&#160;</td>
          <td class="paramname"><em>pack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>needfree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03194">3194</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">dundi_packet::parent</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">dundi_packet::retransid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02021">ack_trans()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;{</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;   <span class="keywordflow">if</span> (pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>)</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">packets</a>, pack, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">retransid</a>);</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <span class="keywordflow">if</span> (needfree)</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pack);</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;}</div><div class="ttc" id="structdundi__packet_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">dundi_packet::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">pbx_dundi.c:226</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a133182c480ff961451c2c0b685fc7087"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a></div><div class="ttdeci">struct dundi_transaction::packetlist packets</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__packet_html_af5c22cc070f71937b86673f98977068f"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">dundi_packet::parent</a></div><div class="ttdeci">struct dundi_transaction * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">pbx_dundi.c:225</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76fa6796f1a6982002500d235ece540a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fa6796f1a6982002500d235ece540a">&#9670;&nbsp;</a></span>destroy_packets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_packets </td>
          <td>(</td>
          <td class="paramtype">struct packetlist *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">2010</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">dundi_packet::retransid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02021">ack_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;{</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;   <span class="keywordflow">while</span> ((pack = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(p, <a class="code" href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">list</a>))) {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">retransid</a>);</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pack);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;}</div><div class="ttc" id="structdundi__packet_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">dundi_packet::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">pbx_dundi.c:226</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__packet_html"><div class="ttname"><a href="../../db/de6/structdundi__packet.html">dundi_packet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00221">pbx_dundi.c:221</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structdundi__packet_html_ae3365da6bcb5072291e8e85574d3c247"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">dundi_packet::list</a></div><div class="ttdeci">struct dundi_packet::@436 list</div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5784fc1b23431641c74479040de46b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5784fc1b23431641c74479040de46b6">&#9670;&nbsp;</a></span>destroy_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04382">4382</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04374">destroy_permissions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">dundi_peer::lookups</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">dundi_peer::qualifyid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">dundi_peer::qualtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">dundi_peer::registerid</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">dundi_peer::regtrans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">prune_peers()</a>.</p>
<div class="fragment"><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;{</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a>);</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a>);</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>) {</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>, 0);</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;   }</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a>);</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>) {</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>, 0);</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;   }</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>);</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>);</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;   <span class="comment">/* Release lookup history */</span></div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;   <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>); ++idx) {</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[idx]);</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;   }</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(peer);</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structdundi__peer_html_a24b27f8cc02328781fef5fea81b9975b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">dundi_peer::lookups</a></div><div class="ttdeci">char * lookups[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">pbx_dundi.c:327</a></div></div>
<div class="ttc" id="structdundi__peer_html_a68e949e531b8bd22174267db35f3cf77"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">dundi_peer::qualifyid</a></div><div class="ttdeci">int qualifyid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">pbx_dundi.c:313</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a9863fab76a579a6b38c5c6327fc9671c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a9863fab76a579a6b38c5c6327fc9671c">destroy_permissions</a></div><div class="ttdeci">static void destroy_permissions(struct permissionlist *permlist)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04374">pbx_dundi.c:4374</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__peer_html_ae2293fc2bce6e3ab03af5890486537c5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">dundi_peer::registerid</a></div><div class="ttdeci">int registerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">pbx_dundi.c:312</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structdundi__peer_html_ada747500a9732b123266b7c51804dea2"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">dundi_peer::qualtrans</a></div><div class="ttdeci">struct dundi_transaction * qualtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">pbx_dundi.c:330</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="structdundi__peer_html_a6fcb0c9ece4c4ecb595ef445c52ae32c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">dundi_peer::regtrans</a></div><div class="ttdeci">struct dundi_transaction * regtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">pbx_dundi.c:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9863fab76a579a6b38c5c6327fc9671c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9863fab76a579a6b38c5c6327fc9671c">&#9670;&nbsp;</a></span>destroy_permissions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_permissions </td>
          <td>(</td>
          <td class="paramtype">struct permissionlist *&#160;</td>
          <td class="paramname"><em>permlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04374">4374</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04382">destroy_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;{</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d4c/structpermission.html">permission</a> *perm;</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;   <span class="keywordflow">while</span> ((perm = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(permlist, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>)))</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(perm);</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;}</div><div class="ttc" id="structpermission_html"><div class="ttname"><a href="../../d4/d4c/structpermission.html">permission</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00215">pbx_dundi.c:215</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08ddb632952df9d4709c18d8a3568b4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08ddb632952df9d4709c18d8a3568b4b">&#9670;&nbsp;</a></span>destroy_trans()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_trans </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fromtimeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">3203</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">dundi_peer::avgms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">destroy_packets()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">DUNDI_TIMING_HISTORY</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">FLAG_DEAD</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">FLAG_ISQUAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00167">FLAG_ISREG</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00173">FLAG_STOREHIST</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">dundi_transaction::lasttrans</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">dundi_peer::lookups</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">dundi_peer::lookuptimes</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">dundi_request::pfds</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">dundi_peer::qualtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00337">dundi_peer::qualtx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">dundi_peer::regtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00247">dundi_transaction::start</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03688">abort_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04382">destroy_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">do_autokill()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">do_register()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03285">dundi_rexmit()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03536">precache_transactions()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;{</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;   <span class="keywordtype">int</span> cnt;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a> | <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a> | <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a>)) {</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;         <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a> == trans)</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;         <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a> == trans) {</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <span class="keywordflow">if</span> (fromtimeout) {</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;               <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt; -1)</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; has become UNREACHABLE!\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;               peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> = -1;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;               ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a56cc9e14d07ec3251c8331e0607e524a">qualtx</a>);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;               <span class="keywordflow">if</span> (ms &lt; 1)</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                  ms = 1;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;               <span class="keywordflow">if</span> (ms &lt; peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) {</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                  <span class="keywordflow">if</span> ((peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt;= peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) || (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &lt; 0))</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; has become REACHABLE!\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &lt; peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) {</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Peer &#39;%s&#39; has become TOO LAGGED (%d ms)\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), ms);</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;               }</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;               peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> = ms;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            }</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;         }</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a>)) {</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>)) {</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>)) {</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;                  peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a> = 0;</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;                  cnt = 0;</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a> - 1]);</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;                  <span class="keywordflow">for</span> (x=<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a>-1;x&gt;0;x--) {</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;                     peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[x] = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[x-1];</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;                     peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x] = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x-1];</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;                     <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x]) {</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;                        peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a> += peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[x];</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;                        cnt++;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;                     }</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;                  }</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;                  peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[0] = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad80305b5e16da9c2675d5f057bd69386">start</a>);</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;                  peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[0] = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(strlen(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>) + strlen(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>) + 2);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;                  <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[0]) {</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;                     sprintf(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[0], <span class="stringliteral">&quot;%s@%s&quot;</span>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;                     peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a> += peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[0];</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                     cnt++;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                  }</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                  <span class="keywordflow">if</span> (cnt)</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;                     peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a> /= cnt;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;               }</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;            }</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;         }</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;      }</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;   }</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;   <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>) {</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      <span class="comment">/* Unlink from parent if appropriate */</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, parentlist);</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>)) {</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;         <span class="comment">/* Wake up sleeper */</span></div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;         <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a63a3dedd0c7c296663f0588dd0b6ed41">pfds</a>[1] &gt; -1) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            <span class="keywordflow">if</span> (write(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a63a3dedd0c7c296663f0588dd0b6ed41">pfds</a>[1], <span class="stringliteral">&quot;killa!&quot;</span>, 6) &lt; 0) {</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;            }</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;         }</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      }</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;   }</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;   <span class="comment">/* Unlink from all trans */</span></div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d8/d4c/structalltrans.html">alltrans</a>, trans, all);</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">packets</a>);</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>);</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a>);</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;   <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a>) {</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      <span class="comment">/* If used by a thread, mark as dead and be done */</span></div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>);</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(trans);</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;}</div><div class="ttc" id="structalltrans_html"><div class="ttname"><a href="../../d8/d4c/structalltrans.html">alltrans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00345">pbx_dundi.c:345</a></div></div>
<div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="structdundi__request_html_a63a3dedd0c7c296663f0588dd0b6ed41"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a63a3dedd0c7c296663f0588dd0b6ed41">dundi_request::pfds</a></div><div class="ttdeci">int pfds[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">pbx_dundi.c:285</a></div></div>
<div class="ttc" id="structdundi__peer_html_a24b27f8cc02328781fef5fea81b9975b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">dundi_peer::lookups</a></div><div class="ttdeci">char * lookups[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">pbx_dundi.c:327</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae4e2b63230359081bce0ba36029de761"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a></div><div class="ttdeci">#define DUNDI_TIMING_HISTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">pbx_dundi.c:164</a></div></div>
<div class="ttc" id="structdundi__peer_html_acefbffbf7aea5d745d118d4c6b2502a9"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">dundi_peer::avgms</a></div><div class="ttdeci">int avgms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">pbx_dundi.c:328</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">pbx_dundi.c:170</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0128fd3a4a9af8307c0f49da95624a6f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">dundi_peer::lookuptimes</a></div><div class="ttdeci">int lookuptimes[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">pbx_dundi.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a718c14c132b44fde9c0d73d2bed31ed1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">dundi_transaction::lasttrans</a></div><div class="ttdeci">struct packetlist lasttrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">pbx_dundi.c:267</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__peer_html_a56cc9e14d07ec3251c8331e0607e524a"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a56cc9e14d07ec3251c8331e0607e524a">dundi_peer::qualtx</a></div><div class="ttdeci">struct timeval qualtx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00337">pbx_dundi.c:337</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a133182c480ff961451c2c0b685fc7087"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a></div><div class="ttdeci">struct dundi_transaction::packetlist packets</div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="structdundi__peer_html_ada747500a9732b123266b7c51804dea2"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">dundi_peer::qualtrans</a></div><div class="ttdeci">struct dundi_transaction * qualtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">pbx_dundi.c:330</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="pbx__dundi_8c_html_a76fa6796f1a6982002500d235ece540a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a></div><div class="ttdeci">static void destroy_packets(struct packetlist *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">pbx_dundi.c:2010</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00167">pbx_dundi.c:167</a></div></div>
<div class="ttc" id="structdundi__peer_html_a6fcb0c9ece4c4ecb595ef445c52ae32c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">dundi_peer::regtrans</a></div><div class="ttdeci">struct dundi_transaction * regtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">pbx_dundi.c:329</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad80305b5e16da9c2675d5f057bd69386">dundi_transaction::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00247">pbx_dundi.c:247</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67abca39839b0b2276ed1c805ff8a404686">FLAG_STOREHIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00173">pbx_dundi.c:173</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb2da8421495180754f411b87157d2f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2da8421495180754f411b87157d2f7">&#9670;&nbsp;</a></span>discover_transactions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int discover_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03525">3525</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">dundi_discover()</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;{</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>) {</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7f50c496d5246d3faad318e018b59d7a">dundi_discover</a>(trans);</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   }</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a625c7bfebdd52adeaefbf97884ebf3f9"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a></div><div class="ttdeci">struct dundi_transaction::@438 parentlist</div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7f50c496d5246d3faad318e018b59d7a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7f50c496d5246d3faad318e018b59d7a">dundi_discover</a></div><div class="ttdeci">static int dundi_discover(struct dundi_transaction *trans)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">pbx_dundi.c:3413</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab29df082de39c3bc9a3d3c82dd6922b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab29df082de39c3bc9a3d3c82dd6922b9">&#9670;&nbsp;</a></span>do_autokill()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_autokill </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">3380</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">dundi_discover()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03503">dundi_query()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>.</p>
<div class="fragment"><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;{</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans = (<span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *)data;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Transaction to &#39;%s&#39; took too long to ACK, destroying\n&quot;</span>,</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>));</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = -1;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0); <span class="comment">/* We could actually set it to 1 instead of 0, but we won&#39;t ;-) */</span></div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae29ee8c2bd61bae78598415312d8784e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29ee8c2bd61bae78598415312d8784e">&#9670;&nbsp;</a></span>do_qualify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_qualify </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04557">4557</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">dundi_peer::qualifyid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;{</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer = (<span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *)data;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a> = -1;</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a>(peer, 0);</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a68e949e531b8bd22174267db35f3cf77"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">dundi_peer::qualifyid</a></div><div class="ttdeci">int qualifyid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">pbx_dundi.c:313</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa4ffb3a85b70d6a69590f5059817d536"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a></div><div class="ttdeci">static void qualify_peer(struct dundi_peer *peer, int schedonly)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">pbx_dundi.c:4565</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedb77784b2a1af6c9640ea7138b2c8b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedb77784b2a1af6c9640ea7138b2c8b3">&#9670;&nbsp;</a></span>do_register()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_register </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">4531</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00169">DUNDI_COMMAND_REGREQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00217">DUNDI_DEFAULT_VERSION</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00189">DUNDI_IE_EXPIRATION</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00188">DUNDI_IE_VERSION</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00167">FLAG_ISREG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">dundi_peer::registerid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">dundi_peer::regtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">dundi_peer::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;{</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer = (<span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *)data;</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;   <span class="keywordtype">char</span> eid_str2[20];</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Register us as &#39;%s&#39; to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>), <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str2, <span class="keyword">sizeof</span>(eid_str2), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a> * 1000, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aedb77784b2a1af6c9640ea7138b2c8b3">do_register</a>, data);</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;   <span class="comment">/* Destroy old transaction if there is one */</span></div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>)</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>, 0);</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a>(peer);</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>) {</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a>);</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a>);</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a>);</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">regtrans</a>, <a class="code" href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a>, 0, 0, &amp;ied);</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to create new transaction for registering to &#39;%s&#39;!\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;}</div><div class="ttc" id="dundi_8h_html_a602807c627c7a3183f382e729869ef5c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a></div><div class="ttdeci">#define DUNDI_IE_EXPIRATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00189">dundi.h:189</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="dundi_8h_html_a12409dca54cd3a398637eaf5f0b23763"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a></div><div class="ttdeci">#define DUNDI_IE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00188">dundi.h:188</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aedb77784b2a1af6c9640ea7138b2c8b3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aedb77784b2a1af6c9640ea7138b2c8b3">do_register</a></div><div class="ttdeci">static int do_register(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">pbx_dundi.c:4531</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="structdundi__peer_html_ae2293fc2bce6e3ab03af5890486537c5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">dundi_peer::registerid</a></div><div class="ttdeci">int registerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">pbx_dundi.c:312</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0d9126a95d6ea8069c84c94dbf166c7f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a></div><div class="ttdeci">static struct dundi_transaction * create_transaction(struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">pbx_dundi.c:3137</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="structdundi__peer_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">dundi_peer::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">pbx_dundi.c:308</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab25de026ecefe8c1afecdb329e37c195"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a></div><div class="ttdeci">static int default_expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00199">pbx_dundi.c:199</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="dundi_8h_html_a1c04d916688aa7257c4c0feca589b17d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a></div><div class="ttdeci">#define DUNDI_DEFAULT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00217">dundi.h:217</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="dundi_8h_html_af7dc06e9af2fe3294797d3ab2164bd2d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00169">dundi.h:169</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a53ff152a29d765faeb4da0e8b5690b78">FLAG_ISREG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00167">pbx_dundi.c:167</a></div></div>
<div class="ttc" id="structdundi__peer_html_a6fcb0c9ece4c4ecb595ef445c52ae32c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a6fcb0c9ece4c4ecb595ef445c52ae32c">dundi_peer::regtrans</a></div><div class="ttdeci">struct dundi_transaction * regtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00329">pbx_dundi.c:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46c4e2ca9ea70a4a84393ac806a5557a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c4e2ca9ea70a4a84393ac806a5557a">&#9670;&nbsp;</a></span>do_register_expire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_register_expire </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>Called with the peers list already locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">1321</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi_eid_to_str_short()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">populate_addr()</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer = (<span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *)data;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Register expired for &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<span class="stringliteral">&quot;dundi/dpeers&quot;</span>, <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a> = -1;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> = 0;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a5026ff3406256404f18b669e48b5b828"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a></div><div class="ttdeci">char * dundi_eid_to_str_short(char *s, int maxlen, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi-parser.c:54</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2ca171329072b85f0d18b0df8f1d6e08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ca171329072b85f0d18b0df8f1d6e08">&#9670;&nbsp;</a></span>drds_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void drds_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a> *&#160;</td>
          <td class="paramname"><em>drds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04199">4199</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04204">drds_destroy_cb()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;{</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(drds);</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af52df0c5cde9fae01690487be5f66095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af52df0c5cde9fae01690487be5f66095">&#9670;&nbsp;</a></span>drds_destroy_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void drds_destroy_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04204">4204</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04199">drds_destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;{</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a> *drds = data;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2ca171329072b85f0d18b0df8f1d6e08">drds_destroy</a>(drds);</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;}</div><div class="ttc" id="structdundi__result__datastore_html"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04193">pbx_dundi.c:4193</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2ca171329072b85f0d18b0df8f1d6e08"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2ca171329072b85f0d18b0df8f1d6e08">drds_destroy</a></div><div class="ttdeci">static void drds_destroy(struct dundi_result_datastore *drds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04199">pbx_dundi.c:4199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a726e2d64adb9bcbe86e8ecbb2225a456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726e2d64adb9bcbe86e8ecbb2225a456">&#9670;&nbsp;</a></span>dundi_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>final</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">451</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d59/dundi_8h_source.html#l00159">DUNDI_COMMAND_ACK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a>, 0, <span class="keyword">final</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dundi_8h_html_ac85ab82e2cf4b695997763bedbfa6c84"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a></div><div class="ttdeci">#define DUNDI_COMMAND_ACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00159">dundi.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6ca3f873e1d96ac438ed4bb525f4d7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6ca3f873e1d96ac438ed4bb525f4d7c">&#9670;&nbsp;</a></span>dundi_answer_entity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_answer_entity </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *&#160;</td>
          <td class="paramname"><em>ies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ccontext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">809</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi_ies::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00119">DUNDI_CAUSE_GENERAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00163">DUNDI_COMMAND_EIDRESPONSE</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi_ie_append_cause()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00191">DUNDI_IE_CAUSE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi_ies::eidcount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi_ies::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">dundi_query_state::fluffy</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00024">dundi_ies::reqeid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00546">dundi_query_state::reqeid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi_ies::ttl</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;{</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="keywordtype">int</span> totallen;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordtype">int</span> skipfirst=0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   pthread_t lookupthread;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> &gt; 1) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">/* Since it is a requirement that the first EID is the authenticating host</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">         and the last EID is the root, it is permissible that the first and last EID</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">         could be the same.  In that case, we should go ahead copy only the &quot;root&quot; section</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">         since we will not need it for authentication. */</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0], ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - 1]))</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;         skipfirst = 1;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   totallen = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a>);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   totallen += (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - skipfirst) * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   st = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, totallen);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">if</span> (st) {</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>));</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      memcpy(&amp;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">reqeid</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a239d208c024dd8082e3853ab8e2f7e0a">reqeid</a>, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">reqeid</a>));</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a> = <a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> - 1;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">if</span> (st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &lt; 0)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = 0;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      s = st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">fluffy</a>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">for</span> (x=skipfirst;ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];x++) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = (<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *)s;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;         *st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = *ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         s += <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Answering EID query for &#39;%s@%s&#39;!\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a239d208c024dd8082e3853ab8e2f7e0a">reqeid</a>), ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 1;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;lookupthread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a861e22a5f9e4db07bc275f7084017794">dundi_query_thread</a>, st)) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied = { 0, };</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create thread!\n&quot;</span>);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of threads&quot;</span>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied = { 0, };</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div><div class="ttc" id="structdundi__ies_html_a239d208c024dd8082e3853ab8e2f7e0a"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a239d208c024dd8082e3853ab8e2f7e0a">dundi_ies::reqeid</a></div><div class="ttdeci">dundi_eid * reqeid</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00024">dundi-parser.h:24</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="dundi_8h_html_a35971173ccd732aad75d4560bd4d4539"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a></div><div class="ttdeci">struct ast_eid dundi_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00032">dundi.h:32</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="dundi_8h_html_a69a524e98fd92f87d531f634c6c60ec0"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a></div><div class="ttdeci">#define DUNDI_IE_CAUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00191">dundi.h:191</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a62a02b1a6ca3a850e42a9d403afe72e0"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">dundi_query_state::reqeid</a></div><div class="ttdeci">dundi_eid reqeid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00546">pbx_dundi.c:546</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__ies_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_ies::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi-parser.h:22</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a33eed3b6e960e1a191d5a4f5a0fc8e42"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">dundi_query_state::fluffy</a></div><div class="ttdeci">char fluffy[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">pbx_dundi.c:556</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__ies_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_ies::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi-parser.h:25</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a96c148453f4cb387cfa116ff79477183"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a></div><div class="ttdeci">int dundi_ie_append_cause(struct dundi_ie_data *ied, unsigned char ie, unsigned char cause, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi-parser.c:499</a></div></div>
<div class="ttc" id="structdundi__ies_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_ies::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi-parser.h:31</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00119">dundi.h:119</a></div></div>
<div class="ttc" id="structdundi__ies_html_a3da3c62d7c7467fda1c782c92a44987c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">dundi_ies::called_context</a></div><div class="ttdeci">char * called_context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi-parser.h:26</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a861e22a5f9e4db07bc275f7084017794"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a861e22a5f9e4db07bc275f7084017794">dundi_query_thread</a></div><div class="ttdeci">static void * dundi_query_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">pbx_dundi.c:754</a></div></div>
<div class="ttc" id="dundi_8h_html_ab763d07b3bd3339cbc50deb535e73462"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00163">dundi.h:163</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a8f2863e7bbb20d19a0aff9cb38530f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a8f2863e7bbb20d19a0aff9cb38530f">&#9670;&nbsp;</a></span>dundi_answer_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_answer_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *&#160;</td>
          <td class="paramname"><em>ies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ccontext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">1087</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi_ies::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi_ies::called_number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">dundi_query_state::called_number</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00051">dundi_ies::cbypass</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">dundi_mapping::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">dundi_query_state::directs</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00119">DUNDI_CAUSE_GENERAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00161">DUNDI_COMMAND_DPRESPONSE</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi_ie_append_cause()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00191">DUNDI_IE_CAUSE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00023">dundi_ies::eid_direct</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi_ies::eidcount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi_ies::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">dundi_query_state::fluffy</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">dundi_query_state::maps</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00300">dundi_mapping::next</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">dundi_query_state::nocache</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">dundi_query_state::nummaps</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi_ies::ttl</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="keywordtype">int</span> totallen;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *cur;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordtype">int</span> mapcount = 0;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordtype">int</span> skipfirst = 0;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   pthread_t lookupthread;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   totallen = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a>);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="comment">/* Count matching map entries */</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, list) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, ccontext))</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         mapcount++;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="comment">/* If no maps, return -1 immediately */</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">if</span> (!mapcount)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> &gt; 1) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="comment">/* Since it is a requirement that the first EID is the authenticating host</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">         and the last EID is the root, it is permissible that the first and last EID</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">         could be the same.  In that case, we should go ahead copy only the &quot;root&quot; section</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">         since we will not need it for authentication. */</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0], ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - 1]))</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;         skipfirst = 1;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   totallen += mapcount * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   totallen += (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - skipfirst) * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   st = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, totallen);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <span class="keywordflow">if</span> (st) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>));</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>));</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a> = trans;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> - 1;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">nocache</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7d4799a6daae3d26e2089d55c67bc714">cbypass</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="keywordflow">if</span> (st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &lt; 0)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = 0;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      s = st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">fluffy</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">for</span> (x=skipfirst;ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];x++) {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = (<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *)s;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         *st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = *ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">directs</a>[x-skipfirst] = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a4ee946ec6e6f8c026ef1bf0589a8759c">eid_direct</a>[x];</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         s += <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      }</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="comment">/* Append mappings */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      x = 0;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a> = (<span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *)s;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, ccontext)) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <span class="keywordflow">if</span> (x &lt; mapcount) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;               st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a>[x] = *cur;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;               st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a>[x].<a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>.<a class="code" href="../../df/d5b/structdundi__mapping.html#af3a4cf14210da3b3cda911b4c6d8cfd6">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;               x++;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;         }</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">nummaps</a> = mapcount;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Answering query for &#39;%s@%s&#39;!\n&quot;</span>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 1;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;lookupthread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afdfa5326fdccb66cf4a70b740874f7d0">dundi_lookup_thread</a>, st)) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create thread!\n&quot;</span>);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;         memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of threads&quot;</span>);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of memory!\n&quot;</span>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dundi_mapping::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">pbx_dundi.c:292</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a4ebf3a8b5dae96ce75362607fe001c82"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">dundi_query_state::called_number</a></div><div class="ttdeci">char called_number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">pbx_dundi.c:548</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="dundi_8h_html_a35971173ccd732aad75d4560bd4d4539"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a></div><div class="ttdeci">struct ast_eid dundi_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00032">dundi.h:32</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afdfa5326fdccb66cf4a70b740874f7d0"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afdfa5326fdccb66cf4a70b740874f7d0">dundi_lookup_thread</a></div><div class="ttdeci">static void * dundi_lookup_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">pbx_dundi.c:657</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a17bb3445f4dccbce032430ca91fbb6d2"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">dundi_query_state::maps</a></div><div class="ttdeci">struct dundi_mapping * maps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">pbx_dundi.c:549</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="dundi_8h_html_a69a524e98fd92f87d531f634c6c60ec0"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a></div><div class="ttdeci">#define DUNDI_IE_CAUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00191">dundi.h:191</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__ies_html_a4ee946ec6e6f8c026ef1bf0589a8759c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a4ee946ec6e6f8c026ef1bf0589a8759c">dundi_ies::eid_direct</a></div><div class="ttdeci">int eid_direct[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00023">dundi-parser.h:23</a></div></div>
<div class="ttc" id="structdundi__ies_html_a7fcf5cf7f21e8f71a3e50c431fa18800"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">dundi_ies::called_number</a></div><div class="ttdeci">char * called_number</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi-parser.h:27</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="structdundi__ies_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_ies::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi-parser.h:22</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a33eed3b6e960e1a191d5a4f5a0fc8e42"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">dundi_query_state::fluffy</a></div><div class="ttdeci">char fluffy[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">pbx_dundi.c:556</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af3a4cf14210da3b3cda911b4c6d8cfd6"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af3a4cf14210da3b3cda911b4c6d8cfd6">dundi_mapping::next</a></div><div class="ttdeci">struct dundi_mapping * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00300">pbx_dundi.c:300</a></div></div>
<div class="ttc" id="structdundi__ies_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_ies::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi-parser.h:25</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dundi_8h_html_a859251515ac9cfe1bee7e44a418aa825"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00161">dundi.h:161</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a9da18891df7680fc0b06c65fe138a328"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">dundi_query_state::nummaps</a></div><div class="ttdeci">int nummaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">pbx_dundi.c:550</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a494a54983c26432c53a57ba2589f7d54"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">dundi_query_state::nocache</a></div><div class="ttdeci">int nocache</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">pbx_dundi.c:551</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a96c148453f4cb387cfa116ff79477183"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a></div><div class="ttdeci">int dundi_ie_append_cause(struct dundi_ie_data *ied, unsigned char ie, unsigned char cause, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi-parser.c:499</a></div></div>
<div class="ttc" id="structdundi__ies_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_ies::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi-parser.h:31</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00119">dundi.h:119</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__ies_html_a3da3c62d7c7467fda1c782c92a44987c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">dundi_ies::called_context</a></div><div class="ttdeci">char * called_context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi-parser.h:26</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a1ff7fc424d272cd0fd48240a42236b1c"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">dundi_query_state::directs</a></div><div class="ttdeci">int directs[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">pbx_dundi.c:545</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structdundi__ies_html_a7d4799a6daae3d26e2089d55c67bc714"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a7d4799a6daae3d26e2089d55c67bc714">dundi_ies::cbypass</a></div><div class="ttdeci">int cbypass</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00051">dundi-parser.h:51</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac217220b54b8e7631bc62e90ceb2517d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac217220b54b8e7631bc62e90ceb2517d">&#9670;&nbsp;</a></span>dundi_canmatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_canmatch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04827">4827</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d59/dundi_8h_source.html#l00072">DUNDI_FLAG_CANMATCH</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">dundi_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;{</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a>(chan, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, data, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4">DUNDI_FLAG_CANMATCH</a>);</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4">DUNDI_FLAG_CANMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00072">dundi.h:72</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a8b8154a069fe3f1e17004c53cda97af4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a></div><div class="ttdeci">static int dundi_helper(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *data, int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">pbx_dundi.c:4783</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a59f0851aa813c8eb5112a59e88a61685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f0851aa813c8eb5112a59e88a61685">&#9670;&nbsp;</a></span>dundi_debug_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dundi_debug_output </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00356">356</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02207">ast_verbose()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a>)</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;%s&quot;</span>, data);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac86c4bc31fd8f916f4d988f70fef4d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac86c4bc31fd8f916f4d988f70fef4d73">&#9670;&nbsp;</a></span>dundi_decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>* dundi_decrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>dstlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td>
          <td class="paramname"><em>ohdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structdundi__encblock.html">dundi_encblock</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srclen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01406">1406</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">dundi_transaction::dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01389">decrypt_memcpy()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00099">dundi_encblock::encdata</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00098">dundi_encblock::iv</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;{</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordtype">int</span> space = *dstlen;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bytes;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *h;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *decrypt_space;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   decrypt_space = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(srclen);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17b6a1b2b1103c0dd0433f7c50243a75">decrypt_memcpy</a>(decrypt_space, src-&gt;<a class="code" href="../../db/d17/structdundi__encblock.html#ad9ab7eeac3aa2f817d0a4829c2adc5b5">encdata</a>, srclen, src-&gt;<a class="code" href="../../db/d17/structdundi__encblock.html#ad98f4396bf44e165dc76882a937b7ee8">iv</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dcx</a>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="comment">/* Setup header */</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   h = (<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *)dst;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   *h = *ohdr;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   bytes = space - 6;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">if</span> (uncompress(dst + 6, &amp;bytes, decrypt_space, srclen) != Z_OK) {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ouch, uncompress failed :(\n&quot;</span>);</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="comment">/* Update length */</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   *dstlen = bytes + 6;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="comment">/* Return new header */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">return</span> h;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div><div class="ttc" id="structdundi__encblock_html_ad9ab7eeac3aa2f817d0a4829c2adc5b5"><div class="ttname"><a href="../../db/d17/structdundi__encblock.html#ad9ab7eeac3aa2f817d0a4829c2adc5b5">dundi_encblock::encdata</a></div><div class="ttdeci">unsigned char encdata[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00099">dundi.h:99</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17b6a1b2b1103c0dd0433f7c50243a75"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17b6a1b2b1103c0dd0433f7c50243a75">decrypt_memcpy</a></div><div class="ttdeci">static int decrypt_memcpy(unsigned char *dst, unsigned char *src, int len, unsigned char *iv, ast_aes_decrypt_key *dcx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01389">pbx_dundi.c:1389</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structdundi__encblock_html_ad98f4396bf44e165dc76882a937b7ee8"><div class="ttname"><a href="../../db/d17/structdundi__encblock.html#ad98f4396bf44e165dc76882a937b7ee8">dundi_encblock::iv</a></div><div class="ttdeci">unsigned char iv[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00098">dundi.h:98</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ab0073ccb3c8600726f37b28438094bd8"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dundi_transaction::dcx</a></div><div class="ttdeci">ast_aes_decrypt_key dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">pbx_dundi.c:253</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f50c496d5246d3faad318e018b59d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f50c496d5246d3faad318e018b59d7a">&#9670;&nbsp;</a></span>dundi_discover()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_discover </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">3413</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">dundi_transaction::autokilltimeout</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00284">dundi_request::cbypass</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">do_autokill()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00160">DUNDI_COMMAND_DPDISCOVER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00217">DUNDI_DEFAULT_VERSION</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00620">dundi_ie_append()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03391">dundi_ie_append_eid_appropriately()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi_ie_append_str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00207">DUNDI_IE_CACHEBYPASS</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00183">DUNDI_IE_CALLED_CONTEXT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00184">DUNDI_IE_CALLED_NUMBER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00185">DUNDI_IE_EID_DIRECT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00187">DUNDI_IE_TTL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00188">DUNDI_IE_VERSION</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">dundi_transaction::eidcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">dundi_transaction::eids</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">dundi_transaction::ttl</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03525">discover_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;{</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;   <span class="keywordflow">if</span> (!trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>) {</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Tried to discover a transaction with no parent?!?\n&quot;</span>);</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   }</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a>);</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>))</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8801f866f4216ea9d5bc503a5af8121b">DUNDI_IE_EID_DIRECT</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>;x++)</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a6d6b8bacf4342d7de910150ff8df2f10">dundi_ie_append_eid_appropriately</a>(&amp;ied, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[x], &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a7823972f84701a353dc8d24bc3bc3190">DUNDI_IE_CALLED_NUMBER</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>);</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>);</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;   <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7d4799a6daae3d26e2089d55c67bc714">cbypass</a>)</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2cab5e485345a9cc76fc50c8a2dd09f7">dundi_ie_append</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a1f7543627a8138ef37f0b41818e17c16">DUNDI_IE_CACHEBYPASS</a>);</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>)</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a>, trans);</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a>, 0, 0, &amp;ied);</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;}</div><div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="dundi_8h_html_a8801f866f4216ea9d5bc503a5af8121b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8801f866f4216ea9d5bc503a5af8121b">DUNDI_IE_EID_DIRECT</a></div><div class="ttdeci">#define DUNDI_IE_EID_DIRECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00185">dundi.h:185</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a3dfb0b5875c7ff57d45dfeb31bed78cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">dundi_transaction::autokilltimeout</a></div><div class="ttdeci">int autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">pbx_dundi.c:259</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="dundi_8h_html_a1f7543627a8138ef37f0b41818e17c16"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a1f7543627a8138ef37f0b41818e17c16">DUNDI_IE_CACHEBYPASS</a></div><div class="ttdeci">#define DUNDI_IE_CACHEBYPASS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00207">dundi.h:207</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7382e5e1f259570c8b9ce86ddc49a34b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">dundi_transaction::eids</a></div><div class="ttdeci">dundi_eid eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">pbx_dundi.c:248</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_transaction::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">pbx_dundi.c:255</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a6d6b8bacf4342d7de910150ff8df2f10"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a6d6b8bacf4342d7de910150ff8df2f10">dundi_ie_append_eid_appropriately</a></div><div class="ttdeci">static void dundi_ie_append_eid_appropriately(struct dundi_ie_data *ied, char *context, dundi_eid *eid, dundi_eid *us)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03391">pbx_dundi.c:3391</a></div></div>
<div class="ttc" id="dundi_8h_html_a12409dca54cd3a398637eaf5f0b23763"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a></div><div class="ttdeci">#define DUNDI_IE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00188">dundi.h:188</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_transaction::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">pbx_dundi.c:249</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2cab5e485345a9cc76fc50c8a2dd09f7"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2cab5e485345a9cc76fc50c8a2dd09f7">dundi_ie_append</a></div><div class="ttdeci">int dundi_ie_append(struct dundi_ie_data *ied, unsigned char ie)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00620">dundi-parser.c:620</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab29df082de39c3bc9a3d3c82dd6922b9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a></div><div class="ttdeci">static int do_autokill(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">pbx_dundi.c:3380</a></div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a6bd01a676b7da7389e749536cd324a3d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a></div><div class="ttdeci">int dundi_ie_append_str(struct dundi_ie_data *ied, unsigned char ie, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi-parser.c:605</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="dundi_8h_html_a6889e1b693ec9766d8503f547f8a2a7b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a></div><div class="ttdeci">#define DUNDI_IE_CALLED_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00183">dundi.h:183</a></div></div>
<div class="ttc" id="dundi_8h_html_a1c04d916688aa7257c4c0feca589b17d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a></div><div class="ttdeci">#define DUNDI_DEFAULT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00217">dundi.h:217</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="dundi_8h_html_a7823972f84701a353dc8d24bc3bc3190"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a7823972f84701a353dc8d24bc3bc3190">DUNDI_IE_CALLED_NUMBER</a></div><div class="ttdeci">#define DUNDI_IE_CALLED_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00184">dundi.h:184</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="structdundi__request_html_a7d4799a6daae3d26e2089d55c67bc714"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a7d4799a6daae3d26e2089d55c67bc714">dundi_request::cbypass</a></div><div class="ttdeci">int cbypass</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00284">pbx_dundi.c:284</a></div></div>
<div class="ttc" id="dundi_8h_html_ab0f58d12ffc25b840e51340b6fec5ca1"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPDISCOVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00160">dundi.h:160</a></div></div>
<div class="ttc" id="dundi_8h_html_a5c75c71843182d780e0c539c8fcad9bc"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a></div><div class="ttdeci">#define DUNDI_IE_TTL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00187">dundi.h:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a035ab7013b360a1a93508d5b57cc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a035ab7013b360a1a93508d5b57cc43">&#9670;&nbsp;</a></span>dundi_do_lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_do_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02456">2456</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi_flags2str()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00231">dundi_result::eid_str</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">sort_results()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>
<div class="fragment"><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;{</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   <span class="keywordtype">char</span> fs[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keywordtype">int</span> bypass = 0;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi lookup&quot;</span>;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;         <span class="stringliteral">&quot;Usage: dundi lookup &lt;number&gt;[@context] [bypass]\n&quot;</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;         <span class="stringliteral">&quot;       Lookup the given number within the given DUNDi context\n&quot;</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;         <span class="stringliteral">&quot;(or e164 if none is specified).  Bypasses cache if &#39;bypass&#39;\n&quot;</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;         <span class="stringliteral">&quot;keyword is specified.\n&quot;</span>;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   }</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 3) || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 4)) {</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3) {</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;bypass&quot;</span>)) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;         bypass=1;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      }</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   context = strchr(tmp, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <span class="keywordflow">if</span> (context) {</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      *context = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      context++;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   }</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, tmp, bypass);</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi lookup returned error.\n&quot;</span>);</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi lookup returned no results.\n&quot;</span>);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, res);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;res;x++) {</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%3d. %5d %s/%s (%s)\n&quot;</span>, x + 1, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].weight, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].tech, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].dest, <a class="code" href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a>(fs, <span class="keyword">sizeof</span>(fs), <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].flags));</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;     from %s, expires in %d s\n&quot;</span>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].eid_str, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   }</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi lookup completed in %&quot;</span> PRIi64 <span class="stringliteral">&quot; ms\n&quot;</span>, <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start));</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55cb0bb945cb23bfd62b59095b1799ed"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a></div><div class="ttdeci">int dundi_lookup(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int cbypass)</div><div class="ttdoc">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspec...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">pbx_dundi.c:3926</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a77e5ad29e79bbb7ca62f5b007e14b6af"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a></div><div class="ttdeci">static void sort_results(struct dundi_result *results, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">pbx_dundi.c:2451</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae14237ec6afd0fcccd2de889720984e3"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a></div><div class="ttdeci">char * dundi_flags2str(char *buf, int bufsiz, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi-parser.c:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac018246d513f4c2d8c9aa6aefce9b7fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac018246d513f4c2d8c9aa6aefce9b7fc">&#9670;&nbsp;</a></span>dundi_do_precache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_do_precache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02512">2512</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">dundi_precache()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;{</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi precache&quot;</span>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;         <span class="stringliteral">&quot;Usage: dundi precache &lt;number&gt;[@context]\n&quot;</span></div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;         <span class="stringliteral">&quot;       Lookup the given number within the given DUNDi context\n&quot;</span></div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;         <span class="stringliteral">&quot;(or e164 if none is specified) and precaches the results to any\n&quot;</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;         <span class="stringliteral">&quot;upstream DUNDi push servers.\n&quot;</span>;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 3) || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3)) {</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   }</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   context = strchr(tmp, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   <span class="keywordflow">if</span> (context) {</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;      *context = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      context++;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   }</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2c7021fc5f56a742448d01016e3c37df">dundi_precache</a>(context, tmp);</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi precache returned error.\n&quot;</span>);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi precache returned no error.\n&quot;</span>);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi lookup completed in %&quot;</span> PRIi64 <span class="stringliteral">&quot; ms\n&quot;</span>, <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start));</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2c7021fc5f56a742448d01016e3c37df"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2c7021fc5f56a742448d01016e3c37df">dundi_precache</a></div><div class="ttdeci">int dundi_precache(const char *context, const char *number)</div><div class="ttdoc">Pre-cache to push upstream peers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">pbx_dundi.c:4068</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade0a1971d150ea30a714151289d9be3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade0a1971d150ea30a714151289d9be3d">&#9670;&nbsp;</a></span>dundi_do_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_do_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02550">2550</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02825">ast_str_to_eid()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00237">dundi_entity_info::country</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04121">dundi_query_eid()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00242">dundi_entity_info::email</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00244">dundi_entity_info::ipaddr</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00239">dundi_entity_info::locality</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00240">dundi_entity_info::org</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00241">dundi_entity_info::orgunit</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00243">dundi_entity_info::phone</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00238">dundi_entity_info::stateprov</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;{</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> eid;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> dei;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi query&quot;</span>;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;         <span class="stringliteral">&quot;Usage: dundi query &lt;entity&gt;[@context]\n&quot;</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;         <span class="stringliteral">&quot;       Attempts to retrieve contact information for a specific\n&quot;</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;         <span class="stringliteral">&quot;DUNDi entity identifier (EID) within a given DUNDi context (or\n&quot;</span></div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;         <span class="stringliteral">&quot;e164 if none is specified).\n&quot;</span>;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;   }</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 3) || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3)) {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;   }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a>(&amp;eid, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2])) {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid EID!\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   }</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   context = strchr(tmp, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <span class="keywordflow">if</span> (context) {</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;      *context = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      context++;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;   }</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab7d4d0ea507459ad46545ed807d75477">dundi_query_eid</a>(&amp;dei, context, eid);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Query EID returned error.\n&quot;</span>);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Query EID returned no results.\n&quot;</span>);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   <span class="keywordflow">else</span> {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Query EID succeeded:\n&quot;</span>);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Department:      %s\n&quot;</span>, dei.orgunit);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Organization:    %s\n&quot;</span>, dei.org);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;City/Locality:   %s\n&quot;</span>, dei.locality);</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;State/Province:  %s\n&quot;</span>, dei.stateprov);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Country:         %s\n&quot;</span>, dei.country);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;E-mail:          %s\n&quot;</span>, dei.email);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Phone:           %s\n&quot;</span>, dei.phone);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;IP Address:      %s\n&quot;</span>, dei.ipaddr);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_ab7d4d0ea507459ad46545ed807d75477"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab7d4d0ea507459ad46545ed807d75477">dundi_query_eid</a></div><div class="ttdeci">int dundi_query_eid(struct dundi_entity_info *dei, const char *dcontext, dundi_eid eid)</div><div class="ttdoc">Retrieve information on a specific EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04121">pbx_dundi.c:4121</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="utils_8h_html_ad60a8c795e1f64b7beeed705425c555f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a></div><div class="ttdeci">int ast_str_to_eid(struct ast_eid *eid, const char *s)</div><div class="ttdoc">Convert a string into an EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02825">main/utils.c:2825</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structdundi__entity__info_html"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00236">dundi.h:236</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4317178b7bd2751e99e5fbebe8ec0827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4317178b7bd2751e99e5fbebe8ec0827">&#9670;&nbsp;</a></span>dundi_encrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_encrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *&#160;</td>
          <td class="paramname"><em>pack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">1428</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00056">dundi_ie_data::buf</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">build_iv()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00040">dundi_hdr::cmdflags</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">dundi_packet::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">dundi_packet::datalen</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">dundi_transaction::dcx</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00172">DUNDI_COMMAND_ENCRYPT</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00539">dundi_ie_append_encdata()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00591">dundi_ie_append_int()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00484">dundi_ie_append_raw()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00193">DUNDI_IE_ENCDATA</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00196">DUNDI_IE_KEYCRC32</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00194">DUNDI_IE_SHAREDKEY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00195">DUNDI_IE_SIGNATURE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00252">dundi_transaction::ecx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01373">encrypt_memcpy()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">FLAG_SENDFULLKEY</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">dundi_packet::h</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00041">dundi_hdr::ies</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00037">dundi_hdr::iseqno</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00055">dundi_ie_data::pos</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">dundi_peer::sentfullkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">dundi_peer::txenckey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">update_key()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00320">dundi_peer::us_dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00319">dundi_peer::us_ecx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00318">dundi_peer::us_keycrc32</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;{</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *compress_space;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bytes;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> iv[16];</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   len = pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> + pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> / 100 + 42;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   compress_space = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   memset(compress_space, 0, len);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="comment">/* We care about everthing save the first 6 bytes of header */</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   bytes = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   res = compress(compress_space, &amp;bytes, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a> + 6, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - 6);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   <span class="keywordflow">if</span> (res != Z_OK) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ouch, compression failed!\n&quot;</span>);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <span class="comment">/* Say who we are */</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   <span class="keywordflow">if</span> (!pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a> &amp;&amp; !pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>) {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="comment">/* Need the key in the first copy */</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="keywordflow">if</span> (!(peer = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>)))</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac2fee1dc6f3beaf6e86a3399a955ac5d">update_key</a>(peer))</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      <span class="keywordflow">if</span> (!peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">sentfullkey</a>)</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a>);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="comment">/* Append key data */</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a>)) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8bc30c0748d02d6260317440381dcf81">DUNDI_IE_SHAREDKEY</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a>, 128);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5fa3e04f0ea13bd3d2fb421f9b011a33">DUNDI_IE_SIGNATURE</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a> + 128, 128);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a00d7cc9eded552060ee916eb32f7b5de">dundi_ie_append_int</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#abdfc63ed231d754e8b913fcb58ac9a6d">DUNDI_IE_KEYCRC32</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a539f54e572069eed68708af02c5536d7">us_keycrc32</a>);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      }</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="comment">/* Setup contexts */</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae119b8bbe294cad12c32cd093eb81e4c">ecx</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a589109875bf2955476cd7a15dc9651ba">us_ecx</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dcx</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afcd60593ac1d49200526919d9e1e5b90">us_dcx</a>;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="comment">/* We&#39;ve sent the full key */</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">sentfullkey</a> = 1;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="comment">/* Build initialization vector */</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a>(iv);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="comment">/* Add the field, rounded up to 16 bytes */</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a0c1670003c707002bb0bc2e7e312d076">dundi_ie_append_encdata</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a311b8b502e115eec8c4ed106d9c1a267">DUNDI_IE_ENCDATA</a>, iv, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ((bytes + 15) / 16) * 16);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="comment">/* Copy the data */</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">if</span> ((ied.pos + bytes) &gt;= <span class="keyword">sizeof</span>(ied.buf)) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Final packet too large!\n&quot;</span>);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0324ac09a265e30f033c6469b43936d7">encrypt_memcpy</a>(ied.buf + ied.pos, compress_space, bytes, iv, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae119b8bbe294cad12c32cd093eb81e4c">ecx</a>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   ied.pos += ((bytes + 15) / 16) * 16;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="comment">/* Reconstruct header */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> = <a class="code" href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a47c5a3ec1f5b267c4f47628d8863cb90">cmdflags</a> = 0;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   memcpy(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">ies</a>, ied.buf, ied.pos);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> += ied.pos;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div><div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ae119b8bbe294cad12c32cd093eb81e4c"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ae119b8bbe294cad12c32cd093eb81e4c">dundi_transaction::ecx</a></div><div class="ttdeci">ast_aes_encrypt_key ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00252">pbx_dundi.c:252</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="dundi_8h_html_a8bc30c0748d02d6260317440381dcf81"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8bc30c0748d02d6260317440381dcf81">DUNDI_IE_SHAREDKEY</a></div><div class="ttdeci">#define DUNDI_IE_SHAREDKEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00194">dundi.h:194</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0324ac09a265e30f033c6469b43936d7"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0324ac09a265e30f033c6469b43936d7">encrypt_memcpy</a></div><div class="ttdeci">static int encrypt_memcpy(unsigned char *dst, unsigned char *src, int len, unsigned char *iv, ast_aes_encrypt_key *ecx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01373">pbx_dundi.c:1373</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="dundi_8h_html_af78a65d1b49ef73bb2dfcd229f13cd44"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a></div><div class="ttdeci">#define DUNDI_COMMAND_ENCRYPT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00172">dundi.h:172</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="structdundi__packet_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">dundi_packet::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">pbx_dundi.c:228</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a13131254e3a2a3dc3796b1647ac09c00"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a></div><div class="ttdeci">int dundi_ie_append_raw(struct dundi_ie_data *ied, unsigned char ie, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00484">dundi-parser.c:484</a></div></div>
<div class="ttc" id="structdundi__peer_html_a539f54e572069eed68708af02c5536d7"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a539f54e572069eed68708af02c5536d7">dundi_peer::us_keycrc32</a></div><div class="ttdeci">uint32_t us_keycrc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00318">pbx_dundi.c:318</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi_8h_html_abdfc63ed231d754e8b913fcb58ac9a6d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#abdfc63ed231d754e8b913fcb58ac9a6d">DUNDI_IE_KEYCRC32</a></div><div class="ttdeci">#define DUNDI_IE_KEYCRC32</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00196">dundi.h:196</a></div></div>
<div class="ttc" id="dundi_8h_html_a5fa3e04f0ea13bd3d2fb421f9b011a33"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5fa3e04f0ea13bd3d2fb421f9b011a33">DUNDI_IE_SIGNATURE</a></div><div class="ttdeci">#define DUNDI_IE_SIGNATURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00195">dundi.h:195</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a0c1670003c707002bb0bc2e7e312d076"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a0c1670003c707002bb0bc2e7e312d076">dundi_ie_append_encdata</a></div><div class="ttdeci">int dundi_ie_append_encdata(struct dundi_ie_data *ied, unsigned char ie, unsigned char *iv, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00539">dundi-parser.c:539</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">pbx_dundi.c:172</a></div></div>
<div class="ttc" id="structdundi__peer_html_afcd60593ac1d49200526919d9e1e5b90"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afcd60593ac1d49200526919d9e1e5b90">dundi_peer::us_dcx</a></div><div class="ttdeci">ast_aes_decrypt_key us_dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00320">pbx_dundi.c:320</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a47c5a3ec1f5b267c4f47628d8863cb90"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a47c5a3ec1f5b267c4f47628d8863cb90">dundi_hdr::cmdflags</a></div><div class="ttdeci">unsigned char cmdflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00040">dundi.h:40</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57dfdd2d46918b3f8e7ac4287f164365"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a></div><div class="ttdeci">static void build_iv(unsigned char *iv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">pbx_dundi.c:533</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a401a6190b88ef972e67575a2d95b2c32"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">dundi_hdr::ies</a></div><div class="ttdeci">unsigned char ies[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00041">dundi.h:41</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3db75f1593a29fe97f086bbf4cf0dbfe"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a></div><div class="ttdeci">static struct dundi_peer * find_peer(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">pbx_dundi.c:515</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structdundi__peer_html_a589109875bf2955476cd7a15dc9651ba"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a589109875bf2955476cd7a15dc9651ba">dundi_peer::us_ecx</a></div><div class="ttdeci">ast_aes_encrypt_key us_ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00319">pbx_dundi.c:319</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac2fee1dc6f3beaf6e86a3399a955ac5d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac2fee1dc6f3beaf6e86a3399a955ac5d">update_key</a></div><div class="ttdeci">static int update_key(struct dundi_peer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">pbx_dundi.c:1334</a></div></div>
<div class="ttc" id="structdundi__peer_html_a08ffe1f77a06523bb3df0b18e336952b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">dundi_peer::txenckey</a></div><div class="ttdeci">unsigned char txenckey[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">pbx_dundi.c:316</a></div></div>
<div class="ttc" id="structdundi__packet_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">dundi_packet::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">pbx_dundi.c:224</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a00d7cc9eded552060ee916eb32f7b5de"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a00d7cc9eded552060ee916eb32f7b5de">dundi_ie_append_int</a></div><div class="ttdeci">int dundi_ie_append_int(struct dundi_ie_data *ied, unsigned char ie, unsigned int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00591">dundi-parser.c:591</a></div></div>
<div class="ttc" id="dundi_8h_html_a311b8b502e115eec8c4ed106d9c1a267"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a311b8b502e115eec8c4ed106d9c1a267">DUNDI_IE_ENCDATA</a></div><div class="ttdeci">#define DUNDI_IE_ENCDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00193">dundi.h:193</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ab0073ccb3c8600726f37b28438094bd8"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dundi_transaction::dcx</a></div><div class="ttdeci">ast_aes_decrypt_key dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">pbx_dundi.c:253</a></div></div>
<div class="ttc" id="structdundi__packet_html_aaa805b51d34468d4b2796ec731ff5f32"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">dundi_packet::h</a></div><div class="ttdeci">struct dundi_hdr * h</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">pbx_dundi.c:223</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab7f3bafd1912096a0cc348aada3f30b8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">dundi_peer::sentfullkey</a></div><div class="ttdeci">int sentfullkey</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">pbx_dundi.c:314</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_hdr::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00037">dundi.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c871e32a7626fa8a94e9070a7a007e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c871e32a7626fa8a94e9070a7a007e5">&#9670;&nbsp;</a></span>dundi_error_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dundi_error_output </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00362">362</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;{</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s&quot;</span>, data);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a551a53fd829b8c6e932f3155119b90ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a551a53fd829b8c6e932f3155119b90ce">&#9670;&nbsp;</a></span>dundi_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04832">4832</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00370">ast_channel_macroexten()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00068">DUNDI_FLAG_EXISTS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">sort_results()</a>.</p>
<div class="fragment"><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;{</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> results[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;   <span class="keywordtype">int</span> x=0;</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;   <span class="keywordtype">char</span> req[1024];</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dundiargs;</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *dial;</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;macro-&quot;</span>, 6)) {</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Can&#39;t use macro mode without a channel!\n&quot;</span>);</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;      }</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;      <span class="comment">/* If done as a macro, use macro extension */</span></div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="stringliteral">&quot;s&quot;</span>)) {</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;ARG1&quot;</span>);</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;            <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a>(chan);</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;            <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan);</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Called in Macro mode with no ARG1 or MACRO_EXTEN?\n&quot;</span>);</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;         }</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;      }</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data))</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;         data = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data))</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;         data = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;   }</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a>(results, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>, chan, data, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, 0);</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a>(results, res);</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;res;x++) {</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(results + x, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a>)) {</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;            <span class="keywordflow">if</span> (!--<a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>)</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;         }</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;      }</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   }</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;   <span class="keywordflow">if</span> (x &lt; res) {</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;      <span class="comment">/* Got a hit! */</span></div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;      dundiargs = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;DUNDIDIALARGS&quot;</span>);</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;      snprintf(req, <span class="keyword">sizeof</span>(req), <span class="stringliteral">&quot;%s/%s,,%s&quot;</span>, results[x].tech, results[x].dest,</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(dundiargs, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;      dial = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;Dial&quot;</span>);</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;      <span class="keywordflow">if</span> (dial)</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;         res = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, dial, req);</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;      res = -1;</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55cb0bb945cb23bfd62b59095b1799ed"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a></div><div class="ttdeci">int dundi_lookup(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int cbypass)</div><div class="ttdoc">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspec...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">pbx_dundi.c:3926</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a77e5ad29e79bbb7ca62f5b007e14b6af"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a></div><div class="ttdeci">static void sort_results(struct dundi_result *results, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">pbx_dundi.c:2451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00068">dundi.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_ac967e3cfb7640aa743eb1c4811d46be0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a></div><div class="ttdeci">const char * ast_channel_macroexten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00370">channel_internal_api.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a91bf1a4271ce23613e3ab4cd57ee0965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91bf1a4271ce23613e3ab4cd57ee0965">&#9670;&nbsp;</a></span>dundi_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_exists </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04822">4822</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d59/dundi_8h_source.html#l00068">DUNDI_FLAG_EXISTS</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">dundi_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;{</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a>(chan, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, data, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a>);</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00068">dundi.h:68</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a8b8154a069fe3f1e17004c53cda97af4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a></div><div class="ttdeci">static int dundi_helper(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *data, int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">pbx_dundi.c:4783</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac52fd25e8894176f44a043f1476fb7b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52fd25e8894176f44a043f1476fb7b8">&#9670;&nbsp;</a></span>dundi_flush()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02357">2357</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00457">ast_db_deltree()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">dundi_peer::avgms</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">DUNDI_TIMING_HISTORY</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">dundi_peer::lookups</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">dundi_peer::lookuptimes</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;{</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   <span class="keywordtype">int</span> stats = 0;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi flush [stats]&quot;</span>;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;         <span class="stringliteral">&quot;Usage: dundi flush [stats]\n&quot;</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;         <span class="stringliteral">&quot;       Flushes DUNDi answer cache, used primarily for debug.  If\n&quot;</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;         <span class="stringliteral">&quot;&#39;stats&#39; is present, clears timer statistics instead of normal\n&quot;</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         <span class="stringliteral">&quot;operation.\n&quot;</span>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 2) || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3)) {</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;   }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 2) {</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <span class="stringliteral">&quot;stats&quot;</span>)) {</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;         stats = 1;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      }</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;   <span class="keywordflow">if</span> (stats) {</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <span class="comment">/* Flush statistics */</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, p, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;         <span class="keywordflow">for</span> (x = 0;x &lt; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a>; x++) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x]);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;            p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[x] = 0;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;         }</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;         p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a> = 0;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      }</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <a class="code" href="../../de/d4a/astdb_8h.html#af251d986cfe884ffd5ca864531253f62">ast_db_deltree</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Cache Flushed\n&quot;</span>);</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   }</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__peer_html_a24b27f8cc02328781fef5fea81b9975b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">dundi_peer::lookups</a></div><div class="ttdeci">char * lookups[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">pbx_dundi.c:327</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae4e2b63230359081bce0ba36029de761"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a></div><div class="ttdeci">#define DUNDI_TIMING_HISTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">pbx_dundi.c:164</a></div></div>
<div class="ttc" id="structdundi__peer_html_acefbffbf7aea5d745d118d4c6b2502a9"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">dundi_peer::avgms</a></div><div class="ttdeci">int avgms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">pbx_dundi.c:328</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0128fd3a4a9af8307c0f49da95624a6f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">dundi_peer::lookuptimes</a></div><div class="ttdeci">int lookuptimes[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">pbx_dundi.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="astdb_8h_html_af251d986cfe884ffd5ca864531253f62"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af251d986cfe884ffd5ca864531253f62">ast_db_deltree</a></div><div class="ttdeci">int ast_db_deltree(const char *family, const char *keytree)</div><div class="ttdoc">Delete one or more entries in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00457">main/db.c:457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b8154a069fe3f1e17004c53cda97af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b8154a069fe3f1e17004c53cda97af4">&#9670;&nbsp;</a></span>dundi_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">4783</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00370">ast_channel_macroexten()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04827">dundi_canmatch()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04822">dundi_exists()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04887">dundi_matchmore()</a>.</p>
<div class="fragment"><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;{</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> results[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;macro-&quot;</span>, 6)) {</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;      <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Can&#39;t use macro mode without a channel!\n&quot;</span>);</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;      }</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;      <span class="comment">/* If done as a macro, use macro extension */</span></div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="stringliteral">&quot;s&quot;</span>)) {</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;         <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;ARG1&quot;</span>);</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;            <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a>(chan);</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>))</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;            <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan);</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Called in Macro mode with no ARG1 or MACRO_EXTEN?\n&quot;</span>);</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;         }</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      }</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data))</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;         data = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data))</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;         data = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;   }</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a>(results, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>, chan, data, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, 0);</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;res;x++) {</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(results + x, <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>))</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;         found++;</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;   }</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;   <span class="keywordflow">if</span> (found &gt;= <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>)</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55cb0bb945cb23bfd62b59095b1799ed"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a></div><div class="ttdeci">int dundi_lookup(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int cbypass)</div><div class="ttdoc">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspec...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">pbx_dundi.c:3926</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_ac967e3cfb7640aa743eb1c4811d46be0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a></div><div class="ttdeci">const char * ast_channel_macroexten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00370">channel_internal_api.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d6b8bacf4342d7de910150ff8df2f10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6b8bacf4342d7de910150ff8df2f10">&#9670;&nbsp;</a></span>dundi_ie_append_eid_appropriately()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dundi_ie_append_eid_appropriately </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *&#160;</td>
          <td class="paramname"><em>ied</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>us</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03391">3391</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00185">DUNDI_IE_EID_DIRECT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">has_permission()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">dundi_discover()</a>.</p>
<div class="fragment"><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;{</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *p;</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(eid, us)) {</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8801f866f4216ea9d5bc503a5af8121b">DUNDI_IE_EID_DIRECT</a>, eid);</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   }</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, p, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, eid)) {</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;p-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>))</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8801f866f4216ea9d5bc503a5af8121b">DUNDI_IE_EID_DIRECT</a>, eid);</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, eid);</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      }</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   }</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <span class="keywordflow">if</span> (!p)</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, eid);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="dundi_8h_html_a8801f866f4216ea9d5bc503a5af8121b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8801f866f4216ea9d5bc503a5af8121b">DUNDI_IE_EID_DIRECT</a></div><div class="ttdeci">#define DUNDI_IE_EID_DIRECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00185">dundi.h:185</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4ee00d52d3fc2dd80292cf9cc337a500"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a></div><div class="ttdeci">static int has_permission(struct permissionlist *permlist, char *cont)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">pbx_dundi.c:367</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a55cb0bb945cb23bfd62b59095b1799ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55cb0bb945cb23bfd62b59095b1799ed">&#9670;&nbsp;</a></span>dundi_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nocache</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspecified use e164), the given callerid (if specified) and return up to maxret results in the array specified. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>number of results found. </td></tr>
    <tr><td class="paramname">-1</td><td>on a hangup of the channel. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">3926</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">dundi_hint_metadata::flags</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02456">dundi_do_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04832">dundi_exec()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">dundi_helper()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">dundifunc_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;{</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *avoid[1] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;   <span class="keywordtype">int</span> direct[1] = { 0, };</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   <span class="keywordtype">int</span> expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;   hmd.flags = <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a> | <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>;</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a>(result, maxret, chan, dcontext, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a>, 0, &amp;hmd, &amp;expiration, cbypass, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, avoid, direct);</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a80d660680e9f828d8bfc16e5175d67f4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a></div><div class="ttdeci">static int dundi_lookup_internal(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int ttl, int blockempty, struct dundi_hint_metadata *md, int *expiration, int cybpass, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int direct[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">pbx_dundi.c:3824</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1ffcd4d21da49b299b25534bb7341cb1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a></div><div class="ttdeci">static int dundi_ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00194">pbx_dundi.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80d660680e9f828d8bfc16e5175d67f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d660680e9f828d8bfc16e5175d67f4">&#9670;&nbsp;</a></span>dundi_lookup_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_lookup_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockempty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>expiration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cybpass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>modeselect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>skip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoid</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">3824</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03688">abort_request()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00176">ast_set_flag_nonstd</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02989">ast_waitfor_n_fd()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03809">avoid_crc32()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">cancel_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00284">dundi_request::cbypass</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03795">check_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03525">discover_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00211">DUNDI_FLUFF_TIME</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00090">DUNDI_HINT_TTL_EXPIRED</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00212">DUNDI_TTL_TIME</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">dundi_request::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">dundi_request::maxcount</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">optimize_transactions()</a>, <a class="el" href="../../d2/d79/analys_8c_source.html#l00066">order</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">dundi_request::pfds</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03758">register_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03788">unregister_request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">str2tech()</a>.</p>
<div class="fragment"><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;{</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, *pending;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *rooteid=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;   <span class="keywordtype">int</span> ttlms;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;   <span class="keywordtype">int</span> foundcache;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;   <span class="keywordtype">int</span> skipped=0;</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>=0;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;   <span class="comment">/* Don&#39;t do anthing for a hungup channel */</span></div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;   <span class="keywordflow">if</span> (chan &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;   ttlms = <a class="code" href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a> + ttl * <a class="code" href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a>;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;   <span class="keywordflow">for</span> (x=0;avoid[x];x++)</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;      rooteid = avoid[x];</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;   <span class="comment">/* Now perform real check */</span></div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;   <span class="keywordflow">if</span> (pipe(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds)) {</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;pipe failed: %s\n&quot;</span> , strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;   }</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dr = <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.hmd = hmd;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.maxcount = maxret;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration = *expiration;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.cbypass = cbypass;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.crc32 = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a5cc279894103eb711a9340434e2beb8c">avoid_crc32</a>(avoid);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, dcontext ? dcontext : <span class="stringliteral">&quot;e164&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext));</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number));</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;   <span class="keywordflow">if</span> (rooteid)</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;      <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.root_eid = *rooteid;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;   res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7e1eda8492ec8beac69adda8b823bb1e">register_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, &amp;pending);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="comment">/* Already a request */</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;      <span class="keywordflow">if</span> (rooteid &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.root_eid, &amp;pending-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>)) {</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;         <span class="comment">/* This is on behalf of someone else.  Go ahead and close this out since</span></div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;<span class="comment">            they&#39;ll get their answer anyway. */</span></div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Oooh, duplicate request for &#39;%s@%s&#39; for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;            <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number,<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext,<a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.root_eid));</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;         close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0]);</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;         close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1]);</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;         <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;         <span class="comment">/* Wait for the cache to populate */</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Waiting for similar request for &#39;%s@%s&#39; for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;            <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number,<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext,<a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;pending-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>));</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;         start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;         <span class="keywordflow">while</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a5105c2171d37936498ac78fa74c32edf">check_request</a>(pending) &amp;&amp; (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start) &lt; ttlms) &amp;&amp; (!chan || !<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))) {</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;            <span class="comment">/* XXX Would be nice to have a way to poll/select here XXX */</span></div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            <span class="comment">/* XXX this is a busy wait loop!!! */</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;            usleep(1);</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;         }</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;         <span class="comment">/* Continue on as normal, our cache should kick in */</span></div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      }</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;   }</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;   <span class="comment">/* Create transactions */</span></div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;      order = skipped;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;      skipped = 0;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;      foundcache = 0;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, ttl, order, &amp;foundcache, &amp;skipped, blockempty, cbypass, modeselect, skip, avoid, direct);</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;   } <span class="keywordflow">while</span> (skipped &amp;&amp; !foundcache &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.trans));</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;   <span class="comment">/* If no TTL, abort and return 0 now after setting TTL expired hint.  Couldn&#39;t</span></div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;<span class="comment">      do this earlier because we didn&#39;t know if we were going to have transactions</span></div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;<span class="comment">      or not. */</span></div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;   <span class="keywordflow">if</span> (!ttl) {</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a>(hmd, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>);</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac5d1b03e1e1fc7a9c20255bbf8b1632e">abort_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac048ffc62ecb2399fa52b16519428f23">unregister_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;      close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0]);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;      close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1]);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;   }</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;   <span class="comment">/* Optimize transactions */</span></div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, order);</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;   <span class="comment">/* Actually perform transactions */</span></div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afb2da8421495180754f411b87157d2f7">discover_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <span class="comment">/* Wait for transaction to come back */</span></div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.trans) &amp;&amp; (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start) &lt; ttlms) &amp;&amp; (!chan || !<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))) {</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      ms = 100;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds, 1, &amp;ms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;   }</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;   <span class="keywordflow">if</span> (chan &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Hrm, &#39;%s&#39; hungup before their query for %s@%s finished\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext);</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a24325d2346f0e082e206486c94fcc83b">cancel_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac048ffc62ecb2399fa52b16519428f23">unregister_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;   res = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.respcount;</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;   *expiration = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;   close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0]);</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;   close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1]);</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afb2da8421495180754f411b87157d2f7"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afb2da8421495180754f411b87157d2f7">discover_transactions</a></div><div class="ttdeci">static int discover_transactions(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03525">pbx_dundi.c:3525</a></div></div>
<div class="ttc" id="dundi_8h_html_a556c4830d97d16b1fb7d224ad87bff8b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a></div><div class="ttdeci">#define DUNDI_FLUFF_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00211">dundi.h:211</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7e1eda8492ec8beac69adda8b823bb1e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7e1eda8492ec8beac69adda8b823bb1e">register_request</a></div><div class="ttdeci">static int register_request(struct dundi_request *dr, struct dundi_request **pending)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03758">pbx_dundi.c:3758</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a24325d2346f0e082e206486c94fcc83b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a24325d2346f0e082e206486c94fcc83b">cancel_request</a></div><div class="ttdeci">static void cancel_request(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">pbx_dundi.c:3674</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00090">dundi.h:90</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a56819f90869d77808fd52f4d2693a75c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a></div><div class="ttdeci">int ast_waitfor_n_fd(int *fds, int n, int *ms, int *exception)</div><div class="ttdoc">Waits for input on an fd. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02989">channel.c:2989</a></div></div>
<div class="ttc" id="analys_8c_html_aed7ca058008dc3e5ee131e575abed285"><div class="ttname"><a href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a></div><div class="ttdeci">integer order</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d79/analys_8c_source.html#l00066">analys.c:66</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="dundi_8h_html_a60355312c3a3abcf306b78dc92486168"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a></div><div class="ttdeci">#define DUNDI_TTL_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00212">dundi.h:212</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a5cc279894103eb711a9340434e2beb8c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a5cc279894103eb711a9340434e2beb8c">avoid_crc32</a></div><div class="ttdeci">static unsigned long avoid_crc32(dundi_eid *avoid[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03809">pbx_dundi.c:3809</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac048ffc62ecb2399fa52b16519428f23"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac048ffc62ecb2399fa52b16519428f23">unregister_request</a></div><div class="ttdeci">static void unregister_request(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03788">pbx_dundi.c:3788</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac5d1b03e1e1fc7a9c20255bbf8b1632e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac5d1b03e1e1fc7a9c20255bbf8b1632e">abort_request</a></div><div class="ttdeci">static void abort_request(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03688">pbx_dundi.c:3688</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a5105c2171d37936498ac78fa74c32edf"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a5105c2171d37936498ac78fa74c32edf">check_request</a></div><div class="ttdeci">static int check_request(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03795">pbx_dundi.c:3795</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="utils_8h_html_a0c85a8ea758aa5fa64260d7b29af6564"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a></div><div class="ttdeci">#define ast_set_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00176">utils.h:176</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a38669dd3d9e661107ae2aa06c7e0ec05"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a></div><div class="ttdeci">static int optimize_transactions(struct dundi_request *dr, int order)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">pbx_dundi.c:3584</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a92b3d0d6b935c050950f18b3436f371e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a></div><div class="ttdeci">static void build_transactions(struct dundi_request *dr, int ttl, int order, int *foundcache, int *skipped, int blockempty, int nocache, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int directs[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">pbx_dundi.c:3700</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab12db76eda3f0713a2ab9499145f2cd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab12db76eda3f0713a2ab9499145f2cd8">&#9670;&nbsp;</a></span>dundi_lookup_local()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_lookup_local </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>called_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>us_eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>anscnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *&#160;</td>
          <td class="paramname"><em>hmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">578</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l04194">ast_canmatch_extension()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00180">ast_clear_flag_nonstd</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06921">ast_ignore_pattern()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04199">ast_matchmore_extension()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00135">AST_MAX_EXTENSION</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/de7/chanvars_8h_source.html#l00040">ast_var_assign</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02473">ast_var_delete()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">dundi_mapping::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00072">DUNDI_FLAG_CANMATCH</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00068">DUNDI_FLAG_EXISTS</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00074">DUNDI_FLAG_IGNOREPAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00176">DUNDI_FLAG_INTERNAL_NOPARTIAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00070">DUNDI_FLAG_MATCHMORE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00230">dundi_result::eid</a>, <a class="el" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">get_mapping_weight()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">dundi_mapping::lcontext</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">dundi_mapping::options</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00840">pbx_substitute_variables_varshead()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">dundi_mapping::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00229">dundi_result::techint</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = {0};</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>)) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, called_number, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, called_number, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4">DUNDI_FLAG_CANMATCH</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, called_number, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8">DUNDI_FLAG_MATCHMORE</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, called_number))</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ae0f605310eacfaa7cc7beef4a803a259">DUNDI_FLAG_IGNOREPAT</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="comment">/* Clearly we can&#39;t say &#39;don&#39;t ask&#39; anymore if we found anything... */</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>))</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(hmd, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">if</span> (map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3e53e12e302bc296ce4123c63db56ef7">DUNDI_FLAG_INTERNAL_NOPARTIAL</a>) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;         <span class="comment">/* Skip partial answers */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8">DUNDI_FLAG_MATCHMORE</a>|<a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4">DUNDI_FLAG_CANMATCH</a>);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>)) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> headp;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *newvariable;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;flags, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; 0xffff);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(dr + anscnt, &amp;flags, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> = map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">tech</a>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dr[anscnt].tech, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">tech</a>), <span class="keyword">sizeof</span>(dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>));</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a> = *us_eid;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(dr[anscnt].eid_str, <span class="keyword">sizeof</span>(dr[anscnt].eid_str), &amp;dr[anscnt].eid);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a>)) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;headp);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span> ((newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<span class="stringliteral">&quot;NUMBER&quot;</span>, called_number))) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span> ((newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<span class="stringliteral">&quot;EID&quot;</span>, dr[anscnt].eid_str))) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">if</span> ((newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<span class="stringliteral">&quot;SECRET&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>))) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">if</span> ((newvariable = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<span class="stringliteral">&quot;IPADDR&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>))) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;headp, newvariable, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a2b3355625306d4b98ca8047cd2245459">pbx_substitute_variables_varshead</a>(&amp;headp, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>, dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, <span class="keyword">sizeof</span>(dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>));</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a>(map, &amp;headp);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="keywordflow">while</span> ((newvariable = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;headp, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>)))</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;               <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(newvariable);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            dr[anscnt].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a>(map, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;         anscnt++;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         <span class="comment">/* No answers...  Find the fewest number of digits from the</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">            number for which we have no answer. */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a> + 1] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;         <span class="keywordflow">for</span> (x = 0; x &lt; (<span class="keyword">sizeof</span>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) - 1); x++) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            tmp[x] = called_number[x];</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">if</span> (!tmp[x])</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, tmp, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;               <span class="comment">/* Oops found something we can&#39;t match.  If this is longer</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">                  than the running hint, we have to consider it */</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;               <span class="keywordflow">if</span> (strlen(tmp) &gt; strlen(hmd-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(hmd-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>, tmp, <span class="keyword">sizeof</span>(hmd-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;               }</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordflow">return</span> anscnt;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="ttc" id="pbx_8h_html_ac359af75b9494f50904583d2168a7577"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a></div><div class="ttdeci">int ast_matchmore_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks to see if adding anything to this extension might match something. (exists ^ canmatch) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04199">pbx.c:4199</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a654f0683d109dbcbaae72ad430e7aede"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dundi_mapping::dest</a></div><div class="ttdeci">char dest[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">pbx_dundi.c:299</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ae0f605310eacfaa7cc7beef4a803a259"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ae0f605310eacfaa7cc7beef4a803a259">DUNDI_FLAG_IGNOREPAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00074">dundi.h:74</a></div></div>
<div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a18503b36b5eb83b128ab979b5ff241bf"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">dundi_mapping::lcontext</a></div><div class="ttdeci">char lcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">pbx_dundi.c:293</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_a2d48f8d71e91b61c5759edf70f71a168"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a></div><div class="ttdeci">#define ast_clear_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00180">utils.h:180</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="pbx_8h_html_aa73d176ed4f1ce51e5db6beafba45fe3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a></div><div class="ttdeci">int ast_ignore_pattern(const char *context, const char *pattern)</div><div class="ttdoc">Checks to see if a number should be ignored. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06921">pbx.c:6921</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx_8h_html_a93f9868530c1e8a9d9d367d1ead8782e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a93f9868530c1e8a9d9d367d1ead8782e">ast_canmatch_extension</a></div><div class="ttdeci">int ast_canmatch_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks for a valid matching extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04194">pbx.c:4194</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a839b17b1ac266cc09e9f2bb73b167ec4">DUNDI_FLAG_CANMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00072">dundi.h:72</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3e53e12e302bc296ce4123c63db56ef7"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3e53e12e302bc296ce4123c63db56ef7">DUNDI_FLAG_INTERNAL_NOPARTIAL</a></div><div class="ttdeci">#define DUNDI_FLAG_INTERNAL_NOPARTIAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00176">pbx_dundi.c:176</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00068">dundi.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="structdundi__result_html_a9f38c22f98ac1c23c8aece0e44de1fbb"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">dundi_result::tech</a></div><div class="ttdeci">char tech[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00232">dundi.h:232</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a849fa981f121eb25a67e4e14392840ba"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">dundi_mapping::options</a></div><div class="ttdeci">int options</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">pbx_dundi.c:296</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structdundi__result_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">dundi_result::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00228">dundi.h:228</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abe4895c1ad7c3100e5566b3a9257f2e9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a></div><div class="ttdeci">static char ipaddr[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00210">pbx_dundi.c:210</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8">DUNDI_FLAG_MATCHMORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00070">dundi.h:70</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="structdundi__result_html_a8361ea43bdb1990170b1de986c1ff898"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">dundi_result::techint</a></div><div class="ttdeci">int techint</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00229">dundi.h:229</a></div></div>
<div class="ttc" id="structdundi__result_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">dundi_result::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00230">dundi.h:230</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab293c9ebc4be88ba25ffb8055c6b096e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a></div><div class="ttdeci">static int get_mapping_weight(struct dundi_mapping *map, struct varshead *headp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">pbx_dundi.c:559</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="chanvars_8h_html_a78deeb18e93b145e9895346cef766577"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a></div><div class="ttdeci">#define ast_var_assign(name, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00040">chanvars.h:40</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">dundi_hint_metadata::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">pbx_dundi.c:233</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a539fd30ae5d9ac88c45e52e37bee5a2f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a></div><div class="ttdeci">static char cursecret[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00209">pbx_dundi.c:209</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a7c185f9a2f9294fce34f8a9429074ba0"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">dundi_mapping::tech</a></div><div class="ttdeci">int tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">pbx_dundi.c:297</a></div></div>
<div class="ttc" id="pbx_8h_html_a2b3355625306d4b98ca8047cd2245459"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2b3355625306d4b98ca8047cd2245459">pbx_substitute_variables_varshead</a></div><div class="ttdeci">void pbx_substitute_variables_varshead(struct varshead *headp, const char *cp1, char *cp2, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00840">pbx_variables.c:840</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afdfa5326fdccb66cf4a70b740874f7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdfa5326fdccb66cf4a70b740874f7d0">&#9670;&nbsp;</a></span>dundi_lookup_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* dundi_lookup_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">657</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00173">ast_test_flag_nonstd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">dundi_query_state::called_number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">dundi_query_state::directs</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00125">DUNDI_CAUSE_DUPLICATE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00161">DUNDI_COMMAND_DPRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00186">DUNDI_IE_ANSWER</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00559">dundi_ie_append_answer()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi_ie_append_cause()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi_ie_append_hint()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00191">DUNDI_IE_CAUSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00189">DUNDI_IE_EXPIRATION</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00197">DUNDI_IE_HINT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">FLAG_DEAD</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">dundi_hint_metadata::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">dundi_query_state::maps</a>, <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">dundi_query_state::nocache</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">dundi_query_state::nummaps</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">weight</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">dundi_answer_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st = data;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordtype">int</span> res, x;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordtype">int</span> ouranswers=0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = 999999;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordtype">int</span> expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Whee, looking up &#39;%s@%s&#39; for &#39;%s&#39;\n&quot;</span>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>,</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0] ? <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0]) :  <span class="stringliteral">&quot;ourselves&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="comment">/* Assume &#39;don&#39;t ask for anything&#39; and &#39;unaffected&#39;, no TTL expired */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   hmd.flags = <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a> | <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">nummaps</a>;x++)</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      ouranswers = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab12db76eda3f0713a2ab9499145f2cd8">dundi_lookup_local</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a> + x, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, &amp;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>, ouranswers, &amp;hmd);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keywordflow">if</span> (ouranswers &lt; 0)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      ouranswers = 0;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;ouranswers;x++) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a> &lt; max)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         max = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].weight;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">if</span> (max) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="comment">/* If we do not have a canonical result, keep looking */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a> + ouranswers, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a> - ouranswers, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>, 1, &amp;hmd, &amp;expiration, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">nocache</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">directs</a>);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         <span class="comment">/* Append answer in result */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         ouranswers += res;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <span class="keywordflow">if</span> ((res &lt; -1) &amp;&amp; (!ouranswers))</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caadf377b8b20bfa81de0c8ad77942ddf98">DUNDI_CAUSE_DUPLICATE</a>, <span class="stringliteral">&quot;Duplicate Request Pending&quot;</span>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="comment">/* Truncate if &quot;don&#39;t ask&quot; isn&#39;t present */</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(&amp;hmd, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>))</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      hmd.exten[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>)) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Our transaction went away!\n&quot;</span>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, 0);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;ouranswers;x++) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;         <span class="comment">/* Add answers */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration &amp;&amp; (expiration &gt; <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration))</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            expiration = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f85f58ac01656d4f74a23a5cb99623e">dundi_ie_append_answer</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#afdf30ec8480910ba3234fa6e2f9cc07c">DUNDI_IE_ANSWER</a>, &amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].eid, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].techint, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].dest);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a>, hmd.flags, hmd.exten);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a>, expiration);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="dundi_8h_html_a602807c627c7a3183f382e729869ef5c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a></div><div class="ttdeci">#define DUNDI_IE_EXPIRATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00189">dundi.h:189</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab12db76eda3f0713a2ab9499145f2cd8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab12db76eda3f0713a2ab9499145f2cd8">dundi_lookup_local</a></div><div class="ttdeci">static int dundi_lookup_local(struct dundi_result *dr, struct dundi_mapping *map, char *called_number, dundi_eid *us_eid, int anscnt, struct dundi_hint_metadata *hmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">pbx_dundi.c:578</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a4ebf3a8b5dae96ce75362607fe001c82"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">dundi_query_state::called_number</a></div><div class="ttdeci">char called_number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">pbx_dundi.c:548</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a17bb3445f4dccbce032430ca91fbb6d2"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">dundi_query_state::maps</a></div><div class="ttdeci">struct dundi_mapping * maps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">pbx_dundi.c:549</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="dundi_8h_html_a69a524e98fd92f87d531f634c6c60ec0"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a></div><div class="ttdeci">#define DUNDI_IE_CAUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00191">dundi.h:191</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caadf377b8b20bfa81de0c8ad77942ddf98"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caadf377b8b20bfa81de0c8ad77942ddf98">DUNDI_CAUSE_DUPLICATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00125">dundi.h:125</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae5c2a5fbbbd31e67b0e86683717322e0"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a></div><div class="ttdeci">int dundi_ie_append_hint(struct dundi_ie_data *ied, unsigned char ie, unsigned short flags, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi-parser.c:518</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a80d660680e9f828d8bfc16e5175d67f4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a></div><div class="ttdeci">static int dundi_lookup_internal(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int ttl, int blockempty, struct dundi_hint_metadata *md, int *expiration, int cybpass, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int direct[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">pbx_dundi.c:3824</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dundi_8h_html_a859251515ac9cfe1bee7e44a418aa825"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00161">dundi.h:161</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a9da18891df7680fc0b06c65fe138a328"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">dundi_query_state::nummaps</a></div><div class="ttdeci">int nummaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">pbx_dundi.c:550</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a494a54983c26432c53a57ba2589f7d54"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">dundi_query_state::nocache</a></div><div class="ttdeci">int nocache</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">pbx_dundi.c:551</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a96c148453f4cb387cfa116ff79477183"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a></div><div class="ttdeci">int dundi_ie_append_cause(struct dundi_ie_data *ied, unsigned char ie, unsigned char cause, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi-parser.c:499</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="dundi_8h_html_a65865db706ab437ed5b3d4b03eae36b4"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a></div><div class="ttdeci">#define DUNDI_IE_HINT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00197">dundi.h:197</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a1cbb17ede73ea044a04a129bf4d86976"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a1cbb17ede73ea044a04a129bf4d86976">dundi_hint_metadata::flags</a></div><div class="ttdeci">unsigned short flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">pbx_dundi.c:232</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a1ff7fc424d272cd0fd48240a42236b1c"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">dundi_query_state::directs</a></div><div class="ttdeci">int directs[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">pbx_dundi.c:545</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="utils_8h_html_aacbd52db1ede7a4c592037c8d6da7ded"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a></div><div class="ttdeci">#define ast_test_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00173">utils.h:173</a></div></div>
<div class="ttc" id="dundi_8h_html_afdf30ec8480910ba3234fa6e2f9cc07c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#afdf30ec8480910ba3234fa6e2f9cc07c">DUNDI_IE_ANSWER</a></div><div class="ttdeci">#define DUNDI_IE_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00186">dundi.h:186</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f85f58ac01656d4f74a23a5cb99623e"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f85f58ac01656d4f74a23a5cb99623e">dundi_ie_append_answer</a></div><div class="ttdeci">int dundi_ie_append_answer(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid, unsigned char protocol, unsigned short flags, unsigned short weight, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00559">dundi-parser.c:559</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb250d2244486c7b54141042663106a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb250d2244486c7b54141042663106a7">&#9670;&nbsp;</a></span>dundi_matchmore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_matchmore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>callerid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04887">4887</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d59/dundi_8h_source.html#l00070">DUNDI_FLAG_MATCHMORE</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">dundi_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;{</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a>(chan, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>, data, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8">DUNDI_FLAG_MATCHMORE</a>);</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7a8ef9ba3f92f56d814922ae4909943db8">DUNDI_FLAG_MATCHMORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00070">dundi.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a8b8154a069fe3f1e17004c53cda97af4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a8b8154a069fe3f1e17004c53cda97af4">dundi_helper</a></div><div class="ttdeci">static int dundi_helper(struct ast_channel *chan, const char *context, const char *exten, int priority, const char *data, int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04783">pbx_dundi.c:4783</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c7021fc5f56a742448d01016e3c37df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c7021fc5f56a742448d01016e3c37df">&#9670;&nbsp;</a></span>dundi_precache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_precache </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pre-cache to push upstream peers. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">4068</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02512">dundi_do_precache()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02261">process_precache()</a>.</p>
<div class="fragment"><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;{</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *avoid[1] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a35ea53fa846aec2bfff4c07eb020c143">dundi_precache_internal</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a>, avoid);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1ffcd4d21da49b299b25534bb7341cb1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a></div><div class="ttdeci">static int dundi_ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00194">pbx_dundi.c:194</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a35ea53fa846aec2bfff4c07eb020c143"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a35ea53fa846aec2bfff4c07eb020c143">dundi_precache_internal</a></div><div class="ttdeci">static int dundi_precache_internal(const char *context, const char *number, int ttl, dundi_eid *avoids[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">pbx_dundi.c:3996</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee690082f6f678c7be9ae436242bfe0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee690082f6f678c7be9ae436242bfe0e">&#9670;&nbsp;</a></span>dundi_precache_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dundi_precache_full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03972">3972</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00421">ast_get_context_name()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08548">ast_get_extension_name()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08525">ast_rdlock_context()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08507">ast_rdlock_contexts()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08530">ast_unlock_context()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08512">ast_unlock_contexts()</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00427">ast_walk_context_extensions()</a>, <a class="el" href="../../de/dcc/conf2ael_8c_source.html#l00618">ast_walk_contexts()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">dundi_mapping::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">dundi_mapping::lcontext</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03937">reschedule_precache()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;{</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *cur;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7c/structast__context.html">ast_context</a> *con;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d00/structast__exten.html">ast_exten</a> *e;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, list) {</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Should precache context &#39;%s&#39;\n&quot;</span>, cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#aa2c309331fff0a086ab8e216f803d546">ast_rdlock_contexts</a>();</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      con = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      <span class="keywordflow">while</span> ((con = <a class="code" href="../../db/de0/pbx_8h.html#a15961c7507a97d62c0a07c3c01bdc369">ast_walk_contexts</a>(con))) {</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>, <a class="code" href="../../db/de0/pbx_8h.html#a8a3d015c3048804b0c2a37413a14f11e">ast_get_context_name</a>(con)))</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;         <span class="comment">/* Found the match, now queue them all up */</span></div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#af1a624244a07626a8f70843005206c95">ast_rdlock_context</a>(con);</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;         e = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;         <span class="keywordflow">while</span> ((e = <a class="code" href="../../db/de0/pbx_8h.html#abb024cdd19b5c3bab7734c9708f121b8">ast_walk_context_extensions</a>(con, e)))</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1614486640519c17b1affd653f6a86ba">reschedule_precache</a>(<a class="code" href="../../db/de0/pbx_8h.html#a6fb940c1fd9c74b9d573e0a91bb23697">ast_get_extension_name</a>(e), cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, 0);</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a805796e4728845bff70c4caf5b224308">ast_unlock_context</a>(con);</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;      }</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a>();</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;   }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;}</div><div class="ttc" id="pbx_8h_html_a805796e4728845bff70c4caf5b224308"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a805796e4728845bff70c4caf5b224308">ast_unlock_context</a></div><div class="ttdeci">int ast_unlock_context(struct ast_context *con)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08530">pbx.c:8530</a></div></div>
<div class="ttc" id="structast__exten_html"><div class="ttname"><a href="../../d7/d00/structast__exten.html">ast_exten</a></div><div class="ttdoc">ast_exten: An extension The dialplan is saved as a linked list with each context having it&amp;#39;s own link...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l00237">pbx.c:237</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dundi_mapping::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">pbx_dundi.c:292</a></div></div>
<div class="ttc" id="pbx_8h_html_a8a3d015c3048804b0c2a37413a14f11e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8a3d015c3048804b0c2a37413a14f11e">ast_get_context_name</a></div><div class="ttdeci">const char * ast_get_context_name(struct ast_context *con)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00421">ael_main.c:421</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a18503b36b5eb83b128ab979b5ff241bf"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">dundi_mapping::lcontext</a></div><div class="ttdeci">char lcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">pbx_dundi.c:293</a></div></div>
<div class="ttc" id="pbx_8h_html_a15961c7507a97d62c0a07c3c01bdc369"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a15961c7507a97d62c0a07c3c01bdc369">ast_walk_contexts</a></div><div class="ttdeci">struct ast_context * ast_walk_contexts(struct ast_context *con)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00618">conf2ael.c:618</a></div></div>
<div class="ttc" id="pbx_8h_html_aa2c309331fff0a086ab8e216f803d546"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa2c309331fff0a086ab8e216f803d546">ast_rdlock_contexts</a></div><div class="ttdeci">int ast_rdlock_contexts(void)</div><div class="ttdoc">Read locks the context list. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08507">pbx.c:8507</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1614486640519c17b1affd653f6a86ba"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1614486640519c17b1affd653f6a86ba">reschedule_precache</a></div><div class="ttdeci">static void reschedule_precache(const char *number, const char *context, int expiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03937">pbx_dundi.c:3937</a></div></div>
<div class="ttc" id="pbx_8h_html_ae517a87b356aec60d5de4591ef94581b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a></div><div class="ttdeci">int ast_unlock_contexts(void)</div><div class="ttdoc">Unlocks contexts. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08512">pbx.c:8512</a></div></div>
<div class="ttc" id="pbx_8h_html_a6fb940c1fd9c74b9d573e0a91bb23697"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6fb940c1fd9c74b9d573e0a91bb23697">ast_get_extension_name</a></div><div class="ttdeci">const char * ast_get_extension_name(struct ast_exten *exten)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08548">pbx.c:8548</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="pbx_8h_html_abb024cdd19b5c3bab7734c9708f121b8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#abb024cdd19b5c3bab7734c9708f121b8">ast_walk_context_extensions</a></div><div class="ttdeci">struct ast_exten * ast_walk_context_extensions(struct ast_context *con, struct ast_exten *priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00427">ael_main.c:427</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__context_html"><div class="ttname"><a href="../../d6/d7c/structast__context.html">ast_context</a></div><div class="ttdoc">ast_context: An extension context - must remain in sync with fake_context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l00284">pbx.c:284</a></div></div>
<div class="ttc" id="pbx_8h_html_af1a624244a07626a8f70843005206c95"><div class="ttname"><a href="../../db/de0/pbx_8h.html#af1a624244a07626a8f70843005206c95">ast_rdlock_context</a></div><div class="ttdeci">int ast_rdlock_context(struct ast_context *con)</div><div class="ttdoc">Read locks a given context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08525">pbx.c:8525</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35ea53fa846aec2bfff4c07eb020c143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ea53fa846aec2bfff4c07eb020c143">&#9670;&nbsp;</a></span>dundi_precache_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_precache_internal </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoids</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">3996</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02989">ast_waitfor_n_fd()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">cancel_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00211">DUNDI_FLUFF_TIME</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00212">DUNDI_TTL_TIME</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">dundi_request::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">MAX_RESULTS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">dundi_request::maxcount</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">optimize_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">dundi_request::pfds</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03536">precache_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03937">reschedule_precache()</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">dundi_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">str2tech()</a>.</p>
<div class="fragment"><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;{</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> dr2[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *maps = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *cur;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;   <span class="keywordtype">int</span> nummaps = 0;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   <span class="keywordtype">int</span> foundanswers;</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;   <span class="keywordtype">int</span> foundcache, skipped, ttlms, ms;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Precache internal (%s@%s)!\n&quot;</span>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;dcontext, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>))</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;         nummaps++;</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;   }</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;   <span class="keywordflow">if</span> (nummaps) {</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      maps = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(nummaps * <span class="keyword">sizeof</span>(*maps));</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;      nummaps = 0;</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;dcontext, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>))</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;            maps[nummaps++] = *cur;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;      }</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;   }</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;   <span class="keywordflow">if</span> (!nummaps) {</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;   }</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;   ttlms = <a class="code" href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a> + ttl * <a class="code" href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a>;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;   memset(&amp;dr2, 0, <span class="keyword">sizeof</span>(dr2));</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dr = dr2;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number));</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> ? <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> : <span class="stringliteral">&quot;e164&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext));</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.maxcount = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.hmd = &amp;hmd;</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0] = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1] = -1;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;   <span class="keywordflow">if</span> (pipe(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds) &lt; 0) {</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;pipe() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;   }</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, ttl, 0, &amp;foundcache, &amp;skipped, 0, 1, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, avoids, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0);</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;   foundanswers = 0;</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aad0a0688c98cfd4372386a75356f71fd">precache_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, maps, nummaps, &amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration, &amp;foundanswers);</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;   <span class="keywordflow">if</span> (foundanswers) {</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration &gt; 0)</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1614486640519c17b1affd653f6a86ba">reschedule_precache</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration);</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Weird, expiration = %d, but need to precache for %s@%s?!\n&quot;</span>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext);</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;   }</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.trans) &amp;&amp; (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start) &lt; ttlms)) {</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0] &gt; -1) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;         ms = 100;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds, 1, &amp;ms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;         usleep(1);</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;   }</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a24325d2346f0e082e206486c94fcc83b">cancel_request</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0] &gt; -1) {</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;      close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0]);</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;      close(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1]);</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;   }</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="dundi_8h_html_a556c4830d97d16b1fb7d224ad87bff8b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a></div><div class="ttdeci">#define DUNDI_FLUFF_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00211">dundi.h:211</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aad0a0688c98cfd4372386a75356f71fd"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aad0a0688c98cfd4372386a75356f71fd">precache_transactions</a></div><div class="ttdeci">static int precache_transactions(struct dundi_request *dr, struct dundi_mapping *maps, int mapcount, int *expiration, int *foundanswers)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03536">pbx_dundi.c:3536</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a24325d2346f0e082e206486c94fcc83b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a24325d2346f0e082e206486c94fcc83b">cancel_request</a></div><div class="ttdeci">static void cancel_request(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">pbx_dundi.c:3674</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a56819f90869d77808fd52f4d2693a75c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a></div><div class="ttdeci">int ast_waitfor_n_fd(int *fds, int n, int *ms, int *exception)</div><div class="ttdoc">Waits for input on an fd. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02989">channel.c:2989</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1614486640519c17b1affd653f6a86ba"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1614486640519c17b1affd653f6a86ba">reschedule_precache</a></div><div class="ttdeci">static void reschedule_precache(const char *number, const char *context, int expiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03937">pbx_dundi.c:3937</a></div></div>
<div class="ttc" id="dundi_8h_html_a60355312c3a3abcf306b78dc92486168"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a></div><div class="ttdeci">#define DUNDI_TTL_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00212">dundi.h:212</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a38669dd3d9e661107ae2aa06c7e0ec05"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a></div><div class="ttdeci">static int optimize_transactions(struct dundi_request *dr, int order)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">pbx_dundi.c:3584</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a92b3d0d6b935c050950f18b3436f371e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a></div><div class="ttdeci">static void build_transactions(struct dundi_request *dr, int ttl, int order, int *foundcache, int *skipped, int blockempty, int nocache, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int directs[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">pbx_dundi.c:3700</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a20eec8909d40dac530ad6a2e2c13fce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20eec8909d40dac530ad6a2e2c13fce1">&#9670;&nbsp;</a></span>dundi_precache_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* dundi_precache_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">721</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00173">ast_test_flag_nonstd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">dundi_query_state::called_number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00165">DUNDI_COMMAND_PRECACHERP</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">FLAG_DEAD</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st = data;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd = {0};</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Whee, precaching &#39;%s@%s&#39; for &#39;%s&#39;\n&quot;</span>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0] ? <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0]) :  <span class="stringliteral">&quot;ourselves&quot;</span>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="comment">/* Now produce precache */</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a35ea53fa846aec2bfff4c07eb020c143">dundi_precache_internal</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="comment">/* Truncate if &quot;don&#39;t ask&quot; isn&#39;t present */</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(&amp;hmd, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>))</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      hmd.<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>)) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Our transaction went away!\n&quot;</span>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, 0);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a4ebf3a8b5dae96ce75362607fe001c82"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">dundi_query_state::called_number</a></div><div class="ttdeci">char called_number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">pbx_dundi.c:548</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">dundi_hint_metadata::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">pbx_dundi.c:233</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a35ea53fa846aec2bfff4c07eb020c143"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a35ea53fa846aec2bfff4c07eb020c143">dundi_precache_internal</a></div><div class="ttdeci">static int dundi_precache_internal(const char *context, const char *number, int ttl, dundi_eid *avoids[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">pbx_dundi.c:3996</a></div></div>
<div class="ttc" id="dundi_8h_html_a6741aa56d1b7795e2c816627c9611854"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERP</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00165">dundi.h:165</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="utils_8h_html_aacbd52db1ede7a4c592037c8d6da7ded"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a></div><div class="ttdeci">#define ast_test_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00173">utils.h:173</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d5d3b39deac4dc26c71992c8f58c440"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d5d3b39deac4dc26c71992c8f58c440">&#9670;&nbsp;</a></span>dundi_prop_precache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_prop_precache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> *&#160;</td>
          <td class="paramname"><em>ies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ccontext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">940</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00030">dundi_ies::anscount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00028">dundi_ies::answers</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00180">ast_clear_flag_nonstd</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00563">ast_pthread_create_detached</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">cache_save()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">cache_save_hint()</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi_ies::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi_ies::called_number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">dundi_query_state::called_number</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00051">dundi_ies::cbypass</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00107">dundi_answer::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">dundi_mapping::dcontext</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">dundi_query_state::directs</a>, <a class="el" href="../../db/d68/tdd_8c_source.html#l00058">dr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00119">DUNDI_CAUSE_GENERAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00165">DUNDI_COMMAND_PRECACHERP</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi_ie_append_cause()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00191">DUNDI_IE_CAUSE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00103">dundi_answer::eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00230">dundi_result::eid</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00023">dundi_ies::eid_direct</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00231">dundi_result::eid_str</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi_ies::eidcount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi_ies::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00033">dundi_ies::expiration</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">dundi_request::expiration</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00105">dundi_answer::flags</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00226">dundi_result::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">dundi_hint_metadata::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">dundi_query_state::fluffy</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00029">dundi_ies::hint</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">dundi_query_state::maps</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">MAX_RESULTS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">dundi_request::maxcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00300">dundi_mapping::next</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">dundi_query_state::nocache</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">dundi_query_state::nummaps</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">dundi_request::pfds</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00104">dundi_answer::protocol</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00229">dundi_result::techint</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi_ies::ttl</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00106">dundi_answer::weight</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;{</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordtype">int</span> totallen;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keywordtype">int</span> x,z;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> dr2[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *cur;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordtype">int</span> mapcount;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keywordtype">int</span> skipfirst = 0;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   pthread_t lookupthread;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   memset(&amp;dr2, 0, <span class="keyword">sizeof</span>(dr2));</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="comment">/* Forge request structure to hold answers for cache */</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   hmd.flags = <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a> | <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dr = dr2;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.maxcount = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.hmd = &amp;hmd;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0] = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1] = -1;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> = &amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a> ? ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a> : <span class="stringliteral">&quot;e164&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext));</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.number));</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#aac54066a138108b1b5e88dc5dec61825">anscount</a>;x++) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a> &lt; trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">maxcount</a>) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;         <span class="comment">/* Make sure it&#39;s not already there */</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;         <span class="keywordflow">for</span> (z=0;z&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>;z++) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <span class="keywordflow">if</span> ((trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> == ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>) &amp;&amp;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                !strcmp(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, (<span class="keywordtype">char</span> *)ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">data</a>))</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;         }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;         <span class="keywordflow">if</span> (z == trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <span class="comment">/* Copy into parent responses */</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = ntohs(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = ntohs(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a> &gt; 0)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;               trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;               trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>,</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;               <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>),</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;               &amp;ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, (<span class="keywordtype">char</span> *)ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">data</a>,</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;               <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>));</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>),</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;               <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>));</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>++;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> &gt; ntohs(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>)) {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="comment">/* Update weight if appropriate */</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = ntohs(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Dropping excessive answers in precache for %s@%s\n&quot;</span>,</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <span class="comment">/* Save all the results (if any) we had.  Even if no results, still cache lookup. */</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a6c96fa5363a438a67eeb7138eb322581">cache_save</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>, 0, 0, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>, 1);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>)</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a00a7321e9d8e6299b270ba685cb69a8e">cache_save_hint</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   totallen = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a>);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="comment">/* Count matching map entries */</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   mapcount = 0;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, list) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, ccontext))</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         mapcount++;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="comment">/* If no maps, return -1 immediately */</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">if</span> (!mapcount)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> &gt; 1) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="comment">/* Since it is a requirement that the first EID is the authenticating host</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">         and the last EID is the root, it is permissible that the first and last EID</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">         could be the same.  In that case, we should go ahead copy only the &quot;root&quot; section</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">         since we will not need it for authentication. */</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0], ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - 1]))</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         skipfirst = 1;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="comment">/* Prepare to run a query and then propagate that as necessary */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   totallen += mapcount * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   totallen += (ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> - skipfirst) * <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a>);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   st = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, totallen);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">if</span> (st) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>));</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>, <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>));</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a> = trans;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> - 1;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">nocache</a> = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7d4799a6daae3d26e2089d55c67bc714">cbypass</a>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span> (st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &lt; 0)</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = 0;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      s = st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">fluffy</a>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">for</span> (x=skipfirst;ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];x++) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = (<a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *)s;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;         *st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x-skipfirst] = *ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[x];</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">directs</a>[x-skipfirst] = ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a4ee946ec6e6f8c026ef1bf0589a8759c">eid_direct</a>[x];</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         s += <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="comment">/* Append mappings */</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      x = 0;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a> = (<span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *)s;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, cur, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, ccontext)) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="keywordflow">if</span> (x &lt; mapcount) {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;               st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a>[x] = *cur;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;               st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">maps</a>[x].<a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>.<a class="code" href="../../df/d5b/structdundi__mapping.html#af3a4cf14210da3b3cda911b4c6d8cfd6">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;               x++;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;         }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">nummaps</a> = mapcount;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Forwarding precache for &#39;%s@%s&#39;!\n&quot;</span>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>, ies-&gt;<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 1;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a>(&amp;lookupthread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a20eec8909d40dac530ad6a2e2c13fce1">dundi_precache_thread</a>, st)) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create thread!\n&quot;</span>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of threads&quot;</span>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of memory!\n&quot;</span>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Out of memory&quot;</span>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dundi_mapping::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">pbx_dundi.c:292</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a4ebf3a8b5dae96ce75362607fe001c82"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">dundi_query_state::called_number</a></div><div class="ttdeci">char called_number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">pbx_dundi.c:548</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="utils_8h_html_a832647380b1f97e7ac1b4492f8816d46"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a832647380b1f97e7ac1b4492f8816d46">ast_pthread_create_detached</a></div><div class="ttdeci">#define ast_pthread_create_detached(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00563">utils.h:563</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="dundi_8h_html_a35971173ccd732aad75d4560bd4d4539"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a></div><div class="ttdeci">struct ast_eid dundi_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00032">dundi.h:32</a></div></div>
<div class="ttc" id="utils_8h_html_a2d48f8d71e91b61c5759edf70f71a168"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a></div><div class="ttdeci">#define ast_clear_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00180">utils.h:180</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="structdundi__ies_html_a062a9065a93f75dfe49b9e5eb3856578"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">dundi_ies::answers</a></div><div class="ttdeci">struct dundi_answer * answers[DUNDI_MAX_ANSWERS+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00028">dundi-parser.h:28</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a17bb3445f4dccbce032430ca91fbb6d2"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a17bb3445f4dccbce032430ca91fbb6d2">dundi_query_state::maps</a></div><div class="ttdeci">struct dundi_mapping * maps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00549">pbx_dundi.c:549</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="dundi_8h_html_a69a524e98fd92f87d531f634c6c60ec0"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a></div><div class="ttdeci">#define DUNDI_IE_CAUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00191">dundi.h:191</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="structdundi__request_html_a9cc14b8066538d5035977ead66a98867"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dundi_request::dr</a></div><div class="ttdeci">struct dundi_result * dr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">pbx_dundi.c:278</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__ies_html_a4ee946ec6e6f8c026ef1bf0589a8759c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a4ee946ec6e6f8c026ef1bf0589a8759c">dundi_ies::eid_direct</a></div><div class="ttdeci">int eid_direct[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00023">dundi-parser.h:23</a></div></div>
<div class="ttc" id="structdundi__ies_html_a7fcf5cf7f21e8f71a3e50c431fa18800"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">dundi_ies::called_number</a></div><div class="ttdeci">char * called_number</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi-parser.h:27</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="structdundi__ies_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_ies::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi-parser.h:22</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a33eed3b6e960e1a191d5a4f5a0fc8e42"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a33eed3b6e960e1a191d5a4f5a0fc8e42">dundi_query_state::fluffy</a></div><div class="ttdeci">char fluffy[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00556">pbx_dundi.c:556</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af3a4cf14210da3b3cda911b4c6d8cfd6"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af3a4cf14210da3b3cda911b4c6d8cfd6">dundi_mapping::next</a></div><div class="ttdeci">struct dundi_mapping * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00300">pbx_dundi.c:300</a></div></div>
<div class="ttc" id="structdundi__ies_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_ies::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi-parser.h:25</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__answer_html_a1cbb17ede73ea044a04a129bf4d86976"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#a1cbb17ede73ea044a04a129bf4d86976">dundi_answer::flags</a></div><div class="ttdeci">unsigned short flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00105">dundi.h:105</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a00a7321e9d8e6299b270ba685cb69a8e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a00a7321e9d8e6299b270ba685cb69a8e">cache_save_hint</a></div><div class="ttdeci">static int cache_save_hint(dundi_eid *eidpeer, struct dundi_request *req, struct dundi_hint *hint, int expiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">pbx_dundi.c:864</a></div></div>
<div class="ttc" id="structdundi__answer_html_aadf392350a5875d2442664803a0eadc9"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">dundi_answer::protocol</a></div><div class="ttdeci">unsigned char protocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00104">dundi.h:104</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="structdundi__result_html_a9f38c22f98ac1c23c8aece0e44de1fbb"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">dundi_result::tech</a></div><div class="ttdeci">char tech[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00232">dundi.h:232</a></div></div>
<div class="ttc" id="structdundi__result_html_a27e688430fbfa33f62807848a30a644b"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">dundi_result::eid_str</a></div><div class="ttdeci">char eid_str[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00231">dundi.h:231</a></div></div>
<div class="ttc" id="structdundi__result_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">dundi_result::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00228">dundi.h:228</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a9da18891df7680fc0b06c65fe138a328"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a9da18891df7680fc0b06c65fe138a328">dundi_query_state::nummaps</a></div><div class="ttdeci">int nummaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00550">pbx_dundi.c:550</a></div></div>
<div class="ttc" id="structdundi__ies_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">dundi_ies::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00033">dundi-parser.h:33</a></div></div>
<div class="ttc" id="structdundi__request_html_a528e51fddfc19d5bc9fe1de7685d613d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">dundi_request::maxcount</a></div><div class="ttdeci">int maxcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">pbx_dundi.c:281</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a494a54983c26432c53a57ba2589f7d54"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a494a54983c26432c53a57ba2589f7d54">dundi_query_state::nocache</a></div><div class="ttdeci">int nocache</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00551">pbx_dundi.c:551</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a96c148453f4cb387cfa116ff79477183"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a></div><div class="ttdeci">int dundi_ie_append_cause(struct dundi_ie_data *ied, unsigned char ie, unsigned char cause, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi-parser.c:499</a></div></div>
<div class="ttc" id="structdundi__ies_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_ies::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00031">dundi-parser.h:31</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="structdundi__result_html_a8361ea43bdb1990170b1de986c1ff898"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">dundi_result::techint</a></div><div class="ttdeci">int techint</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00229">dundi.h:229</a></div></div>
<div class="ttc" id="structdundi__ies_html_aac54066a138108b1b5e88dc5dec61825"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#aac54066a138108b1b5e88dc5dec61825">dundi_ies::anscount</a></div><div class="ttdeci">int anscount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00030">dundi-parser.h:30</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00119">dundi.h:119</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__result_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">dundi_result::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00230">dundi.h:230</a></div></div>
<div class="ttc" id="structdundi__answer_html_a6288d74be6b85a42be41a2cd779b8909"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">dundi_answer::weight</a></div><div class="ttdeci">unsigned short weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00106">dundi.h:106</a></div></div>
<div class="ttc" id="structdundi__ies_html_a3da3c62d7c7467fda1c782c92a44987c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">dundi_ies::called_context</a></div><div class="ttdeci">char * called_context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi-parser.h:26</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a1ff7fc424d272cd0fd48240a42236b1c"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a1ff7fc424d272cd0fd48240a42236b1c">dundi_query_state::directs</a></div><div class="ttdeci">int directs[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00545">pbx_dundi.c:545</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a20eec8909d40dac530ad6a2e2c13fce1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a20eec8909d40dac530ad6a2e2c13fce1">dundi_precache_thread</a></div><div class="ttdeci">static void * dundi_precache_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">pbx_dundi.c:721</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__request_html_a8ccda2f23985077bb0b624733a68216c"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">dundi_request::hmd</a></div><div class="ttdeci">struct dundi_hint_metadata * hmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">pbx_dundi.c:280</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="structdundi__result_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">dundi_result::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00226">dundi.h:226</a></div></div>
<div class="ttc" id="dundi_8h_html_a6741aa56d1b7795e2c816627c9611854"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERP</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00165">dundi.h:165</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structdundi__answer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">dundi_answer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00103">dundi.h:103</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a6c96fa5363a438a67eeb7138eb322581"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a6c96fa5363a438a67eeb7138eb322581">cache_save</a></div><div class="ttdeci">static int cache_save(dundi_eid *eidpeer, struct dundi_request *req, int start, int unaffected, int expiration, int push)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">pbx_dundi.c:899</a></div></div>
<div class="ttc" id="structdundi__ies_html_a7d4799a6daae3d26e2089d55c67bc714"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a7d4799a6daae3d26e2089d55c67bc714">dundi_ies::cbypass</a></div><div class="ttdeci">int cbypass</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00051">dundi-parser.h:51</a></div></div>
<div class="ttc" id="structdundi__ies_html_a9f04241acbef3b2e4d341d04972460f3"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">dundi_ies::hint</a></div><div class="ttdeci">struct dundi_hint * hint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00029">dundi-parser.h:29</a></div></div>
<div class="ttc" id="structdundi__answer_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">dundi_answer::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00107">dundi.h:107</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa668b9b6c15acbdd4c1532b127c8699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa668b9b6c15acbdd4c1532b127c8699">&#9670;&nbsp;</a></span>dundi_query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_query </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03503">3503</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">dundi_transaction::autokilltimeout</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">do_autokill()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00162">DUNDI_COMMAND_EIDQUERY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00217">DUNDI_DEFAULT_VERSION</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi_ie_append_str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00183">DUNDI_IE_CALLED_CONTEXT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00192">DUNDI_IE_REQEID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00187">DUNDI_IE_TTL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00188">DUNDI_IE_VERSION</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">dundi_transaction::eidcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">dundi_transaction::eids</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">dundi_request::query_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">dundi_transaction::ttl</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03571">query_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;{</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;   <span class="keywordflow">if</span> (!trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>) {</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Tried to query a transaction with no parent?!?\n&quot;</span>);</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   }</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a>);</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>))</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>;x++)</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[x]);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a75e765ebce689423cdc3f138203ad03e">DUNDI_IE_REQEID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">query_eid</a>);</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;   <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>)</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a>, trans);</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>, 0, 0, &amp;ied);</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;}</div><div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a3dfb0b5875c7ff57d45dfeb31bed78cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">dundi_transaction::autokilltimeout</a></div><div class="ttdeci">int autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">pbx_dundi.c:259</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7382e5e1f259570c8b9ce86ddc49a34b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">dundi_transaction::eids</a></div><div class="ttdeci">dundi_eid eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">pbx_dundi.c:248</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_transaction::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">pbx_dundi.c:255</a></div></div>
<div class="ttc" id="dundi_8h_html_a75e765ebce689423cdc3f138203ad03e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a75e765ebce689423cdc3f138203ad03e">DUNDI_IE_REQEID</a></div><div class="ttdeci">#define DUNDI_IE_REQEID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00192">dundi.h:192</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="dundi_8h_html_a12409dca54cd3a398637eaf5f0b23763"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a></div><div class="ttdeci">#define DUNDI_IE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00188">dundi.h:188</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_transaction::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">pbx_dundi.c:249</a></div></div>
<div class="ttc" id="structdundi__request_html_abfdf025b2390652ef651f1d671c26885"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">dundi_request::query_eid</a></div><div class="ttdeci">dundi_eid query_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">pbx_dundi.c:276</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab29df082de39c3bc9a3d3c82dd6922b9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a></div><div class="ttdeci">static int do_autokill(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">pbx_dundi.c:3380</a></div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a6bd01a676b7da7389e749536cd324a3d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a></div><div class="ttdeci">int dundi_ie_append_str(struct dundi_ie_data *ied, unsigned char ie, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi-parser.c:605</a></div></div>
<div class="ttc" id="dundi_8h_html_a6889e1b693ec9766d8503f547f8a2a7b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a></div><div class="ttdeci">#define DUNDI_IE_CALLED_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00183">dundi.h:183</a></div></div>
<div class="ttc" id="dundi_8h_html_a1c04d916688aa7257c4c0feca589b17d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a></div><div class="ttdeci">#define DUNDI_DEFAULT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00217">dundi.h:217</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="dundi_8h_html_a6ee2959f73b9bc37fc5823a58ae42f14"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDQUERY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00162">dundi.h:162</a></div></div>
<div class="ttc" id="dundi_8h_html_a5c75c71843182d780e0c539c8fcad9bc"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a></div><div class="ttdeci">#define DUNDI_IE_TTL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00187">dundi.h:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7d4d0ea507459ad46545ed807d75477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7d4d0ea507459ad46545ed807d75477">&#9670;&nbsp;</a></span>dundi_query_eid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_query_eid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> *&#160;</td>
          <td class="paramname"><em>dei</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a>&#160;</td>
          <td class="paramname"><em>eid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve information on a specific EID. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04121">4121</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02550">dundi_do_query()</a>.</p>
<div class="fragment"><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;{</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *avoid[1] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a60f0699f9f073c18ef3ec9a902494983">dundi_query_eid_internal</a>(dei, dcontext, &amp;eid, &amp;hmd, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a>, 0, avoid);</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a60f0699f9f073c18ef3ec9a902494983"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a60f0699f9f073c18ef3ec9a902494983">dundi_query_eid_internal</a></div><div class="ttdeci">static int dundi_query_eid_internal(struct dundi_entity_info *dei, const char *dcontext, dundi_eid *eid, struct dundi_hint_metadata *hmd, int ttl, int blockempty, dundi_eid *avoid[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">pbx_dundi.c:4074</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1ffcd4d21da49b299b25534bb7341cb1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a></div><div class="ttdeci">static int dundi_ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00194">pbx_dundi.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60f0699f9f073c18ef3ec9a902494983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60f0699f9f073c18ef3ec9a902494983">&#9670;&nbsp;</a></span>dundi_query_eid_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_query_eid_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> *&#160;</td>
          <td class="paramname"><em>dei</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dcontext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> *&#160;</td>
          <td class="paramname"><em>hmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockempty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>avoid</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">4074</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00176">ast_set_flag_nonstd</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00279">dundi_request::dei</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00211">DUNDI_FLUFF_TIME</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00090">DUNDI_HINT_TTL_EXPIRED</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00212">DUNDI_TTL_TIME</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">optimize_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00285">dundi_request::pfds</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">dundi_request::query_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03571">query_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04121">dundi_query_eid()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;{</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>;</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *rooteid=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;   <span class="keywordtype">int</span> ttlms;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;   <span class="keywordtype">int</span> skipped=0;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;   <span class="keywordtype">int</span> foundcache=0;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;   ttlms = <a class="code" href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a> + ttl * <a class="code" href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a>;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;   <span class="keywordflow">for</span> (x=0;avoid[x];x++)</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;      rooteid = avoid[x];</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;   <span class="comment">/* Now perform real check */</span></div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.hmd = hmd;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dei = dei;</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;   <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[0] = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.pfds[1] = -1;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext, dcontext ? dcontext : <span class="stringliteral">&quot;e164&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.dcontext));</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;   memcpy(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.query_eid, eid, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.query_eid));</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;   <span class="keywordflow">if</span> (rooteid)</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;      <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.root_eid = *rooteid;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;   <span class="comment">/* Create transactions */</span></div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, ttl, 9999, &amp;foundcache, &amp;skipped, blockempty, 0, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, avoid, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;   <span class="comment">/* If no TTL, abort and return 0 now after setting TTL expired hint.  Couldn&#39;t</span></div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;<span class="comment">      do this earlier because we didn&#39;t know if we were going to have transactions</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;<span class="comment">      or not. */</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;   <span class="keywordflow">if</span> (!ttl) {</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a>(hmd, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   }</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <span class="comment">/* Optimize transactions */</span></div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 9999);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   <span class="comment">/* Actually perform transactions */</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a598daaedb8f8db3e4ca84a59a6ea39e3">query_transactions</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>);</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;   <span class="comment">/* Wait for transaction to come back */</span></div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.trans) &amp;&amp; (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start) &lt; ttlms))</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;      usleep(1);</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;   res = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>.respcount;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="dundi_8h_html_a556c4830d97d16b1fb7d224ad87bff8b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a556c4830d97d16b1fb7d224ad87bff8b">DUNDI_FLUFF_TIME</a></div><div class="ttdeci">#define DUNDI_FLUFF_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00211">dundi.h:211</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00090">dundi.h:90</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a598daaedb8f8db3e4ca84a59a6ea39e3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a598daaedb8f8db3e4ca84a59a6ea39e3">query_transactions</a></div><div class="ttdeci">static int query_transactions(struct dundi_request *dr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03571">pbx_dundi.c:3571</a></div></div>
<div class="ttc" id="dundi_8h_html_a60355312c3a3abcf306b78dc92486168"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a60355312c3a3abcf306b78dc92486168">DUNDI_TTL_TIME</a></div><div class="ttdeci">#define DUNDI_TTL_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00212">dundi.h:212</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="utils_8h_html_a0c85a8ea758aa5fa64260d7b29af6564"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a></div><div class="ttdeci">#define ast_set_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00176">utils.h:176</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a38669dd3d9e661107ae2aa06c7e0ec05"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a38669dd3d9e661107ae2aa06c7e0ec05">optimize_transactions</a></div><div class="ttdeci">static int optimize_transactions(struct dundi_request *dr, int order)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">pbx_dundi.c:3584</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a92b3d0d6b935c050950f18b3436f371e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a92b3d0d6b935c050950f18b3436f371e">build_transactions</a></div><div class="ttdeci">static void build_transactions(struct dundi_request *dr, int ttl, int order, int *foundcache, int *skipped, int blockempty, int nocache, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int directs[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">pbx_dundi.c:3700</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9511a7918138f782acccfda40de9c1a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9511a7918138f782acccfda40de9c1a3">&#9670;&nbsp;</a></span>dundi_query_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_query_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">4215</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">ast_app_parse_options()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02390">ast_channel_datastore_add()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00089">ast_datastore_alloc</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04199">drds_destroy()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04135">dundi_query_opts</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04196">dundi_result_datastore::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04195">dundi_result_datastore::num_results</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04130">OPT_BYPASS_CACHE</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04194">dundi_result_datastore::results</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">sort_results()</a>.</p>
<div class="fragment"><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;{</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;   );</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opts = { 0, };</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a> *drds;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>)) {</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DUNDIQUERY requires an argument (number)\n&quot;</span>);</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;   }</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;DUNDIQUERY can not be used without a channel!\n&quot;</span>);</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;   }</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options))</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7b8a39990f294e5e38bb6df28c7fb5ad">dundi_query_opts</a>, &amp;opts, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options);</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context))</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;      <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;   <span class="keywordflow">if</span> (!(drds = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*drds)))) {</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;   }</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;   drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#ab7ce6f462afaf105224b0ca772a33c43">id</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7cb4d3a9c625fbabb40d50d2b53d797e">dundi_result_id</a>, 1);</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;   snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%u&quot;</span>, drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;   <span class="keywordflow">if</span> (!(datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a84980405c77a834de60d313f0642e824">dundi_result_datastore_info</a>, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>))) {</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2ca171329072b85f0d18b0df8f1d6e08">drds_destroy</a>(drds);</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;   }</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = drds;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;   drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a>(drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">results</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">results</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context,</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;      <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.number, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a>));</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;   <span class="keywordflow">if</span> (drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a> &gt; 0)</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a>(drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">results</a>, drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a>);</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55cb0bb945cb23bfd62b59095b1799ed"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a></div><div class="ttdeci">int dundi_lookup(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int cbypass)</div><div class="ttdoc">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspec...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">pbx_dundi.c:3926</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a77e5ad29e79bbb7ca62f5b007e14b6af"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a></div><div class="ttdeci">static void sort_results(struct dundi_result *results, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">pbx_dundi.c:2451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7cb4d3a9c625fbabb40d50d2b53d797e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7cb4d3a9c625fbabb40d50d2b53d797e">dundi_result_id</a></div><div class="ttdeci">static unsigned int dundi_result_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04191">pbx_dundi.c:4191</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a84980405c77a834de60d313f0642e824"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a84980405c77a834de60d313f0642e824">dundi_result_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info dundi_result_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04210">pbx_dundi.c:4210</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html_a78c88cb23904b3f7c569ba7710c6b68b"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">dundi_result_datastore::num_results</a></div><div class="ttdeci">int num_results</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04195">pbx_dundi.c:4195</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html#ab7ce6f462afaf105224b0ca772a33c43">dundi_result_datastore::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04196">pbx_dundi.c:4196</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html_a632c5c0b99ab05612b1a976448cc4366"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">dundi_result_datastore::results</a></div><div class="ttdeci">struct dundi_result results[MAX_RESULTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04194">pbx_dundi.c:4194</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04130">pbx_dundi.c:4130</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04193">pbx_dundi.c:4193</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7b8a39990f294e5e38bb6df28c7fb5ad"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7b8a39990f294e5e38bb6df28c7fb5ad">dundi_query_opts</a></div><div class="ttdeci">static const struct ast_app_option dundi_query_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04135">pbx_dundi.c:4135</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2ca171329072b85f0d18b0df8f1d6e08"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2ca171329072b85f0d18b0df8f1d6e08">drds_destroy</a></div><div class="ttdeci">static void drds_destroy(struct dundi_result_datastore *drds)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04199">pbx_dundi.c:4199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a861e22a5f9e4db07bc275f7084017794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a861e22a5f9e4db07bc275f7084017794">&#9670;&nbsp;</a></span>dundi_query_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* dundi_query_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">754</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">dundi_query_state::called_context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">dundi_query_state::called_number</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00237">dundi_entity_info::country</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00163">DUNDI_COMMAND_EIDRESPONSE</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi_ie_append_hint()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi_ie_append_str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00203">DUNDI_IE_COUNTRY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00199">DUNDI_IE_DEPARTMENT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00204">DUNDI_IE_EMAIL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00197">DUNDI_IE_HINT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00206">DUNDI_IE_IPADDR</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00201">DUNDI_IE_LOCALITY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00200">DUNDI_IE_ORGANIZATION</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00205">DUNDI_IE_PHONE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00202">DUNDI_IE_STATE_PROV</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">dundi_query_state::eids</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00242">dundi_entity_info::email</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">FLAG_DEAD</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">dundi_hint_metadata::flags</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00244">dundi_entity_info::ipaddr</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00239">dundi_entity_info::locality</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00240">dundi_entity_info::org</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00241">dundi_entity_info::orgunit</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00243">dundi_entity_info::phone</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00546">dundi_query_state::reqeid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00238">dundi_entity_info::stateprov</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">dundi_query_state::trans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">dundi_query_state::ttl</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">dundi_answer_entity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;{</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d78/structdundi__query__state.html">dundi_query_state</a> *st = data;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a> dei;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Whee, looking up &#39;%s@%s&#39; for &#39;%s&#39;\n&quot;</span>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">called_number</a>, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0] ? <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0]) :  <span class="stringliteral">&quot;ourselves&quot;</span>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   memset(&amp;dei, 0, <span class="keyword">sizeof</span>(dei));</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>, &amp;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">reqeid</a>)) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="comment">/* Ooh, it&#39;s us! */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Neat, someone look for us!\n&quot;</span>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.orgunit, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a>, <span class="keyword">sizeof</span>(dei.orgunit));</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.org, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a>, <span class="keyword">sizeof</span>(dei.org));</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.locality, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a>, <span class="keyword">sizeof</span>(dei.locality));</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.stateprov, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a>, <span class="keyword">sizeof</span>(dei.stateprov));</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.country, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a>, <span class="keyword">sizeof</span>(dei.country));</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.email, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a>, <span class="keyword">sizeof</span>(dei.email));</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dei.phone, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a>, <span class="keyword">sizeof</span>(dei.phone));</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      res = 1;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="comment">/* If we do not have a canonical result, keep looking */</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a60f0699f9f073c18ef3ec9a902494983">dundi_query_eid_internal</a>(&amp;dei, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">called_context</a>, &amp;st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">reqeid</a>, &amp;hmd, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>, 1, st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>)) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Our transaction went away!\n&quot;</span>);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, 0);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5831650f25c96355b8ec2fd25aa467af">DUNDI_IE_DEPARTMENT</a>, dei.orgunit);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5bd4c1f9b20e5b7ebb222c8a2deec84a">DUNDI_IE_ORGANIZATION</a>, dei.org);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5f7e31bf51d360ae0dcb528c0eca2e26">DUNDI_IE_LOCALITY</a>, dei.locality);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#af853dd9b3c1b102f9bdbf646a4a25144">DUNDI_IE_STATE_PROV</a>, dei.stateprov);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a0cfdd232b47070ba1d87e33c4d716755">DUNDI_IE_COUNTRY</a>, dei.country);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#ad3b4b2c39840a47f1eed0bc17694232e">DUNDI_IE_EMAIL</a>, dei.email);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a75e3113d76c98bfa8c44dc8f7084d65c">DUNDI_IE_PHONE</a>, dei.phone);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dei.ipaddr))</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a4ee948b425a3fb99fdbac7e13b54d2f6">DUNDI_IE_IPADDR</a>, dei.ipaddr);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      }</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a>, hmd.flags, hmd.exten);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>, <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>, 0, 1, &amp;ied);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      st-&gt;<a class="code" href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">trans</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(st);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__query__state_html"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html">dundi_query_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00543">pbx_dundi.c:543</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a4ebf3a8b5dae96ce75362607fe001c82"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a4ebf3a8b5dae96ce75362607fe001c82">dundi_query_state::called_number</a></div><div class="ttdeci">char called_number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00548">pbx_dundi.c:548</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a41e968a3ec944a6d905765d9a44a286f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a></div><div class="ttdeci">static char locality[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00203">pbx_dundi.c:203</a></div></div>
<div class="ttc" id="dundi_8h_html_a4ee948b425a3fb99fdbac7e13b54d2f6"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a4ee948b425a3fb99fdbac7e13b54d2f6">DUNDI_IE_IPADDR</a></div><div class="ttdeci">#define DUNDI_IE_IPADDR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00206">dundi.h:206</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_query_state::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00544">pbx_dundi.c:544</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="structdundi__query__state_html_aa487d37d05b29e57701256b05e56366d"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#aa487d37d05b29e57701256b05e56366d">dundi_query_state::trans</a></div><div class="ttdeci">struct dundi_transaction * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00552">pbx_dundi.c:552</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aadd75c09e15efa9061997f033b3f224b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a></div><div class="ttdeci">static char email[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00206">pbx_dundi.c:206</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2483a4aba107ceb21350c25ef3e4e2be"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a></div><div class="ttdeci">static char phone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00207">pbx_dundi.c:207</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_query_state::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00555">pbx_dundi.c:555</a></div></div>
<div class="ttc" id="dundi_8h_html_ad3b4b2c39840a47f1eed0bc17694232e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ad3b4b2c39840a47f1eed0bc17694232e">DUNDI_IE_EMAIL</a></div><div class="ttdeci">#define DUNDI_IE_EMAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00204">dundi.h:204</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a62a02b1a6ca3a850e42a9d403afe72e0"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a62a02b1a6ca3a850e42a9d403afe72e0">dundi_query_state::reqeid</a></div><div class="ttdeci">dundi_eid reqeid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00546">pbx_dundi.c:546</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae5c2a5fbbbd31e67b0e86683717322e0"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a></div><div class="ttdeci">int dundi_ie_append_hint(struct dundi_ie_data *ied, unsigned char ie, unsigned short flags, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi-parser.c:518</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="dundi_8h_html_a5831650f25c96355b8ec2fd25aa467af"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5831650f25c96355b8ec2fd25aa467af">DUNDI_IE_DEPARTMENT</a></div><div class="ttdeci">#define DUNDI_IE_DEPARTMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00199">dundi.h:199</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dundi_8h_html_a5f7e31bf51d360ae0dcb528c0eca2e26"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5f7e31bf51d360ae0dcb528c0eca2e26">DUNDI_IE_LOCALITY</a></div><div class="ttdeci">#define DUNDI_IE_LOCALITY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00201">dundi.h:201</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a60f0699f9f073c18ef3ec9a902494983"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a60f0699f9f073c18ef3ec9a902494983">dundi_query_eid_internal</a></div><div class="ttdeci">static int dundi_query_eid_internal(struct dundi_entity_info *dei, const char *dcontext, dundi_eid *eid, struct dundi_hint_metadata *hmd, int ttl, int blockempty, dundi_eid *avoid[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">pbx_dundi.c:4074</a></div></div>
<div class="ttc" id="dundi_8h_html_a75e3113d76c98bfa8c44dc8f7084d65c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a75e3113d76c98bfa8c44dc8f7084d65c">DUNDI_IE_PHONE</a></div><div class="ttdeci">#define DUNDI_IE_PHONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00205">dundi.h:205</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a6bd01a676b7da7389e749536cd324a3d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a></div><div class="ttdeci">int dundi_ie_append_str(struct dundi_ie_data *ied, unsigned char ie, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi-parser.c:605</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a03e72b5f331070bc01418a74af199eb9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a></div><div class="ttdeci">static char country[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00205">pbx_dundi.c:205</a></div></div>
<div class="ttc" id="dundi_8h_html_a5bd4c1f9b20e5b7ebb222c8a2deec84a"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5bd4c1f9b20e5b7ebb222c8a2deec84a">DUNDI_IE_ORGANIZATION</a></div><div class="ttdeci">#define DUNDI_IE_ORGANIZATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00200">dundi.h:200</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="dundi_8h_html_a65865db706ab437ed5b3d4b03eae36b4"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a></div><div class="ttdeci">#define DUNDI_IE_HINT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00197">dundi.h:197</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__entity__info_html"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html">dundi_entity_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00236">dundi.h:236</a></div></div>
<div class="ttc" id="dundi_8h_html_ab763d07b3bd3339cbc50deb535e73462"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00163">dundi.h:163</a></div></div>
<div class="ttc" id="dundi_8h_html_af853dd9b3c1b102f9bdbf646a4a25144"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af853dd9b3c1b102f9bdbf646a4a25144">DUNDI_IE_STATE_PROV</a></div><div class="ttdeci">#define DUNDI_IE_STATE_PROV</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00202">dundi.h:202</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad51e32c16369e570e5b8eeac50679e74"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a></div><div class="ttdeci">static char org[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00202">pbx_dundi.c:202</a></div></div>
<div class="ttc" id="dundi_8h_html_a0cfdd232b47070ba1d87e33c4d716755"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a0cfdd232b47070ba1d87e33c4d716755">DUNDI_IE_COUNTRY</a></div><div class="ttdeci">#define DUNDI_IE_COUNTRY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00203">dundi.h:203</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__query__state_html_a0f49dba4dddb8fd657e031fb01b38c9e"><div class="ttname"><a href="../../de/d78/structdundi__query__state.html#a0f49dba4dddb8fd657e031fb01b38c9e">dundi_query_state::called_context</a></div><div class="ttdeci">char called_context[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00547">pbx_dundi.c:547</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae05dd1de1447814a60b19499c32f7189"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a></div><div class="ttdeci">static char dept[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00201">pbx_dundi.c:201</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac87afa7a52fa95a8c90ba8e1f61c6957"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a></div><div class="ttdeci">static char stateprov[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00204">pbx_dundi.c:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4c930f04099e30c67e243ad9519c184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c930f04099e30c67e243ad9519c184">&#9670;&nbsp;</a></span>dundi_reject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dundi_reject </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00455">455</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00036">dundi_hdr::dtrans</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00166">DUNDI_COMMAND_INVALID</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">dundi_xmit()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00037">dundi_hdr::iseqno</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00035">dundi_hdr::strans</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="keyword">struct </span>{</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> pack;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> hdr;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   } <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> trans;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="comment">/* Never respond to an INVALID with another INVALID */</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> == <a class="code" href="../../d2/d59/dundi_8h.html#aa245b81dab726abd797fd178a154fba7">DUNDI_COMMAND_INVALID</a>)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   memset(&amp;tmp, 0, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   memset(&amp;trans, 0, <span class="keyword">sizeof</span>(trans));</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;trans.addr, sin);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   tmp.hdr.strans = h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   tmp.hdr.dtrans = h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   tmp.hdr.iseqno = h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   tmp.hdr.oseqno = h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   tmp.hdr.cmdresp = <a class="code" href="../../d2/d59/dundi_8h.html#aa245b81dab726abd797fd178a154fba7">DUNDI_COMMAND_INVALID</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   tmp.hdr.cmdflags = 0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   tmp.pack.h = (<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *)tmp.pack.data;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   tmp.pack.datalen = <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   tmp.pack.parent = &amp;trans;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a>(&amp;tmp.pack);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div><div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__packet_html"><div class="ttname"><a href="../../db/de6/structdundi__packet.html">dundi_packet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00221">pbx_dundi.c:221</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_hdr::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00035">dundi.h:35</a></div></div>
<div class="ttc" id="dundi_8h_html_aa245b81dab726abd797fd178a154fba7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#aa245b81dab726abd797fd178a154fba7">DUNDI_COMMAND_INVALID</a></div><div class="ttdeci">#define DUNDI_COMMAND_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00166">dundi.h:166</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_hdr::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00036">dundi.h:36</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_hdr::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00037">dundi.h:37</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ace8a88fa5cd2092abe8be15682d04104"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a></div><div class="ttdeci">static int dundi_xmit(struct dundi_packet *pack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">pbx_dundi.c:3169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76be0d5e3c5e3de4c972f607fcce98d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76be0d5e3c5e3de4c972f607fcce98d0">&#9670;&nbsp;</a></span>dundi_result_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_result_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04279">4279</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02404">ast_channel_datastore_find()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/db6/datastore_8h_source.html#l00070">ast_datastore::data</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04195">dundi_result_datastore::num_results</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04194">dundi_result_datastore::results</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>.</p>
<div class="fragment"><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;{</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(resultnum);</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;   );</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a> *drds;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>)) {</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DUNDIRESULT requires an argument (id and resultnum)\n&quot;</span>);</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;   }</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;DUNDRESULT can not be used without a channel!\n&quot;</span>);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;   }</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.id)) {</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;A result ID must be provided to DUNDIRESULT\n&quot;</span>);</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;   }</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.resultnum)) {</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;A result number must be given to DUNDIRESULT!\n&quot;</span>);</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;   }</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a84980405c77a834de60d313f0642e824">dundi_result_datastore_info</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.id);</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No DUNDi results found for query ID &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.id);</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;   }</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   drds = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.resultnum, <span class="stringliteral">&quot;getnum&quot;</span>)) {</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%d&quot;</span>, drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a> &lt; 0 ? 0 : drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a>);</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;      res = 0;</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;   }</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;   <span class="keywordflow">if</span> (sscanf(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.resultnum, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;num) != 1) {</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid value &#39;%s&#39; for resultnum to DUNDIRESULT!\n&quot;</span>,</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.resultnum);</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;      <span class="keywordflow">goto</span> finish;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   }</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;   <span class="keywordflow">if</span> (num &amp;&amp; drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">num_results</a> &gt; 0 &amp;&amp; num &lt;= drds-&gt;num_results) {</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;      snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%s/%s&quot;</span>, drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">results</a>[num - 1].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>, drds-&gt;<a class="code" href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">results</a>[num - 1].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>);</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;      res = 0;</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Result number %u is not valid for DUNDi query results for ID %s!\n&quot;</span>, num, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.id);</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;finish:</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__result_html_a9f38c22f98ac1c23c8aece0e44de1fbb"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">dundi_result::tech</a></div><div class="ttdeci">char tech[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00232">dundi.h:232</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a84980405c77a834de60d313f0642e824"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a84980405c77a834de60d313f0642e824">dundi_result_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info dundi_result_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04210">pbx_dundi.c:4210</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html_a78c88cb23904b3f7c569ba7710c6b68b"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html#a78c88cb23904b3f7c569ba7710c6b68b">dundi_result_datastore::num_results</a></div><div class="ttdeci">int num_results</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04195">pbx_dundi.c:4195</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html_a632c5c0b99ab05612b1a976448cc4366"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html#a632c5c0b99ab05612b1a976448cc4366">dundi_result_datastore::results</a></div><div class="ttdeci">struct dundi_result results[MAX_RESULTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04194">pbx_dundi.c:4194</a></div></div>
<div class="ttc" id="structdundi__result__datastore_html"><div class="ttname"><a href="../../d0/dce/structdundi__result__datastore.html">dundi_result_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04193">pbx_dundi.c:4193</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2d2b34cb52152c8707d3e37c392f1eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d2b34cb52152c8707d3e37c392f1eb">&#9670;&nbsp;</a></span>dundi_rexmit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_rexmit </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03285">3285</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">dundi_xmit()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">FLAG_ISQUAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">dundi_packet::h</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">dundi_packet::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00227">dundi_packet::retrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">dundi_packet::retransid</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00035">dundi_hdr::strans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;{</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack = (<span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *)<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a>;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;   <span class="keywordflow">if</span> (pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a> &lt; 1) {</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">retransid</a> = -1;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a>)) {</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Max retries exceeded to host &#39;%s&#39; msg %d on call %d\n&quot;</span>,</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>), pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>, ntohs(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>));</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      }</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>, 1);</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      res = 0;</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      <span class="comment">/* Decrement retransmission, try again */</span></div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a>--;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a>(pack);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      res = 1;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   }</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;}</div><div class="ttc" id="structdundi__packet_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">dundi_packet::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">pbx_dundi.c:226</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">pbx_dundi.c:170</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__packet_html"><div class="ttname"><a href="../../db/de6/structdundi__packet.html">dundi_packet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00221">pbx_dundi.c:221</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__packet_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">dundi_packet::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">pbx_dundi.c:228</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_hdr::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00035">dundi.h:35</a></div></div>
<div class="ttc" id="structdundi__packet_html_a4ab21dd2375ec54e44ae4da973a3d4ca"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a4ab21dd2375ec54e44ae4da973a3d4ca">dundi_packet::retrans</a></div><div class="ttdeci">int retrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00227">pbx_dundi.c:227</a></div></div>
<div class="ttc" id="structdundi__packet_html_af5c22cc070f71937b86673f98977068f"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">dundi_packet::parent</a></div><div class="ttdeci">struct dundi_transaction * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">pbx_dundi.c:225</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__packet_html_aaa805b51d34468d4b2796ec731ff5f32"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">dundi_packet::h</a></div><div class="ttdeci">struct dundi_hdr * h</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">pbx_dundi.c:223</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ace8a88fa5cd2092abe8be15682d04104"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a></div><div class="ttdeci">static int dundi_xmit(struct dundi_packet *pack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">pbx_dundi.c:3169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b1b9cf4440fe9492c55ceda2bf85488"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1b9cf4440fe9492c55ceda2bf85488">&#9670;&nbsp;</a></span>dundi_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmdresp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>final</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *&#160;</td>
          <td class="paramname"><em>ied</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">3308</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">dundi_transaction::aseqno</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00040">dundi_hdr::cmdflags</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">dundi_packet::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">dundi_packet::datalen</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00036">dundi_hdr::dtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">dundi_transaction::dtrans</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00159">DUNDI_COMMAND_ACK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00160">DUNDI_COMMAND_DPDISCOVER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00161">DUNDI_COMMAND_DPRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00162">DUNDI_COMMAND_EIDQUERY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00163">DUNDI_COMMAND_EIDRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00157">DUNDI_COMMAND_FINAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00165">DUNDI_COMMAND_PRECACHERP</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00164">DUNDI_COMMAND_PRECACHERQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00169">DUNDI_COMMAND_REGREQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00170">DUNDI_COMMAND_REGRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00214">DUNDI_DEFAULT_RETRANS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">dundi_encrypt()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03285">dundi_rexmit()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi_showframe()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">dundi_xmit()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">FLAG_ENCRYPT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">FLAG_FINAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">dundi_packet::h</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00041">dundi_hdr::ies</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00868">if()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00037">dundi_hdr::iseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">dundi_transaction::iseqno</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">dundi_transaction::oseqno</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">dundi_packet::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00227">dundi_packet::retrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">dundi_packet::retransid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">dundi_transaction::retranstimer</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00035">dundi_hdr::strans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03674">cancel_request()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">do_register()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">dundi_ack()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">dundi_answer_entity()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">dundi_answer_query()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03413">dundi_discover()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03503">dundi_query()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">find_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;{</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *pack;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;   len = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../db/de6/structdundi__packet.html">dundi_packet</a>) + sizeof(struct <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>) + (ied ? ied-&gt;pos : 0);</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;   <span class="comment">/* Reserve enough space for encryption */</span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;   <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (ast_test_flag(trans, FLAG_ENCRYPT))</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      len += 384;</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;   pack = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, len);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;   <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (pack) {</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a> = (<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *)(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">retransid</a> = -1;</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> != <a class="code" href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a>) {</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;         pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">retransid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">retranstimer</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad2d2b34cb52152c8707d3e37c392f1eb">dundi_rexmit</a>, pack);</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;         pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#a4ab21dd2375ec54e44ae4da973a3d4ca">retrans</a> = <a class="code" href="../../d2/d59/dundi_8h.html#a8aa57f604b9983690f5dc712b5e3f93c">DUNDI_DEFAULT_RETRANS</a> - 1;</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">packets</a>, pack, <a class="code" href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">list</a>);</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      }</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a> = trans;</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a> = htons(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>);</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a> = htons(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a>);</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>;</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> = <a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a>;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <span class="keywordflow">if</span> (ied) {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;         memcpy(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">ies</a>, ied-&gt;<a class="code" href="../../d5/d52/structdundi__ie__data.html#a203bc912a9da55154461a2e3972ba74a">buf</a>, ied-&gt;<a class="code" href="../../d5/d52/structdundi__ie__data.html#a1910d262855b71da353ed0d07a6c7823">pos</a>);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;         pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> += ied-&gt;<a class="code" href="../../d5/d52/structdundi__ie__data.html#a1910d262855b71da353ed0d07a6c7823">pos</a>;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;      }</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">final</span>) {</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;         pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> |= <a class="code" href="../../d2/d59/dundi_8h.html#ae6be1996c67f738eea8639940ce33431">DUNDI_COMMAND_FINAL</a>;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a>);</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      }</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a47c5a3ec1f5b267c4f47628d8863cb90">cmdflags</a> = flags;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> != <a class="code" href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a>) {</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>++;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> % 256;</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      }</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;      <span class="comment">/* If we have their public key, encrypt */</span></div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>)) {</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;         <span class="keywordflow">switch</span>(<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a>) {</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a>:</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a>:</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a>:</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>:</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>:</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>:</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>:</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>:</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a>)</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a>(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>, 2, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;            res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4317178b7bd2751e99e5fbebe8ec0827">dundi_encrypt</a>(trans, pack);</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            res = 0;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         }</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;         res = 0;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;         res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a>(pack);</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Failed to send packet to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>));</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> == <a class="code" href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a>)</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pack);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;   }</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;}</div><div class="ttc" id="structdundi__packet_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a46343af77fad6544521746d18f85e84d">dundi_packet::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00226">pbx_dundi.c:226</a></div></div>
<div class="ttc" id="dundi_8h_html_a8aa57f604b9983690f5dc712b5e3f93c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8aa57f604b9983690f5dc712b5e3f93c">DUNDI_DEFAULT_RETRANS</a></div><div class="ttdeci">#define DUNDI_DEFAULT_RETRANS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00214">dundi.h:214</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a994263e05f34cf3e146bd54903b7a053"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">dundi_transaction::aseqno</a></div><div class="ttdeci">unsigned char aseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">pbx_dundi.c:265</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">pbx_dundi.c:169</a></div></div>
<div class="ttc" id="structdundi__ie__data_html_a1910d262855b71da353ed0d07a6c7823"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html#a1910d262855b71da353ed0d07a6c7823">dundi_ie_data::pos</a></div><div class="ttdeci">int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00055">dundi-parser.h:55</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__packet_html"><div class="ttname"><a href="../../db/de6/structdundi__packet.html">dundi_packet</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00221">pbx_dundi.c:221</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="dundi_8h_html_ac85ab82e2cf4b695997763bedbfa6c84"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a></div><div class="ttdeci">#define DUNDI_COMMAND_ACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00159">dundi.h:159</a></div></div>
<div class="ttc" id="structdundi__packet_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">dundi_packet::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">pbx_dundi.c:228</a></div></div>
<div class="ttc" id="structdundi__ie__data_html_a203bc912a9da55154461a2e3972ba74a"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html#a203bc912a9da55154461a2e3972ba74a">dundi_ie_data::buf</a></div><div class="ttdeci">unsigned char buf[8192]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00056">dundi-parser.h:56</a></div></div>
<div class="ttc" id="dundi_8h_html_a859251515ac9cfe1bee7e44a418aa825"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00161">dundi.h:161</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a47c5a3ec1f5b267c4f47628d8863cb90"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a47c5a3ec1f5b267c4f47628d8863cb90">dundi_hdr::cmdflags</a></div><div class="ttdeci">unsigned char cmdflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00040">dundi.h:40</a></div></div>
<div class="ttc" id="structdundi__packet_html_ae3365da6bcb5072291e8e85574d3c247"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ae3365da6bcb5072291e8e85574d3c247">dundi_packet::list</a></div><div class="ttdeci">struct dundi_packet::@436 list</div></div>
<div class="ttc" id="structdundi__transaction_html_ae08aaf3c8a51c3850a2d4e610f269496"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ae08aaf3c8a51c3850a2d4e610f269496">dundi_transaction::retranstimer</a></div><div class="ttdeci">int retranstimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00257">pbx_dundi.c:257</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a133182c480ff961451c2c0b685fc7087"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a133182c480ff961451c2c0b685fc7087">dundi_transaction::packets</a></div><div class="ttdeci">struct dundi_transaction::packetlist packets</div></div>
<div class="ttc" id="structdundi__hdr_html_a401a6190b88ef972e67575a2d95b2c32"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">dundi_hdr::ies</a></div><div class="ttdeci">unsigned char ies[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00041">dundi.h:41</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad2d2b34cb52152c8707d3e37c392f1eb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad2d2b34cb52152c8707d3e37c392f1eb">dundi_rexmit</a></div><div class="ttdeci">static int dundi_rexmit(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03285">pbx_dundi.c:3285</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">dundi_transaction::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">pbx_dundi.c:264</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_transaction::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">pbx_dundi.c:261</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_hdr::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00035">dundi.h:35</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__packet_html_a4ab21dd2375ec54e44ae4da973a3d4ca"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#a4ab21dd2375ec54e44ae4da973a3d4ca">dundi_packet::retrans</a></div><div class="ttdeci">int retrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00227">pbx_dundi.c:227</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a662a55bf97ad210f616b60d37ebbc4b2"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a></div><div class="ttdeci">void dundi_showframe(struct dundi_hdr *fhi, int rx, struct ast_sockaddr *sin, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi-parser.c:432</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="dundi_8h_html_a5f2488f361adc40331a6e424dbac3740"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00164">dundi.h:164</a></div></div>
<div class="ttc" id="dundi_8h_html_a6741aa56d1b7795e2c816627c9611854"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERP</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00165">dundi.h:165</a></div></div>
<div class="ttc" id="dundi_8h_html_af7dc06e9af2fe3294797d3ab2164bd2d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00169">dundi.h:169</a></div></div>
<div class="ttc" id="dundi_8h_html_ae6be1996c67f738eea8639940ce33431"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ae6be1996c67f738eea8639940ce33431">DUNDI_COMMAND_FINAL</a></div><div class="ttdeci">#define DUNDI_COMMAND_FINAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00157">dundi.h:157</a></div></div>
<div class="ttc" id="dundi_8h_html_ab763d07b3bd3339cbc50deb535e73462"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00163">dundi.h:163</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4317178b7bd2751e99e5fbebe8ec0827"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4317178b7bd2751e99e5fbebe8ec0827">dundi_encrypt</a></div><div class="ttdeci">static int dundi_encrypt(struct dundi_transaction *trans, struct dundi_packet *pack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">pbx_dundi.c:1428</a></div></div>
<div class="ttc" id="dundi_8h_html_a6ee2959f73b9bc37fc5823a58ae42f14"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDQUERY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00162">dundi.h:162</a></div></div>
<div class="ttc" id="dundi_8h_html_ab0f58d12ffc25b840e51340b6fec5ca1"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPDISCOVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00160">dundi.h:160</a></div></div>
<div class="ttc" id="structdundi__packet_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">dundi_packet::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">pbx_dundi.c:224</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_hdr::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00036">dundi.h:36</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_transaction::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">pbx_dundi.c:262</a></div></div>
<div class="ttc" id="structdundi__packet_html_af5c22cc070f71937b86673f98977068f"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">dundi_packet::parent</a></div><div class="ttdeci">struct dundi_transaction * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">pbx_dundi.c:225</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">pbx_dundi.c:171</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structdundi__packet_html_aaa805b51d34468d4b2796ec731ff5f32"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">dundi_packet::h</a></div><div class="ttdeci">struct dundi_hdr * h</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">pbx_dundi.c:223</a></div></div>
<div class="ttc" id="dundi_8h_html_af73b75a9a2ef40c6b1c999c53800b418"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00170">dundi.h:170</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_hdr::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00037">dundi.h:37</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ace8a88fa5cd2092abe8be15682d04104"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ace8a88fa5cd2092abe8be15682d04104">dundi_xmit</a></div><div class="ttdeci">static int dundi_xmit(struct dundi_packet *pack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">pbx_dundi.c:3169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2dd53ccaf8768700eff453ab3c375007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd53ccaf8768700eff453ab3c375007">&#9670;&nbsp;</a></span>dundi_set_debug()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_set_debug </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02304">2304</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;{</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi set debug {on|off}&quot;</span>;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;         <span class="stringliteral">&quot;Usage: dundi set debug {on|off}\n&quot;</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;         <span class="stringliteral">&quot;       Enables/Disables dumping of DUNDi packets for debugging purposes\n&quot;</span>;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> -1], <span class="stringliteral">&quot;on&quot;</span>, 2)) {</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a> = 1;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Debugging Enabled\n&quot;</span>);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a> = 0;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi Debugging Disabled\n&quot;</span>);</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;   }</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf9e2a8897efb16d6738d3d1d6e3b99f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf9e2a8897efb16d6738d3d1d6e3b99f">&#9670;&nbsp;</a></span>dundi_show_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_cache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">2955</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00034">ast_db_entry::data</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi_flags2str()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi_str_short_to_eid()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00200">ast_flags::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">weight</a>.</p>
<div class="fragment"><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;{</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-12.12s %-16.16s %-10.10s  %-18s %-7s %s\n&quot;</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-12.12s %-16.16s %6d sec  %-18s %-7d %s/%s (%s)\n&quot;</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *db_tree, *db_entry;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;   time_t ts, now;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> src_eid;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keywordtype">char</span> src_eid_str[20];</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;   <span class="keywordtype">int</span> expiry, tech, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;   <span class="keywordtype">char</span> fs[256];</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <span class="keywordtype">int</span> length;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;   <span class="keywordtype">char</span> *ptr, *term, *src, *<a class="code" href="../../d6/d49/structnumber.html">number</a>, *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, *dst;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show cache&quot;</span>;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="stringliteral">&quot;Usage: dundi show cache\n&quot;</span></div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      <span class="stringliteral">&quot;       Lists all DUNDi cache entries.\n&quot;</span>;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;   }</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   }</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   time(&amp;now);</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;   db_tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;Number&quot;</span>, <span class="stringliteral">&quot;Context&quot;</span>, <span class="stringliteral">&quot;Expiration&quot;</span>, <span class="stringliteral">&quot;From&quot;</span>, <span class="stringliteral">&quot;Weight&quot;</span>, <span class="stringliteral">&quot;Destination (Flags)&quot;</span>);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;   <span class="keywordflow">for</span> (db_entry = db_tree; db_entry; db_entry = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordtype">char</span> *rest;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      <span class="keywordflow">if</span> ((strncmp(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>, <span class="stringliteral">&quot;/dundi/cache/hint/&quot;</span>, 18) == 0) || <a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, &amp;ts, 0, &amp;length)) {</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;      }</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;      expiry = ts - now;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <span class="keywordflow">if</span> (expiry &lt;= 0) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;      }</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      ptr = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a> + <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;/dundi/cache&quot;</span>);</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;      strtok_r(ptr, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      number = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      context = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      ptr = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">if</span> (*ptr != <span class="charliteral">&#39;e&#39;</span>) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      }</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      ptr = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a> + length + 1;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      <span class="keywordflow">if</span> ((sscanf(ptr, <span class="stringliteral">&quot;%30u/%30d/%30d/%n&quot;</span>, &amp;(<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>.flags), &amp;weight, &amp;tech, &amp;length) != 3)) {</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      }</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      ptr += length;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      dst = ptr;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      term = strchr(ptr, <span class="charliteral">&#39;|&#39;</span>);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      <span class="keywordflow">if</span> (!term) {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      }</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;      <span class="comment">/* Ok, at this point we know we aren&#39;t going to skp the entry, so we go ahead and increment the count. */</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      cnt++;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      *term = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      src = strrchr(ptr, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;src_eid);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      <span class="keywordflow">if</span> (src) {</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;         *src = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;         src++;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a>(&amp;src_eid, src);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(src_eid_str, <span class="keyword">sizeof</span>(src_eid_str), &amp;src_eid);</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      }</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, number, context, expiry, src_eid_str, weight, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(tech), dst, <a class="code" href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a>(fs, <span class="keyword">sizeof</span>(fs), <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>.flags));</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;   }</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of entries: %d\n&quot;</span>, cnt);</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(db_tree);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1e452d6704b19892c14f47fe6e186b48"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a></div><div class="ttdeci">int dundi_str_short_to_eid(dundi_eid *eid, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi-parser.c:70</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae14237ec6afd0fcccd2de889720984e3"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a></div><div class="ttdeci">char * dundi_flags2str(char *buf, int bufsiz, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi-parser.c:246</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a48b0ef3d2b46a76736c69665bdab1d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48b0ef3d2b46a76736c69665bdab1d64">&#9670;&nbsp;</a></span>dundi_show_entityid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_entityid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02827">2827</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;{</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show entityid&quot;</span>;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show entityid\n&quot;</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;         <span class="stringliteral">&quot;       Displays the global entityid for this host.\n&quot;</span>;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   }</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   }</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a>);</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Global EID for this system is &#39;%s&#39;\n&quot;</span>, eid_str);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afc0636d6a53edfb41e1afdd3cf63a4ec"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a></div><div class="ttdeci">static dundi_eid global_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00198">pbx_dundi.c:198</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cd01603d0d75e3884d635f2080d3b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd01603d0d75e3884d635f2080d3b4a">&#9670;&nbsp;</a></span>dundi_show_hints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_hints </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03050">3050</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00034">ast_db_entry::data</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi_str_short_to_eid()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;{</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-12.12s %-16.16s %-10.10s  %-18s\n&quot;</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-12.12s %-16.16s %6d sec  %-18s\n&quot;</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *db_tree, *db_entry;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   time_t ts, now;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> src_eid;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   <span class="keywordtype">char</span> src_eid_str[20];</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   <span class="keywordtype">int</span> expiry;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   <span class="keywordtype">int</span> length;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;   <span class="keywordtype">char</span> *ptr, *src, *<a class="code" href="../../d6/d49/structnumber.html">number</a>, *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show hints&quot;</span>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show hints\n&quot;</span></div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;         <span class="stringliteral">&quot;       Lists all DUNDi &#39;DONTASK&#39; hints in the cache.\n&quot;</span>;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;   }</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   }</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;   time(&amp;now);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   db_tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<span class="stringliteral">&quot;dundi/cache/hint&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;Prefix&quot;</span>, <span class="stringliteral">&quot;Context&quot;</span>, <span class="stringliteral">&quot;Expiration&quot;</span>, <span class="stringliteral">&quot;From&quot;</span>);</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <span class="keywordflow">for</span> (db_entry = db_tree; db_entry; db_entry = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      <span class="keywordtype">char</span> *rest = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, &amp;ts, 0, &amp;length)) {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      }</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      expiry = ts - now;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      <span class="keywordflow">if</span> (expiry &lt;= 0) {</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;      }</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;      ptr = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a> + <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;/dundi/cache/hint&quot;</span>);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      src = strtok_r(ptr, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;      number = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      context = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      ptr = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;/&quot;</span>, &amp;rest);</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;      <span class="keywordflow">if</span> (*ptr != <span class="charliteral">&#39;e&#39;</span>) {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      }</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      cnt++;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a>(&amp;src_eid, src);</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(src_eid_str, <span class="keyword">sizeof</span>(src_eid_str), &amp;src_eid);</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, number, context, expiry, src_eid_str);</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;   }</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Number of entries: %d\n&quot;</span>, cnt);</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(db_tree);</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1e452d6704b19892c14f47fe6e186b48"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1e452d6704b19892c14f47fe6e186b48">dundi_str_short_to_eid</a></div><div class="ttdeci">int dundi_str_short_to_eid(dundi_eid *eid, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00070">dundi-parser.c:70</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a79daf921abc9d999844743abd4dcdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a79daf921abc9d999844743abd4dcdd">&#9670;&nbsp;</a></span>dundi_show_mappings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_mappings </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02883">2883</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">dundi_mapping::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">dundi_mapping::dest</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi_flags2str()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">get_mapping_weight()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">dundi_mapping::lcontext</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00438">map</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">dundi_mapping::options</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">dundi_mapping::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">weight</a>.</p>
<div class="fragment"><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;{</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-12.12s %-7.7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-12.12s %-7s %-12.12s %-10.10s %-5.5s %-25.25s\n&quot;</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="code" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;   <span class="keywordtype">char</span> fs[256];</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>[8];</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show mappings&quot;</span>;</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show mappings\n&quot;</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;         <span class="stringliteral">&quot;       Lists all known DUNDi mappings.\n&quot;</span>;</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;   }</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;DUNDi Cntxt&quot;</span>, <span class="stringliteral">&quot;Weight&quot;</span>, <span class="stringliteral">&quot;Local Cntxt&quot;</span>, <span class="stringliteral">&quot;Options&quot;</span>, <span class="stringliteral">&quot;Tech&quot;</span>, <span class="stringliteral">&quot;Destination&quot;</span>);</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, map, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      snprintf(weight, <span class="keyword">sizeof</span>(weight), <span class="stringliteral">&quot;%d&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a>(map, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, weight,</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>) ? <span class="stringliteral">&quot;&lt;none&gt;&quot;</span> : map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">lcontext</a>,</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a>(fs, <span class="keyword">sizeof</span>(fs), map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">options</a>), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">tech</a>), map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dest</a>);</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   }</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;}</div><div class="ttc" id="structdundi__mapping_html_a654f0683d109dbcbaae72ad430e7aede"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a654f0683d109dbcbaae72ad430e7aede">dundi_mapping::dest</a></div><div class="ttdeci">char dest[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00299">pbx_dundi.c:299</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af27d556683a4a28e6564618bcf00bec1">dundi_mapping::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00292">pbx_dundi.c:292</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a18503b36b5eb83b128ab979b5ff241bf"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a18503b36b5eb83b128ab979b5ff241bf">dundi_mapping::lcontext</a></div><div class="ttdeci">char lcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00293">pbx_dundi.c:293</a></div></div>
<div class="ttc" id="misdn__config_8c_html_a92a7399cbb76f6349df98d9432ad52c6"><div class="ttname"><a href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a></div><div class="ttdeci">static int * map</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00438">misdn_config.c:438</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a849fa981f121eb25a67e4e14392840ba"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a849fa981f121eb25a67e4e14392840ba">dundi_mapping::options</a></div><div class="ttdeci">int options</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00296">pbx_dundi.c:296</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab293c9ebc4be88ba25ffb8055c6b096e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab293c9ebc4be88ba25ffb8055c6b096e">get_mapping_weight</a></div><div class="ttdeci">static int get_mapping_weight(struct dundi_mapping *map, struct varshead *headp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">pbx_dundi.c:559</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a7c185f9a2f9294fce34f8a9429074ba0"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a7c185f9a2f9294fce34f8a9429074ba0">dundi_mapping::tech</a></div><div class="ttdeci">int tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00297">pbx_dundi.c:297</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae14237ec6afd0fcccd2de889720984e3"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae14237ec6afd0fcccd2de889720984e3">dundi_flags2str</a></div><div class="ttdeci">char * dundi_flags2str(char *buf, int bufsiz, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00246">dundi-parser.c:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade9c2e7de30a69c56baff738ea9efebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade9c2e7de30a69c56baff738ea9efebc">&#9670;&nbsp;</a></span>dundi_show_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">2621</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">permission::allow</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00331">ast_sockaddr_stringify_host()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">dundi_peer::avgms</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02417">complete_peer_helper()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">DUNDI_MODEL_INBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">DUNDI_MODEL_OUTBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02609">dundi_sockaddr_port()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">DUNDI_TIMING_HISTORY</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">dundi_peer::dynamic</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00162">ast_cli_args::line</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">dundi_peer::lookups</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">dundi_peer::lookuptimes</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">dundi_peer::model</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">model2str()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">permission::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d79/analys_8c_source.html#l00066">order</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">dundi_peer::order</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">dundi_peer::outkey</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">dundi_peer::registerid</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;{</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d4c/structpermission.html">permission</a> *p;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;   <span class="keywordtype">int</span> x, cnt;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show peer&quot;</span>;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show peer [peer]\n&quot;</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;         <span class="stringliteral">&quot;       Provide a detailed description of a specifid DUNDi peer.\n&quot;</span>;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a24d4d24945a872b73c09860610561aa6">complete_peer_helper</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>, 3);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   }</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   }</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>) {</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]))</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;   }</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <span class="keywordflow">if</span> (peer) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <span class="keywordflow">switch</span>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a>) {</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;         order = <span class="stringliteral">&quot;Primary&quot;</span>;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;         order = <span class="stringliteral">&quot;Secondary&quot;</span>;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;         order = <span class="stringliteral">&quot;Tertiary&quot;</span>;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;         order = <span class="stringliteral">&quot;Quartiary&quot;</span>;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;         order = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      }</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Peer:    %s\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Model:   %s\n&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a>));</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Order:   %s\n&quot;</span>, order);</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Host:    %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>) ? <span class="stringliteral">&quot;&lt;Unspecified&gt;&quot;</span> : <a class="code" href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Port:    %d\n&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Dynamic: %s\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a> ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Reg:     %s\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">registerid</a> &lt; 0 ? <span class="stringliteral">&quot;No&quot;</span> : <span class="stringliteral">&quot;Yes&quot;</span>);</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;In Key:  %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>) ? <span class="stringliteral">&quot;&lt;None&gt;&quot;</span> : peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Out Key: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>) ? <span class="stringliteral">&quot;&lt;None&gt;&quot;</span> : peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>))</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Include logic%s:\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; (IGNORED)&quot;</span>);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, p, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>)</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;-- %s %s\n&quot;</span>, p-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a> ? <span class="stringliteral">&quot;include&quot;</span> : <span class="stringliteral">&quot;do not include&quot;</span>, p-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>))</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Query logic%s:\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; (IGNORED)&quot;</span>);</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, p, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>)</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;-- %s %s\n&quot;</span>, p-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a> ? <span class="stringliteral">&quot;permit&quot;</span> : <span class="stringliteral">&quot;deny&quot;</span>, p-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      cnt = 0;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <span class="keywordflow">for</span> (x = 0;x &lt; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a>; x++) {</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;         <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x]) {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <span class="keywordflow">if</span> (!cnt)</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;               <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Last few query times:\n&quot;</span>);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;-- %d. %s (%d ms)\n&quot;</span>, x + 1, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">lookups</a>[x], peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">lookuptimes</a>[x]);</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;            cnt++;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;         }</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      }</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">if</span> (cnt)</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Average query time: %d ms\n&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a>);</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such peer &#39;%s&#39;\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a24d4d24945a872b73c09860610561aa6"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a24d4d24945a872b73c09860610561aa6">complete_peer_helper</a></div><div class="ttdeci">static char * complete_peer_helper(const char *line, const char *word, int pos, int state, int rpos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02417">pbx_dundi.c:2417</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__peer_html_a24b27f8cc02328781fef5fea81b9975b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a24b27f8cc02328781fef5fea81b9975b">dundi_peer::lookups</a></div><div class="ttdeci">char * lookups[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00327">pbx_dundi.c:327</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae4e2b63230359081bce0ba36029de761"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae4e2b63230359081bce0ba36029de761">DUNDI_TIMING_HISTORY</a></div><div class="ttdeci">#define DUNDI_TIMING_HISTORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00164">pbx_dundi.c:164</a></div></div>
<div class="ttc" id="structdundi__peer_html_acefbffbf7aea5d745d118d4c6b2502a9"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">dundi_peer::avgms</a></div><div class="ttdeci">int avgms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">pbx_dundi.c:328</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0ac6dcfff533378dbcf9a01b59617d36"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">dundi_peer::outkey</a></div><div class="ttdeci">char outkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">pbx_dundi.c:310</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0128fd3a4a9af8307c0f49da95624a6f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0128fd3a4a9af8307c0f49da95624a6f">dundi_peer::lookuptimes</a></div><div class="ttdeci">int lookuptimes[DUNDI_TIMING_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00326">pbx_dundi.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="structpermission_html"><div class="ttname"><a href="../../d4/d4c/structpermission.html">permission</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00215">pbx_dundi.c:215</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structdundi__peer_html_ae2293fc2bce6e3ab03af5890486537c5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ae2293fc2bce6e3ab03af5890486537c5">dundi_peer::registerid</a></div><div class="ttdeci">int registerid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00312">pbx_dundi.c:312</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="analys_8c_html_aed7ca058008dc3e5ee131e575abed285"><div class="ttname"><a href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a></div><div class="ttdeci">integer order</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d79/analys_8c_source.html#l00066">analys.c:66</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57b3a555fe31704b952f29a59f33bb81"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_INBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">pbx_dundi.c:159</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a953844be2ad76ca7702bcf556ed85a1b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a></div><div class="ttdeci">static uint16_t dundi_sockaddr_port(const struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02609">pbx_dundi.c:2609</a></div></div>
<div class="ttc" id="structdundi__peer_html_ac85d5511fdb8d162a7278bfb440ae420"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">dundi_peer::order</a></div><div class="ttdeci">int order</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">pbx_dundi.c:315</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structdundi__peer_html_a4dc82f49746246f8bf4f651b6dd27a7c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dundi_peer::dynamic</a></div><div class="ttdeci">unsigned int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">pbx_dundi.c:334</a></div></div>
<div class="ttc" id="structpermission_html_a02d58d2ab612ca353b4d94409ce9e6a7"><div class="ttname"><a href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">permission::allow</a></div><div class="ttdeci">int allow</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">pbx_dundi.c:217</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="structpermission_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">permission::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">pbx_dundi.c:218</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa6ff7731f29e08bc8019c6bdab908df8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_OUTBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">pbx_dundi.c:160</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afd6cf74d15be14fcc9d17aa2f2b5984b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a></div><div class="ttdeci">static char * model2str(int model)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">pbx_dundi.c:2403</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
<div class="ttc" id="netsock2_8h_html_a7803a01afa4404e275a2fac3c91bf7e8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_host(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only, suitable for a URL (with brack...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00331">netsock2.h:331</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a373b3d60373e1d20bd72cbe417f7e71d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373b3d60373e1d20bd72cbe417f7e71d">&#9670;&nbsp;</a></span>dundi_show_peers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_peers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">2697</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">dundi_peer::avgms</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02609">dundi_sockaddr_port()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02601">dundi_sockaddr_stringify_host()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">dundi_peer::dynamic</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">dundi_peer::model</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">model2str()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;{</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-20.20s %-41s     %-6.6s %-10.10s %-8.8s %-15.15s\n&quot;</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-20.20s %-41s %s %-6d %-10.10s %-8.8s %-15.15s\n&quot;</span></div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   <span class="keywordtype">int</span> registeredonly=0;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a>[20];</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;   <span class="keywordtype">int</span> online_peers = 0;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <span class="keywordtype">int</span> offline_peers = 0;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keywordtype">int</span> unmonitored_peers = 0;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <span class="keywordtype">int</span> total_peers = 0;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show peers [registered|include|exclude|begin]&quot;</span>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show peers [registered|include|exclude|begin]\n&quot;</span></div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;         <span class="stringliteral">&quot;       Lists all known DUNDi peers.\n&quot;</span></div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;         <span class="stringliteral">&quot;       If &#39;registered&#39; is present, only registered peers are shown.\n&quot;</span>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   }</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) &amp;&amp; (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) &amp;&amp; (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 5)) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;   }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <span class="keywordflow">if</span> ((a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4)) {</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;registered&quot;</span>)) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;         registeredonly = 1;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      }</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;   }</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;EID&quot;</span>, <span class="stringliteral">&quot;Host&quot;</span>, <span class="stringliteral">&quot;Port&quot;</span>, <span class="stringliteral">&quot;Model&quot;</span>, <span class="stringliteral">&quot;AvgTime&quot;</span>, <span class="stringliteral">&quot;Status&quot;</span>);</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>[64];</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <span class="keywordtype">int</span> print_line = -1;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordtype">char</span> srch[2000];</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;      total_peers++;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;      <span class="keywordflow">if</span> (registeredonly &amp;&amp; <a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      }</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) {</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;         <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &lt; 0) {</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            strcpy(status, <span class="stringliteral">&quot;UNREACHABLE&quot;</span>);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;            offline_peers++;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;         }</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt; peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a>) {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;            snprintf(status, <span class="keyword">sizeof</span>(status), <span class="stringliteral">&quot;LAGGED (%d ms)&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a>);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;            offline_peers++;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;         }</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a>) {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            snprintf(status, <span class="keyword">sizeof</span>(status), <span class="stringliteral">&quot;OK (%d ms)&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a>);</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            online_peers++;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;         }</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;            strcpy(status, <span class="stringliteral">&quot;UNKNOWN&quot;</span>);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;            offline_peers++;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;         }</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;         strcpy(status, <span class="stringliteral">&quot;Unmonitored&quot;</span>);</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;         unmonitored_peers++;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      }</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a>)</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;         snprintf(avgms, <span class="keyword">sizeof</span>(avgms), <span class="stringliteral">&quot;%d ms&quot;</span>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">avgms</a>);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;         strcpy(avgms, <span class="stringliteral">&quot;Unavail&quot;</span>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      snprintf(srch, <span class="keyword">sizeof</span>(srch), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str),</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;         &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad21a986f34179db2afb527a4e615ab3b">dundi_sockaddr_stringify_host</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;         peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a> ? <span class="stringliteral">&quot;(D)&quot;</span> : <span class="stringliteral">&quot;(S)&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a>), avgms, status);</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;                <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;                  <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3],<span class="stringliteral">&quot;include&quot;</span>) &amp;&amp; strstr(srch,a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4])) {</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;                        print_line = -1;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;                   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3],<span class="stringliteral">&quot;exclude&quot;</span>) &amp;&amp; !strstr(srch,a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4])) {</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;                        print_line = 1;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3],<span class="stringliteral">&quot;begin&quot;</span>) &amp;&amp; !strncasecmp(srch,a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4],strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]))) {</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                        print_line = -1;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;                   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                        print_line = 0;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                  }</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                }</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="keywordflow">if</span> (print_line) {</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>),</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad21a986f34179db2afb527a4e615ab3b">dundi_sockaddr_stringify_host</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a> ? <span class="stringliteral">&quot;(D)&quot;</span> : <span class="stringliteral">&quot;(S)&quot;</span>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a>), avgms, status);</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d dundi peers [%d online, %d offline, %d unmonitored]\n&quot;</span>, total_peers, online_peers, offline_peers, unmonitored_peers);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad21a986f34179db2afb527a4e615ab3b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad21a986f34179db2afb527a4e615ab3b">dundi_sockaddr_stringify_host</a></div><div class="ttdeci">static char * dundi_sockaddr_stringify_host(const struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02601">pbx_dundi.c:2601</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="structdundi__peer_html_acefbffbf7aea5d745d118d4c6b2502a9"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#acefbffbf7aea5d745d118d4c6b2502a9">dundi_peer::avgms</a></div><div class="ttdeci">int avgms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00328">pbx_dundi.c:328</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a953844be2ad76ca7702bcf556ed85a1b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a953844be2ad76ca7702bcf556ed85a1b">dundi_sockaddr_port</a></div><div class="ttdeci">static uint16_t dundi_sockaddr_port(const struct ast_sockaddr *addr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02609">pbx_dundi.c:2609</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structdundi__peer_html_a4dc82f49746246f8bf4f651b6dd27a7c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dundi_peer::dynamic</a></div><div class="ttdeci">unsigned int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">pbx_dundi.c:334</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afd6cf74d15be14fcc9d17aa2f2b5984b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afd6cf74d15be14fcc9d17aa2f2b5984b">model2str</a></div><div class="ttdeci">static char * model2str(int model)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">pbx_dundi.c:2403</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a377b303b370d288050d356fab7d06476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a377b303b370d288050d356fab7d06476">&#9670;&nbsp;</a></span>dundi_show_precache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_precache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02917">2917</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">dundi_precache_queue::context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">dundi_precache_queue::expiration</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">dundi_precache_queue::number</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;{</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-12.12s %-12.12s %-10.10s\n&quot;</span></div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-12.12s %-12.12s %02d:%02d:%02d\n&quot;</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a> *qe;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   <span class="keywordtype">int</span> h,m,s;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   time_t now;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show precache&quot;</span>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show precache\n&quot;</span></div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;         <span class="stringliteral">&quot;       Lists all known DUNDi scheduled precache updates.\n&quot;</span>;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   }</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;   }</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   time(&amp;now);</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;Number&quot;</span>, <span class="stringliteral">&quot;Context&quot;</span>, <span class="stringliteral">&quot;Expiration&quot;</span>);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>, qe, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      s = qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a> - now;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      h = s / 3600;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      s = s % 3600;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;      m = s / 60;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      s = s % 60;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">number</a>, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">context</a>, h,m,s);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   }</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;}</div><div class="ttc" id="structpcq_html"><div class="ttname"><a href="../../d2/dea/structpcq.html">pcq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00342">pbx_dundi.c:342</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a45d12bf06e2169381192166fe7b04025"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">dundi_precache_queue::expiration</a></div><div class="ttdeci">time_t expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">pbx_dundi.c:239</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a1f27749679e8054ef014a38569492895"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">dundi_precache_queue::context</a></div><div class="ttdeci">char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">pbx_dundi.c:238</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00236">pbx_dundi.c:236</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a3feeb7aaf324dd707cd59d3ff5a9bbf0"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">dundi_precache_queue::number</a></div><div class="ttdeci">char number[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">pbx_dundi.c:240</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_ac99530529053c5c6f5b554f4a4557c05"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">dundi_precache_queue::list</a></div><div class="ttdeci">struct dundi_precache_queue::@437 list</div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad991e44f3a6e04790f598f929fe1f626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad991e44f3a6e04790f598f929fe1f626">&#9670;&nbsp;</a></span>dundi_show_requests()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_requests </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02850">2850</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">dundi_request::maxcount</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;{</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-15s %-15s %-15s %-3.3s %-3.3s\n&quot;</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-15s %-15s %-15s %-3.3d %-3.3d\n&quot;</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *req;</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;   <span class="keywordtype">char</span> eidstr[20];</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show requests&quot;</span>;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show requests\n&quot;</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;         <span class="stringliteral">&quot;       Lists all known pending DUNDi requests.\n&quot;</span>;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;   }</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   }</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;Number&quot;</span>, <span class="stringliteral">&quot;Context&quot;</span>, <span class="stringliteral">&quot;Root&quot;</span>, <span class="stringliteral">&quot;Max&quot;</span>, <span class="stringliteral">&quot;Rsp&quot;</span>);</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d7b/structrequests.html">requests</a>, req, <a class="code" href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">list</a>) {</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>,</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>) ? <span class="stringliteral">&quot;&lt;unspecified&gt;&quot;</span> : <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eidstr, <span class="keyword">sizeof</span>(eidstr), &amp;req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>), req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">maxcount</a>, req-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>);</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   }</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structrequests_html"><div class="ttname"><a href="../../d2/d7b/structrequests.html">requests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00344">pbx_dundi.c:344</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structdundi__request_html_a528e51fddfc19d5bc9fe1de7685d613d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">dundi_request::maxcount</a></div><div class="ttdeci">int maxcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">pbx_dundi.c:281</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__request_html_ad20c7b361882199df8e25408dfa8d426"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">dundi_request::list</a></div><div class="ttdeci">struct dundi_request::@441 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf2b3b24a3bbbb90525e56d042235379"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf2b3b24a3bbbb90525e56d042235379">&#9670;&nbsp;</a></span>dundi_show_trans()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_show_trans </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02796">2796</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">dundi_transaction::aseqno</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00331">ast_sockaddr_stringify_host()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">dundi_transaction::dtrans</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">dundi_transaction::iseqno</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">dundi_transaction::oseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;{</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="preprocessor">#define FORMAT2 &quot;%-47s %-5.5s %-5.5s %-3.3s %-3.3s %-3.3s\n&quot;</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="preprocessor">#define FORMAT &quot;%-41s:%5d %-5.5d %-5.5d %-3.3d %-3.3d %-3.3d\n&quot;</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi show trans&quot;</span>;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;         <span class="stringliteral">&quot;Usage: dundi show trans\n&quot;</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;         <span class="stringliteral">&quot;       Lists all known DUNDi transactions.\n&quot;</span>;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;   }</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;   }</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a>, <span class="stringliteral">&quot;Remote&quot;</span>, <span class="stringliteral">&quot;Src&quot;</span>, <span class="stringliteral">&quot;Dst&quot;</span>, <span class="stringliteral">&quot;Tx&quot;</span>, <span class="stringliteral">&quot;Rx&quot;</span>, <span class="stringliteral">&quot;Ack&quot;</span>);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d4c/structalltrans.html">alltrans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">all</a>) {</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>),</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>), trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a>,</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a>);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;   }</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;<span class="preprocessor">#undef FORMAT2</span></div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;}</div><div class="ttc" id="structalltrans_html"><div class="ttname"><a href="../../d8/d4c/structalltrans.html">alltrans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00345">pbx_dundi.c:345</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a994263e05f34cf3e146bd54903b7a053"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">dundi_transaction::aseqno</a></div><div class="ttdeci">unsigned char aseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">pbx_dundi.c:265</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7d77356f8ec16caf97d548fef13899bd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a></div><div class="ttdeci">struct dundi_transaction::@439 all</div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">dundi_transaction::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">pbx_dundi.c:264</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_transaction::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">pbx_dundi.c:261</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_acfd58ce0ec836919236d7a1908494970"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#acfd58ce0ec836919236d7a1908494970">FORMAT2</a></div><div class="ttdeci">#define FORMAT2</div></div>
<div class="ttc" id="structdundi__transaction_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_transaction::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">pbx_dundi.c:262</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="netsock2_8h_html_a7803a01afa4404e275a2fac3c91bf7e8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_host(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only, suitable for a URL (with brack...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00331">netsock2.h:331</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a953844be2ad76ca7702bcf556ed85a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953844be2ad76ca7702bcf556ed85a1b">&#9670;&nbsp;</a></span>dundi_sockaddr_port()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t dundi_sockaddr_port </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02609">2609</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00521">ast_sockaddr_port</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>.</p>
<div class="fragment"><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;{</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment">    * Test to avoid a debug message complaining about addr</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment">    * not being an IPv4 or IPv6 address.</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr)) {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a>(addr);</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a51e2841175bf3ad58a4e11ad9fb2453f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a51e2841175bf3ad58a4e11ad9fb2453f">ast_sockaddr_port</a></div><div class="ttdeci">#define ast_sockaddr_port(addr)</div><div class="ttdoc">Get the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00521">netsock2.h:521</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad21a986f34179db2afb527a4e615ab3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad21a986f34179db2afb527a4e615ab3b">&#9670;&nbsp;</a></span>dundi_sockaddr_stringify_host()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_sockaddr_stringify_host </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02601">2601</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00331">ast_sockaddr_stringify_host()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>.</p>
<div class="fragment"><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;{</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr)) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(Unspecified)&quot;</span>;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   }</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a>(addr);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="netsock2_8h_html_a7803a01afa4404e275a2fac3c91bf7e8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_host(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only, suitable for a URL (with brack...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00331">netsock2.h:331</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a468a1553ee766ac19e6cc3a1f5404264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a468a1553ee766ac19e6cc3a1f5404264">&#9670;&nbsp;</a></span>dundi_store_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* dundi_store_history </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02330">2330</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;{</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;dundi store history {on|off}&quot;</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;         <span class="stringliteral">&quot;Usage: dundi store history {on|off}\n&quot;</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;         <span class="stringliteral">&quot;       Enables/Disables storing of DUNDi requests and times for debugging\n&quot;</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;         <span class="stringliteral">&quot;purposes\n&quot;</span>;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   }</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   }</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> -1], <span class="stringliteral">&quot;on&quot;</span>, 2)) {</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a> = 1;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi History Storage Enabled\n&quot;</span>);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a> = 0;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;DUNDi History Storage Disabled\n&quot;</span>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a65cd854e2d184b5038e9cbdec5feaee5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a></div><div class="ttdeci">static int global_storehistory</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00200">pbx_dundi.c:200</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace8a88fa5cd2092abe8be15682d04104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8a88fa5cd2092abe8be15682d04104">&#9670;&nbsp;</a></span>dundi_xmit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundi_xmit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/de6/structdundi__packet.html">dundi_packet</a> *&#160;</td>
          <td class="paramname"><em>pack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">3169</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">ast_sendto()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">dundi_packet::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">dundi_packet::datalen</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi_showframe()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">dundi_packet::h</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">dundi_packet::parent</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00455">dundi_reject()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03285">dundi_rexmit()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>.</p>
<div class="fragment"><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;{</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a>)</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a>(pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">h</a>, 0, &amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> &lt; 0) {</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      res = <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, 0, &amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;         res = <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, 0, &amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;         res = <a class="code" href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">data</a>, pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, 0, &amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      }</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;   }</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to transmit to &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;pack-&gt;<a class="code" href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">parent</a>-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   }</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;      res = 0;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a></div><div class="ttdeci">ssize_t ast_sendto(int sockfd, const void *buf, size_t len, int flags, const struct ast_sockaddr *dest_addr)</div><div class="ttdoc">Wrapper around sendto(2) that uses ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00614">netsock2.c:614</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="structdundi__packet_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aef5b927d15f11382bf5f276630c08287">dundi_packet::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00228">pbx_dundi.c:228</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a34d899b0c513443c533f0a04813aed58"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a></div><div class="ttdeci">static int netsocket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00186">pbx_dundi.c:186</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a662a55bf97ad210f616b60d37ebbc4b2"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a></div><div class="ttdeci">void dundi_showframe(struct dundi_hdr *fhi, int rx, struct ast_sockaddr *sin, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi-parser.c:432</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="structdundi__packet_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#ad67e07841d1233e596e6f822a3c81f6b">dundi_packet::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00224">pbx_dundi.c:224</a></div></div>
<div class="ttc" id="structdundi__packet_html_af5c22cc070f71937b86673f98977068f"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#af5c22cc070f71937b86673f98977068f">dundi_packet::parent</a></div><div class="ttdeci">struct dundi_transaction * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00225">pbx_dundi.c:225</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structdundi__packet_html_aaa805b51d34468d4b2796ec731ff5f32"><div class="ttname"><a href="../../db/de6/structdundi__packet.html#aaa805b51d34468d4b2796ec731ff5f32">dundi_packet::h</a></div><div class="ttdeci">struct dundi_hdr * h</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00223">pbx_dundi.c:223</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3a13b2041df3b5a35c2c9624e02eac56"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a></div><div class="ttdeci">static int netsocket2</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00187">pbx_dundi.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4694e2fb89bce1a662f7d1a9276c4ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4694e2fb89bce1a662f7d1a9276c4ac9">&#9670;&nbsp;</a></span>dundifunc_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dundifunc_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">4137</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">ast_app_parse_options()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00068">DUNDI_FLAG_EXISTS</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04135">dundi_query_opts</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04130">OPT_BYPASS_CACHE</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">sort_results()</a>.</p>
<div class="fragment"><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;{</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;   <span class="keywordtype">int</span> results;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;   );</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opts = { 0, };</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(num)) {</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;DUNDILOOKUP requires an argument (number)\n&quot;</span>);</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;   }</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(num);</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options)) {</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7b8a39990f294e5e38bb6df28c7fb5ad">dundi_query_opts</a>, &amp;opts, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options);</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;   }</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context)) {</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;   }</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;   results = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.context, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.number, <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a>));</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   <span class="keywordflow">if</span> (results &gt; 0) {</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, results);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; results; x++) {</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a> + x, <a class="code" href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a>)) {</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;            snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].tech, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].dest);</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;         }</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;      }</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;   }</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55cb0bb945cb23bfd62b59095b1799ed"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55cb0bb945cb23bfd62b59095b1799ed">dundi_lookup</a></div><div class="ttdeci">int dundi_lookup(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int cbypass)</div><div class="ttdoc">Lookup the given number in the given dundi context. Lookup number in a given dundi context (if unspec...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">pbx_dundi.c:3926</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a77e5ad29e79bbb7ca62f5b007e14b6af"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a77e5ad29e79bbb7ca62f5b007e14b6af">sort_results</a></div><div class="ttdeci">static void sort_results(struct dundi_result *results, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">pbx_dundi.c:2451</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi_8h_html_a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a07422cff4c3dd5075f91f87bd0e57ee7ac7164519ecbb244314ace6ccf7efed9b">DUNDI_FLAG_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00068">dundi.h:68</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04130">pbx_dundi.c:4130</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7b8a39990f294e5e38bb6df28c7fb5ad"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7b8a39990f294e5e38bb6df28c7fb5ad">dundi_query_opts</a></div><div class="ttdeci">static const struct ast_app_option dundi_query_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04135">pbx_dundi.c:4135</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0324ac09a265e30f033c6469b43936d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0324ac09a265e30f033c6469b43936d7">&#9670;&nbsp;</a></span>encrypt_memcpy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int encrypt_memcpy </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/da0/crypto_8h.html#a5bed29c6bfb9a6278d19a0a7ac5f6654">ast_aes_encrypt_key</a> *&#160;</td>
          <td class="paramname"><em>ecx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01373">1373</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00476">ast_aes_encrypt()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">dundi_encrypt()</a>.</p>
<div class="fragment"><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;{</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> curblock[16];</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   memcpy(curblock, iv, <span class="keyword">sizeof</span>(curblock));</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <span class="keywordflow">while</span>(<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &gt; 0) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;16;x++)</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;         curblock[x] ^= src[x];</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <a class="code" href="../../d7/dbb/res__crypto_8c.html#a0c6cc268ea19f87e827ff19a7c87b924">ast_aes_encrypt</a>(curblock, dst, ecx);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      memcpy(curblock, dst, <span class="keyword">sizeof</span>(curblock));</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      dst += 16;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      src += 16;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= 16;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;}</div><div class="ttc" id="res__crypto_8c_html_a0c6cc268ea19f87e827ff19a7c87b924"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a0c6cc268ea19f87e827ff19a7c87b924">ast_aes_encrypt</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_aes_encrypt(const unsigned char *in, unsigned char *out, const ast_aes_encrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00476">res_crypto.c:476</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3db75f1593a29fe97f086bbf4cf0dbfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db75f1593a29fe97f086bbf4cf0dbfe">&#9670;&nbsp;</a></span>find_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a>* find_peer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">515</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00352">any_peer</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">empty_eid</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">dundi_encrypt()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *cur = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">if</span> (!eid)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      eid = &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, cur, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;cur-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>,eid))</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keywordflow">if</span> (!cur &amp;&amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a>)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      cur = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">return</span> cur;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aca505bc5b6272f18385b9c7fe6829086"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a></div><div class="ttdeci">static struct dundi_peer * any_peer</div><div class="ttdoc">Wildcard peer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00352">pbx_dundi.c:352</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a></div><div class="ttdeci">static dundi_eid empty_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">pbx_dundi.c:212</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1848a1edf681275c04d028d85376ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1848a1edf681275c04d028d85376ac5">&#9670;&nbsp;</a></span>find_transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a>* find_transaction </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">412</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00036">dundi_hdr::dtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">dundi_transaction::dtrans</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00160">DUNDI_COMMAND_DPDISCOVER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00162">DUNDI_COMMAND_EIDQUERY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00172">DUNDI_COMMAND_ENCRYPT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00168">DUNDI_COMMAND_NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00164">DUNDI_COMMAND_PRECACHERQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00169">DUNDI_COMMAND_REGREQ</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00254">dundi_transaction::flags</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00035">dundi_hdr::strans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="comment">/* Look for an exact match first */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d4c/structalltrans.html">alltrans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">all</a>) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, sin) &amp;&amp;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;         ((trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a> == (ntohs(hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a>) &amp; 32767)) <span class="comment">/* Matches our destination */</span> ||</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            ((trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a> == (ntohs(hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>) &amp; 32767)) &amp;&amp; (!hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a>))) <span class="comment">/* We match their destination */</span>) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;         <span class="keywordflow">if</span> (hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a> = ntohs(hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>) &amp; 32767;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <span class="keywordflow">return</span> trans;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <span class="keywordflow">switch</span>(hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x7f) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a>:</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>:</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>:</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a>:</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a>:</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a>:</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">if</span> (!hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="comment">/* Create new transaction */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">if</span> (!(trans = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, sin);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a> = ntohs(hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a>) &amp; 32767;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">return</span> trans;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div><div class="ttc" id="structalltrans_html"><div class="ttname"><a href="../../d8/d4c/structalltrans.html">alltrans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00345">pbx_dundi.c:345</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="dundi_8h_html_af78a65d1b49ef73bb2dfcd229f13cd44"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a></div><div class="ttdeci">#define DUNDI_COMMAND_ENCRYPT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00172">dundi.h:172</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7d77356f8ec16caf97d548fef13899bd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a></div><div class="ttdeci">struct dundi_transaction::@439 all</div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0d9126a95d6ea8069c84c94dbf166c7f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a></div><div class="ttdeci">static struct dundi_transaction * create_transaction(struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">pbx_dundi.c:3137</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_transaction::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">pbx_dundi.c:261</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_hdr::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00035">dundi.h:35</a></div></div>
<div class="ttc" id="dundi_8h_html_a5f2488f361adc40331a6e424dbac3740"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00164">dundi.h:164</a></div></div>
<div class="ttc" id="dundi_8h_html_af7dc06e9af2fe3294797d3ab2164bd2d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00169">dundi.h:169</a></div></div>
<div class="ttc" id="dundi_8h_html_a6ee2959f73b9bc37fc5823a58ae42f14"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDQUERY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00162">dundi.h:162</a></div></div>
<div class="ttc" id="dundi_8h_html_ab0f58d12ffc25b840e51340b6fec5ca1"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPDISCOVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00160">dundi.h:160</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_hdr::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00036">dundi.h:36</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="dundi_8h_html_a3719171d090354db16889cd52d0f3a28"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a></div><div class="ttdeci">#define DUNDI_COMMAND_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00168">dundi.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80b179d5eeff54725082d2f00e3cce44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b179d5eeff54725082d2f00e3cce44">&#9670;&nbsp;</a></span>get_ipaddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_ipaddress </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">4901</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00331">ast_sockaddr_stringify_host()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04915">set_host_ipaddr()</a>.</p>
<div class="fragment"><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;{</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addrs;</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, 0, family)) {</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;   }</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(ip, <a class="code" href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a>(&amp;addrs[0]), size);</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(addrs);</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="netsock2_8h_html_a7803a01afa4404e275a2fac3c91bf7e8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a7803a01afa4404e275a2fac3c91bf7e8">ast_sockaddr_stringify_host</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_host(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only, suitable for a URL (with brack...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00331">netsock2.h:331</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab293c9ebc4be88ba25ffb8055c6b096e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab293c9ebc4be88ba25ffb8055c6b096e">&#9670;&nbsp;</a></span>get_mapping_weight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_mapping_weight </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/de6/structvarshead.html">varshead</a> *&#160;</td>
          <td class="paramname"><em>headp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00559">559</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00294">dundi_mapping::_weight</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00157">MAX_WEIGHT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00211">pbx_substitute_variables_helper()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00840">pbx_substitute_variables_varshead()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">dundi_mapping::weightstr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02883">dundi_show_mappings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;{</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[32];</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   buf[0] = 0;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">weightstr</a>) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">if</span> (headp) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a2b3355625306d4b98ca8047cd2245459">pbx_substitute_variables_varshead</a>(headp, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">weightstr</a>, buf, <span class="keyword">sizeof</span>(buf) - 1);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#af5a13a9ab5aac5bb61e4f98ae7e8d296">pbx_substitute_variables_helper</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">weightstr</a>, buf, <span class="keyword">sizeof</span>(buf) - 1);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">if</span> (sscanf(buf, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a>) != 1)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;         map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a943995a7bf30da3587664920856533ab">MAX_WEIGHT</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">return</span> map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">_weight</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__mapping_html_ac9453cd045e480d6abf78f7724a075a4"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#ac9453cd045e480d6abf78f7724a075a4">dundi_mapping::_weight</a></div><div class="ttdeci">int _weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00294">pbx_dundi.c:294</a></div></div>
<div class="ttc" id="structdundi__mapping_html_a3bddf67ed9144cd4492f525bb1612816"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#a3bddf67ed9144cd4492f525bb1612816">dundi_mapping::weightstr</a></div><div class="ttdeci">char * weightstr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00295">pbx_dundi.c:295</a></div></div>
<div class="ttc" id="pbx_8h_html_af5a13a9ab5aac5bb61e4f98ae7e8d296"><div class="ttname"><a href="../../db/de0/pbx_8h.html#af5a13a9ab5aac5bb61e4f98ae7e8d296">pbx_substitute_variables_helper</a></div><div class="ttdeci">void pbx_substitute_variables_helper(struct ast_channel *c, const char *cp1, char *cp2, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00211">ael_main.c:211</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a943995a7bf30da3587664920856533ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a943995a7bf30da3587664920856533ab">MAX_WEIGHT</a></div><div class="ttdeci">#define MAX_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00157">pbx_dundi.c:157</a></div></div>
<div class="ttc" id="pbx_8h_html_a2b3355625306d4b98ca8047cd2245459"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2b3355625306d4b98ca8047cd2245459">pbx_substitute_variables_varshead</a></div><div class="ttdeci">void pbx_substitute_variables_varshead(struct varshead *headp, const char *cp1, char *cp2, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00840">pbx_variables.c:840</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b3f381e618f8d0be9a452878057b0f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3f381e618f8d0be9a452878057b0f9">&#9670;&nbsp;</a></span>get_trans_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_trans_id </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">480</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00499">reset_transaction()</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *t;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordtype">int</span> stid = (<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>() % 32766) + 1;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordtype">int</span> tid = stid;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d8/d4c/structalltrans.html">alltrans</a>, t, <a class="code" href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">all</a>) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a> == tid)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">if</span> (!t)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;         <span class="keywordflow">return</span> tid;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      tid = (tid % 32766) + 1;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   } <span class="keywordflow">while</span> (tid != stid);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="ttc" id="structalltrans_html"><div class="ttname"><a href="../../d8/d4c/structalltrans.html">alltrans</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00345">pbx_dundi.c:345</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7d77356f8ec16caf97d548fef13899bd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7d77356f8ec16caf97d548fef13899bd">dundi_transaction::all</a></div><div class="ttdeci">struct dundi_transaction::@439 all</div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3393a06c100c67e6c758efa48ab276d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3393a06c100c67e6c758efa48ab276d3">&#9670;&nbsp;</a></span>handle_command_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_command_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td>
          <td class="paramname"><em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datalen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>encrypted</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">1586</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">dundi_transaction::addr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00030">dundi_ies::anscount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00028">dundi_ies::answers</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">apply_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">dundi_transaction::aseqno</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00180">ast_clear_flag_nonstd</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00176">ast_set_flag_nonstd</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00173">ast_test_flag_nonstd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">cache_save()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">cache_save_hint()</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi_ies::called_context</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi_ies::called_number</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00036">dundi_ies::cause</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01492">check_key()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00237">dundi_entity_info::country</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00107">dundi_answer::data</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00112">dundi_hint::data</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">dundi_transaction::dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01545">deep_copy_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00199">default_expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00279">dundi_request::dei</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00233">dundi_result::dest</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03194">destroy_packet()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">do_register_expire()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">dundi_request::dr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">dundi_ack()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">dundi_answer_entity()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">dundi_answer_query()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00119">DUNDI_CAUSE_GENERAL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00123">DUNDI_CAUSE_NOAUTH</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00171">DUNDI_COMMAND_CANCEL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00160">DUNDI_COMMAND_DPDISCOVER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00161">DUNDI_COMMAND_DPRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00162">DUNDI_COMMAND_EIDQUERY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00163">DUNDI_COMMAND_EIDRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00173">DUNDI_COMMAND_ENCREJ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00172">DUNDI_COMMAND_ENCRYPT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00166">DUNDI_COMMAND_INVALID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00168">DUNDI_COMMAND_NULL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00165">DUNDI_COMMAND_PRECACHERP</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00164">DUNDI_COMMAND_PRECACHERQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00169">DUNDI_COMMAND_REGREQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00170">DUNDI_COMMAND_REGRESPONSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00167">DUNDI_COMMAND_UNKNOWN</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01406">dundi_decrypt()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi_eid_to_str_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00092">DUNDI_HINT_DONT_ASK</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00090">DUNDI_HINT_TTL_EXPIRED</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00094">DUNDI_HINT_UNAFFECTED</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00615">dundi_ie_append_byte()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi_ie_append_cause()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00539">dundi_ie_append_encdata()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00484">dundi_ie_append_raw()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00191">DUNDI_IE_CAUSE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00193">DUNDI_IE_ENCDATA</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00189">DUNDI_IE_EXPIRATION</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00194">DUNDI_IE_SHAREDKEY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00195">DUNDI_IE_SIGNATURE</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00190">DUNDI_IE_UNKNOWN</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">DUNDI_MODEL_INBOUND</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00635">dundi_parse_ies()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi_showframe()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">dundi_peer::dynamic</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00252">dundi_transaction::ecx</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00103">dundi_answer::eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00230">dundi_result::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00231">dundi_result::eid_str</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi_ies::eidcount</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi_ies::eids</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00242">dundi_entity_info::email</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00049">dundi_ies::encblock</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00099">dundi_encblock::encdata</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00050">dundi_ies::enclen</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00046">dundi_ies::encsharedkey</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00047">dundi_ies::encsig</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00033">dundi_ies::expiration</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">dundi_request::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">FLAG_ENCRYPT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">FLAG_SENDFULLKEY</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00105">dundi_answer::flags</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00226">dundi_result::flags</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">has_permission()</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00029">dundi_ies::hint</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">dundi_request::hmd</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00041">dundi_hdr::ies</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00244">dundi_entity_info::ipaddr</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">dundi_transaction::iseqno</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00098">dundi_encblock::iv</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00048">dundi_ies::keycrc32</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">dundi_transaction::lasttrans</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00239">dundi_entity_info::locality</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00155">MAX_PACKET_SIZE</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">dundi_request::maxcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">dundi_peer::model</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00240">dundi_entity_info::org</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00241">dundi_entity_info::orgunit</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">dundi_transaction::oseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">dundi_peer::pcmodel</a>, <a class="el" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00243">dundi_entity_info::phone</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00055">dundi_ie_data::pos</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00104">dundi_answer::protocol</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00041">dundi_ies::q_country</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00037">dundi_ies::q_dept</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00042">dundi_ies::q_email</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00044">dundi_ies::q_ipaddr</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00039">dundi_ies::q_locality</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00038">dundi_ies::q_org</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00043">dundi_ies::q_phone</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00040">dundi_ies::q_stateprov</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">qualify_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">dundi_request::query_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00499">reset_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">dundi_request::respcount</a>, <a class="el" href="../../db/d37/hsearch_8c_source.html#l00050">retval</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">dundi_peer::sentfullkey</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00238">dundi_entity_info::stateprov</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00232">dundi_result::tech</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">tech2str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00229">dundi_result::techint</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00323">dundi_peer::them_dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00322">dundi_peer::them_ecx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">dundi_peer::txenckey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">dundi_peer::us_eid</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00106">dundi_answer::weight</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>.</p>
<div class="fragment"><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;{</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="comment">/* Handle canonical command / response */</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="keywordtype">int</span> <span class="keyword">final</span> = hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x80;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keywordtype">int</span> cmd = hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x7f;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <span class="keywordtype">int</span> x,y,z;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keywordtype">int</span> resp;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keywordtype">int</span> authpass=0;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *bufcpy;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="preprocessor">#ifdef LOW_MEMORY</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *ied = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ied));</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> _ied = {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      .<a class="code" href="../../d5/d52/structdundi__ie__data.html#a1910d262855b71da353ed0d07a6c7823">pos</a> = 0,</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   };</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> *ied = &amp;_ied;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/dd1/structdundi__ies.html">dundi_ies</a> ies = {</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      .<a class="code" href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> = 0,</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   };</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <span class="keywordtype">char</span> eid_str2[20];</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a> = -1;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="keywordflow">if</span> (!ied) {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keywordflow">if</span> (datalen) {</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      bufcpy = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(datalen);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="comment">/* Make a copy for parsing */</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      memcpy(bufcpy, hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">ies</a>, datalen);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Got canonical message %d (%d), %d bytes data%s\n&quot;</span>, cmd, hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>, datalen, <span class="keyword">final</span> ? <span class="stringliteral">&quot; (Final)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d70/dundi-parser_8c.html#a45a935f7f805e9bef91db9091c6d1a18">dundi_parse_ies</a>(&amp;ies, bufcpy, datalen) &lt; 0) {</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to parse DUNDI information elements!\n&quot;</span>);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;         <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="keywordflow">switch</span>(cmd) {</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a>:</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>:</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>:</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">if</span> (cmd == <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>)</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;         resp = <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>)</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;         resp = <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;         resp = <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="comment">/* A dialplan or entity discover -- qualify by highest level entity */</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      peer = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0]);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <span class="keywordflow">if</span> (!peer) {</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;         <span class="keywordtype">int</span> hasauth = 0;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         <span class="keywordflow">if</span> (strlen(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>)) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            hasauth = encrypted;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            hasauth = 1;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;         <span class="keywordflow">if</span> (hasauth) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            <span class="comment">/* Okay we&#39;re authentiated and all, now we check if they&#39;re authorized */</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            <span class="keywordflow">if</span> (!ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>)</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;               ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a> = <span class="stringliteral">&quot;e164&quot;</span>;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;            <span class="keywordflow">if</span> (cmd == <a class="code" href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a>) {</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;               res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac6ca3f873e1d96ac438ed4bb525f4d7c">dundi_answer_entity</a>(trans, &amp;ies, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">called_number</a>)) {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                  <span class="comment">/* They&#39;re not permitted to access that context */</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                  <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a>, <span class="stringliteral">&quot;Invalid or missing number/entity&quot;</span>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                  <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((cmd == <a class="code" href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a>) &amp;&amp;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                          (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>) &amp;&amp;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                        <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">permit</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>)) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                  res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0a8f2863e7bbb20d19a0aff9cb38530f">dundi_answer_query</a>(trans, &amp;ies, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                  <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                     <span class="comment">/* There is no such dundi context */</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                     <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <span class="stringliteral">&quot;Unsupported DUNDI Context&quot;</span>);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                     <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                  }</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((cmd = <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>) &amp;&amp;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                          (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">pcmodel</a> &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>) &amp;&amp;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                        <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>)) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                  res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3d5d3b39deac4dc26c71992c8f58c440">dundi_prop_precache</a>(trans, &amp;ies, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">called_context</a>);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                  <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                     <span class="comment">/* There is no such dundi context */</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                     <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <span class="stringliteral">&quot;Unsupported DUNDI Context&quot;</span>);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                     <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                  }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                  <span class="comment">/* They&#39;re not permitted to access that context */</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                  <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <span class="stringliteral">&quot;Permission to context denied&quot;</span>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                  <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;               }</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            <span class="comment">/* They&#39;re not permitted to access that context */</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <span class="stringliteral">&quot;Unencrypted responses not permitted&quot;</span>);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, resp, 0, 1, ied);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;         }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      }</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a>:</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="comment">/* A register request -- should only have one entity */</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      peer = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0]);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="comment">/* if the peer is not found and we have a valid &#39;any_peer&#39; setting */</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a> &amp;&amp; peer == <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a>) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;         <span class="comment">/* copy any_peer into a new peer object */</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;         peer = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*peer));</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;         <span class="keywordflow">if</span> (peer) {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab5f3da6b901e2d721994302f61cf0a3f">deep_copy_peer</a>(peer, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            <span class="comment">/* set EID to remote EID */</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a> = *ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0];</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;         }</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      }</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">if</span> (!peer || !peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dynamic</a>) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a>, 0, 1, ied);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;         <span class="keywordtype">int</span> hasauth = 0;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>)) {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            hasauth = encrypted;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            hasauth = 1;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;         <span class="keywordflow">if</span> (hasauth) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <span class="keywordtype">int</span> expire = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordtype">int</span> needqual = 0;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a>);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, (expire + 10) * 1000, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46c4e2ca9ea70a4a84393ac806a5557a">do_register_expire</a>, peer);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            snprintf(data, <span class="keyword">sizeof</span>(data), <span class="stringliteral">&quot;%s:%d&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>), expire);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<span class="stringliteral">&quot;dundi/dpeers&quot;</span>, <a class="code" href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>), data);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>)) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Registered DUNDi peer &#39;%s&#39; at &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                  <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>),</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                  <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>));</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;               needqual = 1;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a>, 0, 1, ied);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="keywordflow">if</span> (needqual)</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a>(peer, 1);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;         }</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      }</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a>:</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="comment">/* A dialplan response, lets see what we got... */</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> &lt; 1) {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;         <span class="comment">/* Success of some sort */</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Looks like success of some sort (%d), %d answers\n&quot;</span>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aac54066a138108b1b5e88dc5dec61825">anscount</a>);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>)) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            authpass = encrypted;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            authpass = 1;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;         <span class="keywordflow">if</span> (authpass) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="comment">/* Pass back up answers */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> &amp;&amp; trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>) {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;               y = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;               <span class="keywordflow">for</span> (x=0;x&lt;ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aac54066a138108b1b5e88dc5dec61825">anscount</a>;x++) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                  <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a> &lt; trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">maxcount</a>) {</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                     <span class="comment">/* Make sure it&#39;s not already there */</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                     <span class="keywordflow">for</span> (z=0;z&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>;z++) {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                        <span class="keywordflow">if</span> ((trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> == ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>) &amp;&amp;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                            !strcmp(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, (<span class="keywordtype">char</span> *)ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">data</a>))</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                     }</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                     <span class="keywordflow">if</span> (z == trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                        <span class="comment">/* Copy into parent responses */</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = ntohs(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">techint</a> = ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = ntohs(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>);</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">eid</a> = ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                        <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a> &gt; 0)</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                           trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                           trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">expiration</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                        <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>,</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                           <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">eid_str</a>),</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                           &amp;ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                        <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>, (<span class="keywordtype">char</span> *)ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">data</a>,</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                           <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dest</a>));</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                        <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">protocol</a>),</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                           <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>].<a class="code" href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">tech</a>));</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>++;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                        <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> &gt; ntohs(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>)) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                        <span class="comment">/* Update weight if appropriate */</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dr</a>[z].<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> = ntohs(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">answers</a>[x]-&gt;<a class="code" href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">weight</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                     }</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                  } <span class="keywordflow">else</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Dropping excessive answers to request for %s@%s\n&quot;</span>,</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                        trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;               }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;               <span class="comment">/* Save all the results (if any) we had.  Even if no results, still cache lookup.  Let</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">                  the cache know if this request was unaffected by our entity list. */</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a6c96fa5363a438a67eeb7138eb322581">cache_save</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>, y,</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                     ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a> ? <a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a>)) : 0, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>, 0);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;               <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                  <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a00a7321e9d8e6299b270ba685cb69a8e">cache_save_hint</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>)))</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>))) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                     <span class="keywordflow">if</span> (strlen((<span class="keywordtype">char</span> *)ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>-&gt;<a class="code" href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">data</a>) &gt; strlen(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                        <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>, (<span class="keywordtype">char</span> *)ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>-&gt;<a class="code" href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">data</a>,</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                           <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>-&gt;<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                     }</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a>);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                  }</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;               }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;               <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a> &gt; 0) {</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                  <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#ad6057e40387509de502bdc91007d3238">expiration</a> &gt; ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                     trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#ad6057e40387509de502bdc91007d3238">expiration</a> = ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">expiration</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                  }</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;               }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            <span class="comment">/* Close connection if not final */</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            <span class="keywordflow">if</span> (!<span class="keyword">final</span>)</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         }</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;         <span class="comment">/* Auth failure, check for data */</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="comment">/* Cancel if they didn&#39;t already */</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;         }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a>:</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <span class="comment">/* A dialplan response, lets see what we got... */</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> &lt; 1) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;         <span class="comment">/* Success of some sort */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Looks like success of some sort (%d)\n&quot;</span>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>)) {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            authpass = encrypted;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            authpass = 1;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         <span class="keywordflow">if</span> (authpass) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="comment">/* Pass back up answers */</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a> &amp;&amp; trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a> &amp;&amp; ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a1fde4fc9eed23b4d2f0ae6c813512fea">q_org</a>) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;               <span class="keywordflow">if</span> (!trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>) {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                  trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">respcount</a>++;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ac74fd61612b41ab4b4f96b2e997924f8">q_dept</a>)</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a3d5fcd34d1cd21ee17813770ff6e8b12">orgunit</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ac74fd61612b41ab4b4f96b2e997924f8">q_dept</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a3d5fcd34d1cd21ee17813770ff6e8b12">orgunit</a>));</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a1fde4fc9eed23b4d2f0ae6c813512fea">q_org</a>)</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#ad51e32c16369e570e5b8eeac50679e74">org</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a1fde4fc9eed23b4d2f0ae6c813512fea">q_org</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#ad51e32c16369e570e5b8eeac50679e74">org</a>));</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a71ac0a39f7268eca21dd29a28b6f719e">q_locality</a>)</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a41e968a3ec944a6d905765d9a44a286f">locality</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a71ac0a39f7268eca21dd29a28b6f719e">q_locality</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a41e968a3ec944a6d905765d9a44a286f">locality</a>));</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad69dd2590cc2fa93917a6a10a7990b96">q_stateprov</a>)</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ad69dd2590cc2fa93917a6a10a7990b96">q_stateprov</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a>));</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a5b6b2db1a2523cf99922e9f8cd592cdb">q_country</a>)</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a03e72b5f331070bc01418a74af199eb9">country</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a5b6b2db1a2523cf99922e9f8cd592cdb">q_country</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a03e72b5f331070bc01418a74af199eb9">country</a>));</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ab452e3c0d8085aadcf4c1928704d8aec">q_email</a>)</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#aadd75c09e15efa9061997f033b3f224b">email</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ab452e3c0d8085aadcf4c1928704d8aec">q_email</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#aadd75c09e15efa9061997f033b3f224b">email</a>));</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a6a50380a4586b45f8a26f75fe7e5e603">q_phone</a>)</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a6a50380a4586b45f8a26f75fe7e5e603">q_phone</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a>));</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                  <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a75125f9e91fd0e993b743986e9a499fb">q_ipaddr</a>)</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a75125f9e91fd0e993b743986e9a499fb">q_ipaddr</a>, <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>));</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">query_eid</a>)) {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                     <span class="comment">/* If it&#39;s them, update our address */</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>, <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>), <span class="keyword">sizeof</span>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dei</a>-&gt;<a class="code" href="../../d3/d2f/structdundi__entity__info.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>));</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                  }</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;               }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;               <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">hint</a>, htons(<a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>)))</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                     <a class="code" href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a>(trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">hmd</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;               }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="comment">/* Close connection if not final */</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <span class="keywordflow">if</span> (!<span class="keyword">final</span>)</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;         }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;         <span class="comment">/* Auth failure, check for data */</span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;         <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            <span class="comment">/* Cancel if they didn&#39;t already */</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;         }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      }</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a>:</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      <span class="comment">/* A dialplan response, lets see what we got... */</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a> &lt; 1) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;         <span class="keywordtype">int</span> hasauth;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;         <span class="comment">/* Success of some sort */</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>)) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            hasauth = encrypted;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            hasauth = 1;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         <span class="keywordflow">if</span> (!hasauth) {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Reponse to register not authorized!\n&quot;</span>);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a>, <span class="stringliteral">&quot;Improper signature in answer&quot;</span>);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, ied);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;            }</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Yay, we&#39;ve registered as &#39;%s&#39; to &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>),</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                  <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str2, <span class="keyword">sizeof</span>(eid_str2), &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>));</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <span class="comment">/* Close connection if not final */</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <span class="keywordflow">if</span> (!<span class="keyword">final</span>)</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;         }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;         <span class="comment">/* Auth failure, cancel if they didn&#39;t for some reason */</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;         <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;         }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      }</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#aa245b81dab726abd797fd178a154fba7">DUNDI_COMMAND_INVALID</a>:</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a>:</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a>:</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="comment">/* Do nothing special */</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keywordflow">if</span> (!<span class="keyword">final</span>)</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a6bf82316cd259748d0c0409f880c8841">DUNDI_COMMAND_ENCREJ</a>:</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a>)) || <a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>) || !(peer = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>))) {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;         <span class="comment">/* No really, it&#39;s over at this point */</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;         <span class="keywordflow">if</span> (!<span class="keyword">final</span>)</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;         <span class="comment">/* Send with full key */</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a>);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;         <span class="keywordflow">if</span> (<span class="keyword">final</span>) {</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            <span class="comment">/* Ooops, we got a final message, start by sending ACK... */</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a>(trans, hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x80);</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            <span class="comment">/* Now, we gotta create a new transaction */</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a078fbd7bba90ea159959f6e3f5e03ec1">reset_transaction</a>(trans)) {</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;               <span class="comment">/* Make sure handle_frame doesn&#39;t destroy us */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;               hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp;= 0x7f;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;               <span class="comment">/* Parse the message we transmitted */</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;               memset(&amp;ies, 0, <span class="keyword">sizeof</span>(ies));</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a45a935f7f805e9bef91db9091c6d1a18">dundi_parse_ies</a>(&amp;ies, (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>))-&gt;h-&gt;ies, (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>))-&gt;datalen - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;               <span class="comment">/* Reconstruct outgoing encrypted packet */</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;               memset(ied, 0, <span class="keyword">sizeof</span>(*ied));</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8bc30c0748d02d6260317440381dcf81">DUNDI_IE_SHAREDKEY</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a>, 128);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;               <a class="code" href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5fa3e04f0ea13bd3d2fb421f9b011a33">DUNDI_IE_SIGNATURE</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a> + 128, 128);</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;               <span class="keywordflow">if</span> (ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">encblock</a>)</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                  <a class="code" href="../../df/d70/dundi-parser_8c.html#a0c1670003c707002bb0bc2e7e312d076">dundi_ie_append_encdata</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a311b8b502e115eec8c4ed106d9c1a267">DUNDI_IE_ENCDATA</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">encblock</a>-&gt;<a class="code" href="../../db/d17/structdundi__encblock.html#ad98f4396bf44e165dc76882a937b7ee8">iv</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">encblock</a>-&gt;<a class="code" href="../../db/d17/structdundi__encblock.html#ad9ab7eeac3aa2f817d0a4829c2adc5b5">encdata</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a5735b16d083ad4326a3c33cfa8ee3c82">enclen</a>);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a>, 0, (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>))-&gt;h-&gt;cmdresp &amp; 0x80, ied);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;               peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">sentfullkey</a> = 1;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      }</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a>:</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <span class="keywordflow">if</span> (!encrypted) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;         <span class="comment">/* No nested encryption! */</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         <span class="keywordflow">if</span> ((trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a> == 1) &amp;&amp; !trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <span class="keywordflow">if</span> (!ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0] || !(peer = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">eids</a>[0])) ||</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;               ((!ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a995b61b374290bffed4d4777586ce050">encsharedkey</a> || !ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ac378d493de258cbe1f2a82f8aedad439">encsig</a>) &amp;&amp; !ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a8fcc4f79c33c1f7a1375c90ca4ea349f">keycrc32</a>) ||</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;               (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a5157e2e1865868479d20a0271c6ca0d7">check_key</a>(peer, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a995b61b374290bffed4d4777586ce050">encsharedkey</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#ac378d493de258cbe1f2a82f8aedad439">encsig</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a8fcc4f79c33c1f7a1375c90ca4ea349f">keycrc32</a>) &lt; 1)) {</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;               <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                  <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a6bf82316cd259748d0c0409f880c8841">DUNDI_COMMAND_ENCREJ</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;               }</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0936612302fea7b97f58c4f196e9b45c">apply_peer</a>(trans, peer);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            <span class="comment">/* Key passed, use new contexts for this session */</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ae119b8bbe294cad12c32cd093eb81e4c">ecx</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeb217932c50cae865a598c17f1adab84">them_ecx</a>;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dcx</a> = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa68596ffd6ef6e312a0c68d2310da046">them_dcx</a>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;         }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>) &amp;&amp; ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">encblock</a> &amp;&amp; ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a5735b16d083ad4326a3c33cfa8ee3c82">enclen</a>) {</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *dhdr;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> decoded[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a879456c3b8e2853f7044d764e9c180d4">MAX_PACKET_SIZE</a>];</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            <span class="keywordtype">int</span> ddatalen;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            ddatalen = <span class="keyword">sizeof</span>(decoded);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            dhdr = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac86c4bc31fd8f916f4d988f70fef4d73">dundi_decrypt</a>(trans, decoded, &amp;ddatalen, hdr, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">encblock</a>, ies.<a class="code" href="../../d0/dd1/structdundi__ies.html#a5735b16d083ad4326a3c33cfa8ee3c82">enclen</a>);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            <span class="keywordflow">if</span> (dhdr) {</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;               <span class="comment">/* Handle decrypted response */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a>)</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                  <a class="code" href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a>(dhdr, 3, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">addr</a>, ddatalen - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3393a06c100c67e6c758efa48ab276d3">handle_command_response</a>(trans, dhdr, ddatalen - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>), 1);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;               <span class="comment">/* Carry back final flag */</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;               hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> |= dhdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x80;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ouch, decrypt failed :(\n&quot;</span>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;         }</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;         <span class="comment">/* Turn off encryption */</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a6bf82316cd259748d0c0409f880c8841">DUNDI_COMMAND_ENCREJ</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      }</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <span class="comment">/* Send unknown command if we don&#39;t know it, with final flag IFF it&#39;s the</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">         first command in the dialog and only if we haven&#39;t received final notification */</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="keywordflow">if</span> (!<span class="keyword">final</span>) {</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a24b0544fdb7059b55bbb1be9a5fd3552">dundi_ie_append_byte</a>(ied, <a class="code" href="../../d2/d59/dundi_8h.html#a92b63451b071304543805ec4232ee013">DUNDI_IE_UNKNOWN</a>, cmd);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#ad929f1700aa0436b41cc6d0c4f6dba0e">DUNDI_COMMAND_UNKNOWN</a>, 0, !hdr-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a>, ied);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   }</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;   retval = 0;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;return_cleanup:</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="preprocessor">#ifdef LOW_MEMORY</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ied);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0936612302fea7b97f58c4f196e9b45c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0936612302fea7b97f58c4f196e9b45c">apply_peer</a></div><div class="ttdeci">static void apply_peer(struct dundi_transaction *trans, struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">pbx_dundi.c:1295</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_a41e968a3ec944a6d905765d9a44a286f"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#a41e968a3ec944a6d905765d9a44a286f">dundi_entity_info::locality</a></div><div class="ttdeci">char locality[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00239">dundi.h:239</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_a2483a4aba107ceb21350c25ef3e4e2be"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#a2483a4aba107ceb21350c25ef3e4e2be">dundi_entity_info::phone</a></div><div class="ttdeci">char phone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00243">dundi.h:243</a></div></div>
<div class="ttc" id="dundi_8h_html_a602807c627c7a3183f382e729869ef5c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a></div><div class="ttdeci">#define DUNDI_IE_EXPIRATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00189">dundi.h:189</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_ad51e32c16369e570e5b8eeac50679e74"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#ad51e32c16369e570e5b8eeac50679e74">dundi_entity_info::org</a></div><div class="ttdeci">char org[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00240">dundi.h:240</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0a8f2863e7bbb20d19a0aff9cb38530f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0a8f2863e7bbb20d19a0aff9cb38530f">dundi_answer_query</a></div><div class="ttdeci">static int dundi_answer_query(struct dundi_transaction *trans, struct dundi_ies *ies, char *ccontext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">pbx_dundi.c:1087</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a994263e05f34cf3e146bd54903b7a053"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">dundi_transaction::aseqno</a></div><div class="ttdeci">unsigned char aseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">pbx_dundi.c:265</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a078fbd7bba90ea159959f6e3f5e03ec1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a078fbd7bba90ea159959f6e3f5e03ec1">reset_transaction</a></div><div class="ttdeci">static int reset_transaction(struct dundi_transaction *trans)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00499">pbx_dundi.c:499</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_a03e72b5f331070bc01418a74af199eb9"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#a03e72b5f331070bc01418a74af199eb9">dundi_entity_info::country</a></div><div class="ttdeci">char country[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00237">dundi.h:237</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ae119b8bbe294cad12c32cd093eb81e4c"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ae119b8bbe294cad12c32cd093eb81e4c">dundi_transaction::ecx</a></div><div class="ttdeci">ast_aes_encrypt_key ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00252">pbx_dundi.c:252</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="dundi_8h_html_a6bf82316cd259748d0c0409f880c8841"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6bf82316cd259748d0c0409f880c8841">DUNDI_COMMAND_ENCREJ</a></div><div class="ttdeci">#define DUNDI_COMMAND_ENCREJ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00173">dundi.h:173</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a46c4e2ca9ea70a4a84393ac806a5557a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a46c4e2ca9ea70a4a84393ac806a5557a">do_register_expire</a></div><div class="ttdeci">static int do_register_expire(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">pbx_dundi.c:1321</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_a3d5fcd34d1cd21ee17813770ff6e8b12"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#a3d5fcd34d1cd21ee17813770ff6e8b12">dundi_entity_info::orgunit</a></div><div class="ttdeci">char orgunit[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00241">dundi.h:241</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="structdundi__request_html_a68736f7bdee72c4b21aa191404728799"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a68736f7bdee72c4b21aa191404728799">dundi_request::dei</a></div><div class="ttdeci">struct dundi_entity_info * dei</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00279">pbx_dundi.c:279</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structdundi__encblock_html_ad9ab7eeac3aa2f817d0a4829c2adc5b5"><div class="ttname"><a href="../../db/d17/structdundi__encblock.html#ad9ab7eeac3aa2f817d0a4829c2adc5b5">dundi_encblock::encdata</a></div><div class="ttdeci">unsigned char encdata[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00099">dundi.h:99</a></div></div>
<div class="ttc" id="utils_8h_html_a2d48f8d71e91b61c5759edf70f71a168"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d48f8d71e91b61c5759edf70f71a168">ast_clear_flag_nonstd</a></div><div class="ttdeci">#define ast_clear_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00180">utils.h:180</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structdundi__ies_html_a062a9065a93f75dfe49b9e5eb3856578"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a062a9065a93f75dfe49b9e5eb3856578">dundi_ies::answers</a></div><div class="ttdeci">struct dundi_answer * answers[DUNDI_MAX_ANSWERS+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00028">dundi-parser.h:28</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a91531d6c5dc497077760c3892164a574"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a91531d6c5dc497077760c3892164a574">tech2str</a></div><div class="ttdeci">static char * tech2str(int tech)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">pbx_dundi.c:380</a></div></div>
<div class="ttc" id="structdundi__ies_html_a1fde4fc9eed23b4d2f0ae6c813512fea"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a1fde4fc9eed23b4d2f0ae6c813512fea">dundi_ies::q_org</a></div><div class="ttdeci">char * q_org</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00038">dundi-parser.h:38</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_abe4895c1ad7c3100e5566b3a9257f2e9"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#abe4895c1ad7c3100e5566b3a9257f2e9">dundi_entity_info::ipaddr</a></div><div class="ttdeci">char ipaddr[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00244">dundi.h:244</a></div></div>
<div class="ttc" id="dundi_8h_html_a8bc30c0748d02d6260317440381dcf81"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8bc30c0748d02d6260317440381dcf81">DUNDI_IE_SHAREDKEY</a></div><div class="ttdeci">#define DUNDI_IE_SHAREDKEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00194">dundi.h:194</a></div></div>
<div class="ttc" id="structdundi__ies_html_a71ac0a39f7268eca21dd29a28b6f719e"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a71ac0a39f7268eca21dd29a28b6f719e">dundi_ies::q_locality</a></div><div class="ttdeci">char * q_locality</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00039">dundi-parser.h:39</a></div></div>
<div class="ttc" id="structdundi__ie__data_html_a1910d262855b71da353ed0d07a6c7823"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html#a1910d262855b71da353ed0d07a6c7823">dundi_ie_data::pos</a></div><div class="ttdeci">int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00055">dundi-parser.h:55</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a5026ff3406256404f18b669e48b5b828"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a5026ff3406256404f18b669e48b5b828">dundi_eid_to_str_short</a></div><div class="ttdeci">char * dundi_eid_to_str_short(char *s, int maxlen, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00054">dundi-parser.c:54</a></div></div>
<div class="ttc" id="dundi_8h_html_a69a524e98fd92f87d531f634c6c60ec0"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a69a524e98fd92f87d531f634c6c60ec0">DUNDI_IE_CAUSE</a></div><div class="ttdeci">#define DUNDI_IE_CAUSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00191">dundi.h:191</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="structdundi__request_html_a9cc14b8066538d5035977ead66a98867"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a9cc14b8066538d5035977ead66a98867">dundi_request::dr</a></div><div class="ttdeci">struct dundi_result * dr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00278">pbx_dundi.c:278</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="structdundi__ies_html_a5735b16d083ad4326a3c33cfa8ee3c82"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a5735b16d083ad4326a3c33cfa8ee3c82">dundi_ies::enclen</a></div><div class="ttdeci">int enclen</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00050">dundi-parser.h:50</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab5f3da6b901e2d721994302f61cf0a3f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab5f3da6b901e2d721994302f61cf0a3f">deep_copy_peer</a></div><div class="ttdeci">static void deep_copy_peer(struct dundi_peer *peer_dst, const struct dundi_peer *peer_src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01545">pbx_dundi.c:1545</a></div></div>
<div class="ttc" id="structdundi__result_html_a0a914a2222f9615f1ccd631188cad015"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a0a914a2222f9615f1ccd631188cad015">dundi_result::dest</a></div><div class="ttdeci">char dest[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00233">dundi.h:233</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca765f06c7865e2789c9e1611b67da8e33">DUNDI_HINT_TTL_EXPIRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00090">dundi.h:90</a></div></div>
<div class="ttc" id="dundi_8h_html_af78a65d1b49ef73bb2dfcd229f13cd44"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af78a65d1b49ef73bb2dfcd229f13cd44">DUNDI_COMMAND_ENCRYPT</a></div><div class="ttdeci">#define DUNDI_COMMAND_ENCRYPT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00172">dundi.h:172</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structdundi__ies_html_a7fcf5cf7f21e8f71a3e50c431fa18800"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a7fcf5cf7f21e8f71a3e50c431fa18800">dundi_ies::called_number</a></div><div class="ttdeci">char * called_number</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00027">dundi-parser.h:27</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa4ffb3a85b70d6a69590f5059817d536"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa4ffb3a85b70d6a69590f5059817d536">qualify_peer</a></div><div class="ttdeci">static void qualify_peer(struct dundi_peer *peer, int schedonly)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">pbx_dundi.c:4565</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3d5d3b39deac4dc26c71992c8f58c440"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3d5d3b39deac4dc26c71992c8f58c440">dundi_prop_precache</a></div><div class="ttdeci">static int dundi_prop_precache(struct dundi_transaction *trans, struct dundi_ies *ies, char *ccontext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">pbx_dundi.c:940</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac86c4bc31fd8f916f4d988f70fef4d73"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac86c4bc31fd8f916f4d988f70fef4d73">dundi_decrypt</a></div><div class="ttdeci">static struct dundi_hdr * dundi_decrypt(struct dundi_transaction *trans, unsigned char *dst, int *dstlen, struct dundi_hdr *ohdr, struct dundi_encblock *src, int srclen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01406">pbx_dundi.c:1406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a718c14c132b44fde9c0d73d2bed31ed1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">dundi_transaction::lasttrans</a></div><div class="ttdeci">struct packetlist lasttrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">pbx_dundi.c:267</a></div></div>
<div class="ttc" id="netsock2_8h_html_abae1b903c8f5b7639235b579a267aaab"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a></div><div class="ttdeci">int ast_sockaddr_cmp(const struct ast_sockaddr *a, const struct ast_sockaddr *b)</div><div class="ttdoc">Compares two ast_sockaddr structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00388">netsock2.c:388</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__request_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#ad6057e40387509de502bdc91007d3238">dundi_request::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00283">pbx_dundi.c:283</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca7148873991298083a5b44298dd639ae7">DUNDI_HINT_UNAFFECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00094">dundi.h:94</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__ies_html_a5b6b2db1a2523cf99922e9f8cd592cdb"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a5b6b2db1a2523cf99922e9f8cd592cdb">dundi_ies::q_country</a></div><div class="ttdeci">char * q_country</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00041">dundi-parser.h:41</a></div></div>
<div class="ttc" id="structdundi__ies_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#aa4d0ccb9d0904892652f2f258c5ad225">dundi_ies::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00036">dundi-parser.h:36</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="structdundi__ies_html_a2a4da290eb8c2b2b4697ac4397e1ab09"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a2a4da290eb8c2b2b4697ac4397e1ab09">dundi_ies::eids</a></div><div class="ttdeci">dundi_eid * eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00022">dundi-parser.h:22</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structdundi__peer_html_aa68596ffd6ef6e312a0c68d2310da046"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aa68596ffd6ef6e312a0c68d2310da046">dundi_peer::them_dcx</a></div><div class="ttdeci">ast_aes_decrypt_key them_dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00323">pbx_dundi.c:323</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a13131254e3a2a3dc3796b1647ac09c00"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a13131254e3a2a3dc3796b1647ac09c00">dundi_ie_append_raw</a></div><div class="ttdeci">int dundi_ie_append_raw(struct dundi_ie_data *ied, unsigned char ie, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00484">dundi-parser.c:484</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4ee00d52d3fc2dd80292cf9cc337a500"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a></div><div class="ttdeci">static int has_permission(struct permissionlist *permlist, char *cont)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">pbx_dundi.c:367</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structdundi__hint_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../d3/d43/structdundi__hint.html#aef5b927d15f11382bf5f276630c08287">dundi_hint::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00112">dundi.h:112</a></div></div>
<div class="ttc" id="structdundi__ies_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_ies::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00025">dundi-parser.h:25</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dundi_8h_html_a859251515ac9cfe1bee7e44a418aa825"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a859251515ac9cfe1bee7e44a418aa825">DUNDI_COMMAND_DPRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00161">dundi.h:161</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi_8h_html_a92b63451b071304543805ec4232ee013"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a92b63451b071304543805ec4232ee013">DUNDI_IE_UNKNOWN</a></div><div class="ttdeci">#define DUNDI_IE_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00190">dundi.h:190</a></div></div>
<div class="ttc" id="structdundi__answer_html_a1cbb17ede73ea044a04a129bf4d86976"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#a1cbb17ede73ea044a04a129bf4d86976">dundi_answer::flags</a></div><div class="ttdeci">unsigned short flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00105">dundi.h:105</a></div></div>
<div class="ttc" id="dundi_8h_html_a5fa3e04f0ea13bd3d2fb421f9b011a33"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5fa3e04f0ea13bd3d2fb421f9b011a33">DUNDI_IE_SIGNATURE</a></div><div class="ttdeci">#define DUNDI_IE_SIGNATURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00195">dundi.h:195</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a00a7321e9d8e6299b270ba685cb69a8e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a00a7321e9d8e6299b270ba685cb69a8e">cache_save_hint</a></div><div class="ttdeci">static int cache_save_hint(dundi_eid *eidpeer, struct dundi_request *req, struct dundi_hint *hint, int expiration)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">pbx_dundi.c:864</a></div></div>
<div class="ttc" id="structdundi__answer_html_aadf392350a5875d2442664803a0eadc9"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#aadf392350a5875d2442664803a0eadc9">dundi_answer::protocol</a></div><div class="ttdeci">unsigned char protocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00104">dundi.h:104</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aca505bc5b6272f18385b9c7fe6829086"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a></div><div class="ttdeci">static struct dundi_peer * any_peer</div><div class="ttdoc">Wildcard peer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00352">pbx_dundi.c:352</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a0c1670003c707002bb0bc2e7e312d076"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a0c1670003c707002bb0bc2e7e312d076">dundi_ie_append_encdata</a></div><div class="ttdeci">int dundi_ie_append_encdata(struct dundi_ie_data *ied, unsigned char ie, unsigned char *iv, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00539">dundi-parser.c:539</a></div></div>
<div class="ttc" id="structdundi__ies_html_aef544896e3c2001eab11e87b6fa4ca0d"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#aef544896e3c2001eab11e87b6fa4ca0d">dundi_ies::encblock</a></div><div class="ttdeci">struct dundi_encblock * encblock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00049">dundi-parser.h:49</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3e8731a529465ec70537f7ed5f29c3ae">FLAG_SENDFULLKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00172">pbx_dundi.c:172</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57b3a555fe31704b952f29a59f33bb81"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_INBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">pbx_dundi.c:159</a></div></div>
<div class="ttc" id="structdundi__ies_html_a75125f9e91fd0e993b743986e9a499fb"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a75125f9e91fd0e993b743986e9a499fb">dundi_ies::q_ipaddr</a></div><div class="ttdeci">char * q_ipaddr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00044">dundi-parser.h:44</a></div></div>
<div class="ttc" id="structdundi__result_html_a9f38c22f98ac1c23c8aece0e44de1fbb"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a9f38c22f98ac1c23c8aece0e44de1fbb">dundi_result::tech</a></div><div class="ttdeci">char tech[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00232">dundi.h:232</a></div></div>
<div class="ttc" id="structdundi__ies_html_a8fcc4f79c33c1f7a1375c90ca4ea349f"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a8fcc4f79c33c1f7a1375c90ca4ea349f">dundi_ies::keycrc32</a></div><div class="ttdeci">unsigned long keycrc32</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00048">dundi-parser.h:48</a></div></div>
<div class="ttc" id="structdundi__request_html_abfdf025b2390652ef651f1d671c26885"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#abfdf025b2390652ef651f1d671c26885">dundi_request::query_eid</a></div><div class="ttdeci">dundi_eid query_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00276">pbx_dundi.c:276</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="structdundi__result_html_a27e688430fbfa33f62807848a30a644b"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a27e688430fbfa33f62807848a30a644b">dundi_result::eid_str</a></div><div class="ttdeci">char eid_str[20]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00231">dundi.h:231</a></div></div>
<div class="ttc" id="structdundi__peer_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a31a33b809b22cf537786cbd24287ac79">dundi_peer::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00308">pbx_dundi.c:308</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab25de026ecefe8c1afecdb329e37c195"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab25de026ecefe8c1afecdb329e37c195">default_expiration</a></div><div class="ttdeci">static int default_expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00199">pbx_dundi.c:199</a></div></div>
<div class="ttc" id="structdundi__result_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ad6057e40387509de502bdc91007d3238">dundi_result::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00228">dundi.h:228</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a401a6190b88ef972e67575a2d95b2c32"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a401a6190b88ef972e67575a2d95b2c32">dundi_hdr::ies</a></div><div class="ttdeci">unsigned char ies[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00041">dundi.h:41</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caae7e23bbf521d3281e7595f6ff88f6b8a">DUNDI_CAUSE_NOAUTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00123">dundi.h:123</a></div></div>
<div class="ttc" id="structdundi__ies_html_a995b61b374290bffed4d4777586ce050"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a995b61b374290bffed4d4777586ce050">dundi_ies::encsharedkey</a></div><div class="ttdeci">unsigned char * encsharedkey</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00046">dundi-parser.h:46</a></div></div>
<div class="ttc" id="structdundi__ies_html_ad6057e40387509de502bdc91007d3238"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ad6057e40387509de502bdc91007d3238">dundi_ies::expiration</a></div><div class="ttdeci">int expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00033">dundi-parser.h:33</a></div></div>
<div class="ttc" id="structdundi__peer_html_aeb217932c50cae865a598c17f1adab84"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aeb217932c50cae865a598c17f1adab84">dundi_peer::them_ecx</a></div><div class="ttdeci">ast_aes_encrypt_key them_ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00322">pbx_dundi.c:322</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structdundi__ies_html_ad69dd2590cc2fa93917a6a10a7990b96"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ad69dd2590cc2fa93917a6a10a7990b96">dundi_ies::q_stateprov</a></div><div class="ttdeci">char * q_stateprov</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00040">dundi-parser.h:40</a></div></div>
<div class="ttc" id="structdundi__request_html_a528e51fddfc19d5bc9fe1de7685d613d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a528e51fddfc19d5bc9fe1de7685d613d">dundi_request::maxcount</a></div><div class="ttdeci">int maxcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00281">pbx_dundi.c:281</a></div></div>
<div class="ttc" id="structdundi__peer_html_a4dc82f49746246f8bf4f651b6dd27a7c"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a4dc82f49746246f8bf4f651b6dd27a7c">dundi_peer::dynamic</a></div><div class="ttdeci">unsigned int dynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00334">pbx_dundi.c:334</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac6ca3f873e1d96ac438ed4bb525f4d7c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac6ca3f873e1d96ac438ed4bb525f4d7c">dundi_answer_entity</a></div><div class="ttdeci">static int dundi_answer_entity(struct dundi_transaction *trans, struct dundi_ies *ies, char *ccontext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">pbx_dundi.c:809</a></div></div>
<div class="ttc" id="dundi_8h_html_ad929f1700aa0436b41cc6d0c4f6dba0e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ad929f1700aa0436b41cc6d0c4f6dba0e">DUNDI_COMMAND_UNKNOWN</a></div><div class="ttdeci">#define DUNDI_COMMAND_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00167">dundi.h:167</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3db75f1593a29fe97f086bbf4cf0dbfe"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a></div><div class="ttdeci">static struct dundi_peer * find_peer(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">pbx_dundi.c:515</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a96c148453f4cb387cfa116ff79477183"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a96c148453f4cb387cfa116ff79477183">dundi_ie_append_cause</a></div><div class="ttdeci">int dundi_ie_append_cause(struct dundi_ie_data *ied, unsigned char ie, unsigned char cause, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00499">dundi-parser.c:499</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="structdundi__request_html_a6c3e1d01cab4e2830c24f74c47aa6453"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a6c3e1d01cab4e2830c24f74c47aa6453">dundi_request::respcount</a></div><div class="ttdeci">int respcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00282">pbx_dundi.c:282</a></div></div>
<div class="ttc" id="structdundi__ies_html_ac378d493de258cbe1f2a82f8aedad439"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ac378d493de258cbe1f2a82f8aedad439">dundi_ies::encsig</a></div><div class="ttdeci">unsigned char * encsig</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00047">dundi-parser.h:47</a></div></div>
<div class="ttc" id="structdundi__result_html_a8361ea43bdb1990170b1de986c1ff898"><div class="ttname"><a href="../../db/d96/structdundi__result.html#a8361ea43bdb1990170b1de986c1ff898">dundi_result::techint</a></div><div class="ttdeci">int techint</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00229">dundi.h:229</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">dundi_transaction::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">pbx_dundi.c:264</a></div></div>
<div class="ttc" id="structdundi__ies_html_aac54066a138108b1b5e88dc5dec61825"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#aac54066a138108b1b5e88dc5dec61825">dundi_ies::anscount</a></div><div class="ttdeci">int anscount</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00030">dundi-parser.h:30</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="dundi_8h_html_a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a191c33aa19f004f13bed2b7be33756caa9c0a6a7124740674b6f648b8cf5a0b1e">DUNDI_CAUSE_GENERAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00119">dundi.h:119</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="structdundi__result_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/d96/structdundi__result.html#afd034eb91830d2df033d799c2b5420ce">dundi_result::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00230">dundi.h:230</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a5157e2e1865868479d20a0271c6ca0d7"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a5157e2e1865868479d20a0271c6ca0d7">check_key</a></div><div class="ttdeci">static int check_key(struct dundi_peer *peer, unsigned char *newkey, unsigned char *newsig, uint32_t keycrc32)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01492">pbx_dundi.c:1492</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structdundi__answer_html_a6288d74be6b85a42be41a2cd779b8909"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#a6288d74be6b85a42be41a2cd779b8909">dundi_answer::weight</a></div><div class="ttdeci">unsigned short weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00106">dundi.h:106</a></div></div>
<div class="ttc" id="structdundi__ies_html_a3da3c62d7c7467fda1c782c92a44987c"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a3da3c62d7c7467fda1c782c92a44987c">dundi_ies::called_context</a></div><div class="ttdeci">char * called_context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00026">dundi-parser.h:26</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="dundi_8h_html_a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a905301dc85f7361d62f56f9dea55cf2ca52da0708c28c6ffa3abff62c792434ff">DUNDI_HINT_DONT_ASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00092">dundi.h:92</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__request_html_a8ccda2f23985077bb0b624733a68216c"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a8ccda2f23985077bb0b624733a68216c">dundi_request::hmd</a></div><div class="ttdeci">struct dundi_hint_metadata * hmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00280">pbx_dundi.c:280</a></div></div>
<div class="ttc" id="structdundi__result_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../db/d96/structdundi__result.html#ac92588540e8c1d014a08cd8a45462b19">dundi_result::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00226">dundi.h:226</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a78d4847658b695383d849efd12399b38">dundi_hint_metadata::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">pbx_dundi.c:233</a></div></div>
<div class="ttc" id="structdundi__peer_html_a2c2c784916447e5e66b67982bdfb7315"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a2c2c784916447e5e66b67982bdfb7315">dundi_peer::permit</a></div><div class="ttdeci">struct dundi_peer::permissionlist permit</div></div>
<div class="ttc" id="dundi-parser_8c_html_a662a55bf97ad210f616b60d37ebbc4b2"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a></div><div class="ttdeci">void dundi_showframe(struct dundi_hdr *fhi, int rx, struct ast_sockaddr *sin, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi-parser.c:432</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="dundi_8h_html_a5f2488f361adc40331a6e424dbac3740"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00164">dundi.h:164</a></div></div>
<div class="ttc" id="structdundi__peer_html_af127b116515a36d812fad9ade884927f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af127b116515a36d812fad9ade884927f">dundi_peer::pcmodel</a></div><div class="ttdeci">int pcmodel</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00332">pbx_dundi.c:332</a></div></div>
<div class="ttc" id="dundi_8h_html_a6741aa56d1b7795e2c816627c9611854"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6741aa56d1b7795e2c816627c9611854">DUNDI_COMMAND_PRECACHERP</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERP</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00165">dundi.h:165</a></div></div>
<div class="ttc" id="structdundi__encblock_html_ad98f4396bf44e165dc76882a937b7ee8"><div class="ttname"><a href="../../db/d17/structdundi__encblock.html#ad98f4396bf44e165dc76882a937b7ee8">dundi_encblock::iv</a></div><div class="ttdeci">unsigned char iv[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00098">dundi.h:98</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_ac87afa7a52fa95a8c90ba8e1f61c6957"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#ac87afa7a52fa95a8c90ba8e1f61c6957">dundi_entity_info::stateprov</a></div><div class="ttdeci">char stateprov[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00238">dundi.h:238</a></div></div>
<div class="ttc" id="structdundi__entity__info_html_aadd75c09e15efa9061997f033b3f224b"><div class="ttname"><a href="../../d3/d2f/structdundi__entity__info.html#aadd75c09e15efa9061997f033b3f224b">dundi_entity_info::email</a></div><div class="ttdeci">char email[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00242">dundi.h:242</a></div></div>
<div class="ttc" id="structdundi__ies_html_ac74fd61612b41ab4b4f96b2e997924f8"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ac74fd61612b41ab4b4f96b2e997924f8">dundi_ies::q_dept</a></div><div class="ttdeci">char * q_dept</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00037">dundi-parser.h:37</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="dundi_8h_html_af7dc06e9af2fe3294797d3ab2164bd2d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af7dc06e9af2fe3294797d3ab2164bd2d">DUNDI_COMMAND_REGREQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGREQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00169">dundi.h:169</a></div></div>
<div class="ttc" id="structdundi__peer_html_a08ffe1f77a06523bb3df0b18e336952b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">dundi_peer::txenckey</a></div><div class="ttdeci">unsigned char txenckey[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">pbx_dundi.c:316</a></div></div>
<div class="ttc" id="dundi_8h_html_ab763d07b3bd3339cbc50deb535e73462"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab763d07b3bd3339cbc50deb535e73462">DUNDI_COMMAND_EIDRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00163">dundi.h:163</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3393a06c100c67e6c758efa48ab276d3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3393a06c100c67e6c758efa48ab276d3">handle_command_response</a></div><div class="ttdeci">static int handle_command_response(struct dundi_transaction *trans, struct dundi_hdr *hdr, int datalen, int encrypted)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">pbx_dundi.c:1586</a></div></div>
<div class="ttc" id="dundi_8h_html_a6ee2959f73b9bc37fc5823a58ae42f14"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6ee2959f73b9bc37fc5823a58ae42f14">DUNDI_COMMAND_EIDQUERY</a></div><div class="ttdeci">#define DUNDI_COMMAND_EIDQUERY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00162">dundi.h:162</a></div></div>
<div class="ttc" id="hsearch_8c_html_ad0f0f85b3cab490a81baa02c4b9edf45"><div class="ttname"><a href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a></div><div class="ttdeci">static ENTRY retval</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d37/hsearch_8c_source.html#l00050">hsearch.c:50</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="structdundi__answer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#afd034eb91830d2df033d799c2b5420ce">dundi_answer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00103">dundi.h:103</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a6c96fa5363a438a67eeb7138eb322581"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a6c96fa5363a438a67eeb7138eb322581">cache_save</a></div><div class="ttdeci">static int cache_save(dundi_eid *eidpeer, struct dundi_request *req, int start, int unaffected, int expiration, int push)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">pbx_dundi.c:899</a></div></div>
<div class="ttc" id="structdundi__ies_html"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html">dundi_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00021">dundi-parser.h:21</a></div></div>
<div class="ttc" id="dundi_8h_html_aa245b81dab726abd797fd178a154fba7"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#aa245b81dab726abd797fd178a154fba7">DUNDI_COMMAND_INVALID</a></div><div class="ttdeci">#define DUNDI_COMMAND_INVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00166">dundi.h:166</a></div></div>
<div class="ttc" id="structdundi__ies_html_a6a50380a4586b45f8a26f75fe7e5e603"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a6a50380a4586b45f8a26f75fe7e5e603">dundi_ies::q_phone</a></div><div class="ttdeci">char * q_phone</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00043">dundi-parser.h:43</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
<div class="ttc" id="dundi_8h_html_ab0f58d12ffc25b840e51340b6fec5ca1"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ab0f58d12ffc25b840e51340b6fec5ca1">DUNDI_COMMAND_DPDISCOVER</a></div><div class="ttdeci">#define DUNDI_COMMAND_DPDISCOVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00160">dundi.h:160</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a726e2d64adb9bcbe86e8ecbb2225a456"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a></div><div class="ttdeci">static int dundi_ack(struct dundi_transaction *trans, int final)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">pbx_dundi.c:451</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a45a935f7f805e9bef91db9091c6d1a18"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a45a935f7f805e9bef91db9091c6d1a18">dundi_parse_ies</a></div><div class="ttdeci">int dundi_parse_ies(struct dundi_ies *ies, unsigned char *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00635">dundi-parser.c:635</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_transaction::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">pbx_dundi.c:262</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67aa1b38e631f800dd5df4f0e0156d8ca48">FLAG_ENCRYPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00171">pbx_dundi.c:171</a></div></div>
<div class="ttc" id="utils_8h_html_a0c85a8ea758aa5fa64260d7b29af6564"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a0c85a8ea758aa5fa64260d7b29af6564">ast_set_flag_nonstd</a></div><div class="ttdeci">#define ast_set_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00176">utils.h:176</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a10838452c09fae7f0e3de86581d85379">dundi_transaction::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00246">pbx_dundi.c:246</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a24b0544fdb7059b55bbb1be9a5fd3552"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a24b0544fdb7059b55bbb1be9a5fd3552">dundi_ie_append_byte</a></div><div class="ttdeci">int dundi_ie_append_byte(struct dundi_ie_data *ied, unsigned char ie, unsigned char dat)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00615">dundi-parser.c:615</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a879456c3b8e2853f7044d764e9c180d4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a879456c3b8e2853f7044d764e9c180d4">MAX_PACKET_SIZE</a></div><div class="ttdeci">#define MAX_PACKET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00155">pbx_dundi.c:155</a></div></div>
<div class="ttc" id="dundi_8h_html_a311b8b502e115eec8c4ed106d9c1a267"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a311b8b502e115eec8c4ed106d9c1a267">DUNDI_IE_ENCDATA</a></div><div class="ttdeci">#define DUNDI_IE_ENCDATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00193">dundi.h:193</a></div></div>
<div class="ttc" id="structdundi__ies_html_a9f04241acbef3b2e4d341d04972460f3"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#a9f04241acbef3b2e4d341d04972460f3">dundi_ies::hint</a></div><div class="ttdeci">struct dundi_hint * hint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00029">dundi-parser.h:29</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ab0073ccb3c8600726f37b28438094bd8"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ab0073ccb3c8600726f37b28438094bd8">dundi_transaction::dcx</a></div><div class="ttdeci">ast_aes_decrypt_key dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00253">pbx_dundi.c:253</a></div></div>
<div class="ttc" id="dundi_8h_html_a3719171d090354db16889cd52d0f3a28"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a></div><div class="ttdeci">#define DUNDI_COMMAND_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00168">dundi.h:168</a></div></div>
<div class="ttc" id="utils_8h_html_aacbd52db1ede7a4c592037c8d6da7ded"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aacbd52db1ede7a4c592037c8d6da7ded">ast_test_flag_nonstd</a></div><div class="ttdeci">#define ast_test_flag_nonstd(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00173">utils.h:173</a></div></div>
<div class="ttc" id="structdundi__ies_html_ab452e3c0d8085aadcf4c1928704d8aec"><div class="ttname"><a href="../../d0/dd1/structdundi__ies.html#ab452e3c0d8085aadcf4c1928704d8aec">dundi_ies::q_email</a></div><div class="ttdeci">char * q_email</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00042">dundi-parser.h:42</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab7f3bafd1912096a0cc348aada3f30b8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">dundi_peer::sentfullkey</a></div><div class="ttdeci">int sentfullkey</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">pbx_dundi.c:314</a></div></div>
<div class="ttc" id="dundi_8h_html_af73b75a9a2ef40c6b1c999c53800b418"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#af73b75a9a2ef40c6b1c999c53800b418">DUNDI_COMMAND_REGRESPONSE</a></div><div class="ttdeci">#define DUNDI_COMMAND_REGRESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00170">dundi.h:170</a></div></div>
<div class="ttc" id="structdundi__answer_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../db/dd6/structdundi__answer.html#aef5b927d15f11382bf5f276630c08287">dundi_answer::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00107">dundi.h:107</a></div></div>
<div class="ttc" id="dundi_8h_html_a9c4c9643a271a051be7013b8df876cdf"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a9c4c9643a271a051be7013b8df876cdf">DUNDI_COMMAND_CANCEL</a></div><div class="ttdeci">#define DUNDI_COMMAND_CANCEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00171">dundi.h:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeaefe1abed021df6d8f2105d5e4ba5a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaefe1abed021df6d8f2105d5e4ba5a5">&#9670;&nbsp;</a></span>handle_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">2042</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02021">ack_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">dundi_transaction::aseqno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00039">dundi_hdr::cmdresp</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">destroy_packets()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">dundi_ack()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00159">DUNDI_COMMAND_ACK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00455">dundi_reject()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">find_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">FLAG_FINAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00037">dundi_hdr::iseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">dundi_transaction::iseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">dundi_transaction::lasttrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00263">dundi_transaction::oiseqno</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00038">dundi_hdr::oseqno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02083">socket_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;{</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   trans = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae1848a1edf681275c04d028d85376ac5">find_transaction</a>(h, sin);</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <span class="keywordflow">if</span> (!trans) {</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad4c930f04099e30c67e243ad9519c184">dundi_reject</a>(h, sin);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   }</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <span class="comment">/* Got a transaction, see where this header fits in */</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> == trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>) {</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      <span class="comment">/* Just what we were looking for...  Anything but ack increments iseqno */</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a8b0109ab0ecc7a30064c41ef7913686d">ack_trans</a>(trans, h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a>)) {</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;         <span class="comment">/* If final, we&#39;re done */</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      }</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> != <a class="code" href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a>) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a20f1587dc1341e772c7038ebf87529fd">oiseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>++;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3393a06c100c67e6c758efa48ab276d3">handle_command_response</a>(trans, h, datalen, 0);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a> != trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a>(trans, h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x80);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a> = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      <span class="comment">/* Delete any saved last transmissions */</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">lasttrans</a>);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">cmdresp</a> &amp; 0x80) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;         <span class="comment">/* Final -- destroy now */</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h-&gt;<a class="code" href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> == trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a20f1587dc1341e772c7038ebf87529fd">oiseqno</a>) {</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <span class="comment">/* Last incoming sequence number -- send ACK without processing */</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a>(trans, 0);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="comment">/* Out of window -- simply drop */</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Dropping packet out of window!\n&quot;</span>);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   }</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;}</div><div class="ttc" id="structdundi__transaction_html_a994263e05f34cf3e146bd54903b7a053"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">dundi_transaction::aseqno</a></div><div class="ttdeci">unsigned char aseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">pbx_dundi.c:265</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">pbx_dundi.c:169</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a5f0d4fae321c2a13e563795b4297c90d"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a5f0d4fae321c2a13e563795b4297c90d">dundi_hdr::cmdresp</a></div><div class="ttdeci">unsigned char cmdresp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00039">dundi.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a718c14c132b44fde9c0d73d2bed31ed1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a718c14c132b44fde9c0d73d2bed31ed1">dundi_transaction::lasttrans</a></div><div class="ttdeci">struct packetlist lasttrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00267">pbx_dundi.c:267</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a9887965bdbba3acab90015e43cde575a">dundi_hdr::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00038">dundi.h:38</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="dundi_8h_html_ac85ab82e2cf4b695997763bedbfa6c84"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#ac85ab82e2cf4b695997763bedbfa6c84">DUNDI_COMMAND_ACK</a></div><div class="ttdeci">#define DUNDI_COMMAND_ACK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00159">dundi.h:159</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a20f1587dc1341e772c7038ebf87529fd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a20f1587dc1341e772c7038ebf87529fd">dundi_transaction::oiseqno</a></div><div class="ttdeci">unsigned char oiseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00263">pbx_dundi.c:263</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a76fa6796f1a6982002500d235ece540a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a76fa6796f1a6982002500d235ece540a">destroy_packets</a></div><div class="ttdeci">static void destroy_packets(struct packetlist *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02010">pbx_dundi.c:2010</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad4c930f04099e30c67e243ad9519c184"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad4c930f04099e30c67e243ad9519c184">dundi_reject</a></div><div class="ttdeci">static void dundi_reject(struct dundi_hdr *h, struct ast_sockaddr *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00455">pbx_dundi.c:455</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3393a06c100c67e6c758efa48ab276d3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3393a06c100c67e6c758efa48ab276d3">handle_command_response</a></div><div class="ttdeci">static int handle_command_response(struct dundi_transaction *trans, struct dundi_hdr *hdr, int datalen, int encrypted)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">pbx_dundi.c:1586</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a8b0109ab0ecc7a30064c41ef7913686d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a8b0109ab0ecc7a30064c41ef7913686d">ack_trans</a></div><div class="ttdeci">static int ack_trans(struct dundi_transaction *trans, int iseqno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02021">pbx_dundi.c:2021</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a726e2d64adb9bcbe86e8ecbb2225a456"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a726e2d64adb9bcbe86e8ecbb2225a456">dundi_ack</a></div><div class="ttdeci">static int dundi_ack(struct dundi_transaction *trans, int final)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00451">pbx_dundi.c:451</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_transaction::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">pbx_dundi.c:262</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae1848a1edf681275c04d028d85376ac5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae1848a1edf681275c04d028d85376ac5">find_transaction</a></div><div class="ttdeci">static struct dundi_transaction * find_transaction(struct dundi_hdr *hdr, struct ast_sockaddr *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">pbx_dundi.c:412</a></div></div>
<div class="ttc" id="structdundi__hdr_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_hdr::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00037">dundi.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4ee00d52d3fc2dd80292cf9cc337a500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee00d52d3fc2dd80292cf9cc337a500">&#9670;&nbsp;</a></span>has_permission()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int has_permission </td>
          <td>(</td>
          <td class="paramtype">struct permissionlist *&#160;</td>
          <td class="paramname"><em>permlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cont</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">367</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">permission::allow</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">permission::name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03391">dundi_ie_append_eid_appropriately()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">optimize_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d4c/structpermission.html">permission</a> *perm;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(permlist, perm, <a class="code" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">list</a>) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <span class="stringliteral">&quot;all&quot;</span>) || !strcasecmp(perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, cont))</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         res = perm-&gt;<a class="code" href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">allow</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="ttc" id="structpermission_html"><div class="ttname"><a href="../../d4/d4c/structpermission.html">permission</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00215">pbx_dundi.c:215</a></div></div>
<div class="ttc" id="structpermission_html_a02d58d2ab612ca353b4d94409ce9e6a7"><div class="ttname"><a href="../../d4/d4c/structpermission.html#a02d58d2ab612ca353b4d94409ce9e6a7">permission::allow</a></div><div class="ttdeci">int allow</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00217">pbx_dundi.c:217</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structpermission_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../d4/d4c/structpermission.html#afd3f693e384b1ee0a0c44d58351eb87d">permission::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00218">pbx_dundi.c:218</a></div></div>
<div class="ttc" id="structpermission_html_ae6a365efbd34a6132dea2a3229786214"><div class="ttname"><a href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a></div><div class="ttdeci">struct permission::@435 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">5169</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00590">ast_bind()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00315">AST_MODFLAG_DEFAULT</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00122">AST_MODULE_SUPPORT_EXTENDED</a>, <a class="el" href="../../d2/df2/pbx__switch_8c_source.html#l00058">ast_register_switch()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00236">ast_sched_context_create()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00356">dundi_debug_output()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00362">dundi_error_output()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00630">dundi_set_error()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00625">dundi_set_output()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00081">io_context_create()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05155">reload()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">start_network_thread()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;{</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin2;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#a11166c4626dcdb56709026fd2b9fd8b7">dundi_set_output</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a59f0851aa813c8eb5112a59e88a61685">dundi_debug_output</a>);</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;   <a class="code" href="../../df/d70/dundi-parser_8c.html#aaa83f3a0554a09874e1f59bb6ca0195d">dundi_set_error</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a7c871e32a7626fa8a94e9070a7a007e5">dundi_error_output</a>);</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;   <span class="comment">/* Make a UDP socket */</span></div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a> = <a class="code" href="../../dc/dac/io_8h.html#a7d66d121ef63109c2f55188a38b8240f">io_context_create</a>();</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;   <a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>();</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a> || !<a class="code" href="../../d0/da0/structsched.html">sched</a>) {</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;      <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;   }</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;sin);</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;sin2);</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a6a98325d357365a72bef34f5a5ddfe55">set_config</a>(<span class="stringliteral">&quot;dundi.conf&quot;</span>, &amp;sin, 0, &amp;sin2)) {</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;      <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;   }</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;sin2)) {</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;sin) == <a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;sin2)) || (<a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;sin) == <a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;sin2))) {</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;bindaddr &amp; bindaddr2 should be different IP protocols.\n&quot;</span>);</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;         <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;      }</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      <span class="comment">/*bind netsocket to ipv4, netsocket2 to ipv6 */</span></div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> = socket(AF_INET6, SOCK_DGRAM, IPPROTO_IP);</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> &lt; 0 || <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> &lt; 0) {</div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create network socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;         <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      }</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(&amp;sin)) {</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, &amp;sin)) {</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to bind to %s : %s\n&quot;</span>,</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;            <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;         }</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>, &amp;sin2)) {</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to bind to %s : %s\n&quot;</span>,</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin2), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;            <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;         }</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, &amp;sin2)) {</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to bind to %s : %s\n&quot;</span>,</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin2), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;            <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;         }</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>, &amp;sin)) {</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to bind to %s : %s\n&quot;</span>,</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;            <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;         }</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;      }</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, 0, <span class="stringliteral">&quot;DUNDi&quot;</span>);</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, 0, <span class="stringliteral">&quot;DUNDi&quot;</span>);</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;sin)) {</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> = socket(AF_INET6, SOCK_DGRAM, IPPROTO_IP);</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;      }</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> &lt; 0) {</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create network socket: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;         <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;      }</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, &amp;sin))  {</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to bind to %s : %s\n&quot;</span>,</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;         <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;      }</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, 0, <span class="stringliteral">&quot;DUNDi&quot;</span>);</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;   }</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae6509f01db3676a8f6cd3485afe7b94d">start_network_thread</a>()) {</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to start network thread\n&quot;</span>);</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;      <span class="keywordflow">goto</span> declined;</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;   }</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a>));</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a5297fa9c52ff50da5b08c7217d9251b4">ast_register_switch</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a169ae5c86e91fcc5014f9072ed3dd4cc">dundi_switch</a>))</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register DUNDi switch\n&quot;</span>);</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d5/db0/group__functions.html#gae3e149ad077b387bc99625257cdfa5b9">dundi_function</a>);</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a427edee20aa126369758234e88d7d637">dundi_query_function</a>);</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a78fa064a53288c1498570513cfdd7480">dundi_result_function</a>);</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;DUNDi Ready and Listening on %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin));</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(&amp;sin2))</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;DUNDi Ready and Listening on %s\n&quot;</span>, <a class="code" href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a>(&amp;sin2));</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;declined:</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a6a98325d357365a72bef34f5a5ddfe55"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a6a98325d357365a72bef34f5a5ddfe55">set_config</a></div><div class="ttdeci">static int set_config(char *config_file, struct ast_sockaddr *sin, int reload, struct ast_sockaddr *sin2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">pbx_dundi.c:4937</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_aaa83f3a0554a09874e1f59bb6ca0195d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#aaa83f3a0554a09874e1f59bb6ca0195d">dundi_set_error</a></div><div class="ttdeci">void dundi_set_error(void(*func)(const char *))</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00630">dundi-parser.c:630</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae6509f01db3676a8f6cd3485afe7b94d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae6509f01db3676a8f6cd3485afe7b94d">start_network_thread</a></div><div class="ttdeci">static int start_network_thread(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">pbx_dundi.c:2296</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00184">pbx_dundi.c:184</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a58f856feeaf684b7d5353357e85a0dd5"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a></div><div class="ttdeci">int ast_bind(int sockfd, const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around bind(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00590">netsock2.c:590</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a34d899b0c513443c533f0a04813aed58"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a></div><div class="ttdeci">static int netsocket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00186">pbx_dundi.c:186</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a11166c4626dcdb56709026fd2b9fd8b7"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a11166c4626dcdb56709026fd2b9fd8b7">dundi_set_output</a></div><div class="ttdeci">void dundi_set_output(void(*func)(const char *))</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00625">dundi-parser.c:625</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a59f0851aa813c8eb5112a59e88a61685"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a59f0851aa813c8eb5112a59e88a61685">dundi_debug_output</a></div><div class="ttdeci">static void dundi_debug_output(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00356">pbx_dundi.c:356</a></div></div>
<div class="ttc" id="group__functions_html_gae3e149ad077b387bc99625257cdfa5b9"><div class="ttname"><a href="../../d5/db0/group__functions.html#gae3e149ad077b387bc99625257cdfa5b9">dundi_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04186">pbx_dundi.c:4186</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="netsock2_8h_html_a9e06776a6cd2ae9f2780a445053a6864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a></div><div class="ttdeci">int ast_set_qos(int sockfd, int tos, int cos, const char *desc)</div><div class="ttdoc">Set type of service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00621">netsock2.c:621</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_aae9156c7fe6dff51463f29ed1c3b96c9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae9156c7fe6dff51463f29ed1c3b96c9">ast_sockaddr_stringify</a></div><div class="ttdeci">static char * ast_sockaddr_stringify(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() with default format. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00260">netsock2.h:260</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a25a9305efab3b493ca2519562fcec3d5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></div><div class="ttdeci">static unsigned int tos</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00191">pbx_dundi.c:191</a></div></div>
<div class="ttc" id="pbx_8h_html_a5297fa9c52ff50da5b08c7217d9251b4"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a5297fa9c52ff50da5b08c7217d9251b4">ast_register_switch</a></div><div class="ttdeci">int ast_register_switch(struct ast_switch *sw)</div><div class="ttdoc">Register an alternative dialplan switch. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df2/pbx__switch_8c_source.html#l00058">pbx_switch.c:58</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a989d6707298899f07c764d259d5d3fcb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a></div><div class="ttdeci">static struct ast_cli_entry cli_dundi[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03119">pbx_dundi.c:3119</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a7c871e32a7626fa8a94e9070a7a007e5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a7c871e32a7626fa8a94e9070a7a007e5">dundi_error_output</a></div><div class="ttdeci">static void dundi_error_output(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00362">pbx_dundi.c:362</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">pbx_dundi.c:5099</a></div></div>
<div class="ttc" id="netsock2_8h_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a427edee20aa126369758234e88d7d637"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a427edee20aa126369758234e88d7d637">dundi_query_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_query_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04274">pbx_dundi.c:4274</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="netsock2_8h_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a169ae5c86e91fcc5014f9072ed3dd4cc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a169ae5c86e91fcc5014f9072ed3dd4cc">dundi_switch</a></div><div class="ttdeci">static struct ast_switch dundi_switch</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04892">pbx_dundi.c:4892</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3a13b2041df3b5a35c2c9624e02eac56"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a></div><div class="ttdeci">static int netsocket2</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00187">pbx_dundi.c:187</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a78fa064a53288c1498570513cfdd7480"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a78fa064a53288c1498570513cfdd7480">dundi_result_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_result_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04348">pbx_dundi.c:4348</a></div></div>
<div class="ttc" id="io_8h_html_a7d66d121ef63109c2f55188a38b8240f"><div class="ttname"><a href="../../dc/dac/io_8h.html#a7d66d121ef63109c2f55188a38b8240f">io_context_create</a></div><div class="ttdeci">struct io_context * io_context_create(void)</div><div class="ttdoc">Creates a context Create a context for I/O operations Basically mallocs an IO structure and sets up s...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00081">io.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ea1ce860ced2100b4d6bcd7297c5895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ea1ce860ced2100b4d6bcd7297c5895">&#9670;&nbsp;</a></span>load_password()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void load_password </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">2138</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">build_secret()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00181">DUNDI_SECRET_TIME</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">last</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">save_secret()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;{</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordtype">char</span> *current=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#ae9dd6bdb4c5c0529195a03583d0d4a8d">last</a>=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   time_t expired;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>, <span class="stringliteral">&quot;secretexpiry&quot;</span>, tmp, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(tmp, &amp;expired, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      <a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>, <span class="stringliteral">&quot;secret&quot;</span>, tmp, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      current = strchr(tmp, <span class="charliteral">&#39;;&#39;</span>);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">if</span> (!current)</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;         current = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;         *current = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;         current++;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      };</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      <span class="keywordflow">if</span> ((time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - expired) &lt; 0) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;         <span class="keywordflow">if</span> ((expired - time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &gt; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a>)</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;            expired = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) + <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - (expired + <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a>)) &lt; 0) {</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;         last = current;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;         current = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;         last = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;         current = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;      }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   }</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <span class="keywordflow">if</span> (current) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="comment">/* Current key is still valid, just setup rotatation properly */</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, current, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>));</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a> = expired;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="comment">/* Current key is out of date, rotate or eliminate all together */</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3e07ff59084fdf7d5f96f43509e00744">build_secret</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>));</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a50a9b3f4708bad6a20555b7089d7b8a4">save_secret</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a>, last);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   }</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afce48059fc557e50d12470e8c086ff57"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a></div><div class="ttdeci">static char secretpath[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00208">pbx_dundi.c:208</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a50a9b3f4708bad6a20555b7089d7b8a4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a50a9b3f4708bad6a20555b7089d7b8a4">save_secret</a></div><div class="ttdeci">static void save_secret(const char *newkey, const char *oldkey)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">pbx_dundi.c:2125</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae9dd6bdb4c5c0529195a03583d0d4a8d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae9dd6bdb4c5c0529195a03583d0d4a8d">last</a></div><div class="ttdeci">struct sla_ringing_trunk * last</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac312f5ad9b5a607157fc7f33ae40ef18"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a></div><div class="ttdeci">#define DUNDI_SECRET_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00181">pbx_dundi.c:181</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3e07ff59084fdf7d5f96f43509e00744"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3e07ff59084fdf7d5f96f43509e00744">build_secret</a></div><div class="ttdeci">static void build_secret(char *secret, int seclen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">pbx_dundi.c:2110</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a67db34020f8303d719cb594849f0f868"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a></div><div class="ttdeci">static time_t rotatetime</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00211">pbx_dundi.c:211</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a539fd30ae5d9ac88c45e52e37bee5a2f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a539fd30ae5d9ac88c45e52e37bee5a2f">cursecret</a></div><div class="ttdeci">static char cursecret[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00209">pbx_dundi.c:209</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e20351ab6bfbeeede5116299b51ea74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e20351ab6bfbeeede5116299b51ea74">&#9670;&nbsp;</a></span>mark_mappings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mark_mappings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04363">4363</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">dundi_mapping::dead</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00438">map</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;{</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="code" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>;</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, map, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;      map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;   }</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__mapping_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_mapping::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">pbx_dundi.c:298</a></div></div>
<div class="ttc" id="misdn__config_8c_html_a92a7399cbb76f6349df98d9432ad52c6"><div class="ttname"><a href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a></div><div class="ttdeci">static int * map</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00438">misdn_config.c:438</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a951981db155b9a3e3c625a37a355118c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a951981db155b9a3e3c625a37a355118c">&#9670;&nbsp;</a></span>mark_peers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mark_peers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04353">4353</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">dundi_peer::dead</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;{</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;   }</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__peer_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_peer::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">pbx_dundi.c:311</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd6cf74d15be14fcc9d17aa2f2b5984b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd6cf74d15be14fcc9d17aa2f2b5984b">&#9670;&nbsp;</a></span>model2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* model2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02403">2403</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">DUNDI_MODEL_INBOUND</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">DUNDI_MODEL_OUTBOUND</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00161">DUNDI_MODEL_SYMMETRIC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>.</p>
<div class="fragment"><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;{</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;   <span class="keywordflow">switch</span>(<a class="code" href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">model</a>) {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a>:</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Inbound&quot;</span>;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>:</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Outbound&quot;</span>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a>:</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Symmetric&quot;</span>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a10df83e3e85f772c181a064c1c7d17bb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a10df83e3e85f772c181a064c1c7d17bb">DUNDI_MODEL_SYMMETRIC</a></div><div class="ttdeci">#define DUNDI_MODEL_SYMMETRIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00161">pbx_dundi.c:161</a></div></div>
<div class="ttc" id="structdundi__peer_html_a027a1f1731d22465c926ce57be2364c3"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a027a1f1731d22465c926ce57be2364c3">dundi_peer::model</a></div><div class="ttdeci">int model</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00331">pbx_dundi.c:331</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57b3a555fe31704b952f29a59f33bb81"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57b3a555fe31704b952f29a59f33bb81">DUNDI_MODEL_INBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_INBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00159">pbx_dundi.c:159</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa6ff7731f29e08bc8019c6bdab908df8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_OUTBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">pbx_dundi.c:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a49128caa5ade5fbd7f9a42f39a23476a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49128caa5ade5fbd7f9a42f39a23476a">&#9670;&nbsp;</a></span>network_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* network_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ignore</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02194">2194</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d0a/io_8c_source.html#l00162">ast_io_add()</a>, <a class="el" href="../../dc/dac/io_8h_source.html#l00034">AST_IO_IN</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00245">ast_io_remove()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00278">ast_io_wait()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00755">ast_sched_runq()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00431">ast_sched_wait()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02177">check_password()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02083">socket_read()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">start_network_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;{</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="comment">/* Our job is simple: Send queued messages, retrying if necessary.  Read frames</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;<span class="comment">      from the network, and queue them for delivery to the channels */</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <span class="comment">/* Establish I/O callback for socket read */</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keywordtype">int</span> *socket_read_id = <a class="code" href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a023f892544ad2dde2a7ef3429fbd3a0f">socket_read</a>, <a class="code" href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a>, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keywordtype">int</span> *socket_read_id2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> &gt;= 0) {</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      socket_read_id2 = <a class="code" href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a023f892544ad2dde2a7ef3429fbd3a0f">socket_read</a>, <a class="code" href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a>, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   }</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a>) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      res = <a class="code" href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="keywordflow">if</span> ((res &gt; 1000) || (res &lt; 0))</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;         res = 1000;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      res = <a class="code" href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, res);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">if</span> (res &gt;= 0) {</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;         <a class="code" href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1068a316e1bbca8e0deb40d1e6f735ce">check_password</a>();</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   <a class="code" href="../../dc/dac/io_8h.html#afbf1092b96128d07d0dd08dfa898f4d5">ast_io_remove</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, socket_read_id);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   <span class="keywordflow">if</span> (socket_read_id2) {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#afbf1092b96128d07d0dd08dfa898f4d5">ast_io_remove</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>, socket_read_id2);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;}</div><div class="ttc" id="io_8h_html_a6f1abe730a5606b88c8f415f53b784bc"><div class="ttname"><a href="../../dc/dac/io_8h.html#a6f1abe730a5606b88c8f415f53b784bc">ast_io_wait</a></div><div class="ttdeci">int ast_io_wait(struct io_context *ioc, int howlong)</div><div class="ttdoc">Waits for IO. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00278">io.c:278</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="sched_8h_html_aa9c3d54f142eee0bad110fbb825c0787"><div class="ttname"><a href="../../d7/d00/sched_8h.html#aa9c3d54f142eee0bad110fbb825c0787">ast_sched_runq</a></div><div class="ttdeci">int ast_sched_runq(struct ast_sched_context *con)</div><div class="ttdoc">Runs the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00755">sched.c:755</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00184">pbx_dundi.c:184</a></div></div>
<div class="ttc" id="io_8h_html_a0d9e01f215782a343a1b71b5be362080"><div class="ttname"><a href="../../dc/dac/io_8h.html#a0d9e01f215782a343a1b71b5be362080">AST_IO_IN</a></div><div class="ttdeci">#define AST_IO_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dac/io_8h_source.html#l00034">io.h:34</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="io_8h_html_aa250c3f6541dc5734deb966d6821da7a"><div class="ttname"><a href="../../dc/dac/io_8h.html#aa250c3f6541dc5734deb966d6821da7a">ast_io_add</a></div><div class="ttdeci">int * ast_io_add(struct io_context *ioc, int fd, ast_io_cb callback, short events, void *data)</div><div class="ttdoc">Adds an IO context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00162">io.c:162</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a34d899b0c513443c533f0a04813aed58"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a></div><div class="ttdeci">static int netsocket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00186">pbx_dundi.c:186</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1068a316e1bbca8e0deb40d1e6f735ce"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1068a316e1bbca8e0deb40d1e6f735ce">check_password</a></div><div class="ttdeci">static void check_password(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02177">pbx_dundi.c:2177</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa73e8fca9184c251b2983cf9e6788df1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a></div><div class="ttdeci">static int dundi_shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00213">pbx_dundi.c:213</a></div></div>
<div class="ttc" id="io_8h_html_afbf1092b96128d07d0dd08dfa898f4d5"><div class="ttname"><a href="../../dc/dac/io_8h.html#afbf1092b96128d07d0dd08dfa898f4d5">ast_io_remove</a></div><div class="ttdeci">int ast_io_remove(struct io_context *ioc, int *id)</div><div class="ttdoc">Removes an IO context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00245">io.c:245</a></div></div>
<div class="ttc" id="sched_8h_html_af13fcd6652b8dcafae35c2fa35e80a8d"><div class="ttname"><a href="../../d7/d00/sched_8h.html#af13fcd6652b8dcafae35c2fa35e80a8d">ast_sched_wait</a></div><div class="ttdeci">int ast_sched_wait(struct ast_sched_context *con) attribute_warn_unused_result</div><div class="ttdoc">Determines number of seconds until the next outstanding event to take place. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00431">sched.c:431</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a023f892544ad2dde2a7ef3429fbd3a0f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a023f892544ad2dde2a7ef3429fbd3a0f">socket_read</a></div><div class="ttdeci">static int socket_read(int *id, int fd, short events, void *sock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02083">pbx_dundi.c:2083</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3a13b2041df3b5a35c2c9624e02eac56"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a></div><div class="ttdeci">static int netsocket2</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00187">pbx_dundi.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38669dd3d9e661107ae2aa06c7e0ec05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38669dd3d9e661107ae2aa06c7e0ec05">&#9670;&nbsp;</a></span>optimize_transactions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int optimize_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">3584</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../de/d78/dundi-parser_8h_source.html#l00018">DUNDI_MAX_STACK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">dundi_transaction::eidcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">dundi_transaction::eids</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">has_permission()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">dundi_peer::include</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">dundi_peer::order</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;{</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;   <span class="comment">/* Minimize the message propagation through DUNDi by</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;<span class="comment">      alerting the network to hops which should be not be considered */</span></div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;   <span class="keywordtype">int</span> needpush;</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, parentlist) {</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <span class="comment">/* Pop off the true root */</span></div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>) {</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;         tmp = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[--trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>];</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;         needpush = 1;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;         tmp = trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;         needpush = 0;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;      }</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>) &amp;&amp;         <span class="comment">/* peer&#39;s eid is not empty (in case of dynamic peers) */</span></div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;            (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &gt; -1) &amp;&amp;                    <span class="comment">/* peer is reachable */</span></div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">include</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>) &amp;&amp; <span class="comment">/* peer has destination context */</span></div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>) &amp;&amp; <span class="comment">/* peer is not transaction endpoint */</span></div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">order</a> &lt;= <a class="code" href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a>)) {</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            <span class="comment">/* For each other transaction, make sure we don&#39;t</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;<span class="comment">               ask this EID about the others if they&#39;re not</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;<span class="comment">               already in the list */</span></div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;tmp, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>))</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;               x = -1;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;               <span class="keywordflow">for</span> (x=0;x&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>;x++) {</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[x], &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>))</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;               }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;            }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;            <span class="keywordflow">if</span> (x == trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>) {</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;               <span class="comment">/* Nope not in the list, if needed, add us at the end since we&#39;re the source */</span></div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;               <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a> &lt; <a class="code" href="../../de/d78/dundi-parser_8h.html#a61c222d217b3b8da8389ddcdf7873b86">DUNDI_MAX_STACK</a> - needpush) {</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                  trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>++] = peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                  <span class="comment">/* Need to insert the real root (or us) at the bottom now as</span></div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;<span class="comment">                     a requirement now.  */</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;                  needpush = 1;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;               }</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            }</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;         }</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;      }</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      <span class="comment">/* If necessary, push the true root back on the end */</span></div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      <span class="keywordflow">if</span> (needpush)</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>++] = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;   }</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7382e5e1f259570c8b9ce86ddc49a34b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">dundi_transaction::eids</a></div><div class="ttdeci">dundi_eid eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">pbx_dundi.c:248</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4ee00d52d3fc2dd80292cf9cc337a500"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4ee00d52d3fc2dd80292cf9cc337a500">has_permission</a></div><div class="ttdeci">static int has_permission(struct permissionlist *permlist, char *cont)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00367">pbx_dundi.c:367</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_transaction::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">pbx_dundi.c:249</a></div></div>
<div class="ttc" id="analys_8c_html_aed7ca058008dc3e5ee131e575abed285"><div class="ttname"><a href="../../d2/d79/analys_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a></div><div class="ttdeci">integer order</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d79/analys_8c_source.html#l00066">analys.c:66</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a></div><div class="ttdeci">static dundi_eid empty_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">pbx_dundi.c:212</a></div></div>
<div class="ttc" id="structdundi__peer_html_ac85d5511fdb8d162a7278bfb440ae420"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ac85d5511fdb8d162a7278bfb440ae420">dundi_peer::order</a></div><div class="ttdeci">int order</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00315">pbx_dundi.c:315</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="dundi-parser_8h_html_a61c222d217b3b8da8389ddcdf7873b86"><div class="ttname"><a href="../../de/d78/dundi-parser_8h.html#a61c222d217b3b8da8389ddcdf7873b86">DUNDI_MAX_STACK</a></div><div class="ttdeci">#define DUNDI_MAX_STACK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00018">dundi-parser.h:18</a></div></div>
<div class="ttc" id="structdundi__peer_html_af36f0bda1b31dbcaca25743859b9e1d8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af36f0bda1b31dbcaca25743859b9e1d8">dundi_peer::include</a></div><div class="ttdeci">struct permissionlist include</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00307">pbx_dundi.c:307</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a750726c4f6aeef52b97e95e43a368239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a750726c4f6aeef52b97e95e43a368239">&#9670;&nbsp;</a></span>populate_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void populate_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">4588</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">dundi_peer::addr</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00412">ast_db_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">do_register_expire()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">dundi_peer::registerexpire</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;{</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;   <span class="keywordtype">char</span> data[256];</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;   <span class="keywordtype">int</span> port, expire;</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), eid);</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a>(<span class="stringliteral">&quot;dundi/dpeers&quot;</span>, eid_str, data, <span class="keyword">sizeof</span>(data))) {</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;<span class="comment">       * data is in the form:</span></div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;<span class="comment">       * IPv6 address: [ffff:ffff::ffff:ffff]:port:expire</span></div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;<span class="comment">       * IPv4 address: a.b.c.d:port:expire</span></div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      c = data;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;[&#39;</span>) {</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;         <span class="comment">/* Need to skip over the IPv6 address. */</span></div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;         c = strchr(c, <span class="charliteral">&#39;]&#39;</span>);</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      }</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;      <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;         c = strchr(c, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;      }</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;         *c = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;         c++;</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;         <span class="keywordflow">if</span> (sscanf(c, <span class="stringliteral">&quot;%5d:%30d&quot;</span>, &amp;port, &amp;expire) == 2) {</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;            <span class="comment">/* Got it! */</span></div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addrs;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, data, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>, AF_UNSPEC) &gt; 0){</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;               <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, &amp;addrs[0]);</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(addrs);</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;            }</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;            <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">addr</a>, port);</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">registerexpire</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, (expire + 10) * 1000, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46c4e2ca9ea70a4a84393ac806a5557a">do_register_expire</a>, peer);</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;         }</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;      }</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;   }</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;}</div><div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a46c4e2ca9ea70a4a84393ac806a5557a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a46c4e2ca9ea70a4a84393ac806a5557a">do_register_expire</a></div><div class="ttdeci">static int do_register_expire(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">pbx_dundi.c:1321</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__peer_html_af746f2ac763dc5c4a62edbb222e4f98f"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#af746f2ac763dc5c4a62edbb222e4f98f">dundi_peer::registerexpire</a></div><div class="ttdeci">int registerexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00325">pbx_dundi.c:325</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astdb_8h_html_a6ab91701fa0db9fad7759fe42a581c17"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a6ab91701fa0db9fad7759fe42a581c17">ast_db_get</a></div><div class="ttdeci">int ast_db_get(const char *family, const char *key, char *value, int valuelen)</div><div class="ttdoc">Get key value specified by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00412">main/db.c:412</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="structdundi__peer_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a10838452c09fae7f0e3de86581d85379">dundi_peer::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00305">pbx_dundi.c:305</a></div></div>
<div class="ttc" id="netsock2_8h_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0510dcd35b2ec0c95316cb94ad7b5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0510dcd35b2ec0c95316cb94ad7b5cc">&#9670;&nbsp;</a></span>precache_trans()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int precache_trans </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *&#160;</td>
          <td class="paramname"><em>maps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mapcount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>minexp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>foundanswers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">3437</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">dundi_transaction::autokillid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">dundi_transaction::autokilltimeout</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">do_autokill()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">dundi_cache_time</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00164">DUNDI_COMMAND_PRECACHERQ</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00217">DUNDI_DEFAULT_VERSION</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi_eid_zero()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00186">DUNDI_IE_ANSWER</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00559">dundi_ie_append_answer()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi_ie_append_eid()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi_ie_append_hint()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi_ie_append_short()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi_ie_append_str()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00183">DUNDI_IE_CALLED_CONTEXT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00184">DUNDI_IE_CALLED_NUMBER</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00182">DUNDI_IE_EID</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00189">DUNDI_IE_EXPIRATION</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00197">DUNDI_IE_HINT</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00187">DUNDI_IE_TTL</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00188">DUNDI_IE_VERSION</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">dundi_transaction::eidcount</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">dundi_transaction::eids</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00228">dundi_result::expiration</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00233">dundi_hint_metadata::exten</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">dundi_hint_metadata::flags</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">dundi_transaction::parent</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">dundi_transaction::them_eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">dundi_transaction::ttl</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">dundi_transaction::us_eid</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">weight</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03536">precache_transactions()</a>.</p>
<div class="fragment"><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;{</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a> ied;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <span class="keywordtype">int</span> x, res;</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = 999999;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;   <span class="keywordtype">int</span> expiration = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a>;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   <span class="keywordtype">int</span> ouranswers=0;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> *avoid[1] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   <span class="keywordtype">int</span> direct[1] = { 0, };</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a>];</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a> hmd;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;   <span class="keywordflow">if</span> (!trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>) {</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Tried to discover a transaction with no parent?!?\n&quot;</span>);</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;   }</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;   memset(&amp;hmd, 0, <span class="keyword">sizeof</span>(hmd));</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;   memset(&amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>));</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;   <span class="comment">/* Look up the answers we&#39;re going to include */</span></div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;mapcount;x++)</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;      ouranswers = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab12db76eda3f0713a2ab9499145f2cd8">dundi_lookup_local</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>, maps + x, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>, ouranswers, &amp;hmd);</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;   <span class="keywordflow">if</span> (ouranswers &lt; 0)</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      ouranswers = 0;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;ouranswers;x++) {</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a> &lt; max)</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;         max = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].weight;</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;   }</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;   <span class="keywordflow">if</span> (max) {</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      <span class="comment">/* If we do not have a canonical result, keep looking */</span></div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      res = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a>(<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a> + ouranswers, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a> - ouranswers, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>, 1, &amp;hmd, &amp;expiration, 0, 1, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">them_eid</a>, avoid, direct);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;         <span class="comment">/* Append answer in result */</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;         ouranswers += res;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      }</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;   }</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   <span class="keywordflow">if</span> (ouranswers &gt; 0) {</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      *foundanswers += ouranswers;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;      memset(&amp;ied, 0, <span class="keyword">sizeof</span>(ied));</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a>);</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a>(&amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>))</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">us_eid</a>);</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">eidcount</a>;x++)</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a>, &amp;trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">eids</a>[x]);</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a7823972f84701a353dc8d24bc3bc3190">DUNDI_IE_CALLED_NUMBER</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>);</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">parent</a>-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>);</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="keywordflow">for</span> (x=0;x&lt;ouranswers;x++) {</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;         <span class="comment">/* Add answers */</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration &amp;&amp; (expiration &gt; <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration))</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;            expiration = <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].expiration;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;         <a class="code" href="../../df/d70/dundi-parser_8c.html#a1f85f58ac01656d4f74a23a5cb99623e">dundi_ie_append_answer</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#afdf30ec8480910ba3234fa6e2f9cc07c">DUNDI_IE_ANSWER</a>, &amp;<a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].eid, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].techint, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../d0/d3a/structdundi__hint__metadata.html#a1cbb17ede73ea044a04a129bf4d86976">flags</a>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a>, <a class="code" href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a>[x].dest);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      }</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a>, hmd.flags, hmd.exten);</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a>(&amp;ied, <a class="code" href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a>, expiration);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>)</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;         trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">autokilltimeout</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a>, trans);</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      <span class="keywordflow">if</span> (expiration &lt; *minexp)</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;         *minexp = expiration;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(trans, <a class="code" href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a>, 0, 0, &amp;ied);</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <span class="comment">/* Oops, nothing to send... */</span></div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0);</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;   }</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;}</div><div class="ttc" id="tdd_8c_html_a6df1a1a6633d9c7572029202a8a8920b"><div class="ttname"><a href="../../db/d68/tdd_8c.html#a6df1a1a6633d9c7572029202a8a8920b">dr</a></div><div class="ttdeci">static float dr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d68/tdd_8c_source.html#l00058">tdd.c:58</a></div></div>
<div class="ttc" id="dundi_8h_html_a602807c627c7a3183f382e729869ef5c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a602807c627c7a3183f382e729869ef5c">DUNDI_IE_EXPIRATION</a></div><div class="ttdeci">#define DUNDI_IE_EXPIRATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00189">dundi.h:189</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab12db76eda3f0713a2ab9499145f2cd8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab12db76eda3f0713a2ab9499145f2cd8">dundi_lookup_local</a></div><div class="ttdeci">static int dundi_lookup_local(struct dundi_result *dr, struct dundi_mapping *map, char *called_number, dundi_eid *us_eid, int anscnt, struct dundi_hint_metadata *hmd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">pbx_dundi.c:578</a></div></div>
<div class="ttc" id="structdundi__ie__data_html"><div class="ttname"><a href="../../d5/d52/structdundi__ie__data.html">dundi_ie_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d78/dundi-parser_8h_source.html#l00054">dundi-parser.h:54</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a3dfb0b5875c7ff57d45dfeb31bed78cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a3dfb0b5875c7ff57d45dfeb31bed78cb">dundi_transaction::autokilltimeout</a></div><div class="ttdeci">int autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00259">pbx_dundi.c:259</a></div></div>
<div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="structdundi__transaction_html_ad4fe319136b94d0c4a548d716d8ce5aa"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#ad4fe319136b94d0c4a548d716d8ce5aa">dundi_transaction::parent</a></div><div class="ttdeci">struct dundi_request * parent</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00268">pbx_dundi.c:268</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f9cbc09efb2f5f73e4304d8a0192590"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f9cbc09efb2f5f73e4304d8a0192590">dundi_ie_append_eid</a></div><div class="ttdeci">int dundi_ie_append_eid(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00610">dundi-parser.c:610</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a7382e5e1f259570c8b9ce86ddc49a34b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a7382e5e1f259570c8b9ce86ddc49a34b">dundi_transaction::eids</a></div><div class="ttdeci">dundi_eid eids[DUNDI_MAX_STACK+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00248">pbx_dundi.c:248</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a07b6635a0aa8eb07e2aed172b4bb0d29"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a07b6635a0aa8eb07e2aed172b4bb0d29">MAX_RESULTS</a></div><div class="ttdeci">#define MAX_RESULTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00153">pbx_dundi.c:153</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a869bf8a50756e5adbdb1cf05a99c0a45">dundi_transaction::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00255">pbx_dundi.c:255</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_ae5c2a5fbbbd31e67b0e86683717322e0"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#ae5c2a5fbbbd31e67b0e86683717322e0">dundi_ie_append_hint</a></div><div class="ttdeci">int dundi_ie_append_hint(struct dundi_ie_data *ied, unsigned char ie, unsigned short flags, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00518">dundi-parser.c:518</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a80d660680e9f828d8bfc16e5175d67f4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a80d660680e9f828d8bfc16e5175d67f4">dundi_lookup_internal</a></div><div class="ttdeci">static int dundi_lookup_internal(struct dundi_result *result, int maxret, struct ast_channel *chan, const char *dcontext, const char *number, int ttl, int blockempty, struct dundi_hint_metadata *md, int *expiration, int cybpass, int modeselect, dundi_eid *skip, dundi_eid *avoid[], int direct[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">pbx_dundi.c:3824</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a31a33b809b22cf537786cbd24287ac79"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a31a33b809b22cf537786cbd24287ac79">dundi_transaction::us_eid</a></div><div class="ttdeci">dundi_eid us_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00250">pbx_dundi.c:250</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="dundi_8h_html_a12409dca54cd3a398637eaf5f0b23763"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a12409dca54cd3a398637eaf5f0b23763">DUNDI_IE_VERSION</a></div><div class="ttdeci">#define DUNDI_IE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00188">dundi.h:188</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a38c9f454d70bf454b2a4308ddf44d00f"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a38c9f454d70bf454b2a4308ddf44d00f">dundi_transaction::them_eid</a></div><div class="ttdeci">dundi_eid them_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00251">pbx_dundi.c:251</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a8c1dafe1a31ede2e24f88d8769829f29"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a8c1dafe1a31ede2e24f88d8769829f29">dundi_transaction::eidcount</a></div><div class="ttdeci">int eidcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00249">pbx_dundi.c:249</a></div></div>
<div class="ttc" id="dundi_8h_html_a8b32aa75c41e0fdabec2c2ecc5aa7f53"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a8b32aa75c41e0fdabec2c2ecc5aa7f53">DUNDI_IE_EID</a></div><div class="ttdeci">#define DUNDI_IE_EID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00182">dundi.h:182</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab29df082de39c3bc9a3d3c82dd6922b9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab29df082de39c3bc9a3d3c82dd6922b9">do_autokill</a></div><div class="ttdeci">static int do_autokill(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">pbx_dundi.c:3380</a></div></div>
<div class="ttc" id="structdundi__transaction_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">dundi_transaction::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00258">pbx_dundi.c:258</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a6bd01a676b7da7389e749536cd324a3d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a6bd01a676b7da7389e749536cd324a3d">dundi_ie_append_str</a></div><div class="ttdeci">int dundi_ie_append_str(struct dundi_ie_data *ied, unsigned char ie, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00605">dundi-parser.c:605</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_abad164b523955988350efd52f43e7d67"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#abad164b523955988350efd52f43e7d67">weight</a></div><div class="ttdeci">char weight</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00132">app_alarmreceiver.c:132</a></div></div>
<div class="ttc" id="dundi_8h_html_a6889e1b693ec9766d8503f547f8a2a7b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6889e1b693ec9766d8503f547f8a2a7b">DUNDI_IE_CALLED_CONTEXT</a></div><div class="ttdeci">#define DUNDI_IE_CALLED_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00183">dundi.h:183</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html">dundi_hint_metadata</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00231">pbx_dundi.c:231</a></div></div>
<div class="ttc" id="dundi_8h_html_a65865db706ab437ed5b3d4b03eae36b4"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a65865db706ab437ed5b3d4b03eae36b4">DUNDI_IE_HINT</a></div><div class="ttdeci">#define DUNDI_IE_HINT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00197">dundi.h:197</a></div></div>
<div class="ttc" id="dundi_8h_html_a1c04d916688aa7257c4c0feca589b17d"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a1c04d916688aa7257c4c0feca589b17d">DUNDI_DEFAULT_VERSION</a></div><div class="ttdeci">#define DUNDI_DEFAULT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00217">dundi.h:217</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a2669568e0cb36a644db3944e8820cc71"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a2669568e0cb36a644db3944e8820cc71">dundi_ie_append_short</a></div><div class="ttdeci">int dundi_ie_append_short(struct dundi_ie_data *ied, unsigned char ie, unsigned short value)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00598">dundi-parser.c:598</a></div></div>
<div class="ttc" id="structdundi__hint__metadata_html_a1cbb17ede73ea044a04a129bf4d86976"><div class="ttname"><a href="../../d0/d3a/structdundi__hint__metadata.html#a1cbb17ede73ea044a04a129bf4d86976">dundi_hint_metadata::flags</a></div><div class="ttdeci">unsigned short flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00232">pbx_dundi.c:232</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="dundi_8h_html_a7823972f84701a353dc8d24bc3bc3190"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a7823972f84701a353dc8d24bc3bc3190">DUNDI_IE_CALLED_NUMBER</a></div><div class="ttdeci">#define DUNDI_IE_CALLED_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00184">dundi.h:184</a></div></div>
<div class="ttc" id="dundi_8h_html_a5f2488f361adc40331a6e424dbac3740"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5f2488f361adc40331a6e424dbac3740">DUNDI_COMMAND_PRECACHERQ</a></div><div class="ttdeci">#define DUNDI_COMMAND_PRECACHERQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00164">dundi.h:164</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a8ccb3f08fd25a4c6ca15d0ca86201d6d"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a8ccb3f08fd25a4c6ca15d0ca86201d6d">dundi_eid_zero</a></div><div class="ttdeci">int dundi_eid_zero(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00082">dundi-parser.c:82</a></div></div>
<div class="ttc" id="dundi_8h_html_afdf30ec8480910ba3234fa6e2f9cc07c"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#afdf30ec8480910ba3234fa6e2f9cc07c">DUNDI_IE_ANSWER</a></div><div class="ttdeci">#define DUNDI_IE_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00186">dundi.h:186</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a1f85f58ac01656d4f74a23a5cb99623e"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a1f85f58ac01656d4f74a23a5cb99623e">dundi_ie_append_answer</a></div><div class="ttdeci">int dundi_ie_append_answer(struct dundi_ie_data *ied, unsigned char ie, dundi_eid *eid, unsigned char protocol, unsigned short flags, unsigned short weight, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00559">dundi-parser.c:559</a></div></div>
<div class="ttc" id="dundi_8h_html_a5c75c71843182d780e0c539c8fcad9bc"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a5c75c71843182d780e0c539c8fcad9bc">DUNDI_IE_TTL</a></div><div class="ttdeci">#define DUNDI_IE_TTL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00187">dundi.h:187</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad0a0688c98cfd4372386a75356f71fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0a0688c98cfd4372386a75356f71fd">&#9670;&nbsp;</a></span>precache_transactions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int precache_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *&#160;</td>
          <td class="paramname"><em>maps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mapcount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>expiration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>foundanswers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03536">3536</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">FLAG_DEAD</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">dundi_transaction::thread</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;{</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   <span class="comment">/* Mark all as &quot;in thread&quot; so they don&#39;t disappear */</span></div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>) {</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <span class="keywordflow">if</span> (trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a>)</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;This shouldn&#39;t happen, really...\n&quot;</span>);</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 1;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;   }</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>) {</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>))</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ab0510dcd35b2ec0c95316cb94ad7b5cc">precache_trans</a>(trans, maps, mapcount, expiration, foundanswers);</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;   }</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;   <span class="comment">/* Cleanup any that got destroyed in the mean time */</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>) {</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">thread</a> = 0;</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a>)) {</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Our transaction went away!\n&quot;</span>);</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;         <span class="comment">/* This is going to remove the transaction from the dundi_request&#39;s list, as well</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="comment">          * as the global transactions list */</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(trans, 0);</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      }</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;   }</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9b61df5d32336fad4da524d04a01b329"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9b61df5d32336fad4da524d04a01b329">dundi_transaction::thread</a></div><div class="ttdeci">int thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00256">pbx_dundi.c:256</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a3c7b29b0ec73d9cd76823df5bfd8facc">FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00168">pbx_dundi.c:168</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ab0510dcd35b2ec0c95316cb94ad7b5cc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ab0510dcd35b2ec0c95316cb94ad7b5cc">precache_trans</a></div><div class="ttdeci">static int precache_trans(struct dundi_transaction *trans, struct dundi_mapping *maps, int mapcount, int *minexp, int *foundanswers)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">pbx_dundi.c:3437</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a625c7bfebdd52adeaefbf97884ebf3f9"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a></div><div class="ttdeci">struct dundi_transaction::@438 parentlist</div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adad3e96eef9a45cf8c4f172bdea92436"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adad3e96eef9a45cf8c4f172bdea92436">&#9670;&nbsp;</a></span>process_clearcache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* process_clearcache </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ignore</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02228">2228</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00429">ast_db_del()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00598">ast_db_freetree()</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00531">ast_db_gettree()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">ast_get_time_t()</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00034">ast_db_entry::data</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00033">ast_db_entry::key</a>, <a class="el" href="../../de/d4a/astdb_8h_source.html#l00032">ast_db_entry::next</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">start_network_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;{</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d1d/structast__db__entry.html">ast_db_entry</a> *db_entry, *db_tree;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordtype">int</span> striplen = <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;/dundi/cache&quot;</span>);</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   time_t now;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a>) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      time(&amp;now);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      db_entry = db_tree = <a class="code" href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="keywordflow">for</span> (; db_entry; db_entry = db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">next</a>) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;         time_t expiry;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a>(db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, &amp;expiry, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            <span class="keywordflow">if</span> (expiry &lt; now) {</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;clearing expired DUNDI cache entry: %s\n&quot;</span>, db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a>);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;               <a class="code" href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a>(<span class="stringliteral">&quot;dundi/cache&quot;</span>, db_entry-&gt;<a class="code" href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">key</a> + striplen);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;         }</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      }</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <a class="code" href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a>(db_tree);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      sleep(60);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;}</div><div class="ttc" id="astdb_8h_html_af9ab454a70a91551b2bf6c55199fc514"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#af9ab454a70a91551b2bf6c55199fc514">ast_db_freetree</a></div><div class="ttdeci">void ast_db_freetree(struct ast_db_entry *entry)</div><div class="ttdoc">Free structure created by ast_db_gettree() </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00598">main/db.c:598</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a3b5457e5f5679935093d94b0f788769e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a></div><div class="ttdeci">int ast_get_time_t(const char *src, time_t *dst, time_t _default, int *consumed)</div><div class="ttdoc">get values from config variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02198">main/utils.c:2198</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__db__entry_html_a3fee4a0a4bff112e0262fb8d49f41b5e"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a3fee4a0a4bff112e0262fb8d49f41b5e">ast_db_entry::next</a></div><div class="ttdeci">struct ast_db_entry * next</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00032">astdb.h:32</a></div></div>
<div class="ttc" id="astdb_8h_html_afeb9839f89da4fc24838de74739d181e"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#afeb9839f89da4fc24838de74739d181e">ast_db_gettree</a></div><div class="ttdeci">struct ast_db_entry * ast_db_gettree(const char *family, const char *keytree)</div><div class="ttdoc">Get a list of values within the astdb tree. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00531">main/db.c:531</a></div></div>
<div class="ttc" id="structast__db__entry_html"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html">ast_db_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00031">astdb.h:31</a></div></div>
<div class="ttc" id="structast__db__entry_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_db_entry::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00034">astdb.h:34</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa73e8fca9184c251b2983cf9e6788df1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a></div><div class="ttdeci">static int dundi_shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00213">pbx_dundi.c:213</a></div></div>
<div class="ttc" id="astdb_8h_html_a71e8d5ab1757b184683a99125d1c8160"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a71e8d5ab1757b184683a99125d1c8160">ast_db_del</a></div><div class="ttdeci">int ast_db_del(const char *family, const char *key)</div><div class="ttdoc">Delete entry in astdb. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00429">main/db.c:429</a></div></div>
<div class="ttc" id="structast__db__entry_html_a5892a9181e6a332f84d27aecd41dcd12"><div class="ttname"><a href="../../da/d1d/structast__db__entry.html#a5892a9181e6a332f84d27aecd41dcd12">ast_db_entry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d4a/astdb_8h_source.html#l00033">astdb.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad5c932e5e55537cfc9bc16dc23d1889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad5c932e5e55537cfc9bc16dc23d1889">&#9670;&nbsp;</a></span>process_precache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* process_precache </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ign</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02261">2261</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">dundi_precache_queue::context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">dundi_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">dundi_precache_queue::expiration</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">dundi_precache_queue::number</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">start_network_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;{</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a> *qe;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   time_t now;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>[256];</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d6/d49/structnumber.html">number</a>[256];</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordtype">int</span> run;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a>) {</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      time(&amp;now);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      run = 0;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <span class="keywordflow">if</span> ((qe = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>))) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;         <span class="keywordflow">if</span> (!qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a>) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            <span class="comment">/* Gone...  Remove... */</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(qe);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a> &lt; now) {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <span class="comment">/* Process this entry */</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a> = 0;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(context, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">context</a>, <span class="keyword">sizeof</span>(context));</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(number, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">number</a>, <span class="keyword">sizeof</span>(number));</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;            run = 1;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;         }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      }</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="keywordflow">if</span> (run) {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2c7021fc5f56a742448d01016e3c37df">dundi_precache</a>(context, number);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;         sleep(1);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   }</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;}</div><div class="ttc" id="structpcq_html"><div class="ttname"><a href="../../d2/dea/structpcq.html">pcq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00342">pbx_dundi.c:342</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a45d12bf06e2169381192166fe7b04025"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">dundi_precache_queue::expiration</a></div><div class="ttdeci">time_t expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">pbx_dundi.c:239</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a1f27749679e8054ef014a38569492895"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">dundi_precache_queue::context</a></div><div class="ttdeci">char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">pbx_dundi.c:238</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00236">pbx_dundi.c:236</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2c7021fc5f56a742448d01016e3c37df"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2c7021fc5f56a742448d01016e3c37df">dundi_precache</a></div><div class="ttdeci">int dundi_precache(const char *context, const char *number)</div><div class="ttdoc">Pre-cache to push upstream peers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04068">pbx_dundi.c:4068</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a3feeb7aaf324dd707cd59d3ff5a9bbf0"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">dundi_precache_queue::number</a></div><div class="ttdeci">char number[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">pbx_dundi.c:240</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_ac99530529053c5c6f5b554f4a4557c05"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">dundi_precache_queue::list</a></div><div class="ttdeci">struct dundi_precache_queue::@437 list</div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa73e8fca9184c251b2983cf9e6788df1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a></div><div class="ttdeci">static int dundi_shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00213">pbx_dundi.c:213</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3a5263214222e75a7ae12b350d61c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3a5263214222e75a7ae12b350d61c2f">&#9670;&nbsp;</a></span>prune_mappings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prune_mappings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">4427</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">dundi_mapping::dead</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04406">destroy_map()</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00438">map</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;{</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a> *<a class="code" href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a>;</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d5/dea/structmappings.html">mappings</a>, map, <a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>) {</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <span class="keywordflow">if</span> (map-&gt;<a class="code" href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a>) {</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">list</a>);</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae1d2e8fa6488a8a1f12e868a1f884358">destroy_map</a>(map);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      }</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;   }</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__mapping_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_mapping::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00298">pbx_dundi.c:298</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae1d2e8fa6488a8a1f12e868a1f884358"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae1d2e8fa6488a8a1f12e868a1f884358">destroy_map</a></div><div class="ttdeci">static void destroy_map(struct dundi_mapping *map)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04406">pbx_dundi.c:4406</a></div></div>
<div class="ttc" id="misdn__config_8c_html_a92a7399cbb76f6349df98d9432ad52c6"><div class="ttname"><a href="../../d4/dfb/misdn__config_8c.html#a92a7399cbb76f6349df98d9432ad52c6">map</a></div><div class="ttdeci">static int * map</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00438">misdn_config.c:438</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__mapping_html"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html">dundi_mapping</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00291">pbx_dundi.c:291</a></div></div>
<div class="ttc" id="structdundi__mapping_html_af2b797343cfaf75cc8d87ff48bebaa93"><div class="ttname"><a href="../../df/d5b/structdundi__mapping.html#af2b797343cfaf75cc8d87ff48bebaa93">dundi_mapping::list</a></div><div class="ttdeci">struct dundi_mapping::@442 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="structmappings_html"><div class="ttname"><a href="../../d5/dea/structmappings.html">mappings</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00343">pbx_dundi.c:343</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a55c82d81ce37ebe5125d5a017c12b5ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55c82d81ce37ebe5125d5a017c12b5ac">&#9670;&nbsp;</a></span>prune_peers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prune_peers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">4412</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">dundi_peer::dead</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04382">destroy_peer()</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;{</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *peer;</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>, peer, <a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>) {</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a>) {</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">list</a>);</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae5784fc1b23431641c74479040de46b6">destroy_peer</a>(peer);</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      }</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;   }</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a7315202ed5caf7b7c7317733ff1b40ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a7315202ed5caf7b7c7317733ff1b40ce">dundi_peer::list</a></div><div class="ttdeci">struct dundi_peer::@443 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="structdundi__peer_html"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html">dundi_peer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00303">pbx_dundi.c:303</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae5784fc1b23431641c74479040de46b6"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae5784fc1b23431641c74479040de46b6">destroy_peer</a></div><div class="ttdeci">static void destroy_peer(struct dundi_peer *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04382">pbx_dundi.c:4382</a></div></div>
<div class="ttc" id="structdundi__peer_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aeddb1df77f26fbe111539b1c4c0c1929">dundi_peer::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00311">pbx_dundi.c:311</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4ffb3a85b70d6a69590f5059817d536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ffb3a85b70d6a69590f5059817d536">&#9670;&nbsp;</a></span>qualify_peer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void qualify_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>schedonly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04565">4565</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d7/d00/sched_8h_source.html#l00046">AST_SCHED_DEL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04557">do_qualify()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00168">DUNDI_COMMAND_NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">FLAG_ISQUAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">dundi_peer::lastms</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">dundi_peer::maxms</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">dundi_peer::qualifyid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">dundi_peer::qualtrans</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00337">dundi_peer::qualtx</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">cache_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04557">do_qualify()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;{</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;   <span class="keywordtype">int</span> when;</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;   <a class="code" href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a>);</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>)</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>, 0);</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;   peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">maxms</a> &gt; 0) {</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;      when = 60000;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">lastms</a> &lt; 0)</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;         when = 10000;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      <span class="keywordflow">if</span> (schedonly)</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;         when = 5000;</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">qualifyid</a> = <a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, when, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae29ee8c2bd61bae78598415312d8784e">do_qualify</a>, peer);</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;      <span class="keywordflow">if</span> (!schedonly)</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;         peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a>(peer);</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;      <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>) {</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;         peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a56cc9e14d07ec3251c8331e0607e524a">qualtx</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a>);</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">qualtrans</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;      }</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   }</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;}</div><div class="ttc" id="structdundi__peer_html_a68e949e531b8bd22174267db35f3cf77"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a68e949e531b8bd22174267db35f3cf77">dundi_peer::qualifyid</a></div><div class="ttdeci">int qualifyid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00313">pbx_dundi.c:313</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a073f6e8ece4e053e44bfb5326d804dbc">FLAG_ISQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00170">pbx_dundi.c:170</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3b1b9cf4440fe9492c55ceda2bf85488"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3b1b9cf4440fe9492c55ceda2bf85488">dundi_send</a></div><div class="ttdeci">static int dundi_send(struct dundi_transaction *trans, int cmdresp, int flags, int final, struct dundi_ie_data *ied)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">pbx_dundi.c:3308</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a08ddb632952df9d4709c18d8a3568b4b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a08ddb632952df9d4709c18d8a3568b4b">destroy_trans</a></div><div class="ttdeci">static void destroy_trans(struct dundi_transaction *trans, int fromtimeout)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">pbx_dundi.c:3203</a></div></div>
<div class="ttc" id="structdundi__peer_html_a5ca312c87ed6ac5b29d4dca646f69e29"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a5ca312c87ed6ac5b29d4dca646f69e29">dundi_peer::lastms</a></div><div class="ttdeci">int lastms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00335">pbx_dundi.c:335</a></div></div>
<div class="ttc" id="structdundi__peer_html_a56cc9e14d07ec3251c8331e0607e524a"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a56cc9e14d07ec3251c8331e0607e524a">dundi_peer::qualtx</a></div><div class="ttdeci">struct timeval qualtx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00337">pbx_dundi.c:337</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0d9126a95d6ea8069c84c94dbf166c7f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0d9126a95d6ea8069c84c94dbf166c7f">create_transaction</a></div><div class="ttdeci">static struct dundi_transaction * create_transaction(struct dundi_peer *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">pbx_dundi.c:3137</a></div></div>
<div class="ttc" id="sched_8h_html_a25647782014f8dc012994efcd1b81d32"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a25647782014f8dc012994efcd1b81d32">AST_SCHED_DEL</a></div><div class="ttdeci">#define AST_SCHED_DEL(sched, id)</div><div class="ttdoc">Remove a scheduler entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d00/sched_8h_source.html#l00046">sched.h:46</a></div></div>
<div class="ttc" id="structdundi__peer_html_ada747500a9732b123266b7c51804dea2"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ada747500a9732b123266b7c51804dea2">dundi_peer::qualtrans</a></div><div class="ttdeci">struct dundi_transaction * qualtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00330">pbx_dundi.c:330</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae29ee8c2bd61bae78598415312d8784e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae29ee8c2bd61bae78598415312d8784e">do_qualify</a></div><div class="ttdeci">static int do_qualify(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04557">pbx_dundi.c:4557</a></div></div>
<div class="ttc" id="structdundi__peer_html_ad19f7ae6e6ba6ccbffacb5d88861e8e5"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ad19f7ae6e6ba6ccbffacb5d88861e8e5">dundi_peer::maxms</a></div><div class="ttdeci">int maxms</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00336">pbx_dundi.c:336</a></div></div>
<div class="ttc" id="dundi_8h_html_a3719171d090354db16889cd52d0f3a28"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a3719171d090354db16889cd52d0f3a28">DUNDI_COMMAND_NULL</a></div><div class="ttdeci">#define DUNDI_COMMAND_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00168">dundi.h:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a598daaedb8f8db3e4ca84a59a6ea39e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a598daaedb8f8db3e4ca84a59a6ea39e3">&#9670;&nbsp;</a></span>query_transactions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int query_transactions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03571">3571</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03503">dundi_query()</a>, <a class="el" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a>, and <a class="el" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04074">dundi_query_eid_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;{</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *trans;</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">trans</a>, trans, <a class="code" href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">parentlist</a>) {</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaa668b9b6c15acbdd4c1532b127c8699">dundi_query</a>(trans);</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;   }</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structdundi__transaction_html"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html">dundi_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00245">pbx_dundi.c:245</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a625c7bfebdd52adeaefbf97884ebf3f9"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a625c7bfebdd52adeaefbf97884ebf3f9">dundi_transaction::parentlist</a></div><div class="ttdeci">struct dundi_transaction::@438 parentlist</div></div>
<div class="ttc" id="pbx__dundi_8c_html_aaa668b9b6c15acbdd4c1532b127c8699"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aaa668b9b6c15acbdd4c1532b127c8699">dundi_query</a></div><div class="ttdeci">static int dundi_query(struct dundi_transaction *trans)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03503">pbx_dundi.c:3503</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structdundi__request_html_aacac814b7d1c6d4558d6054d4a3d3116"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#aacac814b7d1c6d4558d6054d4a3d3116">dundi_request::trans</a></div><div class="ttdeci">struct dundi_request::@440 trans</div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e1eda8492ec8beac69adda8b823bb1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e1eda8492ec8beac69adda8b823bb1e">&#9670;&nbsp;</a></span>register_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int register_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> **&#160;</td>
          <td class="paramname"><em>pending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03758">3758</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">dundi_request::crc32</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">dundi_request::dcontext</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">dundi_request::number</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">dundi_request::root_eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;{</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *cur;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;   <span class="keywordtype">int</span> res=0;</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d2/d7b/structrequests.html">requests</a>, cur, <a class="code" href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">list</a>) {</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Checking &#39;%s@%s&#39; vs &#39;%s@%s&#39;\n&quot;</span>, cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>,</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;         dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>);</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>) &amp;&amp;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;          !strcasecmp(cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>) &amp;&amp;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;          (!<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>, &amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>) || (cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a> == dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>))) {</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Found existing query for &#39;%s@%s&#39; for &#39;%s&#39; crc &#39;%08x&#39;\n&quot;</span>,</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;            cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>), cur-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>);</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;         *pending = cur;</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;         res = 1;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;      }</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;   }</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Registering request for &#39;%s@%s&#39; on behalf of &#39;%s&#39; crc &#39;%08x&#39;\n&quot;</span>,</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;            dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">number</a>, dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dcontext</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">root_eid</a>), dr-&gt;<a class="code" href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">crc32</a>);</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;      <span class="comment">/* Go ahead and link us in since nobody else is searching for this */</span></div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d2/d7b/structrequests.html">requests</a>, dr, <a class="code" href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">list</a>);</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;      *pending = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;   }</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="structrequests_html"><div class="ttname"><a href="../../d2/d7b/structrequests.html">requests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00344">pbx_dundi.c:344</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__request_html_af27d556683a4a28e6564618bcf00bec1"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#af27d556683a4a28e6564618bcf00bec1">dundi_request::dcontext</a></div><div class="ttdeci">char dcontext[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00274">pbx_dundi.c:274</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structdundi__request_html_acb3b936f08b0fc09268aee28fc52f88a"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#acb3b936f08b0fc09268aee28fc52f88a">dundi_request::number</a></div><div class="ttdeci">char number[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00275">pbx_dundi.c:275</a></div></div>
<div class="ttc" id="structdundi__request_html_a7ba6d986496f16e7c9bb92ea0265914d"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#a7ba6d986496f16e7c9bb92ea0265914d">dundi_request::crc32</a></div><div class="ttdeci">uint32_t crc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00286">pbx_dundi.c:286</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structdundi__request_html"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html">dundi_request</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00273">pbx_dundi.c:273</a></div></div>
<div class="ttc" id="structdundi__request_html_accb611520c3d9a107b5f0c49d5d62a34"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#accb611520c3d9a107b5f0c49d5d62a34">dundi_request::root_eid</a></div><div class="ttdeci">dundi_eid root_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00277">pbx_dundi.c:277</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="structdundi__request_html_ad20c7b361882199df8e25408dfa8d426"><div class="ttname"><a href="../../d4/d8f/structdundi__request.html#ad20c7b361882199df8e25408dfa8d426">dundi_request::list</a></div><div class="ttdeci">struct dundi_request::@441 list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1982509765f4870f1f63412a53ea668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1982509765f4870f1f63412a53ea668">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05155">5155</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00102">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00140">ast_sockaddr_setnull()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;{</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin2;</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;sin);</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a>(&amp;sin2);</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a6a98325d357365a72bef34f5a5ddfe55">set_config</a>(<span class="stringliteral">&quot;dundi.conf&quot;</span>, &amp;sin, 1, &amp;sin2))</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a>;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a6a98325d357365a72bef34f5a5ddfe55"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a6a98325d357365a72bef34f5a5ddfe55">set_config</a></div><div class="ttdeci">static int set_config(char *config_file, struct ast_sockaddr *sin, int reload, struct ast_sockaddr *sin2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">pbx_dundi.c:4937</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad91b5dfe4c188d15f4b2e9e2ec5d8864"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad91b5dfe4c188d15f4b2e9e2ec5d8864">ast_sockaddr_setnull</a></div><div class="ttdeci">static void ast_sockaddr_setnull(struct ast_sockaddr *addr)</div><div class="ttdoc">Sets address addr to null. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00140">netsock2.h:140</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1614486640519c17b1affd653f6a86ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1614486640519c17b1affd653f6a86ba">&#9670;&nbsp;</a></span>reschedule_precache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reschedule_precache </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expiration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03937">3937</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00694">AST_LIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">dundi_precache_queue::context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">dundi_precache_queue::expiration</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">dundi_precache_queue::number</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03972">dundi_precache_full()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;{</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a> *qe, *prev;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>, qe, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>) {</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;      <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d6/d49/structnumber.html">number</a>, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">number</a>) &amp;&amp; !strcasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">context</a>)) {</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>);</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;      }</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;   }</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;   <span class="keywordflow">if</span> (!qe) {</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <span class="keyword">sizeof</span>(*qe);</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <span class="keywordtype">int</span> num_len = strlen(<a class="code" href="../../d6/d49/structnumber.html">number</a>) + 1;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <span class="keywordtype">int</span> context_len = strlen(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>) + 1;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;      <span class="keywordflow">if</span> (!(qe = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, len + num_len + context_len))) {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      }</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;      strcpy(qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">number</a>, <a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;      qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">context</a> = qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">number</a> + num_len + 1;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">context</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, context_len);</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;   }</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   time(&amp;qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a>);</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;   qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a> += <a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a>;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   <span class="keywordflow">if</span> ((prev = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>))) {</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(prev, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>) &amp;&amp; ((<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(prev, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>))-&gt;expiration &lt;= qe-&gt;<a class="code" href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">expiration</a>))</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;         prev = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(prev, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>);</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab2a3cc3d4b84621b3c7d77a1370567d0">AST_LIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>, prev, qe, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>);</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>, qe, <a class="code" href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">list</a>);</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d2/dea/structpcq.html">pcq</a>);</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;}</div><div class="ttc" id="structpcq_html"><div class="ttname"><a href="../../d2/dea/structpcq.html">pcq</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00342">pbx_dundi.c:342</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a45d12bf06e2169381192166fe7b04025"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a45d12bf06e2169381192166fe7b04025">dundi_precache_queue::expiration</a></div><div class="ttdeci">time_t expiration</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00239">pbx_dundi.c:239</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a1f27749679e8054ef014a38569492895"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a1f27749679e8054ef014a38569492895">dundi_precache_queue::context</a></div><div class="ttdeci">char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00238">pbx_dundi.c:238</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab2a3cc3d4b84621b3c7d77a1370567d0"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab2a3cc3d4b84621b3c7d77a1370567d0">AST_LIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_LIST_INSERT_AFTER(head, listelm, elm, field)</div><div class="ttdoc">Inserts a list entry after a given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00694">linkedlists.h:694</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html">dundi_precache_queue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00236">pbx_dundi.c:236</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_a3feeb7aaf324dd707cd59d3ff5a9bbf0"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#a3feeb7aaf324dd707cd59d3ff5a9bbf0">dundi_precache_queue::number</a></div><div class="ttdeci">char number[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00240">pbx_dundi.c:240</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structdundi__precache__queue_html_ac99530529053c5c6f5b554f4a4557c05"><div class="ttname"><a href="../../de/dd0/structdundi__precache__queue.html#ac99530529053c5c6f5b554f4a4557c05">dundi_precache_queue::list</a></div><div class="ttdeci">struct dundi_precache_queue::@437 list</div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93cc42c4679166c530e749f1c4e0a015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93cc42c4679166c530e749f1c4e0a015">&#9670;&nbsp;</a></span>rescomp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rescomp </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02439">2439</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00227">dundi_result::weight</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">sort_results()</a>.</p>
<div class="fragment"><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;{</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d96/structdundi__result.html">dundi_result</a> *resa, *resb;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;   resa = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   resb = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;   <span class="keywordflow">if</span> (resa-&gt;<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> &lt; resb-&gt;<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>)</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <span class="keywordflow">if</span> (resa-&gt;<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a> &gt; resb-&gt;<a class="code" href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">weight</a>)</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;}</div><div class="ttc" id="structdundi__result_html"><div class="ttname"><a href="../../db/d96/structdundi__result.html">dundi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00225">dundi.h:225</a></div></div>
<div class="ttc" id="structdundi__result_html_aa01147b1f07072d246c76dc85d69df7c"><div class="ttname"><a href="../../db/d96/structdundi__result.html#aa01147b1f07072d246c76dc85d69df7c">dundi_result::weight</a></div><div class="ttdeci">int weight</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00227">dundi.h:227</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a078fbd7bba90ea159959f6e3f5e03ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a078fbd7bba90ea159959f6e3f5e03ec1">&#9670;&nbsp;</a></span>reset_transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reset_transaction </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d36/structdundi__transaction.html">dundi_transaction</a> *&#160;</td>
          <td class="paramname"><em>trans</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00499">499</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">dundi_transaction::aseqno</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">dundi_transaction::dtrans</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">FLAG_FINAL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">get_trans_id()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">dundi_transaction::iseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00263">dundi_transaction::oiseqno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">dundi_transaction::oseqno</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">dundi_transaction::strans</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordtype">int</span> tid;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   tid = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a4b3f381e618f8d0be9a452878057b0f9">get_trans_id</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">if</span> (tid &lt; 1)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">strans</a> = tid;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dtrans</a> = 0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">iseqno</a> = 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a20f1587dc1341e772c7038ebf87529fd">oiseqno</a> = 0;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">oseqno</a> = 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   trans-&gt;<a class="code" href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">aseqno</a> = 0;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(trans, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="ttc" id="structdundi__transaction_html_a994263e05f34cf3e146bd54903b7a053"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a994263e05f34cf3e146bd54903b7a053">dundi_transaction::aseqno</a></div><div class="ttdeci">unsigned char aseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00265">pbx_dundi.c:265</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2867401d4e0a734de457c75284ab6b67a483caf8b50016a3a506286eaee90927f">FLAG_FINAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00169">pbx_dundi.c:169</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a20f1587dc1341e772c7038ebf87529fd"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a20f1587dc1341e772c7038ebf87529fd">dundi_transaction::oiseqno</a></div><div class="ttdeci">unsigned char oiseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00263">pbx_dundi.c:263</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a4b3f381e618f8d0be9a452878057b0f9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a4b3f381e618f8d0be9a452878057b0f9">get_trans_id</a></div><div class="ttdeci">static int get_trans_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">pbx_dundi.c:480</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a0a398a49dcc9f74b9440fd7b59ddffb6"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a0a398a49dcc9f74b9440fd7b59ddffb6">dundi_transaction::strans</a></div><div class="ttdeci">unsigned short strans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00260">pbx_dundi.c:260</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a9887965bdbba3acab90015e43cde575a"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a9887965bdbba3acab90015e43cde575a">dundi_transaction::oseqno</a></div><div class="ttdeci">unsigned char oseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00264">pbx_dundi.c:264</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a88c0d7780627c438ff4ebde5cfca28cb"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a88c0d7780627c438ff4ebde5cfca28cb">dundi_transaction::dtrans</a></div><div class="ttdeci">unsigned short dtrans</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00261">pbx_dundi.c:261</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structdundi__transaction_html_a69fdde8d8d12a358d2a608b2c821454b"><div class="ttname"><a href="../../db/d36/structdundi__transaction.html#a69fdde8d8d12a358d2a608b2c821454b">dundi_transaction::iseqno</a></div><div class="ttdeci">unsigned char iseqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00262">pbx_dundi.c:262</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50a9b3f4708bad6a20555b7089d7b8a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a9b3f4708bad6a20555b7089d7b8a4">&#9670;&nbsp;</a></span>save_secret()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void save_secret </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newkey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oldkey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02125">2125</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d21/main_2db_8c_source.html#l00327">ast_db_put()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00181">DUNDI_SECRET_TIME</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02177">check_password()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">load_password()</a>.</p>
<div class="fragment"><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;{</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[350];</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <span class="keywordflow">if</span> (oldkey)</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s;%s&quot;</span>, oldkey, newkey);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s&quot;</span>, newkey);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) + <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a>;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>, <span class="stringliteral">&quot;secret&quot;</span>, tmp);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%d&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <a class="code" href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>, <span class="stringliteral">&quot;secretexpiry&quot;</span>, tmp);</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afce48059fc557e50d12470e8c086ff57"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a></div><div class="ttdeci">static char secretpath[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00208">pbx_dundi.c:208</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac312f5ad9b5a607157fc7f33ae40ef18"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac312f5ad9b5a607157fc7f33ae40ef18">DUNDI_SECRET_TIME</a></div><div class="ttdeci">#define DUNDI_SECRET_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00181">pbx_dundi.c:181</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a67db34020f8303d719cb594849f0f868"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a67db34020f8303d719cb594849f0f868">rotatetime</a></div><div class="ttdeci">static time_t rotatetime</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00211">pbx_dundi.c:211</a></div></div>
<div class="ttc" id="astdb_8h_html_a0f14f6bff4f412c88b50aba34d3a5e35"><div class="ttname"><a href="../../de/d4a/astdb_8h.html#a0f14f6bff4f412c88b50aba34d3a5e35">ast_db_put</a></div><div class="ttdeci">int ast_db_put(const char *family, const char *key, const char *value)</div><div class="ttdoc">Store value addressed by family/key. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00327">main/db.c:327</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a98325d357365a72bef34f5a5ddfe55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a98325d357365a72bef34f5a5ddfe55">&#9670;&nbsp;</a></span>set_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_config </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>config_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">4937</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03328">ast_category_browse()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02847">ast_eid_is_empty()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00537">ast_sockaddr_set_port</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00967">ast_str2tos()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02825">ast_str_to_eid()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">build_mapping()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l00390">DEFAULT_MAXMS</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00218">DUNDI_DEFAULT_CACHE_TIME</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00216">DUNDI_DEFAULT_TTL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">DUNDI_MODEL_OUTBOUND</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00030">DUNDI_PORT</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03972">dundi_precache_full()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">get_ipaddress()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">ast_variable::lineno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">load_password()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04363">mark_mappings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04353">mark_peers()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">prune_mappings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">prune_peers()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04915">set_host_ipaddr()</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05155">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;{</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;   <span class="keywordtype">char</span> *cat;</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> last_port = 0;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;   <span class="keywordtype">int</span> port = 0;</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;   <span class="keywordtype">int</span> globalpcmodel = 0;</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;   <a class="code" href="../../d0/d86/structast__eid.html">dundi_eid</a> testeid;</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;   <span class="keywordtype">char</span> bind_addr[80]={0,};</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;   <span class="keywordtype">char</span> bind_addr2[80]={0,};</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../d8/d56/cdr__odbc_8c.html#abb961ff543844412d044d48e6163b3a8">config_file</a>, config_flags)) || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to load config %s\n&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#abb961ff543844412d044d48e6163b3a8">config_file</a>);</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;   }</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a> = <a class="code" href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a>;</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a> = <a class="code" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a>;</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a9052010ef014bd56be478fab26feb2e1">ast_eid_is_empty</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>)) {</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Entity ID is not set.\n&quot;</span>);</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;   }</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;   memcpy(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a>, &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a>));</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a> = 0;</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>, <span class="stringliteral">&quot;dundi&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a>));</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;   v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>);</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;   <span class="keywordflow">while</span>(v) {</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;port&quot;</span>)){</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;         port = atoi(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bindaddr&quot;</span>)) {</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a>(bind_addr, <span class="keyword">sizeof</span>(bind_addr), v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, AF_UNSPEC) == 0) {</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(sin, bind_addr, 0)) {</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid host/IP &#39;%s&#39;\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;            }</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;         }</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bindaddr2&quot;</span>)) {</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a>(bind_addr2, <span class="keyword">sizeof</span>(bind_addr2), v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, AF_UNSPEC) == 0) {</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(sin2, bind_addr2, 0)) {</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid host/IP &#39;%s&#39;\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;            }</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;         }</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;authdebug&quot;</span>)) {</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a936591bfc4ac4515aa621afe79dbcd35">authdebug</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ttl&quot;</span>)) {</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;         <span class="keywordflow">if</span> ((sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;x) == 1) &amp;&amp; (x &gt; 0) &amp;&amp; (x &lt; <a class="code" href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a>)) {</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a> = x;</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid TTL at line %d, must be number from 1 to %d\n&quot;</span>,</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code" href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a>);</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;         }</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;autokill&quot;</span>)) {</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;         <span class="keywordflow">if</span> (sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;x) == 1) {</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            <span class="keywordflow">if</span> (x &gt;= 0)</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;               <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a> = x;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Nice try, but autokill has to be &gt;0 or &#39;yes&#39; or &#39;no&#39; at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>)) {</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a> = <a class="code" href="../../d5/dff/chan__iax2_8c.html#a960e3be6d1f16d936afd3d6fba7f31b0">DEFAULT_MAXMS</a>;</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a> = 0;</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;         }</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;entityid&quot;</span>)) {</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a>(&amp;testeid, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>))</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a> = testeid;</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid global endpoint identifier &#39;%s&#39; at line %d\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;tos&quot;</span>)) {</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d59/acl_8h.html#a49d1eefe77636e2a63ad013afa0fc3b5">ast_str2tos</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>))</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid tos value at line %d, refer to QoS documentation\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>);</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;department&quot;</span>)) {</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a>));</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;organization&quot;</span>)) {</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a>));</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;locality&quot;</span>)) {</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a>));</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;stateprov&quot;</span>)) {</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a>));</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;country&quot;</span>)) {</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a>));</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;email&quot;</span>)) {</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a>));</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;phone&quot;</span>)) {</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a>));</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;storehistory&quot;</span>)) {</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;         <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a> = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cachetime&quot;</span>)) {</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;         <span class="keywordflow">if</span> ((sscanf(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;x) == 1)) {</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a> = x;</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid cache time at line %d. Using default value &#39;%d&#39;.\n&quot;</span>,</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;               v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a>);</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;         }</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;      }</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;      v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;   }</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;   <span class="keywordflow">if</span> (port == 0) {</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;      port = <a class="code" href="../../d2/d59/dundi_8h.html#a3a0aa89ed893781e5d8a2d59d8f5be7b">DUNDI_PORT</a>;</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;   }</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(sin)) {</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;      sprintf(bind_addr, <span class="stringliteral">&quot;0.0.0.0:%d&quot;</span>, port);</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(sin, bind_addr, 0);</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(sin, port);</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;   }</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;   <span class="keywordflow">if</span> (last_port == 0) {</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;      last_port = port;</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (last_port != port) {</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;change to port ignored until next asterisk re-start\n&quot;</span>);</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;   }</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a8e7868cab84bb7a27c4722d6171ceb8a">set_host_ipaddr</a>(sin);</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(sin2)) {</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a>(sin2, port);</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;   }</div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a5e20351ab6bfbeeede5116299b51ea74">mark_mappings</a>();</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;   v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;mappings&quot;</span>);</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;   <span class="keywordflow">while</span> (v) {</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#ac5a5eeed59ae4241e5332167a2fb72bb">build_mapping</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;      v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;   }</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa3a5263214222e75a7ae12b350d61c2f">prune_mappings</a>();</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a951981db155b9a3e3c625a37a355118c">mark_peers</a>();</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;   cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;   <span class="keywordflow">while</span>(cat) {</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(cat, <span class="stringliteral">&quot;general&quot;</span>) &amp;&amp; strcasecmp(cat, <span class="stringliteral">&quot;mappings&quot;</span>)) {</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;         <span class="comment">/* Entries */</span></div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a>(&amp;testeid, cat))</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abea805104a13e221adad99663e42050f">build_peer</a>(&amp;testeid, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, cat), &amp;globalpcmodel);</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(cat, <span class="stringliteral">&quot;*&quot;</span>)) {</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abea805104a13e221adad99663e42050f">build_peer</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, cat), &amp;globalpcmodel);</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;            <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a> = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Ignoring invalid EID entry &#39;%s&#39;\n&quot;</span>, cat);</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;      }</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;      cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, cat);</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;   }</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55c82d81ce37ebe5125d5a017c12b5ac">prune_peers</a>();</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a0ea1ce860ced2100b4d6bcd7297c5895">load_password</a>();</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;   <span class="keywordflow">if</span> (globalpcmodel &amp; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a>)</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aee690082f6f678c7be9ae436242bfe0e">dundi_precache_full</a>();</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_aee690082f6f678c7be9ae436242bfe0e"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aee690082f6f678c7be9ae436242bfe0e">dundi_precache_full</a></div><div class="ttdeci">static void dundi_precache_full(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03972">pbx_dundi.c:3972</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_abb961ff543844412d044d48e6163b3a8"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#abb961ff543844412d044d48e6163b3a8">config_file</a></div><div class="ttdeci">static const char config_file[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00057">cdr_odbc.c:57</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa3a5263214222e75a7ae12b350d61c2f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa3a5263214222e75a7ae12b350d61c2f">prune_mappings</a></div><div class="ttdeci">static void prune_mappings(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">pbx_dundi.c:4427</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a41e968a3ec944a6d905765d9a44a286f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a41e968a3ec944a6d905765d9a44a286f">locality</a></div><div class="ttdeci">static char locality[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00203">pbx_dundi.c:203</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a80b179d5eeff54725082d2f00e3cce44"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a></div><div class="ttdeci">static int get_ipaddress(char *ip, size_t size, const char *str, int family)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">pbx_dundi.c:4901</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a72898bf086d5beac2d22aa81c2b1bfb2"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a72898bf086d5beac2d22aa81c2b1bfb2">dundi_cache_time</a></div><div class="ttdeci">static int dundi_cache_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">pbx_dundi.c:196</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afc0636d6a53edfb41e1afdd3cf63a4ec"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afc0636d6a53edfb41e1afdd3cf63a4ec">global_eid</a></div><div class="ttdeci">static dundi_eid global_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00198">pbx_dundi.c:198</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="dundi_8h_html_a3a0aa89ed893781e5d8a2d59d8f5be7b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a3a0aa89ed893781e5d8a2d59d8f5be7b">DUNDI_PORT</a></div><div class="ttdeci">#define DUNDI_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00030">dundi.h:30</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a8e7868cab84bb7a27c4722d6171ceb8a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a8e7868cab84bb7a27c4722d6171ceb8a">set_host_ipaddr</a></div><div class="ttdeci">static void set_host_ipaddr(struct ast_sockaddr *sin)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04915">pbx_dundi.c:4915</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dundi_8h_html_aa28cf92d78bb7b9d8bc76ff2b8ae4787"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a></div><div class="ttdeci">#define DUNDI_DEFAULT_CACHE_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00218">dundi.h:218</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aadd75c09e15efa9061997f033b3f224b"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aadd75c09e15efa9061997f033b3f224b">email</a></div><div class="ttdeci">static char email[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00206">pbx_dundi.c:206</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a2483a4aba107ceb21350c25ef3e4e2be"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a2483a4aba107ceb21350c25ef3e4e2be">phone</a></div><div class="ttdeci">static char phone[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00207">pbx_dundi.c:207</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="acl_8h_html_a49d1eefe77636e2a63ad013afa0fc3b5"><div class="ttname"><a href="../../d5/d59/acl_8h.html#a49d1eefe77636e2a63ad013afa0fc3b5">ast_str2tos</a></div><div class="ttdeci">int ast_str2tos(const char *value, unsigned int *tos)</div><div class="ttdoc">Convert a string to the appropriate TOS value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db8/acl_8c_source.html#l00967">acl.c:967</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a0ea1ce860ced2100b4d6bcd7297c5895"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a0ea1ce860ced2100b4d6bcd7297c5895">load_password</a></div><div class="ttdeci">static void load_password(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">pbx_dundi.c:2138</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a936591bfc4ac4515aa621afe79dbcd35"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a936591bfc4ac4515aa621afe79dbcd35">authdebug</a></div><div class="ttdeci">static int authdebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00193">pbx_dundi.c:193</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_afce48059fc557e50d12470e8c086ff57"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#afce48059fc557e50d12470e8c086ff57">secretpath</a></div><div class="ttdeci">static char secretpath[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00208">pbx_dundi.c:208</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aca505bc5b6272f18385b9c7fe6829086"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aca505bc5b6272f18385b9c7fe6829086">any_peer</a></div><div class="ttdeci">static struct dundi_peer * any_peer</div><div class="ttdoc">Wildcard peer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00352">pbx_dundi.c:352</a></div></div>
<div class="ttc" id="dundi_8h_html_a6c22ea75a0d756702702608ef421590b"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a></div><div class="ttdeci">#define DUNDI_DEFAULT_TTL</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00216">dundi.h:216</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a65cd854e2d184b5038e9cbdec5feaee5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a65cd854e2d184b5038e9cbdec5feaee5">global_storehistory</a></div><div class="ttdeci">static int global_storehistory</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00200">pbx_dundi.c:200</a></div></div>
<div class="ttc" id="utils_8h_html_ad60a8c795e1f64b7beeed705425c555f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a></div><div class="ttdeci">int ast_str_to_eid(struct ast_eid *eid, const char *s)</div><div class="ttdoc">Convert a string into an EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02825">main/utils.c:2825</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a></div><div class="ttdeci">static dundi_eid empty_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">pbx_dundi.c:212</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3db75f1593a29fe97f086bbf4cf0dbfe"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3db75f1593a29fe97f086bbf4cf0dbfe">find_peer</a></div><div class="ttdeci">static struct dundi_peer * find_peer(dundi_eid *eid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">pbx_dundi.c:515</a></div></div>
<div class="ttc" id="netsock2_8h_html_ac83e6bdec376b74d02da8d2f8e1af888"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ac83e6bdec376b74d02da8d2f8e1af888">ast_sockaddr_set_port</a></div><div class="ttdeci">#define ast_sockaddr_set_port(addr, port)</div><div class="ttdoc">Sets the port number of a socket address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00537">netsock2.h:537</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a03e72b5f331070bc01418a74af199eb9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a03e72b5f331070bc01418a74af199eb9">country</a></div><div class="ttdeci">static char country[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00205">pbx_dundi.c:205</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a46e0890829ef32048f1d443e79bd9e9f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a46e0890829ef32048f1d443e79bd9e9f">global_autokilltimeout</a></div><div class="ttdeci">static int global_autokilltimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00197">pbx_dundi.c:197</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a960e3be6d1f16d936afd3d6fba7f31b0"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a960e3be6d1f16d936afd3d6fba7f31b0">DEFAULT_MAXMS</a></div><div class="ttdeci">#define DEFAULT_MAXMS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00390">chan_iax2.c:390</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a25a9305efab3b493ca2519562fcec3d5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></div><div class="ttdeci">static unsigned int tos</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00191">pbx_dundi.c:191</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a1ffcd4d21da49b299b25534bb7341cb1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a1ffcd4d21da49b299b25534bb7341cb1">dundi_ttl</a></div><div class="ttdeci">static int dundi_ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00194">pbx_dundi.c:194</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a951981db155b9a3e3c625a37a355118c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a951981db155b9a3e3c625a37a355118c">mark_peers</a></div><div class="ttdeci">static void mark_peers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04353">pbx_dundi.c:4353</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abea805104a13e221adad99663e42050f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abea805104a13e221adad99663e42050f">build_peer</a></div><div class="ttdeci">static void build_peer(dundi_eid *eid, struct ast_variable *v, int *globalpcmode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">pbx_dundi.c:4628</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ad51e32c16369e570e5b8eeac50679e74"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ad51e32c16369e570e5b8eeac50679e74">org</a></div><div class="ttdeci">static char org[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00202">pbx_dundi.c:202</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a5e20351ab6bfbeeede5116299b51ea74"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a5e20351ab6bfbeeede5116299b51ea74">mark_mappings</a></div><div class="ttdeci">static void mark_mappings(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04363">pbx_dundi.c:4363</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac5a5eeed59ae4241e5332167a2fb72bb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac5a5eeed59ae4241e5332167a2fb72bb">build_mapping</a></div><div class="ttdeci">static void build_mapping(const char *name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">pbx_dundi.c:4457</a></div></div>
<div class="ttc" id="utils_8h_html_a9052010ef014bd56be478fab26feb2e1"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a9052010ef014bd56be478fab26feb2e1">ast_eid_is_empty</a></div><div class="ttdeci">int ast_eid_is_empty(const struct ast_eid *eid)</div><div class="ttdoc">Check if EID is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02847">main/utils.c:2847</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa6ff7731f29e08bc8019c6bdab908df8"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa6ff7731f29e08bc8019c6bdab908df8">DUNDI_MODEL_OUTBOUND</a></div><div class="ttdeci">#define DUNDI_MODEL_OUTBOUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00160">pbx_dundi.c:160</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55c82d81ce37ebe5125d5a017c12b5ac"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55c82d81ce37ebe5125d5a017c12b5ac">prune_peers</a></div><div class="ttdeci">static void prune_peers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">pbx_dundi.c:4412</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ae05dd1de1447814a60b19499c32f7189"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ae05dd1de1447814a60b19499c32f7189">dept</a></div><div class="ttdeci">static char dept[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00201">pbx_dundi.c:201</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_ac87afa7a52fa95a8c90ba8e1f61c6957"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#ac87afa7a52fa95a8c90ba8e1f61c6957">stateprov</a></div><div class="ttdeci">static char stateprov[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00204">pbx_dundi.c:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e7868cab84bb7a27c4722d6171ceb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7868cab84bb7a27c4722d6171ceb8a">&#9670;&nbsp;</a></span>set_host_ipaddr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_host_ipaddr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04915">4915</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">get_ipaddress()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d9/d94/network_8h_source.html#l00069">MAXHOSTNAMELEN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;{</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;   <span class="keywordtype">char</span> hn[<a class="code" href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a>];</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;   <span class="keyword">struct </span>addrinfo <a class="code" href="../../de/d2c/structhints.html">hints</a>;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;   <span class="keywordtype">int</span> family;</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;   memset(&amp;<a class="code" href="../../de/d2c/structhints.html">hints</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d2c/structhints.html">hints</a>));</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(sin)) {</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      family = AF_INET6;</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;      family = AF_INET;</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;   }</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;   <span class="keywordflow">if</span> (gethostname(hn, <span class="keyword">sizeof</span>(hn) - 1) &lt; 0) {</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to get host name!\n&quot;</span>);</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;   }</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a>), hn, family);</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a80b179d5eeff54725082d2f00e3cce44"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a80b179d5eeff54725082d2f00e3cce44">get_ipaddress</a></div><div class="ttdeci">static int get_ipaddress(char *ip, size_t size, const char *str, int family)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">pbx_dundi.c:4901</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="network_8h_html_afd80ecbe3170ca4fc85b65cda8659f82"><div class="ttname"><a href="../../d9/d94/network_8h.html#afd80ecbe3170ca4fc85b65cda8659f82">MAXHOSTNAMELEN</a></div><div class="ttdeci">#define MAXHOSTNAMELEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d94/network_8h_source.html#l00069">network.h:69</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abe4895c1ad7c3100e5566b3a9257f2e9"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abe4895c1ad7c3100e5566b3a9257f2e9">ipaddr</a></div><div class="ttdeci">static char ipaddr[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00210">pbx_dundi.c:210</a></div></div>
<div class="ttc" id="structhints_html"><div class="ttname"><a href="../../de/d2c/structhints.html">hints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03624">extconf.c:3624</a></div></div>
<div class="ttc" id="netsock2_8h_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a023f892544ad2dde2a7ef3429fbd3a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a023f892544ad2dde2a7ef3429fbd3a0f">&#9670;&nbsp;</a></span>socket_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int socket_read </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02083">2083</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00606">ast_recvfrom()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi_showframe()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">handle_frame()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00155">MAX_PACKET_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02194">network_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sin;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *h;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a879456c3b8e2853f7044d764e9c180d4">MAX_PACKET_SIZE</a>];</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   res = <a class="code" href="../../db/df1/netsock2_8h.html#ab8b4d30461c0683ce147322c790d11db">ast_recvfrom</a>(*((<span class="keywordtype">int</span> *)sock), buf, <span class="keyword">sizeof</span>(buf), 0, &amp;sin);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != ECONNREFUSED)</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;   }</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   <span class="keywordflow">if</span> (res &lt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>)) {</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;midget packet received (%d of %d min)\n&quot;</span>, res, (<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   }</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   buf[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   h = (<span class="keyword">struct </span><a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a> *) buf;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a>)</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a>(h, 1, &amp;sin, res - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aeaefe1abed021df6d8f2105d5e4ba5a5">handle_frame</a>(h, &amp;sin, res - <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a>));</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structdundi__hdr_html"><div class="ttname"><a href="../../d8/d85/structdundi__hdr.html">dundi_hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00034">dundi.h:34</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3606ca85702bb0258aec62c4f947875f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3606ca85702bb0258aec62c4f947875f">dundidebug</a></div><div class="ttdeci">static int dundidebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">pbx_dundi.c:192</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8h_html_ab8b4d30461c0683ce147322c790d11db"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ab8b4d30461c0683ce147322c790d11db">ast_recvfrom</a></div><div class="ttdeci">ssize_t ast_recvfrom(int sockfd, void *buf, size_t len, int flags, struct ast_sockaddr *src_addr)</div><div class="ttdoc">Wrapper around recvfrom(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00606">netsock2.c:606</a></div></div>
<div class="ttc" id="dundi-parser_8c_html_a662a55bf97ad210f616b60d37ebbc4b2"><div class="ttname"><a href="../../df/d70/dundi-parser_8c.html#a662a55bf97ad210f616b60d37ebbc4b2">dundi_showframe</a></div><div class="ttdeci">void dundi_showframe(struct dundi_hdr *fhi, int rx, struct ast_sockaddr *sin, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d70/dundi-parser_8c_source.html#l00432">dundi-parser.c:432</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a879456c3b8e2853f7044d764e9c180d4"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a879456c3b8e2853f7044d764e9c180d4">MAX_PACKET_SIZE</a></div><div class="ttdeci">#define MAX_PACKET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00155">pbx_dundi.c:155</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aeaefe1abed021df6d8f2105d5e4ba5a5"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aeaefe1abed021df6d8f2105d5e4ba5a5">handle_frame</a></div><div class="ttdeci">static int handle_frame(struct dundi_hdr *h, struct ast_sockaddr *sin, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02042">pbx_dundi.c:2042</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77e5ad29e79bbb7ca62f5b007e14b6af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e5ad29e79bbb7ca62f5b007e14b6af">&#9670;&nbsp;</a></span>sort_results()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sort_results </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d96/structdundi__result.html">dundi_result</a> *&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02451">2451</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02439">rescomp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02456">dundi_do_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04832">dundi_exec()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">dundifunc_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;{</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   qsort(results, count, <span class="keyword">sizeof</span>(results[0]), <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a93cc42c4679166c530e749f1c4e0a015">rescomp</a>);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a93cc42c4679166c530e749f1c4e0a015"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a93cc42c4679166c530e749f1c4e0a015">rescomp</a></div><div class="ttdeci">static int rescomp(const void *a, const void *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02439">pbx_dundi.c:2439</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6509f01db3676a8f6cd3485afe7b94d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6509f01db3676a8f6cd3485afe7b94d">&#9670;&nbsp;</a></span>start_network_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int start_network_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02296">2296</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02194">network_thread()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02228">process_clearcache()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02261">process_precache()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;{</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a49128caa5ade5fbd7f9a42f39a23476a">network_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aad5c932e5e55537cfc9bc16dc23d1889">process_precache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#adad3e96eef9a45cf8c4f172bdea92436">process_clearcache</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;}</div><div class="ttc" id="pbx__dundi_8c_html_a85c25ca8e4d47c180435a10433185af1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a></div><div class="ttdeci">static pthread_t precachethreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00189">pbx_dundi.c:189</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aad5c932e5e55537cfc9bc16dc23d1889"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aad5c932e5e55537cfc9bc16dc23d1889">process_precache</a></div><div class="ttdeci">static void * process_precache(void *ign)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02261">pbx_dundi.c:2261</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a49128caa5ade5fbd7f9a42f39a23476a"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a49128caa5ade5fbd7f9a42f39a23476a">network_thread</a></div><div class="ttdeci">static void * network_thread(void *ignore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02194">pbx_dundi.c:2194</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aaccf62d7fc810d5b42da0a3069ba7651"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a></div><div class="ttdeci">static pthread_t netthreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00188">pbx_dundi.c:188</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_af8decaf64f53b028de928b48db008399"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a></div><div class="ttdeci">static pthread_t clearcachethreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00190">pbx_dundi.c:190</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_adad3e96eef9a45cf8c4f172bdea92436"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#adad3e96eef9a45cf8c4f172bdea92436">process_clearcache</a></div><div class="ttdeci">static void * process_clearcache(void *ignore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l02228">pbx_dundi.c:2228</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83f1c7c6f93407f4887453beffc42a7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83f1c7c6f93407f4887453beffc42a7c">&#9670;&nbsp;</a></span>str2tech()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int str2tech </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00396">396</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03137">create_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00061">DUNDI_PROTO_H323</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00057">DUNDI_PROTO_IAX</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00059">DUNDI_PROTO_SIP</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04457">build_mapping()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="stringliteral">&quot;IAX&quot;</span>) || !strcasecmp(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="stringliteral">&quot;IAX2&quot;</span>))</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca">DUNDI_PROTO_IAX</a>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="stringliteral">&quot;SIP&quot;</span>))</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85">DUNDI_PROTO_SIP</a>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="stringliteral">&quot;H323&quot;</span>))</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44">DUNDI_PROTO_H323</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44">DUNDI_PROTO_H323</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00061">dundi.h:61</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85">DUNDI_PROTO_SIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00059">dundi.h:59</a></div></div>
<div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca">DUNDI_PROTO_IAX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00057">dundi.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a91531d6c5dc497077760c3892164a574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91531d6c5dc497077760c3892164a574">&#9670;&nbsp;</a></span>tech2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* tech2str </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tech</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00380">380</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d59/dundi_8h_source.html#l00061">DUNDI_PROTO_H323</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00057">DUNDI_PROTO_IAX</a>, <a class="el" href="../../d2/d59/dundi_8h_source.html#l00055">DUNDI_PROTO_NONE</a>, and <a class="el" href="../../d2/d59/dundi_8h_source.html#l00059">DUNDI_PROTO_SIP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">cache_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">dundi_show_cache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02883">dundi_show_mappings()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">switch</span>(tech) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a1b82bcf97f976e5eacca187b31b39fdb">DUNDI_PROTO_NONE</a>:</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;None&quot;</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca">DUNDI_PROTO_IAX</a>:</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;IAX2&quot;</span>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85">DUNDI_PROTO_SIP</a>:</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;SIP&quot;</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44">DUNDI_PROTO_H323</a>:</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;H323&quot;</span>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371afa27f4d14e290abe9bf23c93b313ae44">DUNDI_PROTO_H323</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00061">dundi.h:61</a></div></div>
<div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a72ee72c7d1da28f2f71175ecaf2a7f85">DUNDI_PROTO_SIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00059">dundi.h:59</a></div></div>
<div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371ad4f75d550b4a3963a24587581492cbca">DUNDI_PROTO_IAX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00057">dundi.h:57</a></div></div>
<div class="ttc" id="dundi_8h_html_a456ac33d49271d3e2c371351cd1d6371a1b82bcf97f976e5eacca187b31b39fdb"><div class="ttname"><a href="../../d2/d59/dundi_8h.html#a456ac33d49271d3e2c371351cd1d6371a1b82bcf97f976e5eacca187b31b39fdb">DUNDI_PROTO_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d59/dundi_8h_source.html#l00055">dundi.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05099">5099</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00269">ast_sched_context_destroy()</a>, <a class="el" href="../../d2/df2/pbx__switch_8c_source.html#l00076">ast_unregister_switch()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00107">io_context_destroy()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04363">mark_mappings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04353">mark_peers()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">prune_mappings()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">prune_peers()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;{</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a>));</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a4b11d763a689cb0df33a4a16c9d89ef3">ast_unregister_switch</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a169ae5c86e91fcc5014f9072ed3dd4cc">dundi_switch</a>);</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d5/db0/group__functions.html#gae3e149ad077b387bc99625257cdfa5b9">dundi_function</a>);</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a427edee20aa126369758234e88d7d637">dundi_query_function</a>);</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a78fa064a53288c1498570513cfdd7480">dundi_result_function</a>);</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;   <span class="comment">/* Stop all currently running threads */</span></div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a> = 1;</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;      pthread_kill(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a>, SIGURG);</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;      pthread_join(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;   }</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;      pthread_kill(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a>, SIGURG);</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;      pthread_join(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;   }</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;      pthread_cancel(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a>);</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;      pthread_join(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;   }</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> &gt;= 0) {</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;      close(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>);</div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;   }</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a> &gt;= 0) {</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;      close(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a>);</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;   }</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a5e20351ab6bfbeeede5116299b51ea74">mark_mappings</a>();</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#aa3a5263214222e75a7ae12b350d61c2f">prune_mappings</a>();</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a951981db155b9a3e3c625a37a355118c">mark_peers</a>();</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;   <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a55c82d81ce37ebe5125d5a017c12b5ac">prune_peers</a>();</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;   <span class="keywordflow">if</span> (-1 &lt; <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>) {</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;      close(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a>);</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a> = -1;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;   }</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>) {</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      <a class="code" href="../../dc/dac/io_8h.html#a5409251fbead35b5e59fe322e14446b9">io_context_destroy</a>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a>);</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;   }</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/da0/structsched.html">sched</a>) {</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>);</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;      <a class="code" href="../../d0/da0/structsched.html">sched</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;   }</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa3a5263214222e75a7ae12b350d61c2f"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa3a5263214222e75a7ae12b350d61c2f">prune_mappings</a></div><div class="ttdeci">static void prune_mappings(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04427">pbx_dundi.c:4427</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a85c25ca8e4d47c180435a10433185af1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a85c25ca8e4d47c180435a10433185af1">precachethreadid</a></div><div class="ttdeci">static pthread_t precachethreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00189">pbx_dundi.c:189</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_abda48311b6abe5a4dd8b6904ddde0a6d"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#abda48311b6abe5a4dd8b6904ddde0a6d">io</a></div><div class="ttdeci">static struct io_context * io</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00184">pbx_dundi.c:184</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="pbx_8h_html_a4b11d763a689cb0df33a4a16c9d89ef3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a4b11d763a689cb0df33a4a16c9d89ef3">ast_unregister_switch</a></div><div class="ttdeci">void ast_unregister_switch(struct ast_switch *sw)</div><div class="ttdoc">Unregister an alternative switch. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/df2/pbx__switch_8c_source.html#l00076">pbx_switch.c:76</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aaccf62d7fc810d5b42da0a3069ba7651"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aaccf62d7fc810d5b42da0a3069ba7651">netthreadid</a></div><div class="ttdeci">static pthread_t netthreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00188">pbx_dundi.c:188</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a34d899b0c513443c533f0a04813aed58"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a34d899b0c513443c533f0a04813aed58">netsocket</a></div><div class="ttdeci">static int netsocket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00186">pbx_dundi.c:186</a></div></div>
<div class="ttc" id="io_8h_html_a5409251fbead35b5e59fe322e14446b9"><div class="ttname"><a href="../../dc/dac/io_8h.html#a5409251fbead35b5e59fe322e14446b9">io_context_destroy</a></div><div class="ttdeci">void io_context_destroy(struct io_context *ioc)</div><div class="ttdoc">Destroys a context. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0a/io_8c_source.html#l00107">io.c:107</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="group__functions_html_gae3e149ad077b387bc99625257cdfa5b9"><div class="ttname"><a href="../../d5/db0/group__functions.html#gae3e149ad077b387bc99625257cdfa5b9">dundi_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04186">pbx_dundi.c:4186</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_af8decaf64f53b028de928b48db008399"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#af8decaf64f53b028de928b48db008399">clearcachethreadid</a></div><div class="ttdeci">static pthread_t clearcachethreadid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00190">pbx_dundi.c:190</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a989d6707298899f07c764d259d5d3fcb"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a989d6707298899f07c764d259d5d3fcb">cli_dundi</a></div><div class="ttdeci">static struct ast_cli_entry cli_dundi[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l03119">pbx_dundi.c:3119</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_aa73e8fca9184c251b2983cf9e6788df1"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#aa73e8fca9184c251b2983cf9e6788df1">dundi_shutdown</a></div><div class="ttdeci">static int dundi_shutdown</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00213">pbx_dundi.c:213</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a951981db155b9a3e3c625a37a355118c"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a951981db155b9a3e3c625a37a355118c">mark_peers</a></div><div class="ttdeci">static void mark_peers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04353">pbx_dundi.c:4353</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a5e20351ab6bfbeeede5116299b51ea74"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a5e20351ab6bfbeeede5116299b51ea74">mark_mappings</a></div><div class="ttdeci">static void mark_mappings(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04363">pbx_dundi.c:4363</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a427edee20aa126369758234e88d7d637"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a427edee20aa126369758234e88d7d637">dundi_query_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_query_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04274">pbx_dundi.c:4274</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a169ae5c86e91fcc5014f9072ed3dd4cc"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a169ae5c86e91fcc5014f9072ed3dd4cc">dundi_switch</a></div><div class="ttdeci">static struct ast_switch dundi_switch</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04892">pbx_dundi.c:4892</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a3a13b2041df3b5a35c2c9624e02eac56"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a3a13b2041df3b5a35c2c9624e02eac56">netsocket2</a></div><div class="ttdeci">static int netsocket2</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00187">pbx_dundi.c:187</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a55c82d81ce37ebe5125d5a017c12b5ac"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a55c82d81ce37ebe5125d5a017c12b5ac">prune_peers</a></div><div class="ttdeci">static void prune_peers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04412">pbx_dundi.c:4412</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a78fa064a53288c1498570513cfdd7480"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a78fa064a53288c1498570513cfdd7480">dundi_result_function</a></div><div class="ttdeci">static struct ast_custom_function dundi_result_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04348">pbx_dundi.c:4348</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac048ffc62ecb2399fa52b16519428f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac048ffc62ecb2399fa52b16519428f23">&#9670;&nbsp;</a></span>unregister_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unregister_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d8f/structdundi__request.html">dundi_request</a> *&#160;</td>
          <td class="paramname"><em>dr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03788">3788</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, and <a class="el" href="../../d4/d4c/structpermission.html#ae6a365efbd34a6132dea2a3229786214">permission::list</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;{</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d2/d7b/structrequests.html">requests</a>, dr, list);</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d5/d20/structpeers.html">peers</a>);</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structrequests_html"><div class="ttname"><a href="../../d2/d7b/structrequests.html">requests</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00344">pbx_dundi.c:344</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="structpeers_html"><div class="ttname"><a href="../../d5/d20/structpeers.html">peers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00341">pbx_dundi.c:341</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2fee1dc6f3beaf6e86a3399a955ac5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2fee1dc6f3beaf6e86a3399a955ac5d">&#9670;&nbsp;</a></span>update_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int update_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">1334</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00471">ast_aes_set_decrypt_key()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00466">ast_aes_set_encrypt_key()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00368">ast_encrypt_bin()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00141">ast_key_get()</a>, <a class="el" href="../../da/da0/crypto_8h_source.html#l00043">AST_KEY_PRIVATE</a>, <a class="el" href="../../da/da0/crypto_8h_source.html#l00042">AST_KEY_PUBLIC</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00304">ast_sign_bin()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">build_iv()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00195">dundi_key_ttl</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">dundi_peer::eid</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">dundi_peer::inkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00324">dundi_peer::keyexpire</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">dundi_peer::outkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">dundi_peer::sentfullkey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">dundi_peer::txenckey</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00320">dundi_peer::us_dcx</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00319">dundi_peer::us_ecx</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00318">dundi_peer::us_keycrc32</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01428">dundi_encrypt()</a>.</p>
<div class="fragment"><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;{</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> key[16];</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/db2/structast__key.html">ast_key</a> *ekey, *skey;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="keywordflow">if</span> (!peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa5453e7223ce19765e867438ae33fd23">keyexpire</a> || (peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa5453e7223ce19765e867438ae33fd23">keyexpire</a> &lt; time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a>(key);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d7/dbb/res__crypto_8c.html#a117f48816c45bdc7b955f73000572258">ast_aes_set_encrypt_key</a>(key, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a589109875bf2955476cd7a15dc9651ba">us_ecx</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <a class="code" href="../../d7/dbb/res__crypto_8c.html#a9194ab9cf75f0925a9c5c9956360a5fc">ast_aes_set_decrypt_key</a>(key, &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afcd60593ac1d49200526919d9e1e5b90">us_dcx</a>);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      ekey = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>, <a class="code" href="../../da/da0/crypto_8h.html#a5a80fcd381628f496f8b70d60c0386a9">AST_KEY_PUBLIC</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">if</span> (!ekey) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No such key &#39;%s&#39; for creating RSA encrypted shared key for &#39;%s&#39;!\n&quot;</span>,</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">inkey</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      skey = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>, <a class="code" href="../../da/da0/crypto_8h.html#a68b39a796b4ca2c1ad95ba075be38284">AST_KEY_PRIVATE</a>);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">if</span> (!skey) {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No such key &#39;%s&#39; for signing RSA encrypted shared key for &#39;%s&#39;!\n&quot;</span>,</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">outkey</a>, <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), &amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">eid</a>));</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../d7/dbb/res__crypto_8c.html#ade6b51d01c7220ce9ec8b8768c858ad9">ast_encrypt_bin</a>(peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a>, key, <span class="keyword">sizeof</span>(key), ekey)) != 128) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Whoa, got a weird encrypt size (%d != %d)!\n&quot;</span>, res, 128);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../d7/dbb/res__crypto_8c.html#a4e3d32f4c2cff00ff46120128703529c">ast_sign_bin</a>(skey, (<span class="keywordtype">char</span> *)peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a>, 128, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a> + 128))) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Failed to sign key (%d)!\n&quot;</span>, res);</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a539f54e572069eed68708af02c5536d7">us_keycrc32</a> = crc32(0L, peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">txenckey</a>, 128);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">sentfullkey</a> = 0;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="comment">/* Looks good */</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      time(&amp;peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa5453e7223ce19765e867438ae33fd23">keyexpire</a>);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      peer-&gt;<a class="code" href="../../d8/d2c/structdundi__peer.html#aa5453e7223ce19765e867438ae33fd23">keyexpire</a> += <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a373b9e6699a08955205583779bbbe893">dundi_key_ttl</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;}</div><div class="ttc" id="structast__key_html"><div class="ttname"><a href="../../df/db2/structast__key.html">ast_key</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00074">res_crypto.c:74</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a373b9e6699a08955205583779bbbe893"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a373b9e6699a08955205583779bbbe893">dundi_key_ttl</a></div><div class="ttdeci">static int dundi_key_ttl</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00195">pbx_dundi.c:195</a></div></div>
<div class="ttc" id="structdundi__peer_html_a0ac6dcfff533378dbcf9a01b59617d36"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a0ac6dcfff533378dbcf9a01b59617d36">dundi_peer::outkey</a></div><div class="ttdeci">char outkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00310">pbx_dundi.c:310</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdundi__peer_html_aa5453e7223ce19765e867438ae33fd23"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#aa5453e7223ce19765e867438ae33fd23">dundi_peer::keyexpire</a></div><div class="ttdeci">time_t keyexpire</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00324">pbx_dundi.c:324</a></div></div>
<div class="ttc" id="structdundi__peer_html_a539f54e572069eed68708af02c5536d7"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a539f54e572069eed68708af02c5536d7">dundi_peer::us_keycrc32</a></div><div class="ttdeci">uint32_t us_keycrc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00318">pbx_dundi.c:318</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structdundi__peer_html_afcd60593ac1d49200526919d9e1e5b90"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afcd60593ac1d49200526919d9e1e5b90">dundi_peer::us_dcx</a></div><div class="ttdeci">ast_aes_decrypt_key us_dcx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00320">pbx_dundi.c:320</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a57dfdd2d46918b3f8e7ac4287f164365"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a57dfdd2d46918b3f8e7ac4287f164365">build_iv</a></div><div class="ttdeci">static void build_iv(unsigned char *iv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">pbx_dundi.c:533</a></div></div>
<div class="ttc" id="crypto_8h_html_a68b39a796b4ca2c1ad95ba075be38284"><div class="ttname"><a href="../../da/da0/crypto_8h.html#a68b39a796b4ca2c1ad95ba075be38284">AST_KEY_PRIVATE</a></div><div class="ttdeci">#define AST_KEY_PRIVATE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da0/crypto_8h_source.html#l00043">crypto.h:43</a></div></div>
<div class="ttc" id="res__crypto_8c_html_ade6b51d01c7220ce9ec8b8768c858ad9"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#ade6b51d01c7220ce9ec8b8768c858ad9">ast_encrypt_bin</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_encrypt_bin(unsigned char *dst, const unsigned char *src, int srclen, struct ast_key *key)</div><div class="ttdoc">encrypt a message </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00368">res_crypto.c:368</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a4e3d32f4c2cff00ff46120128703529c"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a4e3d32f4c2cff00ff46120128703529c">ast_sign_bin</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_sign_bin(struct ast_key *key, const char *msg, int msglen, unsigned char *dsig)</div><div class="ttdoc">signs outgoing message with public key </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00304">res_crypto.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_afd034eb91830d2df033d799c2b5420ce"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#afd034eb91830d2df033d799c2b5420ce">dundi_peer::eid</a></div><div class="ttdeci">dundi_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00304">pbx_dundi.c:304</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab5dead9926f1d3eb2df410d3691804e6"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab5dead9926f1d3eb2df410d3691804e6">dundi_peer::inkey</a></div><div class="ttdeci">char inkey[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00309">pbx_dundi.c:309</a></div></div>
<div class="ttc" id="structdundi__peer_html_a589109875bf2955476cd7a15dc9651ba"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a589109875bf2955476cd7a15dc9651ba">dundi_peer::us_ecx</a></div><div class="ttdeci">ast_aes_encrypt_key us_ecx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00319">pbx_dundi.c:319</a></div></div>
<div class="ttc" id="structdundi__peer_html_a08ffe1f77a06523bb3df0b18e336952b"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#a08ffe1f77a06523bb3df0b18e336952b">dundi_peer::txenckey</a></div><div class="ttdeci">unsigned char txenckey[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00316">pbx_dundi.c:316</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a117f48816c45bdc7b955f73000572258"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a117f48816c45bdc7b955f73000572258">ast_aes_set_encrypt_key</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_aes_set_encrypt_key(const unsigned char *key, ast_aes_encrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00466">res_crypto.c:466</a></div></div>
<div class="ttc" id="res__crypto_8c_html_ac8b35d32368f7557b05d0610970b9b0a"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#ac8b35d32368f7557b05d0610970b9b0a">ast_key_get</a></div><div class="ttdeci">struct ast_key *AST_OPTIONAL_API_NAME() ast_key_get(const char *kname, int ktype)</div><div class="ttdoc">return the ast_key structure for name </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00141">res_crypto.c:141</a></div></div>
<div class="ttc" id="res__crypto_8c_html_a9194ab9cf75f0925a9c5c9956360a5fc"><div class="ttname"><a href="../../d7/dbb/res__crypto_8c.html#a9194ab9cf75f0925a9c5c9956360a5fc">ast_aes_set_decrypt_key</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_aes_set_decrypt_key(const unsigned char *key, ast_aes_decrypt_key *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00471">res_crypto.c:471</a></div></div>
<div class="ttc" id="crypto_8h_html_a5a80fcd381628f496f8b70d60c0386a9"><div class="ttname"><a href="../../da/da0/crypto_8h.html#a5a80fcd381628f496f8b70d60c0386a9">AST_KEY_PUBLIC</a></div><div class="ttdeci">#define AST_KEY_PUBLIC</div><div class="ttdef"><b>Definition:</b> <a href="../../da/da0/crypto_8h_source.html#l00042">crypto.h:42</a></div></div>
<div class="ttc" id="structdundi__peer_html_ab7f3bafd1912096a0cc348aada3f30b8"><div class="ttname"><a href="../../d8/d2c/structdundi__peer.html#ab7f3bafd1912096a0cc348aada3f30b8">dundi_peer::sentfullkey</a></div><div class="ttdeci">int sentfullkey</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00314">pbx_dundi.c:314</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Distributed Universal Number Discovery (DUNDi)&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .reload = reload, .optional_modules = &quot;res_crypto&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05278">5278</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="aea1dc34a741ebde7e9310fd43312fc08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1dc34a741ebde7e9310fd43312fc08">&#9670;&nbsp;</a></span>alltrans</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d4c/structalltrans.html">alltrans</a>   <a class="el" href="../../d8/d4c/structalltrans.html">alltrans</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aca505bc5b6272f18385b9c7fe6829086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca505bc5b6272f18385b9c7fe6829086">&#9670;&nbsp;</a></span>any_peer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d2c/structdundi__peer.html">dundi_peer</a>* any_peer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wildcard peer. </p>
<p>This peer is created if the [*] entry is specified in dundi.conf </p>

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00352">352</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05278">5278</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a936591bfc4ac4515aa621afe79dbcd35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936591bfc4ac4515aa621afe79dbcd35">&#9670;&nbsp;</a></span>authdebug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int authdebug = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00193">193</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="af8decaf64f53b028de928b48db008399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8decaf64f53b028de928b48db008399">&#9670;&nbsp;</a></span>clearcachethreadid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t clearcachethreadid = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00190">190</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a989d6707298899f07c764d259d5d3fcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a989d6707298899f07c764d259d5d3fcb">&#9670;&nbsp;</a></span>cli_dundi</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_dundi[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03119">3119</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a03e72b5f331070bc01418a74af199eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e72b5f331070bc01418a74af199eb9">&#9670;&nbsp;</a></span>country</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char country[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00205">205</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d2b/agent_8c_source.html#l00236">ast_var_channels_table()</a>, <a class="el" href="../../d9/d3d/func__channel_8c_source.html#l00290">func_channel_read()</a>, and <a class="el" href="../../df/d6e/indications_8c_source.html#l01045">load_indications()</a>.</p>

</div>
</div>
<a id="a539fd30ae5d9ac88c45e52e37bee5a2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539fd30ae5d9ac88c45e52e37bee5a2f">&#9670;&nbsp;</a></span>cursecret</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char cursecret[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00209">209</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="ab25de026ecefe8c1afecdb329e37c195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab25de026ecefe8c1afecdb329e37c195">&#9670;&nbsp;</a></span>default_expiration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int default_expiration = 60</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00199">199</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dad/location_8c_source.html#l01366">ast_sip_initialize_sorcery_location()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>.</p>

</div>
</div>
<a id="ae05dd1de1447814a60b19499c32f7189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05dd1de1447814a60b19499c32f7189">&#9670;&nbsp;</a></span>dept</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char dept[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00201">201</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a72898bf086d5beac2d22aa81c2b1bfb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72898bf086d5beac2d22aa81c2b1bfb2">&#9670;&nbsp;</a></span>dundi_cache_time</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_cache_time = <a class="el" href="../../d2/d59/dundi_8h.html#aa28cf92d78bb7b9d8bc76ff2b8ae4787">DUNDI_DEFAULT_CACHE_TIME</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00196">196</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00899">cache_save()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00864">cache_save_hint()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03926">dundi_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03996">dundi_precache_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03437">precache_trans()</a>.</p>

</div>
</div>
<a id="a373b9e6699a08955205583779bbbe893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a373b9e6699a08955205583779bbbe893">&#9670;&nbsp;</a></span>dundi_key_ttl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_key_ttl = <a class="el" href="../../d2/d59/dundi_8h.html#adfbdc109a4382001e0631c57075054a1">DUNDI_DEFAULT_KEY_EXPIRE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00195">195</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">update_key()</a>.</p>

</div>
</div>
<a id="a427edee20aa126369758234e88d7d637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427edee20aa126369758234e88d7d637">&#9670;&nbsp;</a></span>dundi_query_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> dundi_query_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;DUNDIQUERY&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a9511a7918138f782acccfda40de9c1a3">dundi_query_read</a>,</div><div class="line">}</div><div class="ttc" id="pbx__dundi_8c_html_a9511a7918138f782acccfda40de9c1a3"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a9511a7918138f782acccfda40de9c1a3">dundi_query_read</a></div><div class="ttdeci">static int dundi_query_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">pbx_dundi.c:4215</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04274">4274</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a7b8a39990f294e5e38bb6df28c7fb5ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b8a39990f294e5e38bb6df28c7fb5ad">&#9670;&nbsp;</a></span>dundi_query_opts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> dundi_query_opts[128] = { [ '<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#ab771a7f28501ddeb11d8040f202a0a67a75d44a3f3eb72e7d78289c101972298f">OPT_BYPASS_CACHE</a> }, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04135">4135</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">dundifunc_read()</a>.</p>

</div>
</div>
<a id="a84980405c77a834de60d313f0642e824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84980405c77a834de60d313f0642e824">&#9670;&nbsp;</a></span>dundi_result_datastore_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> dundi_result_datastore_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <span class="stringliteral">&quot;DUNDIQUERY&quot;</span>,</div><div class="line">   .destroy = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#af52df0c5cde9fae01690487be5f66095">drds_destroy_cb</a>,</div><div class="line">}</div><div class="ttc" id="pbx__dundi_8c_html_af52df0c5cde9fae01690487be5f66095"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#af52df0c5cde9fae01690487be5f66095">drds_destroy_cb</a></div><div class="ttdeci">static void drds_destroy_cb(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04204">pbx_dundi.c:4204</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04210">4210</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a78fa064a53288c1498570513cfdd7480"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78fa064a53288c1498570513cfdd7480">&#9670;&nbsp;</a></span>dundi_result_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> dundi_result_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;DUNDIRESULT&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a76be0d5e3c5e3de4c972f607fcce98d0">dundi_result_read</a>,</div><div class="line">}</div><div class="ttc" id="pbx__dundi_8c_html_a76be0d5e3c5e3de4c972f607fcce98d0"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a76be0d5e3c5e3de4c972f607fcce98d0">dundi_result_read</a></div><div class="ttdeci">static int dundi_result_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l04279">pbx_dundi.c:4279</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04348">4348</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a7cb4d3a9c625fbabb40d50d2b53d797e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb4d3a9c625fbabb40d50d2b53d797e">&#9670;&nbsp;</a></span>dundi_result_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int dundi_result_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04191">4191</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="aa73e8fca9184c251b2983cf9e6788df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa73e8fca9184c251b2983cf9e6788df1">&#9670;&nbsp;</a></span>dundi_shutdown</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_shutdown = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00213">213</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a169ae5c86e91fcc5014f9072ed3dd4cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a169ae5c86e91fcc5014f9072ed3dd4cc">&#9670;&nbsp;</a></span>dundi_switch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df6/structast__switch.html">ast_switch</a> dundi_switch</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04892">4892</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a1ffcd4d21da49b299b25534bb7341cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ffcd4d21da49b299b25534bb7341cb1">&#9670;&nbsp;</a></span>dundi_ttl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dundi_ttl = <a class="el" href="../../d2/d59/dundi_8h.html#a6c22ea75a0d756702702608ef421590b">DUNDI_DEFAULT_TTL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00194">194</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a3606ca85702bb0258aec62c4f947875f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3606ca85702bb0258aec62c4f947875f">&#9670;&nbsp;</a></span>dundidebug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dundidebug = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00192">192</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="aadd75c09e15efa9061997f033b3f224b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd75c09e15efa9061997f033b3f224b">&#9670;&nbsp;</a></span>email</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char email[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00206">206</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05085">make_email_file()</a>.</p>

</div>
</div>
<a id="a17c3cc4871bd7c8bbe750e2ce7c8b0ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">&#9670;&nbsp;</a></span>empty_eid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> empty_eid = { { 0, 0, 0, 0, 0, 0 } }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">212</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>.</p>

</div>
</div>
<a id="a46e0890829ef32048f1d443e79bd9e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46e0890829ef32048f1d443e79bd9e9f">&#9670;&nbsp;</a></span>global_autokilltimeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int global_autokilltimeout = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00197">197</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01295">apply_peer()</a>.</p>

</div>
</div>
<a id="afc0636d6a53edfb41e1afdd3cf63a4ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc0636d6a53edfb41e1afdd3cf63a4ec">&#9670;&nbsp;</a></span>global_eid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d59/dundi_8h.html#a35971173ccd732aad75d4560bd4d4539">dundi_eid</a> global_eid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00198">198</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>.</p>

</div>
</div>
<a id="a65cd854e2d184b5038e9cbdec5feaee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65cd854e2d184b5038e9cbdec5feaee5">&#9670;&nbsp;</a></span>global_storehistory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int global_storehistory = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00200">200</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="abda48311b6abe5a4dd8b6904ddde0a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abda48311b6abe5a4dd8b6904ddde0a6d">&#9670;&nbsp;</a></span>io</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d55/structio__context.html">io_context</a>* io</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00184">184</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="abe4895c1ad7c3100e5566b3a9257f2e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe4895c1ad7c3100e5566b3a9257f2e9">&#9670;&nbsp;</a></span>ipaddr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char ipaddr[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00210">210</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05685">realtime_peer()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05167">realtime_update_peer()</a>.</p>

</div>
</div>
<a id="a41e968a3ec944a6d905765d9a44a286f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41e968a3ec944a6d905765d9a44a286f">&#9670;&nbsp;</a></span>locality</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char locality[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00203">203</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="ac02635e45a149a202eea2d926e236910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02635e45a149a202eea2d926e236910">&#9670;&nbsp;</a></span>mappings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dea/structmappings.html">mappings</a>   <a class="el" href="../../d5/dea/structmappings.html">mappings</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00170">get_log_level()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00156">get_log_mappings()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00329">handle_pjproject_show_log_mappings()</a>, and <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00318">mapping_alloc()</a>.</p>

</div>
</div>
<a id="a34d899b0c513443c533f0a04813aed58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d899b0c513443c533f0a04813aed58">&#9670;&nbsp;</a></span>netsocket</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int netsocket = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00186">186</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d79/netsock_8c_source.html#l00109">ast_netsock_bindaddr()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03355">handle_error()</a>.</p>

</div>
</div>
<a id="a3a13b2041df3b5a35c2c9624e02eac56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a13b2041df3b5a35c2c9624e02eac56">&#9670;&nbsp;</a></span>netsocket2</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int netsocket2 = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00187">187</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="aaccf62d7fc810d5b42da0a3069ba7651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaccf62d7fc810d5b42da0a3069ba7651">&#9670;&nbsp;</a></span>netthreadid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t netthreadid = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00188">188</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="ad51e32c16369e570e5b8eeac50679e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad51e32c16369e570e5b8eeac50679e74">&#9670;&nbsp;</a></span>org</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char org[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00202">202</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l00283">calc_crc()</a>.</p>

</div>
</div>
<a id="a5d9c92d9d9f3fce2ef610dd2169a5558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9c92d9d9f3fce2ef610dd2169a5558">&#9670;&nbsp;</a></span>pcq</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/dea/structpcq.html">pcq</a>   <a class="el" href="../../d2/dea/structpcq.html">pcq</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0afdd3d7238c7d80018926429eb52170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0afdd3d7238c7d80018926429eb52170">&#9670;&nbsp;</a></span>peers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d20/structpeers.html">peers</a>   <a class="el" href="../../d5/d20/structpeers.html">peers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2483a4aba107ceb21350c25ef3e4e2be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2483a4aba107ceb21350c25ef3e4e2be">&#9670;&nbsp;</a></span>phone</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char phone[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00207">207</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d17/app__privacy_8c_source.html#l00087">privacy_exec()</a>.</p>

</div>
</div>
<a id="a85c25ca8e4d47c180435a10433185af1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c25ca8e4d47c180435a10433185af1">&#9670;&nbsp;</a></span>precachethreadid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t precachethreadid = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00189">189</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="af2ae4572934efa26e8b06780ca320c2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ae4572934efa26e8b06780ca320c2b">&#9670;&nbsp;</a></span>requests</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/d7b/structrequests.html">requests</a>   <a class="el" href="../../d2/d7b/structrequests.html">requests</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d0/da6/aoc_8c_source.html#l00276">ast_aoc_create()</a>.</p>

</div>
</div>
<a id="a67db34020f8303d719cb594849f0f868"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67db34020f8303d719cb594849f0f868">&#9670;&nbsp;</a></span>rotatetime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_t rotatetime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00211">211</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a361b448e9abcfc301602a2573a662d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361b448e9abcfc301602a2573a662d3c">&#9670;&nbsp;</a></span>sched</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a>* <a class="el" href="../../d0/da0/structsched.html">sched</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00185">185</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="afce48059fc557e50d12470e8c086ff57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce48059fc557e50d12470e8c086ff57">&#9670;&nbsp;</a></span>secretpath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char secretpath[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00208">208</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="ac87afa7a52fa95a8c90ba8e1f61c6957"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac87afa7a52fa95a8c90ba8e1f61c6957">&#9670;&nbsp;</a></span>stateprov</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char stateprov[80]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00204">204</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
<a id="a25a9305efab3b493ca2519562fcec3d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a9305efab3b493ca2519562fcec3d5">&#9670;&nbsp;</a></span>tos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int tos = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00191">191</a> of file <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html">pbx_dundi.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:14 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
