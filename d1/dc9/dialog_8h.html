<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: dialog.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9662a6a166de1dda18179da17db0f05a.html">channels</a></li><li class="navelem"><a class="el" href="../../dir_e5bdc1c53b5594ea19d8e5bd361a6405.html">sip</a></li><li class="navelem"><a class="el" href="../../dir_cfe5fd7c5790010fb62886a2d5e27c3a.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dialog.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>sip dialog management header file  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d1/d94/sip_8h_source.html">sip.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dialog.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d07/dialog_8h__incl.png" border="0" usemap="#dialog_8h" alt=""/></div>
<map name="dialog_8h" id="dialog_8h">
<area shape="rect" id="node2" href="../../d1/d94/sip_8h.html" title="chan_sip header file " alt="" coords="1286,80,1338,107"/>
<area shape="rect" id="node3" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="619,468,703,495"/>
<area shape="rect" id="node8" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="3881,543,4039,569"/>
<area shape="rect" id="node14" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="2369,543,2519,569"/>
<area shape="rect" id="node15" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="701,311,832,338"/>
<area shape="rect" id="node20" href="../../d4/ddf/tcptls_8h.html" title="Generic support for tcp/tls servers in Asterisk. " alt="" coords="225,311,348,338"/>
<area shape="rect" id="node22" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="816,393,963,420"/>
<area shape="rect" id="node23" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="794,155,907,181"/>
<area shape="rect" id="node25" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="2632,311,2771,338"/>
<area shape="rect" id="node41" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2004,229,2116,256"/>
<area shape="rect" id="node43" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="467,393,623,420"/>
<area shape="rect" id="node44" href="../../d0/d29/include_2asterisk_2security__events_8h.html" title="Security Event Reporting API. " alt="" coords="1350,229,1538,256"/>
<area shape="rect" id="node46" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="3753,155,3895,181"/>
<area shape="rect" id="node48" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="1234,311,1390,338"/>
<area shape="rect" id="node49" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="4095,155,4281,181"/>
<area shape="rect" id="node50" href="../../d9/d7f/route_8h.html" title="sip_route header file " alt="" coords="1206,229,1274,256"/>
<area shape="rect" id="node4" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="584,543,739,569"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="763,543,901,569"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="425,543,559,569"/>
<area shape="rect" id="node9" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2484,767,2631,793"/>
<area shape="rect" id="node10" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="1290,617,1417,644"/>
<area shape="rect" id="node11" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1246,692,1359,719"/>
<area shape="rect" id="node17" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1195,468,1309,495"/>
<area shape="rect" id="node18" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1720,393,1899,420"/>
<area shape="rect" id="node19" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="929,468,1063,495"/>
<area shape="rect" id="node21" href="../../dd/d27/iostream_8h.html" title="Generic abstraction for input/output streams. " alt="" coords="145,393,290,420"/>
<area shape="rect" id="node24" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="807,229,908,256"/>
<area shape="rect" id="node26" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2368,393,2512,420"/>
<area shape="rect" id="node27" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="3249,393,3407,420"/>
<area shape="rect" id="node28" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="3431,393,3595,420"/>
<area shape="rect" id="node29" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2595,468,2722,495"/>
<area shape="rect" id="node30" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="3751,393,3897,420"/>
<area shape="rect" id="node31" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2689,393,2815,420"/>
<area shape="rect" id="node32" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="3620,393,3727,420"/>
<area shape="rect" id="node33" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="2369,468,2519,495"/>
<area shape="rect" id="node34" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1339,393,1501,420"/>
<area shape="rect" id="node35" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1525,393,1696,420"/>
<area shape="rect" id="node36" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2025,393,2141,420"/>
<area shape="rect" id="node37" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="2840,393,2997,420"/>
<area shape="rect" id="node38" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1189,393,1315,420"/>
<area shape="rect" id="node40" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="3022,393,3173,420"/>
<area shape="rect" id="node39" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="1605,468,1729,495"/>
<area shape="rect" id="node42" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2317,311,2424,338"/>
<area shape="rect" id="node45" href="../../d7/dc2/security__events__defs_8h.html" title="Security Event Reporting Data Structures. " alt="" coords="1033,304,1209,345"/>
<area shape="rect" id="node47" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="3769,229,3879,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d6a/dialog_8h__dep__incl.png" border="0" usemap="#dialog_8hdep" alt=""/></div>
<map name="dialog_8hdep" id="dialog_8hdep">
<area shape="rect" id="node2" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="5,80,95,107"/>
<area shape="rect" id="node3" href="../../d8/d06/sip_2dialplan__functions_8c.html" title="sip channel dialplan functions and unit tests " alt="" coords="119,80,266,107"/>
</map>
</div>
</div>
<p><a href="../../d1/dc9/dialog_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3430a5e39cac3fad8579679b979d6351"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a>(dialog,  tag)&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#aaff8d563ccbab36b41b093709681de2a">ao2_t_bump</a>(dialog, tag)</td></tr>
<tr class="memdesc:a3430a5e39cac3fad8579679b979d6351"><td class="mdescLeft">&#160;</td><td class="mdescRight">when we create or delete references, make sure to use these functions so we keep track of the refcounts. To simplify the code, we allow a NULL to be passed to <a class="el" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref()</a>.  <a href="#a3430a5e39cac3fad8579679b979d6351">More...</a><br /></td></tr>
<tr class="separator:a3430a5e39cac3fad8579679b979d6351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb112a7e50aac1eb05807afb4d4dd26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog,  tag)&#160;&#160;&#160;({ <a class="el" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(dialog, tag); (<a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); })</td></tr>
<tr class="separator:aaeb112a7e50aac1eb05807afb4d4dd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab889a9d65a95328177fe00346a67a680"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#ab889a9d65a95328177fe00346a67a680">sip_alloc</a>(callid,  addr,  useglobal_nat,  intended_method,  req,  logger_callid)&#160;&#160;&#160;<a class="el" href="../../d1/dc9/dialog_8h.html#a25e7f0bcef435300619ae398ae86f69b">__sip_alloc</a>(callid, addr, useglobal_nat, intended_method, req, logger_callid, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td></tr>
<tr class="separator:ab889a9d65a95328177fe00346a67a680"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a80f7cd823ce0ca5a771dceefb17e960c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a80f7cd823ce0ca5a771dceefb17e960c">__sip_ack</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p, uint32_t seqno, int resp, int <a class="el" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a>)</td></tr>
<tr class="memdesc:a80f7cd823ce0ca5a771dceefb17e960c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acknowledges receipt of a packet and stops retransmission called with p locked.  <a href="#a80f7cd823ce0ca5a771dceefb17e960c">More...</a><br /></td></tr>
<tr class="separator:a80f7cd823ce0ca5a771dceefb17e960c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e7f0bcef435300619ae398ae86f69b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a25e7f0bcef435300619ae398ae86f69b">__sip_alloc</a> (<a class="el" href="../../d1/d0f/stringfields_8h.html#abb39dc592226a570e6a73f1b9b09b021">ast_string_field</a> callid, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sin, int useglobal_nat, const int intended_method, struct <a class="el" href="../../d7/d82/structsip__request.html">sip_request</a> *req, <a class="el" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> logger_callid, const char *file, int line, const char *func)</td></tr>
<tr class="memdesc:a25e7f0bcef435300619ae398ae86f69b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate <a class="el" href="../../d2/df2/structsip__pvt.html" title="Structure used for each SIP dialog, ie. a call, a registration, a subscribe. Created and initialized ...">sip_pvt</a> structure, set defaults and link in the container. Returns a reference to the object so whoever uses it later must remember to release the reference.  <a href="#a25e7f0bcef435300619ae398ae86f69b">More...</a><br /></td></tr>
<tr class="separator:a25e7f0bcef435300619ae398ae86f69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebc634d54d43a8298ba7416eadd55f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#abebc634d54d43a8298ba7416eadd55f5">__sip_pretend_ack</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p)</td></tr>
<tr class="memdesc:abebc634d54d43a8298ba7416eadd55f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pretend to ack all packets called with p locked.  <a href="#abebc634d54d43a8298ba7416eadd55f5">More...</a><br /></td></tr>
<tr class="separator:abebc634d54d43a8298ba7416eadd55f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb667e87353985c6408517cb00c3ca36"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#abb667e87353985c6408517cb00c3ca36">__sip_semi_ack</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p, uint32_t seqno, int resp, int <a class="el" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a>)</td></tr>
<tr class="memdesc:abb667e87353985c6408517cb00c3ca36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acks receipt of packet, keep it around (used for provisional responses)  <a href="#abb667e87353985c6408517cb00c3ca36">More...</a><br /></td></tr>
<tr class="separator:abb667e87353985c6408517cb00c3ca36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654e5e280d93bf8afeceac69882dc1b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a654e5e280d93bf8afeceac69882dc1b3">dialog_unlink_all</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *dialog)</td></tr>
<tr class="memdesc:a654e5e280d93bf8afeceac69882dc1b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlink a dialog from the dialogs container, as well as any other places that it may be currently stored.  <a href="#a654e5e280d93bf8afeceac69882dc1b3">More...</a><br /></td></tr>
<tr class="separator:a654e5e280d93bf8afeceac69882dc1b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cd5c160ef12168fe768d7451bd57f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a35cd5c160ef12168fe768d7451bd57f7">sip_cancel_destroy</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *pvt)</td></tr>
<tr class="memdesc:a35cd5c160ef12168fe768d7451bd57f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel destruction of SIP dialog.  <a href="#a35cd5c160ef12168fe768d7451bd57f7">More...</a><br /></td></tr>
<tr class="separator:a35cd5c160ef12168fe768d7451bd57f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd43cf8c247a8ccc4ee75623fa610d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a4cd43cf8c247a8ccc4ee75623fa610d1">sip_scheddestroy</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p, int ms)</td></tr>
<tr class="memdesc:a4cd43cf8c247a8ccc4ee75623fa610d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule destruction of SIP dialog.  <a href="#a4cd43cf8c247a8ccc4ee75623fa610d1">More...</a><br /></td></tr>
<tr class="separator:a4cd43cf8c247a8ccc4ee75623fa610d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45fdd334dbde3db5838786e6daa9926d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc9/dialog_8h.html#a45fdd334dbde3db5838786e6daa9926d">sip_scheddestroy_final</a> (struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p, int ms)</td></tr>
<tr class="memdesc:a45fdd334dbde3db5838786e6daa9926d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule final destruction of SIP dialog.  <a href="#a45fdd334dbde3db5838786e6daa9926d">More...</a><br /></td></tr>
<tr class="separator:a45fdd334dbde3db5838786e6daa9926d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>sip dialog management header file </p>

<p class="definition">Definition in file <a class="el" href="../../d1/dc9/dialog_8h_source.html">dialog.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3430a5e39cac3fad8579679b979d6351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3430a5e39cac3fad8579679b979d6351">&#9670;&nbsp;</a></span>dialog_ref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dialog_ref</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dialog, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tag&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d5/da5/astobj2_8h.html#aaff8d563ccbab36b41b093709681de2a">ao2_t_bump</a>(dialog, tag)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>when we create or delete references, make sure to use these functions so we keep track of the refcounts. To simplify the code, we allow a NULL to be passed to <a class="el" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref()</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00032">32</a> of file <a class="el" href="../../d1/dc9/dialog_8h_source.html">dialog.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09469">__find_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04275">__sip_reliable_xmit()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04484">__sip_scheddestroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30226">__start_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26126">__start_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04724">__update_provisional_keepalive_full()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00359">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03367">dialog_unlink_all()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28516">handle_cc_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23802">sched_check_pendings()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06445">sip_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04464">sip_cancel_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07197">sip_hangup()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08161">sip_new()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30583">sip_poke_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04514">sip_scheddestroy_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30265">start_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26144">start_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04783">stop_provisional_keepalive()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23846">stop_reinvite_retry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07186">stop_reinviteid()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30213">stop_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26116">stop_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04762">update_provisional_keepalive()</a>.</p>

</div>
</div>
<a id="aaeb112a7e50aac1eb05807afb4d4dd26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb112a7e50aac1eb05807afb4d4dd26">&#9670;&nbsp;</a></span>dialog_unref</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dialog_unref</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dialog, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tag&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;({ <a class="el" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(dialog, tag); (<a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); })</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00033">33</a> of file <a class="el" href="../../d1/dc9/dialog_8h_source.html">dialog.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32459">__cleanup_registration()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03351">__dialog_unlink_sched_items()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09469">__find_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23785">__sched_check_pendings()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04369">__sip_autodestruct()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04453">__sip_cancel_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04484">__sip_scheddestroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15075">__sip_subscribe_mwi_do()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30226">__start_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26126">__start_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04773">__stop_provisional_keepalive()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23836">__stop_reinvite_retry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07176">__stop_reinviteid()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30203">__stop_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26106">__stop_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04724">__update_provisional_keepalive_full()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00359">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06420">auto_congest()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17600">cb_extensionstate_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22252">complete_sipch()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03367">dialog_unlink_all()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04443">do_cancel_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03308">do_dialog_unlink_sched_items()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30190">do_stop_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09333">forked_invite_init()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24962">handle_response_peerpoke()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24807">handle_response_register()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30132">proc_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07158">reinvite_timeout()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23802">sched_check_pendings()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04672">send_provisional_keepalive_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06445">sip_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04464">sip_cancel_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l01997">sip_cc_agent_destructor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22894">sip_cli_notify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05309">sip_destroy_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07197">sip_hangup()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l02036">sip_monitor_instance_destructor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27879">sip_msg_send()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04260">sip_pkt_dtor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30523">sip_poke_noanswer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30583">sip_poke_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06673">sip_pvt_dtor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15976">sip_reg_timeout()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06630">sip_registry_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23817">sip_reinvite_retry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30793">sip_request_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04514">sip_scheddestroy_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06650">sip_subscribe_mwi_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26075">sip_t38_abort()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30265">start_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26144">start_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04783">stop_provisional_keepalive()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23846">stop_reinvite_retry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07186">stop_reinviteid()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30213">stop_session_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26116">stop_t38_abort_timer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14711">transmit_publish()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04762">update_provisional_keepalive()</a>.</p>

</div>
</div>
<a id="ab889a9d65a95328177fe00346a67a680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab889a9d65a95328177fe00346a67a680">&#9670;&nbsp;</a></span>sip_alloc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sip_alloc</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">callid, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">addr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">useglobal_nat, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">intended_method, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">req, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">logger_callid&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d1/dc9/dialog_8h.html#a25e7f0bcef435300619ae398ae86f69b">__sip_alloc</a>(callid, addr, useglobal_nat, intended_method, req, logger_callid, __FILE__, __LINE__, __PRETTY_FUNCTION__)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00039">39</a> of file <a class="el" href="../../d1/dc9/dialog_8h_source.html">dialog.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09469">__find_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15075">__sip_subscribe_mwi_do()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00359">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09333">forked_invite_init()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l02102">sip_cc_monitor_request_cc()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22894">sip_cli_notify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27879">sip_msg_send()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30583">sip_poke_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30793">sip_request_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14711">transmit_publish()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a80f7cd823ce0ca5a771dceefb17e960c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80f7cd823ce0ca5a771dceefb17e960c">&#9670;&nbsp;</a></span>__sip_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __sip_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sipmethod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acknowledges receipt of a packet and stops retransmission called with p locked. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04570">4570</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01063">sip_pvt::callid</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00521">FALSE</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00727">sip_proxy::force</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01236">sip_pkt::is_resp</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01234">sip_pkt::method</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01232">sip_pkt::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01112">sip_pvt::outboundproxy</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01177">sip_pvt::packets</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01147">sip_pvt::pendinginvite</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03293">ref_proxy()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01240">sip_pkt::retransid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01235">sip_pkt::seqno</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00916">sipdebug</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04251">stop_retrans_pkt()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00518">TRUE</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l01157">UNLINK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04615">__sip_pretend_ack()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29065">handle_incoming()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26347">handle_request_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28410">handle_request_publish()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25171">handle_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;{</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d34/structsip__pkt.html">sip_pkt</a> *cur, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = <span class="stringliteral">&quot;Not Found&quot;</span>;   <span class="comment">/* used only for debugging */</span></div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../de/dfe/app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;   <span class="comment">/* If we have an outbound proxy for this dialog, then delete it now since</span></div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;<span class="comment">     the rest of the requests in this dialog needs to follow the routing.</span></div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;<span class="comment">     If obforcing is set, we will keep the outbound proxy during the whole</span></div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;<span class="comment">     dialog, regardless of what the SIP rfc says</span></div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a3f5af2e5d979e2ddcbc7968ae1100a14">outboundproxy</a> &amp;&amp; !p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a3f5af2e5d979e2ddcbc7968ae1100a14">outboundproxy</a>-&gt;<a class="code" href="../../db/da1/structsip__proxy.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>) {</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#afe5bb7ddfe588f3f125ac538c3e4a592">ref_proxy</a>(p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;   }</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;   <span class="keywordflow">for</span> (cur = p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>; cur; prev = cur, cur = cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#afacd6a01ed62fd0a67e14cfb28b9fe06">next</a>) {</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a> != <a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a> || cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">is_resp</a> != resp) {</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;      }</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">is_resp</a> || cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a> == <a class="code" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a>) {</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;         res = <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;         msg = <span class="stringliteral">&quot;Found&quot;</span>;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;         <span class="keywordflow">if</span> (!resp &amp;&amp; (<a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a> == p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#acd636bdfd01313bafa001eae65015067">pendinginvite</a>)) {</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Acked pending invite %u\n&quot;</span>, p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#acd636bdfd01313bafa001eae65015067">pendinginvite</a>);</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;            p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#acd636bdfd01313bafa001eae65015067">pendinginvite</a> = 0;</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;         }</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;         <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">retransid</a> &gt; -1) {</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfe/chan__sip_8c.html#af59b91338c9fcc3d16686ce0a53e1a6c">sipdebug</a>)</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;** SIP TIMER: Cancelling retransmit of packet (reply received) Retransid #%d\n&quot;</span>, cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">retransid</a>);</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;         }</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;         <span class="comment">/* Unlink and destroy the packet object. */</span></div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;         <a class="code" href="../../d5/dfe/chan__sip_8c.html#aab367b8fe8be7047f1d630014a049dc5">UNLINK</a>(cur, p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>, prev);</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;         <a class="code" href="../../d5/dfe/chan__sip_8c.html#abef493a85093e90e14fa4b27f45c54b5">stop_retrans_pkt</a>(cur);</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(cur, -1, <span class="stringliteral">&quot;Packet retransmission list&quot;</span>);</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;      }</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;   }</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopping retransmission on &#39;%s&#39; of %s %u: Match %s\n&quot;</span>,</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">callid</a>, resp ? <span class="stringliteral">&quot;Response&quot;</span> : <span class="stringliteral">&quot;Request&quot;</span>, <a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a>, msg);</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structsip__pkt_html"><div class="ttname"><a href="../../db/d34/structsip__pkt.html">sip_pkt</a></div><div class="ttdoc">sip packet - raw format for outbound packets that are sent or scheduled for transmission Packets are ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01231">sip.h:1231</a></div></div>
<div class="ttc" id="structsip__proxy_html_a52de43b6faa0d9601f10db8b3826f11a"><div class="ttname"><a href="../../db/da1/structsip__proxy.html#a52de43b6faa0d9601f10db8b3826f11a">sip_proxy::force</a></div><div class="ttdeci">int force</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00727">sip.h:727</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00521">app_minivm.c:521</a></div></div>
<div class="ttc" id="structsip__pkt_html_adcc9a19ad3119f823a658f6a49a24e64"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">sip_pkt::method</a></div><div class="ttdeci">int method</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01234">sip.h:1234</a></div></div>
<div class="ttc" id="chan__sip_8c_html_abef493a85093e90e14fa4b27f45c54b5"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#abef493a85093e90e14fa4b27f45c54b5">stop_retrans_pkt</a></div><div class="ttdeci">static void stop_retrans_pkt(struct sip_pkt *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04251">chan_sip.c:4251</a></div></div>
<div class="ttc" id="structsip__pvt_html_acd636bdfd01313bafa001eae65015067"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#acd636bdfd01313bafa001eae65015067">sip_pvt::pendinginvite</a></div><div class="ttdeci">uint32_t pendinginvite</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01147">sip.h:1147</a></div></div>
<div class="ttc" id="structsip__pkt_html_a9ac42137a8036d8af9b7a5e678e05f57"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">sip_pkt::seqno</a></div><div class="ttdeci">uint32_t seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01235">sip.h:1235</a></div></div>
<div class="ttc" id="structsip__pkt_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">sip_pkt::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01240">sip.h:1240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="sip_8h_html_ab67bdb52f1ed2af1706c3d780b6953fc"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a></div><div class="ttdeci">sipmethod</div><div class="ttdoc">SIP Request methods known by Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00612">sip.h:612</a></div></div>
<div class="ttc" id="structsip__pvt_html_a584549b9ce9c56f6b783fe8e7183f596"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">sip_pvt::callid</a></div><div class="ttdeci">const ast_string_field callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01063">sip.h:1063</a></div></div>
<div class="ttc" id="structsip__pkt_html_a1f2a0b6055f056403f7ad3511f783454"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">sip_pkt::is_resp</a></div><div class="ttdeci">char is_resp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01236">sip.h:1236</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af59b91338c9fcc3d16686ce0a53e1a6c"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af59b91338c9fcc3d16686ce0a53e1a6c">sipdebug</a></div><div class="ttdeci">static enum sip_debug_e sipdebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00916">chan_sip.c:916</a></div></div>
<div class="ttc" id="structsip__pkt_html_afacd6a01ed62fd0a67e14cfb28b9fe06"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#afacd6a01ed62fd0a67e14cfb28b9fe06">sip_pkt::next</a></div><div class="ttdeci">struct sip_pkt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01232">sip.h:1232</a></div></div>
<div class="ttc" id="structsip__pvt_html_a26f5206ee56217eee8d921652c2b15d2"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">sip_pvt::packets</a></div><div class="ttdeci">struct sip_pkt * packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01177">sip.h:1177</a></div></div>
<div class="ttc" id="chan__sip_8c_html_afe5bb7ddfe588f3f125ac538c3e4a592"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#afe5bb7ddfe588f3f125ac538c3e4a592">ref_proxy</a></div><div class="ttdeci">static void ref_proxy(struct sip_pvt *pvt, struct sip_proxy *proxy)</div><div class="ttdoc">maintain proper refcounts for a sip_pvt&amp;#39;s outboundproxy </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03293">chan_sip.c:3293</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aab367b8fe8be7047f1d630014a049dc5"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aab367b8fe8be7047f1d630014a049dc5">UNLINK</a></div><div class="ttdeci">#define UNLINK(element, head, prev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01157">chan_sip.c:1157</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00518">app_minivm.c:518</a></div></div>
<div class="ttc" id="structsip__pvt_html_a3f5af2e5d979e2ddcbc7968ae1100a14"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a3f5af2e5d979e2ddcbc7968ae1100a14">sip_pvt::outboundproxy</a></div><div class="ttdeci">struct sip_proxy * outboundproxy</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01112">sip.h:1112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a25e7f0bcef435300619ae398ae86f69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25e7f0bcef435300619ae398ae86f69b">&#9670;&nbsp;</a></span>__sip_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a>* __sip_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d0f/stringfields_8h.html#abb39dc592226a570e6a73f1b9b09b021">ast_string_field</a>&#160;</td>
          <td class="paramname"><em>callid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>useglobal_nat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>intended_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d82/structsip__request.html">sip_request</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a>&#160;</td>
          <td class="paramname"><em>logger_callid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate <a class="el" href="../../d2/df2/structsip__pvt.html" title="Structure used for each SIP dialog, ie. a call, a registration, a subscribe. Created and initialized ...">sip_pvt</a> structure, set defaults and link in the container. Returns a reference to the object so whoever uses it later must remember to release the reference. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08942">8942</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00765">__ao2_alloc()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01196">sip_pvt::allowed_methods</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00776">sip_settings::allowtransfer</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01137">sip_pvt::allowtransfer</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01547">ao2_t_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../de/dc8/ccss_8h_source.html#l00135">ast_cc_config_params_init</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00269">ast_format_cap_append_from_cap()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00680">AST_LIST_HEAD_INIT_NOLOCK</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00031">AST_MEDIA_TYPE_UNKNOWN</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d5/dde/rtp__engine_8h_source.html#l00266">AST_RTP_DTMF</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03866">ast_sip_ouraddrfor()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00060">AST_TRANSPORT_UDP</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01089">sip_pvt::autoframing</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01158">sip_pvt::autokillid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00878">sip_via::branch</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01121">sip_pvt::branch</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08829">build_callid_pvt()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03847">build_via()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01063">sip_pvt::callid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00787">sip_settings::caps</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01099">sip_pvt::caps</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01218">sip_pvt::cc_params</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19164">check_via()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00782">sip_settings::default_context</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00803">default_engine</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00793">default_fromdomain</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00794">default_fromdomainport</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00789">sip_settings::default_max_forwards</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00804">default_maxcallbitrate</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00799">default_mohinterpret</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00800">default_mohsuggest</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00802">default_parkinglot</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00805">default_zone</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01078">sip_pvt::do_history</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05862">do_setnat()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00799">sip_socket::fd</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01075">sip_pvt::flags</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02379">free_via()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01220">sip_pvt::fromdomainport</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00850">global_autoframing</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00847">global_t1</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00849">global_timer_b</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01069">sip_pvt::init_icseq</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00117">INITIAL_CSEQ</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01155">sip_pvt::initid</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l01114">internip</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01100">sip_pvt::jointcaps</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08908">make_our_tag()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01106">sip_pvt::maxcallbitrate</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01065">sip_pvt::maxforwards</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01009">sip_pvt::method</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00119">mohinterpret</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l00430">mohsuggest</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01104">sip_pvt::noncodeccapability</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00045">NONE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01067">sip_pvt::ocseq</a>, <a class="el" href="../../d2/df2/structsip__pvt.html#a4d18210ee5b03fbe7cd8a3eab78010e6">sip_pvt::offered_media</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01136">sip_pvt::ourip</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00163">parkinglot</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02389">parse_via()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01101">sip_pvt::peercaps</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01103">sip_pvt::prefcaps</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01109">sip_pvt::provisional_keepalive_sched_id</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00841">recordhistory</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01135">sip_pvt::recv</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01102">sip_pvt::redircaps</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01157">sip_pvt::reinviteid</a>, <a class="el" href="../../d2/df2/structsip__pvt.html#ae025c96dd72b75c65c1c2a4f1239a31b">sip_pvt::request_queue</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01108">sip_pvt::request_queue_sched_id</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01174">sip_pvt::rtp</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01125">sip_pvt::sa</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00877">sip_via::sent_by</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01087">sip_pvt::session_modify</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01123">sip_pvt::sessionversion_remote</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16629">set_socket_transport()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00809">sip_cfg</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00275">SIP_DTMF</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00279">SIP_DTMF_AUTO</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00276">SIP_DTMF_RFC2833</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00313">SIP_FLAGS_TO_COPY</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08600">sip_get_header()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00616">SIP_OPTIONS</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00375">SIP_PAGE2_FLAGS_TO_COPY</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00396">SIP_PAGE3_FLAGS_TO_COPY</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08933">sip_pvt_callid_set()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06673">sip_pvt_dtor()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00615">SIP_REGISTER</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00846">sip_request::socket</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01066">sip_pvt::socket</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01162">sip_pvt::stateid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01184">sip_pvt::stimer</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01161">sip_pvt::subscribed</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01159">sip_pvt::t38id</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00737">cfsip_methods::text</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01096">sip_pvt::timer_b</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01095">sip_pvt::timer_t1</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00518">TRUE</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l00798">sip_socket::type</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01156">sip_pvt::waitid</a>, and <a class="el" href="../../d1/d94/sip_8h_source.html#l01116">sip_pvt::zone</a>.</p>
<div class="fragment"><div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;{</div><div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *p;</div><div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;</div><div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;   p = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc036c9ca7cf5266f1058d67b8ef541">__ao2_alloc</a>(<span class="keyword">sizeof</span>(*p), <a class="code" href="../../d5/dfe/chan__sip_8c.html#a5ecdf47ff5e49e2985cf869037d1c9ef">sip_pvt_dtor</a>,</div><div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <span class="stringliteral">&quot;allocate a dialog(pvt) struct&quot;</span>,</div><div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;      <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func);</div><div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;   }</div><div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;</div><div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(p, 512)) {</div><div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(p, -1, <span class="stringliteral">&quot;failed to string_field_init, drop p&quot;</span>);</div><div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;   }</div><div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;</div><div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;   <span class="keywordflow">if</span> (!(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ad1b63200d8c1c6e60caa69a887b9964e">cc_params</a> = <a class="code" href="../../de/dc8/ccss_8h.html#a1419c77d2c40064d442ae794175ca879">ast_cc_config_params_init</a>())) {</div><div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(p, -1, <span class="stringliteral">&quot;Yuck, couldn&#39;t allocate cc_params struct. Get rid o&#39; p&quot;</span>);</div><div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;   }</div><div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;</div><div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/df2/structsip__pvt.html#a30f9f8ae2fa7031693f7c0b518276adf">logger_callid</a>) {</div><div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#a001564dab595c4e3f3aa960304b3504a">sip_pvt_callid_set</a>(p, <a class="code" href="../../d2/df2/structsip__pvt.html#a30f9f8ae2fa7031693f7c0b518276adf">logger_callid</a>);</div><div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;   }</div><div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;</div><div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">caps</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a92dcfcdf86772a535223868eb8f5820c">jointcaps</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a24b2828f81a8172b8cfc3d53b2e2af87">peercaps</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a412d6df7cbe9e6ffb03fdfa3790c96f4">redircaps</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a644920fe29af597de89981a7b5ccb92b">prefcaps</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;</div><div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;   <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">caps</a>|| !p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a92dcfcdf86772a535223868eb8f5820c">jointcaps</a> || !p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a24b2828f81a8172b8cfc3d53b2e2af87">peercaps</a> || !p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a412d6df7cbe9e6ffb03fdfa3790c96f4">redircaps</a> || !p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a644920fe29af597de89981a7b5ccb92b">prefcaps</a>) {</div><div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">caps</a>);</div><div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a92dcfcdf86772a535223868eb8f5820c">jointcaps</a>);</div><div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a24b2828f81a8172b8cfc3d53b2e2af87">peercaps</a>);</div><div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a412d6df7cbe9e6ffb03fdfa3790c96f4">redircaps</a>);</div><div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a644920fe29af597de89981a7b5ccb92b">prefcaps</a>);</div><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(p, -1, <span class="stringliteral">&quot;Yuck, couldn&#39;t allocate format capabilities. Get rid o&#39; p&quot;</span>);</div><div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;   }</div><div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;</div><div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;</div><div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;   <span class="comment">/* If this dialog is created as a result of a request or response, lets store</span></div><div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;<span class="comment">    * some information about it in the dialog. */</span></div><div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;   <span class="keywordflow">if</span> (req) {</div><div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d41/structsip__via.html">sip_via</a> *<a class="code" href="../../df/d41/structsip__via.html#a1f64245945a8e4fb3750faa01da8d69d">via</a>;</div><div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *cseq = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a2eb983ff3bf2edeb6c7824a9049fdace">sip_get_header</a>(req, <span class="stringliteral">&quot;Cseq&quot;</span>);</div><div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;      uint32_t seqno;</div><div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;</div><div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;      <span class="comment">/* get branch parameter from initial Request that started this dialog */</span></div><div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;      via = <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a8a73a2ee382b76d91d1fb272efbdafbf">parse_via</a>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#a2eb983ff3bf2edeb6c7824a9049fdace">sip_get_header</a>(req, <span class="stringliteral">&quot;Via&quot;</span>));</div><div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;      <span class="keywordflow">if</span> (via) {</div><div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;         <span class="comment">/* only store the branch if it begins with the magic prefix &quot;z9hG4bK&quot;, otherwise</span></div><div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;<span class="comment">          * it is not useful to us to have it */</span></div><div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(via-&gt;<a class="code" href="../../df/d41/structsip__via.html#a86d2b919e92693f56bd955b94696167e">branch</a>) &amp;&amp; !strncasecmp(via-&gt;<a class="code" href="../../df/d41/structsip__via.html#a86d2b919e92693f56bd955b94696167e">branch</a>, <span class="stringliteral">&quot;z9hG4bK&quot;</span>, 7)) {</div><div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;            <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, initviabranch, via-&gt;<a class="code" href="../../df/d41/structsip__via.html#a86d2b919e92693f56bd955b94696167e">branch</a>);</div><div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;            <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, initviasentby, via-&gt;<a class="code" href="../../df/d41/structsip__via.html#a8f0766d6036132c881b39b510dd45ce4">sent_by</a>);</div><div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;         }</div><div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;         <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#accd7f6095b9998a51d76df40068c3fa0">free_via</a>(via);</div><div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;      }</div><div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;</div><div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;      <span class="comment">/* Store initial incoming cseq. An error in sscanf here is ignored.  There is no approperiate</span></div><div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;<span class="comment">       * except not storing the number.  CSeq validation must take place before dialog creation in find_call */</span></div><div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cseq) &amp;&amp; (sscanf(cseq, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;seqno) == 1)) {</div><div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;         p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2b542467d1e7bfee1b8e56f319ece5b1">init_icseq</a> = seqno;</div><div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;      }</div><div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;      <span class="comment">/* Later in ast_sip_ouraddrfor we need this to choose the right ip and port for the specific transport */</span></div><div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#aaf905e1faa853599953508d17f547ffc">set_socket_transport</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ad0c3c17da138826b7e0002a76305060a">socket</a>, req-&gt;<a class="code" href="../../d7/d82/structsip__request.html#ad0c3c17da138826b7e0002a76305060a">socket</a>.<a class="code" href="../../d5/da7/structsip__socket.html#a412bcf75e793ebae3f463f57410a6046">type</a>);</div><div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#aaf905e1faa853599953508d17f547ffc">set_socket_transport</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ad0c3c17da138826b7e0002a76305060a">socket</a>, <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a>);</div><div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;   }</div><div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;</div><div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ad0c3c17da138826b7e0002a76305060a">socket</a>.<a class="code" href="../../d5/da7/structsip__socket.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = -1;</div><div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a> = intended_method;</div><div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#afddd3d0f9decedb8c1310fce148713b8">initid</a> = -1;</div><div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a679cae61c4630385660d5fde1ee6ccfc">waitid</a> = -1;</div><div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a61d673d425301d4371a94651dab94cf7">reinviteid</a> = -1;</div><div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">autokillid</a> = -1;</div><div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a933fb6eb2d155de34416342db3dac701">request_queue_sched_id</a> = -1;</div><div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a4a1e75cfddd5ee21c8711fb36eccbda6">provisional_keepalive_sched_id</a> = -1;</div><div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ac03bc020e74be214d74deacdf4b22d2d">t38id</a> = -1;</div><div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ac247209f36d500ea73269786a7266119">subscribed</a> = <a class="code" href="../../d4/dfb/misdn__config_8c.html#a655c84af1b0034986ff56e12e84f983d">NONE</a>;</div><div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">stateid</a> = -1;</div><div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a61cd8ad94c5c6c857ce113250065284b">sessionversion_remote</a> = -1;</div><div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a034b33d49a46bd3dd4e2f9f3945cba28">session_modify</a> = <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#af3949803e3817b8a3b8617dfc65aa31a">stimer</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a11620e7d2b59f1c8ecd09ce01dad10e5">zone</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a4d8e4798826b02ad0c10b4200a5b462c">default_zone</a>, <span class="keyword">sizeof</span>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a11620e7d2b59f1c8ecd09ce01dad10e5">zone</a>));</div><div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a13b21193d268b9d473018327c251cae3">maxforwards</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a4b83bd01b2428d1c722fbbb5c394d097">sip_cfg</a>.<a class="code" href="../../d3/d72/structsip__settings.html#afcc8ce05f102f1d199f8cddece1e3ad5">default_max_forwards</a>;</div><div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;</div><div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;   <span class="keywordflow">if</span> (intended_method != <a class="code" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fca55c0e1e2d7f4c80e9731f9464f1b24a8">SIP_OPTIONS</a>) {  <span class="comment">/* Peerpoke has it&#39;s own system */</span></div><div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ad426d7413ee98dc9aa5798bcf27b00c5">timer_t1</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a2bb6bceca8146051efd8090a2835c169">global_t1</a>;   <span class="comment">/* Default SIP retransmission timer T1 (RFC 3261) */</span></div><div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a564d3b1b616956c41f3dd193365861ae">timer_b</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a8e37501d2c928b02d15e83fe662df892">global_timer_b</a>;  <span class="comment">/* Default SIP transaction timer B (RFC 3261) */</span></div><div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;   }</div><div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;</div><div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;   <span class="keywordflow">if</span> (!addr) {</div><div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#adfebfc7ea1cb82b259146ccd7e78d7cf">ourip</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#aae1c36dd119849a3a13a3eb8f7872e30">internip</a>;</div><div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ab0bb9f8b279a7994ceac2f4d72bde1f3">sa</a>, addr);</div><div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14fe7cda89ef9240117fb3dc923c98f7">ast_sip_ouraddrfor</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ab0bb9f8b279a7994ceac2f4d72bde1f3">sa</a>, &amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#adfebfc7ea1cb82b259146ccd7e78d7cf">ourip</a>, p);</div><div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;   }</div><div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;</div><div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;   <span class="comment">/* Copy global flags to this PVT at setup. */</span></div><div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">flags</a>[0], &amp;<a class="code" href="../../d5/dfe/chan__sip_8c.html#ad8565ce7a6f71fa23ce923d6cda6fe87">global_flags</a>[0], <a class="code" href="../../d1/d94/sip_8h.html#a99ccdfe9d9aa84c79af612898cd5e21c">SIP_FLAGS_TO_COPY</a>);</div><div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">flags</a>[1], &amp;<a class="code" href="../../d5/dfe/chan__sip_8c.html#ad8565ce7a6f71fa23ce923d6cda6fe87">global_flags</a>[1], <a class="code" href="../../d1/d94/sip_8h.html#a871fdea2415ec73bbbdae8a63cc89026">SIP_PAGE2_FLAGS_TO_COPY</a>);</div><div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">flags</a>[2], &amp;<a class="code" href="../../d5/dfe/chan__sip_8c.html#ad8565ce7a6f71fa23ce923d6cda6fe87">global_flags</a>[2], <a class="code" href="../../d1/d94/sip_8h.html#a0ff3b9ca684c313c4aff1de8f850b534">SIP_PAGE3_FLAGS_TO_COPY</a>);</div><div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;</div><div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a1319a1580fd0e0fee7cdecc2aadfe501">do_history</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a23d3a4db53fd8e95705832a4bf6b9227">recordhistory</a>;</div><div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;</div><div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ab7eb54f144b12fc26b34e9c434abb24a">branch</a> = <a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>();</div><div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#a12a8535da2160b95c48aa8bff9c060e6">make_our_tag</a>(p);</div><div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a81e61e0482414f4a5e4c124aab4271d5">ocseq</a> = <a class="code" href="../../d1/d94/sip_8h.html#adb0e95c85e032583cccfd25861ced2c9">INITIAL_CSEQ</a>;</div><div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a02fa6426cecfc0be761c4a067f827778">allowed_methods</a> = UINT_MAX;</div><div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;</div><div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>[intended_method].need_rtp) {</div><div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ab012c2badc14ff603e5852421378f6b5">maxcallbitrate</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#ac06e2e83735c0e1f385a32ea90c3d404">default_maxcallbitrate</a>;</div><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#aa98d3b398fa3fdc6a2653f767032eb5f">autoframing</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a1f7715dde426fae4e77adac69dfc6a32">global_autoframing</a>;</div><div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;   }</div><div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;</div><div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;   <span class="keywordflow">if</span> (useglobal_nat &amp;&amp; addr) {</div><div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;      <span class="comment">/* Setup NAT structure according to global settings if we have an address */</span></div><div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a645b2472a6c48668780591203d957c86">recv</a>, addr);</div><div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#a6d484ae17b6a539bf3e5299912f11ca1">check_via</a>(p, req);</div><div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#ad7548a881fa333d24b82306860761fa6">do_setnat</a>(p);</div><div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;   }</div><div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;</div><div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a> != <a class="code" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fca96740f7440bff3134fb2db02baa82b24">SIP_REGISTER</a>) {</div><div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, fromdomain, <a class="code" href="../../d5/dfe/chan__sip_8c.html#ae08a8acb3ca0c55de355ebcec19e761a">default_fromdomain</a>);</div><div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a339821732125615065c202f27e67e8bc">fromdomainport</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a604deb9859578a3e004d52b7e4ac222d">default_fromdomainport</a>;</div><div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;   }</div><div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#aca62091c019cb9fea92468384979adc3">build_via</a>(p);</div><div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;   <span class="keywordflow">if</span> (!callid)</div><div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#af3e7909d22b71da39a18b23f5ebecdbc">build_callid_pvt</a>(p);</div><div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, callid, callid);</div><div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;   <span class="comment">/* Assign default music on hold class */</span></div><div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, <a class="code" href="../../da/d45/chan__alsa_8c.html#af689da2b77d1265192a78a5b0994a1d5">mohinterpret</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a77a64ef4d53ef99561554f225dec26c4">default_mohinterpret</a>);</div><div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, <a class="code" href="../../d5/dff/chan__iax2_8c.html#aec4e201113703e94cd365aaa6dabd4f0">mohsuggest</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a15e0e0dfe3d26ff232dbdaf162f8c6c6">default_mohsuggest</a>);</div><div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">caps</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a4b83bd01b2428d1c722fbbb5c394d097">sip_cfg</a>.<a class="code" href="../../d3/d72/structsip__settings.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">caps</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;   p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a3be80aa397034a31b42ae13878ba8719">allowtransfer</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a4b83bd01b2428d1c722fbbb5c394d097">sip_cfg</a>.<a class="code" href="../../d3/d72/structsip__settings.html#a3be80aa397034a31b42ae13878ba8719">allowtransfer</a>;</div><div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">flags</a>[0], <a class="code" href="../../d1/d94/sip_8h.html#a3745f6a27ac46e7a90077b6b4ef93804">SIP_DTMF</a>) == <a class="code" href="../../d1/d94/sip_8h.html#a08e40388e961796fc8cac05a2d6e9461">SIP_DTMF_RFC2833</a>) ||</div><div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;       (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">flags</a>[0], <a class="code" href="../../d1/d94/sip_8h.html#a3745f6a27ac46e7a90077b6b4ef93804">SIP_DTMF</a>) == <a class="code" href="../../d1/d94/sip_8h.html#a6a71ff90e0ea3b9a646f5a6bfe147465">SIP_DTMF_AUTO</a>)) {</div><div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a3f1f7d8576cc47cd0a4ab3326a1850a3">noncodeccapability</a> |= <a class="code" href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a>;</div><div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;   }</div><div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a4b83bd01b2428d1c722fbbb5c394d097">sip_cfg</a>.<a class="code" href="../../d3/d72/structsip__settings.html#a7dc6cff9d51743005af0fcf0c37251ad">default_context</a>);</div><div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a2a992fd5800f5ef8814fb3ea15b81dc7">default_parkinglot</a>);</div><div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(p, engine, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a2003b0026f7703587eb5dd8f0f7742cd">default_engine</a>);</div><div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;</div><div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#ae025c96dd72b75c65c1c2a4f1239a31b">request_queue</a>);</div><div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a4d18210ee5b03fbe7cd8a3eab78010e6">offered_media</a>);</div><div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;</div><div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;   <span class="comment">/* Add to active dialog list */</span></div><div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;</div><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#ae3060025ad223cb697a9c16ce2b1182f">dialogs</a>, p, <span class="stringliteral">&quot;link pvt into dialogs table&quot;</span>);</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;</div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Allocating new SIP dialog for %s - %s (%s)\n&quot;</span>, callid ? callid : p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">callid</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>[intended_method].<a class="code" href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">text</a>, p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a8adb8595b8127cbea2118fada1ef8782">rtp</a> ? <span class="stringliteral">&quot;With RTP&quot;</span> : <span class="stringliteral">&quot;No RTP&quot;</span>);</div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;   <span class="keywordflow">return</span> p;</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_ae3060025ad223cb697a9c16ce2b1182f"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ae3060025ad223cb697a9c16ce2b1182f">dialogs</a></div><div class="ttdeci">static struct ao2_container * dialogs</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01043">chan_sip.c:1043</a></div></div>
<div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a2eb983ff3bf2edeb6c7824a9049fdace"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a2eb983ff3bf2edeb6c7824a9049fdace">sip_get_header</a></div><div class="ttdeci">const char * sip_get_header(const struct sip_request *req, const char *name)</div><div class="ttdoc">Get header from SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l08600">chan_sip.c:8600</a></div></div>
<div class="ttc" id="structsip__pvt_html_a30f9f8ae2fa7031693f7c0b518276adf"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a30f9f8ae2fa7031693f7c0b518276adf">sip_pvt::logger_callid</a></div><div class="ttdeci">ast_callid logger_callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01008">sip.h:1008</a></div></div>
<div class="ttc" id="structsip__pvt_html_a24b2828f81a8172b8cfc3d53b2e2af87"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a24b2828f81a8172b8cfc3d53b2e2af87">sip_pvt::peercaps</a></div><div class="ttdeci">struct ast_format_cap * peercaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01101">sip.h:1101</a></div></div>
<div class="ttc" id="structsip__pvt_html_ad1b63200d8c1c6e60caa69a887b9964e"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ad1b63200d8c1c6e60caa69a887b9964e">sip_pvt::cc_params</a></div><div class="ttdeci">struct ast_cc_config_params * cc_params</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01218">sip.h:1218</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_af689da2b77d1265192a78a5b0994a1d5"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#af689da2b77d1265192a78a5b0994a1d5">mohinterpret</a></div><div class="ttdeci">static char mohinterpret[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00119">chan_alsa.c:119</a></div></div>
<div class="ttc" id="structsip__pvt_html_a2b542467d1e7bfee1b8e56f319ece5b1"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a2b542467d1e7bfee1b8e56f319ece5b1">sip_pvt::init_icseq</a></div><div class="ttdeci">uint32_t init_icseq</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01069">sip.h:1069</a></div></div>
<div class="ttc" id="structsip__pvt_html_a644920fe29af597de89981a7b5ccb92b"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a644920fe29af597de89981a7b5ccb92b">sip_pvt::prefcaps</a></div><div class="ttdeci">struct ast_format_cap * prefcaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01103">sip.h:1103</a></div></div>
<div class="ttc" id="structsip__pvt_html_ac247209f36d500ea73269786a7266119"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ac247209f36d500ea73269786a7266119">sip_pvt::subscribed</a></div><div class="ttdeci">enum subscriptiontype subscribed</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01161">sip.h:1161</a></div></div>
<div class="ttc" id="structsip__pvt_html_a339821732125615065c202f27e67e8bc"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a339821732125615065c202f27e67e8bc">sip_pvt::fromdomainport</a></div><div class="ttdeci">int fromdomainport</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01220">sip.h:1220</a></div></div>
<div class="ttc" id="structsip__pvt_html_a02fa6426cecfc0be761c4a067f827778"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a02fa6426cecfc0be761c4a067f827778">sip_pvt::allowed_methods</a></div><div class="ttdeci">unsigned int allowed_methods</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01196">sip.h:1196</a></div></div>
<div class="ttc" id="reqresp__parser_8h_html_accd7f6095b9998a51d76df40068c3fa0"><div class="ttname"><a href="../../d1/d8f/reqresp__parser_8h.html#accd7f6095b9998a51d76df40068c3fa0">free_via</a></div><div class="ttdeci">void free_via(struct sip_via *v)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/reqresp__parser_8c_source.html#l02379">reqresp_parser.c:2379</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b31bfcc769a5b5c31e13aa6d8a9a286"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b31bfcc769a5b5c31e13aa6d8a9a286">parkinglot</a></div><div class="ttdeci">static char parkinglot[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00163">chan_mgcp.c:163</a></div></div>
<div class="ttc" id="structsip__pvt_html_a61cd8ad94c5c6c857ce113250065284b"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a61cd8ad94c5c6c857ce113250065284b">sip_pvt::sessionversion_remote</a></div><div class="ttdeci">int64_t sessionversion_remote</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01123">sip.h:1123</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aca62091c019cb9fea92468384979adc3"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aca62091c019cb9fea92468384979adc3">build_via</a></div><div class="ttdeci">static void build_via(struct sip_pvt *p)</div><div class="ttdoc">Build a Via header for a request. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03847">chan_sip.c:3847</a></div></div>
<div class="ttc" id="structsip__pvt_html_ab012c2badc14ff603e5852421378f6b5"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ab012c2badc14ff603e5852421378f6b5">sip_pvt::maxcallbitrate</a></div><div class="ttdeci">int maxcallbitrate</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01106">sip.h:1106</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="chan__sip_8c_html_afa946c486bf4b3f4967da6a39530f312"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a></div><div class="ttdeci">static const struct cfsip_methods sip_methods[]</div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="misdn__config_8c_html_a655c84af1b0034986ff56e12e84f983d"><div class="ttname"><a href="../../d4/dfb/misdn__config_8c.html#a655c84af1b0034986ff56e12e84f983d">NONE</a></div><div class="ttdeci">#define NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/misdn__config_8c_source.html#l00045">misdn_config.c:45</a></div></div>
<div class="ttc" id="structsip__pvt_html_aeeaae0d9184a0d4b1be0d3801f43d5b1"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#aeeaae0d9184a0d4b1be0d3801f43d5b1">sip_pvt::autokillid</a></div><div class="ttdeci">int autokillid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01158">sip.h:1158</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structsip__pvt_html_a61d673d425301d4371a94651dab94cf7"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a61d673d425301d4371a94651dab94cf7">sip_pvt::reinviteid</a></div><div class="ttdeci">int reinviteid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01157">sip.h:1157</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a6d484ae17b6a539bf3e5299912f11ca1"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a6d484ae17b6a539bf3e5299912f11ca1">check_via</a></div><div class="ttdeci">static void check_via(struct sip_pvt *p, const struct sip_request *req)</div><div class="ttdoc">check Via: header for hostname, port and rport request/answer </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l19164">chan_sip.c:19164</a></div></div>
<div class="ttc" id="structsip__pvt_html_a645b2472a6c48668780591203d957c86"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a645b2472a6c48668780591203d957c86">sip_pvt::recv</a></div><div class="ttdeci">struct ast_sockaddr recv</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01135">sip.h:1135</a></div></div>
<div class="ttc" id="structsip__pvt_html_afddd3d0f9decedb8c1310fce148713b8"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#afddd3d0f9decedb8c1310fce148713b8">sip_pvt::initid</a></div><div class="ttdeci">int initid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01155">sip.h:1155</a></div></div>
<div class="ttc" id="structsip__pvt_html_ad0c3c17da138826b7e0002a76305060a"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ad0c3c17da138826b7e0002a76305060a">sip_pvt::socket</a></div><div class="ttdeci">struct sip_socket socket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01066">sip.h:1066</a></div></div>
<div class="ttc" id="sip_8h_html_a08e40388e961796fc8cac05a2d6e9461"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a08e40388e961796fc8cac05a2d6e9461">SIP_DTMF_RFC2833</a></div><div class="ttdeci">#define SIP_DTMF_RFC2833</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00276">sip.h:276</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc036c9ca7cf5266f1058d67b8ef541"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc036c9ca7cf5266f1058d67b8ef541">__ao2_alloc</a></div><div class="ttdeci">void * __ao2_alloc(size_t data_size, ao2_destructor_fn destructor_fn, unsigned int options, const char *tag, const char *file, int line, const char *func) attribute_warn_unused_result</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00765">astobj2.c:765</a></div></div>
<div class="ttc" id="structsip__pvt_html_adfebfc7ea1cb82b259146ccd7e78d7cf"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#adfebfc7ea1cb82b259146ccd7e78d7cf">sip_pvt::ourip</a></div><div class="ttdeci">struct ast_sockaddr ourip</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01136">sip.h:1136</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6db9934459f5cdc95cb3af77d55d426e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6db9934459f5cdc95cb3af77d55d426e">ao2_t_link</a></div><div class="ttdeci">#define ao2_t_link(container, obj, tag)</div><div class="ttdoc">Add an object to a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01547">astobj2.h:1547</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aae1c36dd119849a3a13a3eb8f7872e30"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aae1c36dd119849a3a13a3eb8f7872e30">internip</a></div><div class="ttdeci">static struct ast_sockaddr internip</div><div class="ttdoc">our (internal) default address/port to put in SIP/SDP messages internip is initialized picking a suit...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01114">chan_sip.c:1114</a></div></div>
<div class="ttc" id="structsip__pvt_html_a92dcfcdf86772a535223868eb8f5820c"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a92dcfcdf86772a535223868eb8f5820c">sip_pvt::jointcaps</a></div><div class="ttdeci">struct ast_format_cap * jointcaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01100">sip.h:1100</a></div></div>
<div class="ttc" id="sip_8h_html_ab67bdb52f1ed2af1706c3d780b6953fca96740f7440bff3134fb2db02baa82b24"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fca96740f7440bff3134fb2db02baa82b24">SIP_REGISTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00615">sip.h:615</a></div></div>
<div class="ttc" id="chan__sip_8c_html_ae08a8acb3ca0c55de355ebcec19e761a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ae08a8acb3ca0c55de355ebcec19e761a">default_fromdomain</a></div><div class="ttdeci">static char default_fromdomain[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00793">chan_sip.c:793</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14fe7cda89ef9240117fb3dc923c98f7"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14fe7cda89ef9240117fb3dc923c98f7">ast_sip_ouraddrfor</a></div><div class="ttdeci">static void ast_sip_ouraddrfor(const struct ast_sockaddr *them, struct ast_sockaddr *us, struct sip_pvt *p)</div><div class="ttdoc">NAT fix - decide which IP address to use for Asterisk server? </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03866">chan_sip.c:3866</a></div></div>
<div class="ttc" id="structsip__pvt_html_a2e6c0710de97d841fd55c2ccd64e8932"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a2e6c0710de97d841fd55c2ccd64e8932">sip_pvt::flags</a></div><div class="ttdeci">struct ast_flags flags[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01075">sip.h:1075</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsip__pvt_html_a4a1e75cfddd5ee21c8711fb36eccbda6"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a4a1e75cfddd5ee21c8711fb36eccbda6">sip_pvt::provisional_keepalive_sched_id</a></div><div class="ttdeci">int provisional_keepalive_sched_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01109">sip.h:1109</a></div></div>
<div class="ttc" id="chan__sip_8c_html_ac06e2e83735c0e1f385a32ea90c3d404"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ac06e2e83735c0e1f385a32ea90c3d404">default_maxcallbitrate</a></div><div class="ttdeci">static int default_maxcallbitrate</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00804">chan_sip.c:804</a></div></div>
<div class="ttc" id="ccss_8h_html_a1419c77d2c40064d442ae794175ca879"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a1419c77d2c40064d442ae794175ca879">ast_cc_config_params_init</a></div><div class="ttdeci">#define ast_cc_config_params_init()</div><div class="ttdoc">Allocate and initialize an ast_cc_config_params structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc8/ccss_8h_source.html#l00135">ccss.h:135</a></div></div>
<div class="ttc" id="structsip__socket_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d5/da7/structsip__socket.html#a6f8059414f0228f0256115e024eeed4b">sip_socket::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00799">sip.h:799</a></div></div>
<div class="ttc" id="structsip__pvt_html_a933fb6eb2d155de34416342db3dac701"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a933fb6eb2d155de34416342db3dac701">sip_pvt::request_queue_sched_id</a></div><div class="ttdeci">int request_queue_sched_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01108">sip.h:1108</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a12a8535da2160b95c48aa8bff9c060e6"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a12a8535da2160b95c48aa8bff9c060e6">make_our_tag</a></div><div class="ttdeci">static void make_our_tag(struct sip_pvt *pvt)</div><div class="ttdoc">Make our SIP dialog tag. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l08908">chan_sip.c:8908</a></div></div>
<div class="ttc" id="structsip__settings_html_a3be80aa397034a31b42ae13878ba8719"><div class="ttname"><a href="../../d3/d72/structsip__settings.html#a3be80aa397034a31b42ae13878ba8719">sip_settings::allowtransfer</a></div><div class="ttdeci">enum transfermodes allowtransfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00776">sip.h:776</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structsip__via_html"><div class="ttname"><a href="../../df/d41/structsip__via.html">sip_via</a></div><div class="ttdoc">Structure to store Via information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00874">sip.h:874</a></div></div>
<div class="ttc" id="structsip__pvt_html_a11620e7d2b59f1c8ecd09ce01dad10e5"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a11620e7d2b59f1c8ecd09ce01dad10e5">sip_pvt::zone</a></div><div class="ttdeci">char zone[MAX_TONEZONE_COUNTRY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01116">sip.h:1116</a></div></div>
<div class="ttc" id="structsip__pvt_html_ab0bb9f8b279a7994ceac2f4d72bde1f3"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ab0bb9f8b279a7994ceac2f4d72bde1f3">sip_pvt::sa</a></div><div class="ttdeci">struct ast_sockaddr sa</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01125">sip.h:1125</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a001564dab595c4e3f3aa960304b3504a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a001564dab595c4e3f3aa960304b3504a">sip_pvt_callid_set</a></div><div class="ttdeci">static void sip_pvt_callid_set(struct sip_pvt *pvt, ast_callid callid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l08933">chan_sip.c:8933</a></div></div>
<div class="ttc" id="structsip__pvt_html_a3f1f7d8576cc47cd0a4ab3326a1850a3"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a3f1f7d8576cc47cd0a4ab3326a1850a3">sip_pvt::noncodeccapability</a></div><div class="ttdeci">int noncodeccapability</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01104">sip.h:1104</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structsip__pvt_html_a6995c0fb380b2e44c6b1d0c36a12e5a8"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">sip_pvt::caps</a></div><div class="ttdeci">struct ast_format_cap * caps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01099">sip.h:1099</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a4d8e4798826b02ad0c10b4200a5b462c"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a4d8e4798826b02ad0c10b4200a5b462c">default_zone</a></div><div class="ttdeci">static char default_zone[MAX_TONEZONE_COUNTRY]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00805">chan_sip.c:805</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_aec4e201113703e94cd365aaa6dabd4f0"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#aec4e201113703e94cd365aaa6dabd4f0">mohsuggest</a></div><div class="ttdeci">static char mohsuggest[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00430">chan_iax2.c:430</a></div></div>
<div class="ttc" id="structsip__pvt_html_ab7eb54f144b12fc26b34e9c434abb24a"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ab7eb54f144b12fc26b34e9c434abb24a">sip_pvt::branch</a></div><div class="ttdeci">long branch</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01121">sip.h:1121</a></div></div>
<div class="ttc" id="structsip__via_html_a86d2b919e92693f56bd955b94696167e"><div class="ttname"><a href="../../df/d41/structsip__via.html#a86d2b919e92693f56bd955b94696167e">sip_via::branch</a></div><div class="ttdeci">const char * branch</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00878">sip.h:878</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="sip_8h_html_a0ff3b9ca684c313c4aff1de8f850b534"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a0ff3b9ca684c313c4aff1de8f850b534">SIP_PAGE3_FLAGS_TO_COPY</a></div><div class="ttdeci">#define SIP_PAGE3_FLAGS_TO_COPY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00396">sip.h:396</a></div></div>
<div class="ttc" id="structsip__pvt_html_aa98d3b398fa3fdc6a2653f767032eb5f"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#aa98d3b398fa3fdc6a2653f767032eb5f">sip_pvt::autoframing</a></div><div class="ttdeci">unsigned short autoframing</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01089">sip.h:1089</a></div></div>
<div class="ttc" id="structsip__pvt_html_a13b21193d268b9d473018327c251cae3"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a13b21193d268b9d473018327c251cae3">sip_pvt::maxforwards</a></div><div class="ttdeci">int maxforwards</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01065">sip.h:1065</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="structsip__via_html_a1f64245945a8e4fb3750faa01da8d69d"><div class="ttname"><a href="../../df/d41/structsip__via.html#a1f64245945a8e4fb3750faa01da8d69d">sip_via::via</a></div><div class="ttdeci">char * via</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00875">sip.h:875</a></div></div>
<div class="ttc" id="sip_8h_html_ab67bdb52f1ed2af1706c3d780b6953fca55c0e1e2d7f4c80e9731f9464f1b24a8"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fca55c0e1e2d7f4c80e9731f9464f1b24a8">SIP_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00616">sip.h:616</a></div></div>
<div class="ttc" id="structsip__settings_html_afcc8ce05f102f1d199f8cddece1e3ad5"><div class="ttname"><a href="../../d3/d72/structsip__settings.html#afcc8ce05f102f1d199f8cddece1e3ad5">sip_settings::default_max_forwards</a></div><div class="ttdeci">int default_max_forwards</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00789">sip.h:789</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="sip_8h_html_a871fdea2415ec73bbbdae8a63cc89026"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a871fdea2415ec73bbbdae8a63cc89026">SIP_PAGE2_FLAGS_TO_COPY</a></div><div class="ttdeci">#define SIP_PAGE2_FLAGS_TO_COPY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00375">sip.h:375</a></div></div>
<div class="ttc" id="structsip__pvt_html_a679cae61c4630385660d5fde1ee6ccfc"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a679cae61c4630385660d5fde1ee6ccfc">sip_pvt::waitid</a></div><div class="ttdeci">int waitid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01156">sip.h:1156</a></div></div>
<div class="ttc" id="structsip__pvt_html_a584549b9ce9c56f6b783fe8e7183f596"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">sip_pvt::callid</a></div><div class="ttdeci">const ast_string_field callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01063">sip.h:1063</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a23d3a4db53fd8e95705832a4bf6b9227"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a23d3a4db53fd8e95705832a4bf6b9227">recordhistory</a></div><div class="ttdeci">static unsigned int recordhistory</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00841">chan_sip.c:841</a></div></div>
<div class="ttc" id="structsip__pvt_html_a412d6df7cbe9e6ffb03fdfa3790c96f4"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a412d6df7cbe9e6ffb03fdfa3790c96f4">sip_pvt::redircaps</a></div><div class="ttdeci">struct ast_format_cap * redircaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01102">sip.h:1102</a></div></div>
<div class="ttc" id="structsip__pvt_html_af3949803e3817b8a3b8617dfc65aa31a"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#af3949803e3817b8a3b8617dfc65aa31a">sip_pvt::stimer</a></div><div class="ttdeci">struct sip_st_dlg * stimer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01184">sip.h:1184</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a2a992fd5800f5ef8814fb3ea15b81dc7"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a2a992fd5800f5ef8814fb3ea15b81dc7">default_parkinglot</a></div><div class="ttdeci">static char default_parkinglot[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00802">chan_sip.c:802</a></div></div>
<div class="ttc" id="structsip__pvt_html_adcc9a19ad3119f823a658f6a49a24e64"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#adcc9a19ad3119f823a658f6a49a24e64">sip_pvt::method</a></div><div class="ttdeci">int method</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01009">sip.h:1009</a></div></div>
<div class="ttc" id="chan__sip_8c_html_ad8565ce7a6f71fa23ce923d6cda6fe87"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ad8565ce7a6f71fa23ce923d6cda6fe87">global_flags</a></div><div class="ttdeci">static struct ast_flags global_flags[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00884">chan_sip.c:884</a></div></div>
<div class="ttc" id="structsip__pvt_html_a564d3b1b616956c41f3dd193365861ae"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a564d3b1b616956c41f3dd193365861ae">sip_pvt::timer_b</a></div><div class="ttdeci">int timer_b</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01096">sip.h:1096</a></div></div>
<div class="ttc" id="structsip__pvt_html_a81e61e0482414f4a5e4c124aab4271d5"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a81e61e0482414f4a5e4c124aab4271d5">sip_pvt::ocseq</a></div><div class="ttdeci">uint32_t ocseq</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01067">sip.h:1067</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a4b83bd01b2428d1c722fbbb5c394d097"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a4b83bd01b2428d1c722fbbb5c394d097">sip_cfg</a></div><div class="ttdeci">static struct sip_settings sip_cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00809">chan_sip.c:809</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a15e0e0dfe3d26ff232dbdaf162f8c6c6"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a15e0e0dfe3d26ff232dbdaf162f8c6c6">default_mohsuggest</a></div><div class="ttdeci">static char default_mohsuggest[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00800">chan_sip.c:800</a></div></div>
<div class="ttc" id="structsip__pvt_html"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html">sip_pvt</a></div><div class="ttdoc">Structure used for each SIP dialog, ie. a call, a registration, a subscribe. Created and initialized ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01005">sip.h:1005</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a8e37501d2c928b02d15e83fe662df892"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a8e37501d2c928b02d15e83fe662df892">global_timer_b</a></div><div class="ttdeci">static int global_timer_b</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00849">chan_sip.c:849</a></div></div>
<div class="ttc" id="structsip__pvt_html_a70382561daaa758a201b7a711d566e24"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">sip_pvt::stateid</a></div><div class="ttdeci">int stateid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01162">sip.h:1162</a></div></div>
<div class="ttc" id="sip_8h_html_a99ccdfe9d9aa84c79af612898cd5e21c"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a99ccdfe9d9aa84c79af612898cd5e21c">SIP_FLAGS_TO_COPY</a></div><div class="ttdeci">#define SIP_FLAGS_TO_COPY</div><div class="ttdoc">Flags to copy from peer/user to dialog. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00313">sip.h:313</a></div></div>
<div class="ttc" id="structsip__pvt_html_a1319a1580fd0e0fee7cdecc2aadfe501"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a1319a1580fd0e0fee7cdecc2aadfe501">sip_pvt::do_history</a></div><div class="ttdeci">unsigned short do_history</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01078">sip.h:1078</a></div></div>
<div class="ttc" id="structsip__pvt_html_ad426d7413ee98dc9aa5798bcf27b00c5"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ad426d7413ee98dc9aa5798bcf27b00c5">sip_pvt::timer_t1</a></div><div class="ttdeci">int timer_t1</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01095">sip.h:1095</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a1f7715dde426fae4e77adac69dfc6a32"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a1f7715dde426fae4e77adac69dfc6a32">global_autoframing</a></div><div class="ttdeci">static unsigned int global_autoframing</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00850">chan_sip.c:850</a></div></div>
<div class="ttc" id="sip_8h_html_adb0e95c85e032583cccfd25861ced2c9"><div class="ttname"><a href="../../d1/d94/sip_8h.html#adb0e95c85e032583cccfd25861ced2c9">INITIAL_CSEQ</a></div><div class="ttdeci">#define INITIAL_CSEQ</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00117">sip.h:117</a></div></div>
<div class="ttc" id="structsip__pvt_html_a8adb8595b8127cbea2118fada1ef8782"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a8adb8595b8127cbea2118fada1ef8782">sip_pvt::rtp</a></div><div class="ttdeci">struct ast_rtp_instance * rtp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01174">sip.h:1174</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a2003b0026f7703587eb5dd8f0f7742cd"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a2003b0026f7703587eb5dd8f0f7742cd">default_engine</a></div><div class="ttdeci">static char default_engine[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00803">chan_sip.c:803</a></div></div>
<div class="ttc" id="structsip__settings_html_a6995c0fb380b2e44c6b1d0c36a12e5a8"><div class="ttname"><a href="../../d3/d72/structsip__settings.html#a6995c0fb380b2e44c6b1d0c36a12e5a8">sip_settings::caps</a></div><div class="ttdeci">struct ast_format_cap * caps</div><div class="ttdoc">Global list of addresses dynamic peers are not allowed to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00787">sip.h:787</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af3e7909d22b71da39a18b23f5ebecdbc"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af3e7909d22b71da39a18b23f5ebecdbc">build_callid_pvt</a></div><div class="ttdeci">static void build_callid_pvt(struct sip_pvt *pvt)</div><div class="ttdoc">Build SIP Call-ID value for a non-REGISTER transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l08829">chan_sip.c:8829</a></div></div>
<div class="ttc" id="chan__sip_8c_html_ad7548a881fa333d24b82306860761fa6"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ad7548a881fa333d24b82306860761fa6">do_setnat</a></div><div class="ttdeci">static void do_setnat(struct sip_pvt *p)</div><div class="ttdoc">Set nat mode on the various data sockets. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l05862">chan_sip.c:5862</a></div></div>
<div class="ttc" id="structcfsip__methods_html_a11c16136837f0092e35a3f90df08f79e"><div class="ttname"><a href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">cfsip_methods::text</a></div><div class="ttdeci">char *const text</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00737">chan_sip.c:737</a></div></div>
<div class="ttc" id="structsip__via_html_a8f0766d6036132c881b39b510dd45ce4"><div class="ttname"><a href="../../df/d41/structsip__via.html#a8f0766d6036132c881b39b510dd45ce4">sip_via::sent_by</a></div><div class="ttdeci">const char * sent_by</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00877">sip.h:877</a></div></div>
<div class="ttc" id="structsip__pvt_html_ae025c96dd72b75c65c1c2a4f1239a31b"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ae025c96dd72b75c65c1c2a4f1239a31b">sip_pvt::request_queue</a></div><div class="ttdeci">struct sip_pvt::request_queue request_queue</div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="structsip__pvt_html_a3be80aa397034a31b42ae13878ba8719"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a3be80aa397034a31b42ae13878ba8719">sip_pvt::allowtransfer</a></div><div class="ttdeci">enum transfermodes allowtransfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01137">sip.h:1137</a></div></div>
<div class="ttc" id="sip_8h_html_a3745f6a27ac46e7a90077b6b4ef93804"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a3745f6a27ac46e7a90077b6b4ef93804">SIP_DTMF</a></div><div class="ttdeci">#define SIP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00275">sip.h:275</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structsip__socket_html_a412bcf75e793ebae3f463f57410a6046"><div class="ttname"><a href="../../d5/da7/structsip__socket.html#a412bcf75e793ebae3f463f57410a6046">sip_socket::type</a></div><div class="ttdeci">enum ast_transport type</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00798">sip.h:798</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a77a64ef4d53ef99561554f225dec26c4"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a77a64ef4d53ef99561554f225dec26c4">default_mohinterpret</a></div><div class="ttdeci">static char default_mohinterpret[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00799">chan_sip.c:799</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a604deb9859578a3e004d52b7e4ac222d"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a604deb9859578a3e004d52b7e4ac222d">default_fromdomainport</a></div><div class="ttdeci">static int default_fromdomainport</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00794">chan_sip.c:794</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00518">app_minivm.c:518</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a2bb6bceca8146051efd8090a2835c169"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a2bb6bceca8146051efd8090a2835c169">global_t1</a></div><div class="ttdeci">static int global_t1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00847">chan_sip.c:847</a></div></div>
<div class="ttc" id="structsip__pvt_html_a034b33d49a46bd3dd4e2f9f3945cba28"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a034b33d49a46bd3dd4e2f9f3945cba28">sip_pvt::session_modify</a></div><div class="ttdeci">unsigned short session_modify</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01087">sip.h:1087</a></div></div>
<div class="ttc" id="reqresp__parser_8h_html_a8a73a2ee382b76d91d1fb272efbdafbf"><div class="ttname"><a href="../../d1/d8f/reqresp__parser_8h.html#a8a73a2ee382b76d91d1fb272efbdafbf">parse_via</a></div><div class="ttdeci">struct sip_via * parse_via(const char *header)</div><div class="ttdoc">Parse a Via header. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d85/reqresp__parser_8c_source.html#l02389">reqresp_parser.c:2389</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00060">netsock2.h:60</a></div></div>
<div class="ttc" id="structsip__request_html_ad0c3c17da138826b7e0002a76305060a"><div class="ttname"><a href="../../d7/d82/structsip__request.html#ad0c3c17da138826b7e0002a76305060a">sip_request::socket</a></div><div class="ttdeci">struct sip_socket socket</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00846">sip.h:846</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aaf905e1faa853599953508d17f547ffc"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aaf905e1faa853599953508d17f547ffc">set_socket_transport</a></div><div class="ttdeci">static void set_socket_transport(struct sip_socket *socket, int transport)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l16629">chan_sip.c:16629</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structsip__pvt_html_a4d18210ee5b03fbe7cd8a3eab78010e6"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a4d18210ee5b03fbe7cd8a3eab78010e6">sip_pvt::offered_media</a></div><div class="ttdeci">struct sip_pvt::@174 offered_media</div></div>
<div class="ttc" id="rtp__engine_8h_html_a3cc8001677e3b955b9b5ceb4267a76ec"><div class="ttname"><a href="../../d5/dde/rtp__engine_8h.html#a3cc8001677e3b955b9b5ceb4267a76ec">AST_RTP_DTMF</a></div><div class="ttdeci">#define AST_RTP_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/rtp__engine_8h_source.html#l00266">rtp_engine.h:266</a></div></div>
<div class="ttc" id="structsip__settings_html_a7dc6cff9d51743005af0fcf0c37251ad"><div class="ttname"><a href="../../d3/d72/structsip__settings.html#a7dc6cff9d51743005af0fcf0c37251ad">sip_settings::default_context</a></div><div class="ttdeci">char default_context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00782">sip.h:782</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a5ecdf47ff5e49e2985cf869037d1c9ef"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a5ecdf47ff5e49e2985cf869037d1c9ef">sip_pvt_dtor</a></div><div class="ttdeci">static void sip_pvt_dtor(void *vdoomed)</div><div class="ttdoc">ao2 destructor for SIP dialog structure </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l06673">chan_sip.c:6673</a></div></div>
<div class="ttc" id="sip_8h_html_a6a71ff90e0ea3b9a646f5a6bfe147465"><div class="ttname"><a href="../../d1/d94/sip_8h.html#a6a71ff90e0ea3b9a646f5a6bfe147465">SIP_DTMF_AUTO</a></div><div class="ttdeci">#define SIP_DTMF_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00279">sip.h:279</a></div></div>
<div class="ttc" id="structsip__pvt_html_ac03bc020e74be214d74deacdf4b22d2d"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#ac03bc020e74be214d74deacdf4b22d2d">sip_pvt::t38id</a></div><div class="ttdeci">int t38id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01159">sip.h:1159</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abebc634d54d43a8298ba7416eadd55f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abebc634d54d43a8298ba7416eadd55f5">&#9670;&nbsp;</a></span>__sip_pretend_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __sip_pretend_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pretend to ack all packets called with p locked. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04615">4615</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04570">__sip_ack()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01246">sip_pkt::data</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03594">find_sip_method()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01236">sip_pkt::is_resp</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01234">sip_pkt::method</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04335">method</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01177">sip_pvt::packets</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01235">sip_pkt::seqno</a>, <a class="el" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00737">cfsip_methods::text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04369">__sip_autodestruct()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27605">handle_request_bye()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27538">handle_request_cancel()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15976">sip_reg_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;{</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d34/structsip__pkt.html">sip_pkt</a> *cur = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;   <span class="keywordflow">while</span> (p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>) {</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;      <span class="keywordflow">if</span> (cur == p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>) {</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Have a packet that doesn&#39;t want to give up! %s\n&quot;</span>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>[cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a>].<a class="code" href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">text</a>);</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      }</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      cur = p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>;</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;      method = (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a>) ? cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">method</a> : <a class="code" href="../../d5/dfe/chan__sip_8c.html#a5fceb24538963ce161a01ae88cd1f873">find_sip_method</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a5164b36a74f46bb652938e64c7ceb570">data</a>));</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#a80f7cd823ce0ca5a771dceefb17e960c">__sip_ack</a>(p, cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a>, cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">is_resp</a>, method);</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;   }</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;}</div><div class="ttc" id="structsip__pkt_html"><div class="ttname"><a href="../../db/d34/structsip__pkt.html">sip_pkt</a></div><div class="ttdoc">sip packet - raw format for outbound packets that are sent or scheduled for transmission Packets are ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01231">sip.h:1231</a></div></div>
<div class="ttc" id="structsip__pkt_html_adcc9a19ad3119f823a658f6a49a24e64"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#adcc9a19ad3119f823a658f6a49a24e64">sip_pkt::method</a></div><div class="ttdeci">int method</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01234">sip.h:1234</a></div></div>
<div class="ttc" id="chan__sip_8c_html_afa946c486bf4b3f4967da6a39530f312"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a></div><div class="ttdeci">static const struct cfsip_methods sip_methods[]</div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structsip__pkt_html_a9ac42137a8036d8af9b7a5e678e05f57"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">sip_pkt::seqno</a></div><div class="ttdeci">uint32_t seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01235">sip.h:1235</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a80f7cd823ce0ca5a771dceefb17e960c"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a80f7cd823ce0ca5a771dceefb17e960c">__sip_ack</a></div><div class="ttdeci">int __sip_ack(struct sip_pvt *p, uint32_t seqno, int resp, int sipmethod)</div><div class="ttdoc">Acknowledges receipt of a packet and stops retransmission called with p locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04570">chan_sip.c:4570</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="structsip__pkt_html_a5164b36a74f46bb652938e64c7ceb570"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a5164b36a74f46bb652938e64c7ceb570">sip_pkt::data</a></div><div class="ttdeci">struct ast_str * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01246">sip.h:1246</a></div></div>
<div class="ttc" id="structsip__pkt_html_a1f2a0b6055f056403f7ad3511f783454"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">sip_pkt::is_resp</a></div><div class="ttdeci">char is_resp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01236">sip.h:1236</a></div></div>
<div class="ttc" id="structsip__pvt_html_a26f5206ee56217eee8d921652c2b15d2"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">sip_pvt::packets</a></div><div class="ttdeci">struct sip_pkt * packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01177">sip.h:1177</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a5fceb24538963ce161a01ae88cd1f873"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a5fceb24538963ce161a01ae88cd1f873">find_sip_method</a></div><div class="ttdeci">static int find_sip_method(const char *msg)</div><div class="ttdoc">find_sip_method: Find SIP method from header </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03594">chan_sip.c:3594</a></div></div>
<div class="ttc" id="structcfsip__methods_html_a11c16136837f0092e35a3f90df08f79e"><div class="ttname"><a href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">cfsip_methods::text</a></div><div class="ttdeci">char *const text</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00737">chan_sip.c:737</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb667e87353985c6408517cb00c3ca36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb667e87353985c6408517cb00c3ca36">&#9670;&nbsp;</a></span>__sip_semi_ack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __sip_semi_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sipmethod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acks receipt of packet, keep it around (used for provisional responses) </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04632">4632</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01063">sip_pvt::callid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01246">sip_pkt::data</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00521">FALSE</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01236">sip_pkt::is_resp</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03584">method_match()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01232">sip_pkt::next</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01177">sip_pvt::packets</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01240">sip_pkt::retransid</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01235">sip_pkt::seqno</a>, <a class="el" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00916">sipdebug</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04251">stop_retrans_pkt()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00737">cfsip_methods::text</a>, and <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00518">TRUE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25171">handle_response()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07197">sip_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;{</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d34/structsip__pkt.html">sip_pkt</a> *cur;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../de/dfe/app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   <span class="keywordflow">for</span> (cur = p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">packets</a>; cur; cur = cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#afacd6a01ed62fd0a67e14cfb28b9fe06">next</a>) {</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a> == <a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a> &amp;&amp; cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">is_resp</a> == resp &amp;&amp;</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;         (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">is_resp</a> || <a class="code" href="../../d5/dfe/chan__sip_8c.html#af04d028476a11a8cdcfc55ba6e995b43">method_match</a>(<a class="code" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a5164b36a74f46bb652938e64c7ceb570">data</a>)))) {</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;         <span class="comment">/* this is our baby */</span></div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;         <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">retransid</a> &gt; -1) {</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/dfe/chan__sip_8c.html#af59b91338c9fcc3d16686ce0a53e1a6c">sipdebug</a>)</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;*** SIP TIMER: Cancelling retransmission #%d - %s (got response)\n&quot;</span>, cur-&gt;<a class="code" href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">retransid</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a>[<a class="code" href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a>].<a class="code" href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">text</a>);</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;         }</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;         <a class="code" href="../../d5/dfe/chan__sip_8c.html#abef493a85093e90e14fa4b27f45c54b5">stop_retrans_pkt</a>(cur);</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;         res = <a class="code" href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;      }</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;   }</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;(Provisional) Stopping retransmission (but retaining packet) on &#39;%s&#39; %s %u: %s\n&quot;</span>, p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">callid</a>, resp ? <span class="stringliteral">&quot;Response&quot;</span> : <span class="stringliteral">&quot;Request&quot;</span>, <a class="code" href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">seqno</a>, res == -1 ? <span class="stringliteral">&quot;Not Found&quot;</span> : <span class="stringliteral">&quot;Found&quot;</span>);</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;}</div><div class="ttc" id="structsip__pkt_html"><div class="ttname"><a href="../../db/d34/structsip__pkt.html">sip_pkt</a></div><div class="ttdoc">sip packet - raw format for outbound packets that are sent or scheduled for transmission Packets are ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01231">sip.h:1231</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00521">app_minivm.c:521</a></div></div>
<div class="ttc" id="chan__sip_8c_html_abef493a85093e90e14fa4b27f45c54b5"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#abef493a85093e90e14fa4b27f45c54b5">stop_retrans_pkt</a></div><div class="ttdeci">static void stop_retrans_pkt(struct sip_pkt *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04251">chan_sip.c:4251</a></div></div>
<div class="ttc" id="chan__sip_8c_html_afa946c486bf4b3f4967da6a39530f312"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#afa946c486bf4b3f4967da6a39530f312">sip_methods</a></div><div class="ttdeci">static const struct cfsip_methods sip_methods[]</div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structsip__pkt_html_a9ac42137a8036d8af9b7a5e678e05f57"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a9ac42137a8036d8af9b7a5e678e05f57">sip_pkt::seqno</a></div><div class="ttdeci">uint32_t seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01235">sip.h:1235</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af04d028476a11a8cdcfc55ba6e995b43"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af04d028476a11a8cdcfc55ba6e995b43">method_match</a></div><div class="ttdeci">static int method_match(enum sipmethod id, const char *name)</div><div class="ttdoc">returns true if &amp;#39;name&amp;#39; (with optional trailing whitespace) matches the sip method &amp;#39;id&amp;#39;...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03584">chan_sip.c:3584</a></div></div>
<div class="ttc" id="structsip__pkt_html_a46343af77fad6544521746d18f85e84d"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a46343af77fad6544521746d18f85e84d">sip_pkt::retransid</a></div><div class="ttdeci">int retransid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01240">sip.h:1240</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="sip_8h_html_ab67bdb52f1ed2af1706c3d780b6953fc"><div class="ttname"><a href="../../d1/d94/sip_8h.html#ab67bdb52f1ed2af1706c3d780b6953fc">sipmethod</a></div><div class="ttdeci">sipmethod</div><div class="ttdoc">SIP Request methods known by Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00612">sip.h:612</a></div></div>
<div class="ttc" id="structsip__pkt_html_a5164b36a74f46bb652938e64c7ceb570"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a5164b36a74f46bb652938e64c7ceb570">sip_pkt::data</a></div><div class="ttdeci">struct ast_str * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01246">sip.h:1246</a></div></div>
<div class="ttc" id="structsip__pvt_html_a584549b9ce9c56f6b783fe8e7183f596"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a584549b9ce9c56f6b783fe8e7183f596">sip_pvt::callid</a></div><div class="ttdeci">const ast_string_field callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01063">sip.h:1063</a></div></div>
<div class="ttc" id="structsip__pkt_html_a1f2a0b6055f056403f7ad3511f783454"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#a1f2a0b6055f056403f7ad3511f783454">sip_pkt::is_resp</a></div><div class="ttdeci">char is_resp</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01236">sip.h:1236</a></div></div>
<div class="ttc" id="chan__sip_8c_html_af59b91338c9fcc3d16686ce0a53e1a6c"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#af59b91338c9fcc3d16686ce0a53e1a6c">sipdebug</a></div><div class="ttdeci">static enum sip_debug_e sipdebug</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00916">chan_sip.c:916</a></div></div>
<div class="ttc" id="structsip__pkt_html_afacd6a01ed62fd0a67e14cfb28b9fe06"><div class="ttname"><a href="../../db/d34/structsip__pkt.html#afacd6a01ed62fd0a67e14cfb28b9fe06">sip_pkt::next</a></div><div class="ttdeci">struct sip_pkt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01232">sip.h:1232</a></div></div>
<div class="ttc" id="structsip__pvt_html_a26f5206ee56217eee8d921652c2b15d2"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a26f5206ee56217eee8d921652c2b15d2">sip_pvt::packets</a></div><div class="ttdeci">struct sip_pkt * packets</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01177">sip.h:1177</a></div></div>
<div class="ttc" id="structcfsip__methods_html_a11c16136837f0092e35a3f90df08f79e"><div class="ttname"><a href="../../dd/d24/structcfsip__methods.html#a11c16136837f0092e35a3f90df08f79e">cfsip_methods::text</a></div><div class="ttdeci">char *const text</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00737">chan_sip.c:737</a></div></div>
<div class="ttc" id="app__minivm_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../de/dfe/app__minivm_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/app__minivm_8c_source.html#l00518">app_minivm.c:518</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a654e5e280d93bf8afeceac69882dc1b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a654e5e280d93bf8afeceac69882dc1b3">&#9670;&nbsp;</a></span>dialog_unlink_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dialog_unlink_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>dialog</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlink a dialog from the dialogs container, as well as any other places that it may be currently stored. </p>
<dl class="section note"><dt>Note</dt><dd>A reference to the dialog must be held before calling this function, and this function does not release that reference.</dd>
<dd>
The dialog must not be locked when called.</dd>
<dd>
A reference to the dialog must be held before calling this function, and this function does not release that reference. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03367">3367</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03351">__dialog_unlink_sched_items()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00503">ao2_t_replace</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01596">ao2_t_unlink</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04017">append_history_full()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00565">ast_channel_tech_pvt()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00569">ast_channel_tech_pvt_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l03858">ast_extension_state_del()</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01354">sip_peer::call</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01424">sip_registry::call</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17692">cb_extensionstate()</a>, <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00032">dialog_ref</a>, <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00033">dialog_unref</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03308">do_dialog_unlink_sched_items()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01367">sip_peer::mwipvt</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01173">sip_pvt::registry</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01171">sip_pvt::relatedpeer</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09400">sip_pvt_lock_full()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l01046">sip_pvt_unlock</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09450">sip_set_owner()</a>, and <a class="el" href="../../d1/d94/sip_8h_source.html#l01162">sip_pvt::stateid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32459">__cleanup_registration()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04369">__sip_autodestruct()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15075">__sip_subscribe_mwi_do()</a>, <a class="el" href="../../d8/d06/sip_2dialplan__functions_8c_source.html#l00359">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l20712">dialog_needdestroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22894">sip_cli_notify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05309">sip_destroy_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27879">sip_msg_send()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30523">sip_poke_noanswer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30583">sip_poke_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06630">sip_registry_destroy()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30793">sip_request_call()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14711">transmit_publish()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l35708">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;{</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *owner;</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;   <a class="code" href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a>(dialog, <span class="stringliteral">&quot;Let&#39;s bump the count in the unlink so it doesn&#39;t accidentally become dead before we are done&quot;</span>);</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abd79d7936e873108860cd00d59e1cede">ao2_t_unlink</a>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#ae3060025ad223cb697a9c16ce2b1182f">dialogs</a>, dialog, <span class="stringliteral">&quot;unlinking dialog via ao2_unlink&quot;</span>);</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abd79d7936e873108860cd00d59e1cede">ao2_t_unlink</a>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#a07aed635d997379151f6b7d885d9cb8f">dialogs_needdestroy</a>, dialog, <span class="stringliteral">&quot;unlinking dialog_needdestroy via ao2_unlink&quot;</span>);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abd79d7936e873108860cd00d59e1cede">ao2_t_unlink</a>(<a class="code" href="../../d5/dfe/chan__sip_8c.html#a9003f4e778226def77db4d2cb9e80b4f">dialogs_rtpcheck</a>, dialog, <span class="stringliteral">&quot;unlinking dialog_rtpcheck via ao2_unlink&quot;</span>);</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;   <span class="comment">/* Unlink us from the owner (channel) if we have one */</span></div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;   owner = <a class="code" href="../../d5/dfe/chan__sip_8c.html#aa2fcc0eced92044d41b4711700c2370e">sip_pvt_lock_full</a>(dialog);</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;   <span class="keywordflow">if</span> (owner) {</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Detaching from channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(owner));</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(owner, <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(owner), <span class="stringliteral">&quot;resetting channel dialog ptr in unlink_all&quot;</span>));</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(owner);</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(owner);</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#a45d1ec02fe5d41f54ce4c49f5f818021">sip_set_owner</a>(dialog, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;   }</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#a5d6c315ca75aee8d8d8889d01c471cb3">sip_pvt_unlock</a>(dialog);</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   <span class="keywordflow">if</span> (dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">registry</a>) {</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      <span class="keywordflow">if</span> (dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">registry</a>-&gt;<a class="code" href="../../d9/d20/structsip__registry.html#a625cdba938c4e57a0039569295bd85f7">call</a> == dialog) {</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;         dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">registry</a>-&gt;<a class="code" href="../../d9/d20/structsip__registry.html#a625cdba938c4e57a0039569295bd85f7">call</a> = <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">registry</a>-&gt;<a class="code" href="../../d9/d20/structsip__registry.html#a625cdba938c4e57a0039569295bd85f7">call</a>, <span class="stringliteral">&quot;nulling out the registry&#39;s call dialog field in unlink_all&quot;</span>);</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      }</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a>(dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">registry</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;delete dialog-&gt;registry&quot;</span>);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;   }</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   <span class="keywordflow">if</span> (dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">stateid</a> != -1) {</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#aa992580d26443e3306f7f08cf5908e7c">ast_extension_state_del</a>(dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">stateid</a>, <a class="code" href="../../d5/dfe/chan__sip_8c.html#ae3f66ef0d41f0d74e268400964fb6563">cb_extensionstate</a>);</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;      dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">stateid</a> = -1;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   }</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <span class="comment">/* Remove link from peer to subscription of MWI */</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;   <span class="keywordflow">if</span> (dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a> &amp;&amp; dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#ab595237adf1f1327ef4c15baa19187c2">mwipvt</a> == dialog) {</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#ab595237adf1f1327ef4c15baa19187c2">mwipvt</a> = <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#ab595237adf1f1327ef4c15baa19187c2">mwipvt</a>, <span class="stringliteral">&quot;delete -&gt;relatedpeer-&gt;mwipvt&quot;</span>);</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;   }</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;   <span class="keywordflow">if</span> (dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a> &amp;&amp; dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#a625cdba938c4e57a0039569295bd85f7">call</a> == dialog) {</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#a625cdba938c4e57a0039569295bd85f7">call</a> = <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">relatedpeer</a>-&gt;<a class="code" href="../../d1/d7a/structsip__peer.html#a625cdba938c4e57a0039569295bd85f7">call</a>, <span class="stringliteral">&quot;unset the relatedpeer-&gt;call field in tandem with relatedpeer field itself&quot;</span>);</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;   }</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   <a class="code" href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a>(dialog, <span class="stringliteral">&quot;Stop scheduled items for unlink action&quot;</span>);</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 0, <a class="code" href="../../d5/dfe/chan__sip_8c.html#a2d920b555f89c5d8d2f81d9c5bae71e6">__dialog_unlink_sched_items</a>, dialog) &lt; 0) {</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="comment">       * Uh Oh.  Fall back to unscheduling things immediately</span></div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;<span class="comment">       * despite the potential deadlock risk.</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;      <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog, <span class="stringliteral">&quot;Failed to schedule stop scheduled items for unlink action&quot;</span>);</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      <a class="code" href="../../d5/dfe/chan__sip_8c.html#ae4a9c3153db48299f07478a95d0d0ce5">do_dialog_unlink_sched_items</a>(dialog);</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   }</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;   <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(dialog, <span class="stringliteral">&quot;Let&#39;s unbump the count in the unlink so the poor pvt can disappear if it is time&quot;</span>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_ae3060025ad223cb697a9c16ce2b1182f"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ae3060025ad223cb697a9c16ce2b1182f">dialogs</a></div><div class="ttdeci">static struct ao2_container * dialogs</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01043">chan_sip.c:1043</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a07aed635d997379151f6b7d885d9cb8f"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a07aed635d997379151f6b7d885d9cb8f">dialogs_needdestroy</a></div><div class="ttdeci">struct ao2_container * dialogs_needdestroy</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01024">chan_sip.c:1024</a></div></div>
<div class="ttc" id="structsip__pvt_html_a2aa8202405a1887e09e2f2f350918f42"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a2aa8202405a1887e09e2f2f350918f42">sip_pvt::relatedpeer</a></div><div class="ttdeci">struct sip_peer * relatedpeer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01171">sip.h:1171</a></div></div>
<div class="ttc" id="structsip__registry_html_a625cdba938c4e57a0039569295bd85f7"><div class="ttname"><a href="../../d9/d20/structsip__registry.html#a625cdba938c4e57a0039569295bd85f7">sip_registry::call</a></div><div class="ttdeci">struct sip_pvt * call</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01424">sip.h:1424</a></div></div>
<div class="ttc" id="pbx_8h_html_aa992580d26443e3306f7f08cf5908e7c"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa992580d26443e3306f7f08cf5908e7c">ast_extension_state_del</a></div><div class="ttdeci">int ast_extension_state_del(int id, ast_state_cb_type change_cb)</div><div class="ttdoc">Deletes a state change watcher by ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l03858">pbx.c:3858</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4534db0cd85f31e51255441d6c18267b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4534db0cd85f31e51255441d6c18267b">ao2_t_replace</a></div><div class="ttdeci">#define ao2_t_replace(dst, src, tag)</div><div class="ttdoc">Replace one object reference with another cleaning up the original. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00503">astobj2.h:503</a></div></div>
<div class="ttc" id="astobj2_8h_html_abd79d7936e873108860cd00d59e1cede"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abd79d7936e873108860cd00d59e1cede">ao2_t_unlink</a></div><div class="ttdeci">#define ao2_t_unlink(container, obj, tag)</div><div class="ttdoc">Remove an object from a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01596">astobj2.h:1596</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a45d1ec02fe5d41f54ce4c49f5f818021"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a45d1ec02fe5d41f54ce4c49f5f818021">sip_set_owner</a></div><div class="ttdeci">static void sip_set_owner(struct sip_pvt *p, struct ast_channel *chan)</div><div class="ttdoc">Set the owning channel on the sip_pvt object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l09450">chan_sip.c:9450</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a5d6c315ca75aee8d8d8889d01c471cb3"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a5d6c315ca75aee8d8d8889d01c471cb3">sip_pvt_unlock</a></div><div class="ttdeci">#define sip_pvt_unlock(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01046">chan_sip.c:1046</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structsip__pvt_html_a5966db20251430329e71644519f75904"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a5966db20251430329e71644519f75904">sip_pvt::registry</a></div><div class="ttdeci">struct sip_registry * registry</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01173">sip.h:1173</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a2d920b555f89c5d8d2f81d9c5bae71e6"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a2d920b555f89c5d8d2f81d9c5bae71e6">__dialog_unlink_sched_items</a></div><div class="ttdeci">static int __dialog_unlink_sched_items(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03351">chan_sip.c:3351</a></div></div>
<div class="ttc" id="dialog_8h_html_aaeb112a7e50aac1eb05807afb4d4dd26"><div class="ttname"><a href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a></div><div class="ttdeci">#define dialog_unref(dialog, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc9/dialog_8h_source.html#l00033">dialog.h:33</a></div></div>
<div class="ttc" id="chan__sip_8c_html_ae3f66ef0d41f0d74e268400964fb6563"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ae3f66ef0d41f0d74e268400964fb6563">cb_extensionstate</a></div><div class="ttdeci">static int cb_extensionstate(const char *context, const char *exten, struct ast_state_cb_info *info, void *data)</div><div class="ttdoc">Callback for the devicestate notification (SUBSCRIBE) support subsystem. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l17692">chan_sip.c:17692</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aa2fcc0eced92044d41b4711700c2370e"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aa2fcc0eced92044d41b4711700c2370e">sip_pvt_lock_full</a></div><div class="ttdeci">static struct ast_channel * sip_pvt_lock_full(struct sip_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l09400">chan_sip.c:9400</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structsip__pvt_html_a70382561daaa758a201b7a711d566e24"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a70382561daaa758a201b7a711d566e24">sip_pvt::stateid</a></div><div class="ttdeci">int stateid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01162">sip.h:1162</a></div></div>
<div class="ttc" id="dialog_8h_html_a3430a5e39cac3fad8579679b979d6351"><div class="ttname"><a href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a></div><div class="ttdeci">#define dialog_ref(dialog, tag)</div><div class="ttdoc">when we create or delete references, make sure to use these functions so we keep track of the refcoun...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc9/dialog_8h_source.html#l00032">dialog.h:32</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="structsip__peer_html_a625cdba938c4e57a0039569295bd85f7"><div class="ttname"><a href="../../d1/d7a/structsip__peer.html#a625cdba938c4e57a0039569295bd85f7">sip_peer::call</a></div><div class="ttdeci">struct sip_pvt * call</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01354">sip.h:1354</a></div></div>
<div class="ttc" id="structsip__peer_html_ab595237adf1f1327ef4c15baa19187c2"><div class="ttname"><a href="../../d1/d7a/structsip__peer.html#ab595237adf1f1327ef4c15baa19187c2">sip_peer::mwipvt</a></div><div class="ttdeci">struct sip_pvt * mwipvt</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01367">sip.h:1367</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__sip_8c_html_ae4a9c3153db48299f07478a95d0d0ce5"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#ae4a9c3153db48299f07478a95d0d0ce5">do_dialog_unlink_sched_items</a></div><div class="ttdeci">static void do_dialog_unlink_sched_items(struct sip_pvt *dialog)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l03308">chan_sip.c:3308</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a9003f4e778226def77db4d2cb9e80b4f"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a9003f4e778226def77db4d2cb9e80b4f">dialogs_rtpcheck</a></div><div class="ttdeci">struct ao2_container * dialogs_rtpcheck</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l01032">chan_sip.c:1032</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35cd5c160ef12168fe768d7451bd57f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35cd5c160ef12168fe768d7451bd57f7">&#9670;&nbsp;</a></span>sip_cancel_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sip_cancel_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel destruction of SIP dialog. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04464">4464</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04453">__sip_cancel_destroy()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/dbe/sched_8c_source.html#l00565">ast_sched_add()</a>, <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00032">dialog_ref</a>, <a class="el" href="../../d1/dc9/dialog_8h_source.html#l00033">dialog_unref</a>, <a class="el" href="../../d1/d94/sip_8h_source.html#l01081">sip_pvt::final_destruction_scheduled</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26347">handle_request_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25171">handle_response()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17861">register_verify()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07197">sip_hangup()</a>.</p>
<div class="fragment"><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;{</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">final_destruction_scheduled</a>) {</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;   }</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;   <a class="code" href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a>(pvt, <span class="stringliteral">&quot;Cancel destroy action&quot;</span>);</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a>(<a class="code" href="../../d0/da0/structsched.html">sched</a>, 0, <a class="code" href="../../d5/dfe/chan__sip_8c.html#aceeea907fcf4b7328fd76c9c41e47582">__sip_cancel_destroy</a>, pvt) &lt; 0) {</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      <span class="comment">/* Uh Oh.  Expect bad behavior. */</span></div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      <a class="code" href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a>(pvt, <span class="stringliteral">&quot;Failed to schedule cancel destroy action&quot;</span>);</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to cancel SIP destruction.  Expect bad things.\n&quot;</span>);</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;   }</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsched_html"><div class="ttname"><a href="../../d0/da0/structsched.html">sched</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00076">sched.c:76</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="dialog_8h_html_aaeb112a7e50aac1eb05807afb4d4dd26"><div class="ttname"><a href="../../d1/dc9/dialog_8h.html#aaeb112a7e50aac1eb05807afb4d4dd26">dialog_unref</a></div><div class="ttdeci">#define dialog_unref(dialog, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc9/dialog_8h_source.html#l00033">dialog.h:33</a></div></div>
<div class="ttc" id="structsip__pvt_html_a629cb3f5d7eb845a9b77be369e0b10bd"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">sip_pvt::final_destruction_scheduled</a></div><div class="ttdeci">unsigned short final_destruction_scheduled</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01081">sip.h:1081</a></div></div>
<div class="ttc" id="dialog_8h_html_a3430a5e39cac3fad8579679b979d6351"><div class="ttname"><a href="../../d1/dc9/dialog_8h.html#a3430a5e39cac3fad8579679b979d6351">dialog_ref</a></div><div class="ttdeci">#define dialog_ref(dialog, tag)</div><div class="ttdoc">when we create or delete references, make sure to use these functions so we keep track of the refcoun...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc9/dialog_8h_source.html#l00032">dialog.h:32</a></div></div>
<div class="ttc" id="sched_8h_html_a7a43dcf8be6b2ed7f96f3867fbcb4082"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a7a43dcf8be6b2ed7f96f3867fbcb4082">ast_sched_add</a></div><div class="ttdeci">int ast_sched_add(struct ast_sched_context *con, int when, ast_sched_cb callback, const void *data) attribute_warn_unused_result</div><div class="ttdoc">Adds a scheduled event. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00565">sched.c:565</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aceeea907fcf4b7328fd76c9c41e47582"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aceeea907fcf4b7328fd76c9c41e47582">__sip_cancel_destroy</a></div><div class="ttdeci">static int __sip_cancel_destroy(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04453">chan_sip.c:4453</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cd43cf8c247a8ccc4ee75623fa610d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd43cf8c247a8ccc4ee75623fa610d1">&#9670;&nbsp;</a></span>sip_scheddestroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sip_scheddestroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule destruction of SIP dialog. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04549">4549</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d94/sip_8h_source.html#l01081">sip_pvt::final_destruction_scheduled</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04514">sip_scheddestroy_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04369">__sip_autodestruct()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l06420">auto_congest()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17341">check_auth()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23735">check_pendings()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17610">extensionstate_update()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29065">handle_incoming()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25984">handle_invite_replaces()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27538">handle_request_cancel()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22622">handle_request_info()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26347">handle_request_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25732">handle_request_notify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l25900">handle_request_options()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28410">handle_request_publish()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28991">handle_request_register()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l28575">handle_request_subscribe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15659">manager_sipnotify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19707">receive_message()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22894">sip_cli_notify()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l07197">sip_hangup()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27879">sip_msg_send()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34178">sip_sipredirect()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17714">transmit_fake_auth_response()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14711">transmit_publish()</a>.</p>
<div class="fragment"><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;{</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">final_destruction_scheduled</a>) {</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      <span class="keywordflow">return</span>; <span class="comment">/* already set final destruction */</span></div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;   }</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;   <a class="code" href="../../d5/dfe/chan__sip_8c.html#aae997aebebd29c4c38b251f9406b9693">sip_scheddestroy_full</a>(p, ms);</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;}</div><div class="ttc" id="structsip__pvt_html_a629cb3f5d7eb845a9b77be369e0b10bd"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">sip_pvt::final_destruction_scheduled</a></div><div class="ttdeci">unsigned short final_destruction_scheduled</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01081">sip.h:1081</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aae997aebebd29c4c38b251f9406b9693"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aae997aebebd29c4c38b251f9406b9693">sip_scheddestroy_full</a></div><div class="ttdeci">static int sip_scheddestroy_full(struct sip_pvt *p, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04514">chan_sip.c:4514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45fdd334dbde3db5838786e6daa9926d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45fdd334dbde3db5838786e6daa9926d">&#9670;&nbsp;</a></span>sip_scheddestroy_final()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sip_scheddestroy_final </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/df2/structsip__pvt.html">sip_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule final destruction of SIP dialog. </p>
<dl class="section note"><dt>Note</dt><dd>This cannot be canceled.</dd></dl>
<p>This function is used to keep a dialog around for a period of time in order to properly respond to any retransmits. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04557">4557</a> of file <a class="el" href="../../d5/dfe/chan__sip_8c_source.html">chan_sip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d94/sip_8h_source.html#l01081">sip_pvt::final_destruction_scheduled</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04514">sip_scheddestroy_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l27605">handle_request_bye()</a>.</p>
<div class="fragment"><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;{</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;   <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">final_destruction_scheduled</a>) {</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;      <span class="keywordflow">return</span>; <span class="comment">/* already set final destruction */</span></div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;   }</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dfe/chan__sip_8c.html#aae997aebebd29c4c38b251f9406b9693">sip_scheddestroy_full</a>(p, ms)) {</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;      p-&gt;<a class="code" href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">final_destruction_scheduled</a> = 1;</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;   }</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;}</div><div class="ttc" id="structsip__pvt_html_a629cb3f5d7eb845a9b77be369e0b10bd"><div class="ttname"><a href="../../d2/df2/structsip__pvt.html#a629cb3f5d7eb845a9b77be369e0b10bd">sip_pvt::final_destruction_scheduled</a></div><div class="ttdeci">unsigned short final_destruction_scheduled</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l01081">sip.h:1081</a></div></div>
<div class="ttc" id="chan__sip_8c_html_aae997aebebd29c4c38b251f9406b9693"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#aae997aebebd29c4c38b251f9406b9693">sip_scheddestroy_full</a></div><div class="ttdeci">static int sip_scheddestroy_full(struct sip_pvt *p, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l04514">chan_sip.c:4514</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:46 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
