<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: parking_bridge_features.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li><li class="navelem"><a class="el" href="../../dir_d2f3489fa5a5f753d9a5f9cd50bb6a1c.html">parking</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">parking_bridge_features.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/db7/parking__bridge__features_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2013, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Jonathan Rose &lt;jrose@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief Parking Bridge DTMF and Interval features</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Jonathan Rose &lt;jrose@digium.com&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d38/res__parking_8h.html">res_parking.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8c/logger_8h.html">asterisk/logger.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d56/bridge_8h.html">asterisk/bridge.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dde/bridge__internal_8h.html">asterisk/bridge_internal.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d41/bridge__channel_8h.html">asterisk/bridge_channel.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d7a/bridge__features_8h.html">asterisk/bridge_features.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dd6/conversions_8h.html">asterisk/conversions.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d47/features_8h.html">asterisk/features.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/say_8h.html">asterisk/say.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/db6/datastore_8h.html">asterisk/datastore.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da6/core__local_8h.html">asterisk/core_local.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/da3/causes_8h.html">asterisk/causes.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">   &lt;function name=&quot;PARK_GET_CHANNEL&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">         Get the channel name of an occupied parking space in a parking lot.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">            &lt;parameter name=&quot;parking_space&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">            &lt;parameter name=&quot;parking_lot&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">         &lt;para&gt;This function returns the channel of the specified parking space</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">            if the parking lot space is occupied.&lt;/para&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">         &lt;/description&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">***/</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d5/db0/structparked__subscription__datastore.html">   65</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/db0/structparked__subscription__datastore.html">parked_subscription_datastore</a> {</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">   66</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;};</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d4/d10/structparked__subscription__data.html">   69</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d10/structparked__subscription__data.html">parked_subscription_data</a> {</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">   70</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d84/structtransfer__channel__data.html">transfer_channel_data</a> *<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">   71</a></span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parkee_uuid</a>;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">   72</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">hangup_after</a>:1;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">   73</a></span>&#160;   <span class="keywordtype">char</span> parker_uuid[0];</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;};</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a95e29e145adf6b6e68a034887b923809">   76</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a95e29e145adf6b6e68a034887b923809">parked_subscription_datastore_destroy</a>(<span class="keywordtype">void</span> *<a class="code" href="../../da/d84/structtransfer__channel__data.html#a735984d41155bc1032e09bece8f8d66d">data</a>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/db0/structparked__subscription__datastore.html">parked_subscription_datastore</a> *subscription_datastore = data;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a>(subscription_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   subscription_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(subscription_datastore);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a77a3efc74230110e4b06840bffa42a34">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a77a3efc74230110e4b06840bffa42a34">parked_subscription_info</a> = {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;park subscription&quot;</span>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   .destroy = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a95e29e145adf6b6e68a034887b923809">parked_subscription_datastore_destroy</a>,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;};</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">   91</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">wipe_subscription_datastore</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   datastore = <a class="code" href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;parked_subscription_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, datastore);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a1ee7e74f57858646d8b040113768f65a">  105</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a1ee7e74f57858646d8b040113768f65a">parker_parked_call_message_response</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>, <span class="keyword">struct</span> <a class="code" href="../../d4/d10/structparked__subscription__data.html">parked_subscription_data</a> *<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *parkee_to_act_on = data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parkee_uuid</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordtype">char</span> saynum_buf[16];</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *parkee_snapshot = message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">parkee</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, parker, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">if</span> (strcmp(parkee_to_act_on, parkee_snapshot-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>)) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span> (message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">event_type</a> != <a class="code" href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7">PARKED_CALL</a> &amp;&amp; message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">event_type</a> != <a class="code" href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485acadf914c610b448ad9bca355439e28fa">PARKED_CALL_FAILED</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="comment">/* We only care about these two event types */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   parker = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">parker_uuid</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="keywordflow">if</span> (!parker) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(parker);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(parker);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(parker);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="comment">/* This subscription callback will block for the duration of the announcement if</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">    * parked_subscription_data is tracking a transfer_channel_data struct. */</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordflow">if</span> (message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">event_type</a> == <a class="code" href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7">PARKED_CALL</a>) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="comment">/* queue the saynum on the bridge channel and hangup */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      snprintf(saynum_buf, <span class="keyword">sizeof</span>(saynum_buf), <span class="stringliteral">&quot;%d %u&quot;</span>, data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">hangup_after</a>, message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#a3c927af64370b9380770ec2ea0ed9a89">parkingspace</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">if</span> (!data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a99c6edcf3d9ec6dee14814a9b7503eb5">say_parking_space</a>, saynum_buf, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac7787cec5827585d82ad62292744aeaf">ast_bridge_channel_queue_playfile_sync</a>(bridge_channel, <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a99c6edcf3d9ec6dee14814a9b7503eb5">say_parking_space</a>, saynum_buf, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>-&gt;<a class="code" href="../../da/d84/structtransfer__channel__data.html#a4eff08519948266efdd345aabe6ecbbb">completed</a> = 1;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">wipe_subscription_datastore</a>(parker);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message-&gt;<a class="code" href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">event_type</a> == <a class="code" href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485acadf914c610b448ad9bca355439e28fa">PARKED_CALL_FAILED</a>) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (!data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;pbx-parkingfailed&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac7787cec5827585d82ad62292744aeaf">ast_bridge_channel_queue_playfile_sync</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;pbx-parkingfailed&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>-&gt;<a class="code" href="../../da/d84/structtransfer__channel__data.html#a4eff08519948266efdd345aabe6ecbbb">completed</a> = 1;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">wipe_subscription_datastore</a>(parker);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#ac2e73f4956252881466c2388f5970cfa">  158</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#ac2e73f4956252881466c2388f5970cfa">parker_update_cb</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, <span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a>(sub, message)) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d10/structparked__subscription__data.html">parked_subscription_data</a> *ps_data = data;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ps_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      ps_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) == <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type</a>()) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a> *parked_call_message = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a1ee7e74f57858646d8b040113768f65a">parker_parked_call_message_response</a>(parked_call_message, data, sub);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">  174</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">create_parked_subscription_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *parkee_uuid, <span class="keywordtype">int</span> hangup_after,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../da/d84/structtransfer__channel__data.html">transfer_channel_data</a> *parked_channel_data)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/db0/structparked__subscription__datastore.html">parked_subscription_datastore</a> *parked_datastore;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d10/structparked__subscription__data.html">parked_subscription_data</a> *subscription_data;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">parker_uuid</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keywordtype">size_t</span> parker_uuid_size;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordtype">size_t</span> parkee_uuid_size;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="comment">/* If there is already a subscription, get rid of it. */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">wipe_subscription_datastore</a>(chan);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keywordflow">if</span> (!(datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;parked_subscription_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">if</span> (!(parked_datastore = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*parked_datastore)))) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   parker_uuid_size = strlen(parker_uuid) + 1;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   parkee_uuid_size = strlen(parkee_uuid) + 1;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordflow">if</span> (!(subscription_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*subscription_data) + parker_uuid_size +</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;         parkee_uuid_size))) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(parked_datastore);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (parked_channel_data) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">transfer_data</a> = parked_channel_data;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(parked_channel_data, +1);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">hangup_after</a> = <a class="code" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">hangup_after</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parkee_uuid</a> = subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">parker_uuid</a> + parker_uuid_size;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parkee_uuid</a>, parkee_uuid, parkee_uuid_size);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(subscription_data-&gt;<a class="code" href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">parker_uuid</a>, parker_uuid, parker_uuid_size);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">if</span> (!(parked_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a> = <a class="code" href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a>(<a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab4e08da228493c3f9bfc6a2aed507cb4">ast_parking_topic</a>(), <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#ac2e73f4956252881466c2388f5970cfa">parker_update_cb</a>, subscription_data))) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(parked_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type</a>());</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a>(parked_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a>());</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a>(parked_datastore-&gt;<a class="code" href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription</a>, <a class="code" href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = parked_datastore;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="../../d3/d38/res__parking_8h.html#a88326c901ae53e5ce78f1cfd9a57bab8">  233</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a88326c901ae53e5ce78f1cfd9a57bab8">create_parked_subscription</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parkee_uuid</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">hangup_after</a>)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">create_parked_subscription_full</a>(chan, parkee_uuid, hangup_after, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"> * \brief Helper function that creates an outgoing channel and returns it immediately. This function is nearly</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"> *        identical to the dial_transfer function in bridge_basic.c, however it doesn&#39;t swap the</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment"> *        local channel and the channel that instigated the park.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a30facc917cfcb5ece9061beae139fc73">  244</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a30facc917cfcb5ece9061beae139fc73">park_local_transfer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *parker, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">struct</span> <a class="code" href="../../da/d84/structtransfer__channel__data.html">transfer_channel_data</a> *parked_channel_data)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordtype">char</span> destination[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a> + <a class="code" href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a> + 1];</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *parkee;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *parkee_side_2;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keywordtype">int</span> cause;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="comment">/* Fill the variable with the extension and context we want to call */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   snprintf(destination, <span class="keyword">sizeof</span>(destination), <span class="stringliteral">&quot;%s@%s&quot;</span>, exten, context);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="comment">/* Now we request that chan_local prepare to call the destination */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   parkee = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;Local&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(parker), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, parker, destination,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      &amp;cause);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">if</span> (!parkee) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="comment">/* Before we actually dial out let&#39;s inherit appropriate information. */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(parker, parkee);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a>(parkee, parker, <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048">AST_CHANNEL_REQUESTOR_REPLACEMENT</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   ast_channel_parkinglot_set(parkee, <a class="code" href="../../d5/d7b/channel_8h.html#abdaf681794561f17c4598cb2f16f06b0">ast_channel_parkinglot</a>(parker));</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(parkee), <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(parker));</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a>(parker, parkee);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a8878fc7451a873f155aba20b0b31abbb">ast_bridge_set_transfer_variables</a>(parkee, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(parker), 0);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a>(parker, parkee);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(parker);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   parkee_side_2 = <a class="code" href="../../d5/da6/core__local_8h.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a>(parkee);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(parkee_side_2 != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(parkee);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="comment">/* We need to have the parker subscribe to the new local channel before hand. */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">create_parked_subscription_full</a>(parker, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(parkee_side_2), 1, parked_channel_data)) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(parkee_side_2);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(parkee);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(parkee_side_2);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="comment">/* Since the above worked fine now we actually call it and return the channel */</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a>(parkee, destination, 0)) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(parkee);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keywordflow">return</span> parkee;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> * \brief Determine if an extension is a parking extension</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#afa671889bd316c12a94ebf3a3b453cd8">  297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#afa671889bd316c12a94ebf3a3b453cd8">parking_is_exten_park</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d00/structast__exten.html">ast_exten</a> *exten_obj;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d81/structpbx__find__info.html">pbx_find_info</a> info = { .<a class="code" href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">stacklen</a> = 0 }; <span class="comment">/* the rest is reset in pbx_find_extension */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *app_at_exten;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Checking if %s@%s is a parking exten\n&quot;</span>, exten, context);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   exten_obj = <a class="code" href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;info, context, exten, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordflow">if</span> (!exten_obj) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   app_at_exten = <a class="code" href="../../db/de0/pbx_8h.html#a6594bb017b4d4fe1bc42370cc32ec974">ast_get_extension_app</a>(exten_obj);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordflow">if</span> (!app_at_exten || strcasecmp(<a class="code" href="../../d2/d33/parking_8h.html#ae9948d6f3b81ba2a7b5b212a7b1068df">PARK_APPLICATION</a>, app_at_exten)) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> * \brief Perform a blind transfer to a parking lot</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> * In general, most parking features should work to call this function. This will safely</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> * park either a channel in the bridge with \ref bridge_channel or will park the entire</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"> * bridge if more than one channel is in the bridge. It will create the correct data to</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"> * pass to the \ref AstBridging Bridging API to safely park the channel.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> * \param bridge_channel The bridge_channel representing the channel performing the park</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> * \param context The context to blind transfer to</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> * \param exten The extension to blind transfer to</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> * \param parked_channel_cb Optional callback executed prior to sending the parked channel into the bridge</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> * \param parked_channel_data Data for the parked_channel_cb</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> * \retval 0 on success</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> * \retval non-zero on error</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a5a1e3204bf0f1593b39a19e784e689e1">  336</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a5a1e3204bf0f1593b39a19e784e689e1">parking_blind_transfer_park</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../d4/d56/bridge_8h.html#a87ed18cc739a9635c4595cae783ab993">transfer_channel_cb</a> parked_channel_cb,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../da/d84/structtransfer__channel__data.html">transfer_channel_data</a> *parked_channel_data)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, other, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, other_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d00/structast__exten.html">ast_exten</a> *e;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d81/structpbx__find__info.html">pbx_find_info</a> find_info = { .<a class="code" href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">stacklen</a> = 0 };</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordtype">int</span> peer_count;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a>) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/db7/parking__bridge__features_8c.html#afa671889bd316c12a94ebf3a3b453cd8">parking_is_exten_park</a>(context, exten)) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   peer_count = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">if</span> (peer_count == 2) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      other = <a class="code" href="../../de/d41/bridge__channel_8h.html#a0a9bea2845810c6891440a012a275a36">ast_bridge_channel_peer</a>(bridge_channel);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(other, +1);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      other_chan = other-&gt;chan;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(other_chan);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keywordflow">if</span> (peer_count &lt; 2) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="comment">/* There is nothing to do if there is no one to park. */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   <span class="comment">/* With a multiparty bridge, we need to do a regular blind transfer. We link the</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">    * existing bridge to the parking lot with a Local channel rather than</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">    * transferring others. */</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">if</span> (peer_count &gt; 2) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *transfer_chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      transfer_chan = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a30facc917cfcb5ece9061beae139fc73">park_local_transfer</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, context, exten, parked_channel_data);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> (!transfer_chan) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(transfer_chan);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (parked_channel_cb) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         parked_channel_cb(transfer_chan, parked_channel_data, <a class="code" href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cdaa85cad6eafcb0edc223c975e0cf3b296">AST_BRIDGE_TRANSFER_MULTI_PARTY</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, transfer_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>)) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(transfer_chan);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(transfer_chan);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(transfer_chan);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="comment">/* Subscribe to park messages with the other channel entering */</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">create_parked_subscription_full</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(other-&gt;chan), 1, parked_channel_data)) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordflow">if</span> (parked_channel_cb) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      parked_channel_cb(other_chan, parked_channel_data, <a class="code" href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4">AST_BRIDGE_TRANSFER_SINGLE_PARTY</a>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   e = <a class="code" href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;find_info, context, exten, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a>);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="comment">/* Write the park frame with the intended recipient and other data out to the bridge. */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#af9a368f3ce4811e8ca53ef51d6cd69f9">ast_bridge_channel_write_park</a>(bridge_channel,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(other_chan),</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      e ? <a class="code" href="../../db/de0/pbx_8h.html#ac0a6c0c39796f36864868365d8989f02">ast_get_extension_app_data</a>(e) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> * \brief Perform a direct park on a channel in a bridge</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> * \note This will be called from within the \ref AstBridging Bridging API</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> * \param bridge_channel The bridge_channel representing the channel to be parked</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> * \param uuid_parkee The UUID of the channel being parked</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> * \param uuid_parker The UUID of the channel performing the park</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> * \param app_data Application parseable data to pass to the parking application</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a507d357cebeeade4f7d670234fb10d65">  434</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a507d357cebeeade4f7d670234fb10d65">parking_park_bridge_channel</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keyword">const</span> <span class="keywordtype">char</span> *uuid_parkee, <span class="keyword">const</span> <span class="keywordtype">char</span> *uuid_parker, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d37/structapp__data.html">app_data</a>)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, parking_bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, original_bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, parker, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), uuid_parkee)) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="comment">/* We aren&#39;t the parkee, so ignore this action. */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   parker = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(uuid_parker);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">if</span> (!parker) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Channel with uuid %s left before we could start parking the call. Parking canceled.\n&quot;</span>, uuid_parker);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="../../d0/d39/parking__manager_8c.html#af185e93906eea4f215d95c8ae4552dd8">publish_parked_call_failure</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">if</span> (!(parking_bridge = <a class="code" href="../../da/ded/parking__applications_8c.html#abbf68fb3b1ff0390d60d881816c544d4">park_application_setup</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, parker, app_data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="../../d0/d39/parking__manager_8c.html#af185e93906eea4f215d95c8ae4552dd8">publish_parked_call_failure</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a8878fc7451a873f155aba20b0b31abbb">ast_bridge_set_transfer_variables</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(parker), 0);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <span class="comment">/* bridge_channel must be locked so we can get a reference to the bridge it is currently on */</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(bridge_channel);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   original_bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keywordflow">if</span> (!original_bridge) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(bridge_channel);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="../../d0/d39/parking__manager_8c.html#af185e93906eea4f215d95c8ae4552dd8">publish_parked_call_failure</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(original_bridge, +1); <span class="comment">/* Cleaned by RAII_VAR */</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(bridge_channel);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#af0e3d51ad653134a92545dec4610b83a">ast_bridge_move</a>(parking_bridge, original_bridge, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1)) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to move %s into the parking bridge.\n&quot;</span>,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> * \brief Park a call</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> * \param parker The bridge_channel parking the call</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> * \param exten Optional. The extension where the call was parked.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"> * \param length Optional. If \c exten is specified, the length of the buffer.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"> * \note This will determine the context and extension to park the channel based on</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"> * the configuration of the \ref ast_channel associated with \ref parker. It will then</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"> * park either the channel or the entire bridge.</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment"> * \retval 0 on success</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"> * \retval -1 on error</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a8eccd88e14f462bcf88308a17d9573f4">  499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a8eccd88e14f462bcf88308a17d9573f4">parking_park_call</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *parker, <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keywordtype">size_t</span> length)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/de7/structparking__lot.html">parking_lot</a> *, lot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *lot_name;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(parker-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   lot_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d3/d38/res__parking_8h.html#ad540c0ae257e5b7541b1bda040ccd1d0">find_channel_parking_lot_name</a>(parker-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(parker-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   lot = <a class="code" href="../../d3/d38/res__parking_8h.html#a229bf0f37506c31420fe0b6a9d8594b6">parking_lot_find_by_name</a>(lot_name);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span> (!lot) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      lot = <a class="code" href="../../d3/d38/res__parking_8h.html#a02819d436da997238ca194f3bd6f0af6">parking_create_dynamic_lot</a>(lot_name, parker-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">if</span> (!lot) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot Park %s: lot %s unknown\n&quot;</span>,</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(parker-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), lot_name);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (exten) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(exten, lot-&gt;cfg-&gt;parkext, length);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a5a1e3204bf0f1593b39a19e784e689e1">parking_blind_transfer_park</a>(parker, lot-&gt;cfg-&gt;parking_con, lot-&gt;cfg-&gt;parkext, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#ad8df5efc8c56a3ea31b81c89d5b0cf32">  524</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#ad8df5efc8c56a3ea31b81c89d5b0cf32">feature_park_call</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *hook_pvt)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a0fb39465480454778b4b070505a4eabb">SCOPED_MODULE_USE</a>(AST_MODULE_SELF);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a8eccd88e14f462bcf88308a17d9573f4">parking_park_call</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"> * \brief Setup the caller features for when that channel is dialed.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> * \param chan Parked channel leaving the parking lot.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> * \param cfg Parking lot configuration.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a3795de28c520eec4a8eea0bc7fb25390">  542</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a3795de28c520eec4a8eea0bc7fb25390">parking_timeout_set_caller_features</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d3/d86/structparking__lot__cfg.html">parking_lot_cfg</a> *cfg)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;{</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordtype">char</span> features[5];</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordtype">char</span> *pos;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">    * We are setting the callee Dial flag values because in the</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">    * timeout case, the caller is who is being called back.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   pos = features;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#a1b7ebcd57a463747583fbdbe04659f87">parkedcalltransfers</a> &amp; <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a>) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      *pos++ = <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#a24927d2710176c1a6a2c3a9eaa2f81c8">parkedcallreparking</a> &amp; <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a>) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      *pos++ = <span class="charliteral">&#39;k&#39;</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#a0e02756579d965599dee2698239a2e0b">parkedcallhangup</a> &amp; <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a>) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      *pos++ = <span class="charliteral">&#39;h&#39;</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">if</span> (cfg-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#afdd70572c127b18cec17efb3cb2515cb">parkedcallrecording</a> &amp; <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a>) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      *pos++ = <span class="charliteral">&#39;x&#39;</span>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   *pos = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;BRIDGE_FEATURES&quot;</span>, features);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> * \brief Interval hook. Pulls a parked call from the parking bridge after the timeout is passed and sets the resolution to timeout.</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> * \param bridge_channel bridge channel this interval hook is being executed on</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> * \param hook_pvt A pointer to the parked_user struct associated with the channel is stuffed in here</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a12b304af58c5e61c604ccf87744998ca">  575</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a12b304af58c5e61c604ccf87744998ca">parking_duration_callback</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keywordtype">void</span> *hook_pvt)</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;{</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d7e/structparked__user.html">parked_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = hook_pvt;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d7c/structast__context.html">ast_context</a> *park_dial_context;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dial_string;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordtype">char</span> *dial_string_flat;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordtype">char</span> parking_space[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordtype">char</span> returnexten[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordtype">char</span> *duplicate_returnexten;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d00/structast__exten.html">ast_exten</a> *existing_exten;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d81/structpbx__find__info.html">pbx_find_info</a> pbx_finder = { .<a class="code" href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">stacklen</a> = 0 }; <span class="comment">/* The rest is reset in pbx_find_extension */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <span class="comment">/* We are still in the bridge, so it&#39;s possible for other stuff to mess with the parked call before we leave the bridge</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">      to deal with this, lock the parked user, check and set resolution. */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(user);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a43e677343eefcf2423eb85cc0987855f">resolution</a> != <a class="code" href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42">PARK_UNSET</a>) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="comment">/* Abandon timeout since something else has resolved the parked user before we got to it. */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(user);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a43e677343eefcf2423eb85cc0987855f">resolution</a> = <a class="code" href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15a69950c46adcd2d2e18d1bb261f7412d2">PARK_TIMEOUT</a>;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(user);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   dial_string = user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a05dc49917dafb37112f18d6e5d021a98">parker_dial_string</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   dial_string_flat = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(dial_string);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../db/d81/parking__controller_8c.html#a35d91015f6892991c1b981a8c4d080d2">flatten_dial_string</a>(dial_string_flat);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="comment">/* Set parking timeout channel variables */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   snprintf(parking_space, <span class="keyword">sizeof</span>(parking_space), <span class="stringliteral">&quot;%d&quot;</span>, user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a7ae57549bf83cfe4727db8951ca8b74b">parking_space</a>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(chan);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;PARKING_SPACE&quot;</span>, parking_space);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;PARKEDLOT&quot;</span>, user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#aab047b714dfa66df6e8b937df22b0a6c">lot</a>-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;PARKER&quot;</span>, dial_string);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;PARKER_FLAT&quot;</span>, dial_string_flat);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a3795de28c520eec4a8eea0bc7fb25390">parking_timeout_set_caller_features</a>(chan, user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#aab047b714dfa66df6e8b937df22b0a6c">lot</a>-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">cfg</a>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(chan);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="comment">/* Dialplan generation for park-dial extensions */</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a18c87dac5f7f4368c11b67d8026adc22">ast_wrlock_contexts</a>()) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to lock the contexts list. Can&#39;t add the park-dial extension.\n&quot;</span>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordflow">if</span> (!(park_dial_context = <a class="code" href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>, <a class="code" href="../../d3/d38/res__parking_8h.html#a13a04bccfe6a7467919fefd9d55ceb6f">BASE_REGISTRAR</a>))) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Parking dial context &#39;%s&#39; does not exist and unable to create\n&quot;</span>, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a>()) {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">goto</span> abandon_extension_creation;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a2c961dcbdcade8fac28960ed67c89bd2">ast_wrlock_context</a>(park_dial_context)) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;failed to obtain write lock on context &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a>()) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">goto</span> abandon_extension_creation;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a>()) {</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   snprintf(returnexten, <span class="keyword">sizeof</span>(returnexten), <span class="stringliteral">&quot;%s,%u&quot;</span>, dial_string,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#aab047b714dfa66df6e8b937df22b0a6c">lot</a>-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">cfg</a>-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#ad867d9043b4631270e5504f770d54241">comebackdialtime</a>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   duplicate_returnexten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(returnexten);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (!duplicate_returnexten) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create parking redial parker extension %s@%s - Dial(%s)\n&quot;</span>,</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         dial_string_flat, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>, returnexten);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="comment">/* If an extension already exists here because we registered it for another parked call timing out, then we may overwrite it. */</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">if</span> ((existing_exten = <a class="code" href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;pbx_finder, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>, dial_string_flat, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a>)) &amp;&amp;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;       (strcmp(<a class="code" href="../../db/de0/pbx_8h.html#a7f23f7c798d61e68c32b21d3e0cd15a2">ast_get_extension_registrar</a>(existing_exten), <a class="code" href="../../d3/d38/res__parking_8h.html#a13a04bccfe6a7467919fefd9d55ceb6f">BASE_REGISTRAR</a>))) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;An extension for &#39;%s@%s&#39; was already registered by another registrar &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         dial_string_flat, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>, <a class="code" href="../../db/de0/pbx_8h.html#a7f23f7c798d61e68c32b21d3e0cd15a2">ast_get_extension_registrar</a>(existing_exten));</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#ade1b9a3e676992cb13790cb068234f44">ast_add_extension2_nolock</a>(park_dial_context, 1, dial_string_flat, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="stringliteral">&quot;Dial&quot;</span>, duplicate_returnexten, <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, <a class="code" href="../../d3/d38/res__parking_8h.html#a13a04bccfe6a7467919fefd9d55ceb6f">BASE_REGISTRAR</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create parking redial parker extension %s@%s - Dial(%s)\n&quot;</span>,</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         dial_string_flat, <a class="code" href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a>, returnexten);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a805796e4728845bff70c4caf5b224308">ast_unlock_context</a>(park_dial_context)) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;abandon_extension_creation:</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="comment">/* async_goto the proper PBX destination - this should happen when we come out of the bridge */</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a3c39c1a6b61f019c5b037679fba6d50b">comeback</a>)) {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#aa2caee9cd93973d6f2bc806b34f564d6">ast_async_parseable_goto</a>(chan, user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a3c39c1a6b61f019c5b037679fba6d50b">comeback</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="../../db/d81/parking__controller_8c.html#ae9526eacf78ab9791e01adec1db2c451">comeback_goto</a>(user, user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#aab047b714dfa66df6e8b937df22b0a6c">lot</a>);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   }</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="../../d3/d38/res__parking_8h.html#a99c6edcf3d9ec6dee14814a9b7503eb5">  683</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a99c6edcf3d9ec6dee14814a9b7503eb5">say_parking_space</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <span class="keyword">const</span> <span class="keywordtype">char</span> *payload)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numeric_value;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hangup_after;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">if</span> (sscanf(payload, <span class="stringliteral">&quot;%u %u&quot;</span>, &amp;hangup_after, &amp;numeric_value) != 2) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">/* If say_parking_space is called with a non-numeric string, we have a problem. */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel,</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../db/dce/say_8h.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, numeric_value, <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordflow">if</span> (hangup_after) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="../../d3/d38/res__parking_8h.html#a4e7cff5f2172fe5cbb0c70f929195d28">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a4e7cff5f2172fe5cbb0c70f929195d28">parking_set_duration</a>(<span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features, <span class="keyword">struct</span> <a class="code" href="../../dd/d7e/structparked__user.html">parked_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> time_limit;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   time_limit = user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a5cab8de37f0062c1a7c1511409e23319">time_limit</a> * 1000;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="keywordflow">if</span> (!time_limit) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">/* There is no duration limit that we need to apply. */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="comment">/* If the time limit has already been passed, set a really low time limit so we can kick them out immediately. */</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   time_limit = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#ad80305b5e16da9c2675d5f057bd69386">start</a>, time_limit);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">if</span> (time_limit &lt;= 0) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      time_limit = 1;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="comment">/* The interval hook is going to need a reference to the parked_user */</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, +1);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a>(features, 0, time_limit,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a12b304af58c5e61c604ccf87744998ca">parking_duration_callback</a>, user, <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>)) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to apply duration limit to the parked call.\n&quot;</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">/*! \brief  Dial plan function to get the parking lot channel of an occupied parking lot */</span></div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#aaf6ca411e3e59bfaa3d218ef5849dce4">  733</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#aaf6ca411e3e59bfaa3d218ef5849dce4">func_get_parkingslot_channel</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>, <span class="keywordtype">char</span> *<a class="code" href="../../db/d81/structpbx__find__info.html#ae4950db1dbfff8459a712737063b61aa">data</a>, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d7e/structparked__user.html">parked_user</a> *, pu, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/de7/structparking__lot.html">parking_lot</a> *, lot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> space = 0;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(parking_space);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/de7/structparking__lot.html">parking_lot</a>);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(other);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   );</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="comment">/* Parse the arguments. */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, data);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.argc &lt; 2) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="comment">/* Didn&#39;t receive enough arguments to do anything */</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Usage: %s(&lt;parking_space&gt;,&lt;parking_lot&gt;)\n&quot;</span>,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         <span class="keyword">function</span>);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   lot = <a class="code" href="../../d3/d38/res__parking_8h.html#a229bf0f37506c31420fe0b6a9d8594b6">parking_lot_find_by_name</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.parking_lot);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">if</span> (!lot) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not find parking lot: &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.parking_lot);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.parking_space)) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/dd6/conversions_8h.html#a9982602f3c9f6975b4689b0ac441efa9">ast_str_to_uint</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.parking_space, &amp;space) != 0) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;value &#39;%s&#39; for parking_space argument is invalid. Must be an integer greater than 0.\n&quot;</span>,</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.parking_space);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   pu = <a class="code" href="../../db/d81/parking__controller_8c.html#a46313e3e6b4ede91b19efcba7c2178e6">parking_lot_inspect_parked_user</a>(lot, space);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordflow">if</span> (!pu) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   content = <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(pu-&gt;chan);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, content, len);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#af0b6425453b659732eb7bfaedd9d9403">  781</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#af0b6425453b659732eb7bfaedd9d9403">getparkingslotchannel_function</a> = {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;PARK_GET_CHANNEL&quot;</span>,</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   .read = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#aaf6ca411e3e59bfaa3d218ef5849dce4">func_get_parkingslot_channel</a>,</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;};</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="../../d1/db7/parking__bridge__features_8c.html#a527a87b444846a534af2414c76eb65dc">  786</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/d60/structast__parking__bridge__feature__fn__table.html">ast_parking_bridge_feature_fn_table</a> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a527a87b444846a534af2414c76eb65dc">parking_provider</a> = {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   .<a class="code" href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">module_version</a> = <a class="code" href="../../d2/d33/parking_8h.html#afb30fd8e6fab7db7623e863a5e696f55">PARKING_MODULE_VERSION</a>,</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   .module_name = __FILE__,</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   .parking_is_exten_park = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#afa671889bd316c12a94ebf3a3b453cd8">parking_is_exten_park</a>,</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   .parking_blind_transfer_park = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a5a1e3204bf0f1593b39a19e784e689e1">parking_blind_transfer_park</a>,</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   .parking_park_bridge_channel = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a507d357cebeeade4f7d670234fb10d65">parking_park_bridge_channel</a>,</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   .parking_park_call = <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a8eccd88e14f462bcf88308a17d9573f4">parking_park_call</a>,</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;};</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno"><a class="line" href="../../d3/d38/res__parking_8h.html#a18a2586e938596a099a271b0a01c0893">  795</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#a18a2586e938596a099a271b0a01c0893">unload_parking_bridge_features</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;{</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9e4b5eec63c6787eab2a435f95eeb66f">AST_BRIDGE_BUILTIN_PARKCALL</a>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../d2/d33/parking_8h.html#a1379d483297fa97cde1dd402999c9cad">ast_parking_unregister_bridge_features</a>(parking_provider.<a class="code" href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;getparkingslotchannel_function);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="../../d3/d38/res__parking_8h.html#abc3f9a5f644e15bcfae3f48af74bcf36">  802</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#abc3f9a5f644e15bcfae3f48af74bcf36">load_parking_bridge_features</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   parking_provider.<a class="code" href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a> = AST_MODULE_SELF;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;getparkingslotchannel_function);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d33/parking_8h.html#a782440ed70065eea7041451f18d49cc4">ast_parking_register_bridge_features</a>(&amp;parking_provider)) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9e4b5eec63c6787eab2a435f95eeb66f">AST_BRIDGE_BUILTIN_PARKCALL</a>, <a class="code" href="../../d1/db7/parking__bridge__features_8c.html#ad8df5efc8c56a3ea31b81c89d5b0cf32">feature_park_call</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div><div class="ttc" id="structast__custom__function_html_afcd1706c9144e6d6eee6127661ae3be2"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">ast_custom_function::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00119">pbx.h:119</a></div></div>
<div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_datastore_info::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00032">datastore.h:32</a></div></div>
<div class="ttc" id="pbx_8h_html_a805796e4728845bff70c4caf5b224308"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a805796e4728845bff70c4caf5b224308">ast_unlock_context</a></div><div class="ttdeci">int ast_unlock_context(struct ast_context *con)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08530">pbx.c:8530</a></div></div>
<div class="ttc" id="structtransfer__channel__data_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../da/d84/structtransfer__channel__data.html#a735984d41155bc1032e09bece8f8d66d">transfer_channel_data::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01137">bridge.h:1137</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="core__local_8h_html"><div class="ttname"><a href="../../d5/da6/core__local_8h.html">core_local.h</a></div><div class="ttdoc">Local proxy channel special access. </div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a3795de28c520eec4a8eea0bc7fb25390"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a3795de28c520eec4a8eea0bc7fb25390">parking_timeout_set_caller_features</a></div><div class="ttdeci">static void parking_timeout_set_caller_features(struct ast_channel *chan, struct parking_lot_cfg *cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00542">parking_bridge_features.c:542</a></div></div>
<div class="ttc" id="extconf_8h_html_a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be"><div class="ttname"><a href="../../dd/ddb/extconf_8h.html#a2b7f0fafc6995b2630658a4fd8df26bea2e605157e82dec388ffc89c1694fb7be">E_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00218">extconf.h:218</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="structast__exten_html"><div class="ttname"><a href="../../d7/d00/structast__exten.html">ast_exten</a></div><div class="ttdoc">ast_exten: An extension The dialplan is saved as a linked list with each context having it&amp;#39;s own link...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l00237">pbx.c:237</a></div></div>
<div class="ttc" id="res__parking_8h_html_a02819d436da997238ca194f3bd6f0af6"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a02819d436da997238ca194f3bd6f0af6">parking_create_dynamic_lot</a></div><div class="ttdeci">struct parking_lot * parking_create_dynamic_lot(const char *name, struct ast_channel *chan)</div><div class="ttdoc">Create a dynamic parking lot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d45/res__parking_8c_source.html#l01059">res_parking.c:1059</a></div></div>
<div class="ttc" id="bridge_8h_html_a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4">AST_BRIDGE_TRANSFER_SINGLE_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01128">bridge.h:1128</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_ad867d9043b4631270e5504f770d54241"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#ad867d9043b4631270e5504f770d54241">parking_lot_cfg::comebackdialtime</a></div><div class="ttdeci">unsigned int comebackdialtime</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00070">res_parking.h:70</a></div></div>
<div class="ttc" id="pbx_8h_html_a7f23f7c798d61e68c32b21d3e0cd15a2"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a7f23f7c798d61e68c32b21d3e0cd15a2">ast_get_extension_registrar</a></div><div class="ttdeci">const char * ast_get_extension_registrar(struct ast_exten *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08571">pbx.c:8571</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_a24927d2710176c1a6a2c3a9eaa2f81c8"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#a24927d2710176c1a6a2c3a9eaa2f81c8">parking_lot_cfg::parkedcallreparking</a></div><div class="ttdeci">int parkedcallreparking</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00077">res_parking.h:77</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a0a9bea2845810c6891440a012a275a36"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a0a9bea2845810c6891440a012a275a36">ast_bridge_channel_peer</a></div><div class="ttdeci">struct ast_bridge_channel * ast_bridge_channel_peer(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Get the peer bridge channel of a two party bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00321">bridge_channel.c:321</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00183">bridge_features.h:183</a></div></div>
<div class="ttc" id="res__parking_8h_html_a13a04bccfe6a7467919fefd9d55ceb6f"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a13a04bccfe6a7467919fefd9d55ceb6f">BASE_REGISTRAR</a></div><div class="ttdeci">#define BASE_REGISTRAR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00036">res_parking.h:36</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga00e84a145ef736ce4134fee75e530113"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga00e84a145ef736ce4134fee75e530113">ast_parked_call_type</a></div><div class="ttdeci">struct stasis_message_type * ast_parked_call_type(void)</div><div class="ttdoc">accessor for the parked call stasis message type </div></div>
<div class="ttc" id="pbx_8h_html_a6594bb017b4d4fe1bc42370cc32ec974"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6594bb017b4d4fe1bc42370cc32ec974">ast_get_extension_app</a></div><div class="ttdeci">const char * ast_get_extension_app(struct ast_exten *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08596">pbx.c:8596</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab940ba7749a2a12c3e9a356bd26fd744"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a></div><div class="ttdeci">void __ao2_cleanup(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00674">astobj2.c:674</a></div></div>
<div class="ttc" id="res__parking_8h_html_a9f01e3514c5daf28848af16806e90a25"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a9f01e3514c5daf28848af16806e90a25">PARK_DIAL_CONTEXT</a></div><div class="ttdeci">#define PARK_DIAL_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00037">res_parking.h:37</a></div></div>
<div class="ttc" id="channel_8h_html_a1b732eb4ed203140b1a3aae9e7dec2c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a></div><div class="ttdeci">int ast_call(struct ast_channel *chan, const char *addr, int timeout)</div><div class="ttdoc">Make a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06553">channel.c:6553</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_af9a368f3ce4811e8ca53ef51d6cd69f9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#af9a368f3ce4811e8ca53ef51d6cd69f9">ast_bridge_channel_write_park</a></div><div class="ttdeci">int ast_bridge_channel_write_park(struct ast_bridge_channel *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *app_data)</div><div class="ttdoc">Have a bridge channel park a channel in the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01555">bridge_channel.c:1555</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="structparked__user_html_a5cab8de37f0062c1a7c1511409e23319"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a5cab8de37f0062c1a7c1511409e23319">parked_user::time_limit</a></div><div class="ttdeci">unsigned int time_limit</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00110">res_parking.h:110</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="stasis_8h_html_a52b5393bef89d7781c0d039d6489de23"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a52b5393bef89d7781c0d039d6489de23">stasis_subscription_set_filter</a></div><div class="ttdeci">int stasis_subscription_set_filter(struct stasis_subscription *subscription, enum stasis_subscription_message_filter filter)</div><div class="ttdoc">Set the message type filtering level on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01079">stasis.c:1079</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a507d357cebeeade4f7d670234fb10d65"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a507d357cebeeade4f7d670234fb10d65">parking_park_bridge_channel</a></div><div class="ttdeci">static int parking_park_bridge_channel(struct ast_bridge_channel *bridge_channel, const char *uuid_parkee, const char *uuid_parker, const char *app_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00434">parking_bridge_features.c:434</a></div></div>
<div class="ttc" id="say_8h_html_a7cf9dcf6ae6fcedb7752d0deac683b3b"><div class="ttname"><a href="../../db/dce/say_8h.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a></div><div class="ttdeci">int ast_say_digits(struct ast_channel *chan, int num, const char *ints, const char *lang)</div><div class="ttdoc">says digits </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08349">channel.c:8349</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="pbx_8h_html_ac0a6c0c39796f36864868365d8989f02"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac0a6c0c39796f36864868365d8989f02">ast_get_extension_app_data</a></div><div class="ttdeci">void * ast_get_extension_app_data(struct ast_exten *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08601">pbx.c:8601</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00066">bridge_channel.h:66</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a77a3efc74230110e4b06840bffa42a34"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a77a3efc74230110e4b06840bffa42a34">parked_subscription_info</a></div><div class="ttdeci">static const struct ast_datastore_info parked_subscription_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00086">parking_bridge_features.c:86</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="pbx_8h_html_a18c87dac5f7f4368c11b67d8026adc22"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a18c87dac5f7f4368c11b67d8026adc22">ast_wrlock_contexts</a></div><div class="ttdeci">int ast_wrlock_contexts(void)</div><div class="ttdoc">Write locks the context list. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08502">pbx.c:8502</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a4e7cff5f2172fe5cbb0c70f929195d28"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a4e7cff5f2172fe5cbb0c70f929195d28">parking_set_duration</a></div><div class="ttdeci">void parking_set_duration(struct ast_bridge_features *features, struct parked_user *user)</div><div class="ttdoc">Setup timeout interval feature on an ast_bridge_features for parking. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00705">parking_bridge_features.c:705</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="parking__controller_8c_html_a35d91015f6892991c1b981a8c4d080d2"><div class="ttname"><a href="../../db/d81/parking__controller_8c.html#a35d91015f6892991c1b981a8c4d080d2">flatten_dial_string</a></div><div class="ttdeci">void flatten_dial_string(char *dialstring)</div><div class="ttdoc">Flattens a dial string so that it can be written to/found from PBX extensions. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/parking__controller_8c_source.html#l00249">parking_controller.c:249</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_ac2e73f4956252881466c2388f5970cfa"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#ac2e73f4956252881466c2388f5970cfa">parker_update_cb</a></div><div class="ttdeci">static void parker_update_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00158">parking_bridge_features.c:158</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html">ast_parked_call_payload</a></div><div class="ttdoc">A parked call message payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00059">parking.h:59</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="channel_8h_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__parking__bridge__feature__fn__table_html_a4c2d9327de87c6be0b54f793adc7f1fb"><div class="ttname"><a href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a4c2d9327de87c6be0b54f793adc7f1fb">ast_parking_bridge_feature_fn_table::module_name</a></div><div class="ttdeci">const char * module_name</div><div class="ttdoc">The name of the module that provides this parking functionality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00139">parking.h:139</a></div></div>
<div class="ttc" id="structparked__user_html_aab047b714dfa66df6e8b937df22b0a6c"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#aab047b714dfa66df6e8b937df22b0a6c">parked_user::lot</a></div><div class="ttdeci">struct parking_lot * lot</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00111">res_parking.h:111</a></div></div>
<div class="ttc" id="structparked__subscription__data_html_a96365807c1c2220dc5eed71b5b822cf3"><div class="ttname"><a href="../../d4/d10/structparked__subscription__data.html#a96365807c1c2220dc5eed71b5b822cf3">parked_subscription_data::hangup_after</a></div><div class="ttdeci">unsigned int hangup_after</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00072">parking_bridge_features.c:72</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_ac9e5e351c10879edca8ea8210075f082"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#ac9e5e351c10879edca8ea8210075f082">ast_parked_call_payload::event_type</a></div><div class="ttdeci">enum ast_parked_call_event_type event_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00062">parking.h:62</a></div></div>
<div class="ttc" id="structparked__user_html_ad80305b5e16da9c2675d5f057bd69386"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#ad80305b5e16da9c2675d5f057bd69386">parked_user::start</a></div><div class="ttdeci">struct timeval start</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00106">res_parking.h:106</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="structparked__subscription__datastore_html_a406969b4f59d05c5d4589f26b52801a0"><div class="ttname"><a href="../../d5/db0/structparked__subscription__datastore.html#a406969b4f59d05c5d4589f26b52801a0">parked_subscription_datastore::parked_subscription</a></div><div class="ttdeci">struct stasis_subscription * parked_subscription</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00066">parking_bridge_features.c:66</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a18a2586e938596a099a271b0a01c0893"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a18a2586e938596a099a271b0a01c0893">unload_parking_bridge_features</a></div><div class="ttdeci">void unload_parking_bridge_features(void)</div><div class="ttdoc">Unregister features registered by load_parking_bridge_features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00795">parking_bridge_features.c:795</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="core__local_8h_html_a2b73f14ae5dc7e11bafc684936cf26d0"><div class="ttname"><a href="../../d5/da6/core__local_8h.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a></div><div class="ttdeci">struct ast_channel * ast_local_get_peer(struct ast_channel *ast)</div><div class="ttdoc">Get the other local channel in the pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00276">core_local.c:276</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="parking__manager_8c_html_af185e93906eea4f215d95c8ae4552dd8"><div class="ttname"><a href="../../d0/d39/parking__manager_8c.html#af185e93906eea4f215d95c8ae4552dd8">publish_parked_call_failure</a></div><div class="ttdeci">void publish_parked_call_failure(struct ast_channel *parkee)</div><div class="ttdoc">Publish a stasis parked call message for the channel indicating failure to park. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d39/parking__manager_8c_source.html#l00595">parking_manager.c:595</a></div></div>
<div class="ttc" id="channel_8h_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="parking__controller_8c_html_a46313e3e6b4ede91b19efcba7c2178e6"><div class="ttname"><a href="../../db/d81/parking__controller_8c.html#a46313e3e6b4ede91b19efcba7c2178e6">parking_lot_inspect_parked_user</a></div><div class="ttdeci">struct parked_user * parking_lot_inspect_parked_user(struct parking_lot *lot, int target)</div><div class="ttdoc">Determine if there is a parked user in a parking space and return it if there is. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/parking__controller_8c_source.html#l00166">parking_controller.c:166</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a395272994b2af7bd55f871b02d2d42e4"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a></div><div class="ttdeci">int ast_bridge_features_unregister(enum ast_bridge_builtin_feature feature)</div><div class="ttdoc">Unregister a handler for a built in feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03139">bridge.c:3139</a></div></div>
<div class="ttc" id="datastore_8h_html"><div class="ttname"><a href="../../d9/db6/datastore_8h.html">datastore.h</a></div><div class="ttdoc">Asterisk datastore objects. </div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a9e4b5eec63c6787eab2a435f95eeb66f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9e4b5eec63c6787eab2a435f95eeb66f">AST_BRIDGE_BUILTIN_PARKCALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00092">bridge_features.h:92</a></div></div>
<div class="ttc" id="structast__parking__bridge__feature__fn__table_html"><div class="ttname"><a href="../../d1/d60/structast__parking__bridge__feature__fn__table.html">ast_parking_bridge_feature_fn_table</a></div><div class="ttdoc">A function table providing parking functionality to the Bridging API Bridging API and other consumers...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00127">parking.h:127</a></div></div>
<div class="ttc" id="channel_8h_html_a6ce892974f59537bda03a71319b452e2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a></div><div class="ttdeci">int ast_channel_datastore_inherit(struct ast_channel *from, struct ast_channel *to)</div><div class="ttdoc">Inherit datastores from a parent to a child. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02373">channel.c:2373</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a12b304af58c5e61c604ccf87744998ca"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a12b304af58c5e61c604ccf87744998ca">parking_duration_callback</a></div><div class="ttdeci">static int parking_duration_callback(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00575">parking_bridge_features.c:575</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a5a1e3204bf0f1593b39a19e784e689e1"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a5a1e3204bf0f1593b39a19e784e689e1">parking_blind_transfer_park</a></div><div class="ttdeci">static int parking_blind_transfer_park(struct ast_bridge_channel *bridge_channel, const char *context, const char *exten, transfer_channel_cb parked_channel_cb, struct transfer_channel_data *parked_channel_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_bridge_features.c:336</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structpbx__find__info_html"><div class="ttname"><a href="../../db/d81/structpbx__find__info.html">pbx_find_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00230">extconf.h:230</a></div></div>
<div class="ttc" id="res__parking_8h_html_a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42">PARK_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00041">res_parking.h:41</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_abf322ebc13d3689cf5a5e81e4569c602"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#abf322ebc13d3689cf5a5e81e4569c602">ast_parked_call_payload::parkee</a></div><div class="ttdeci">struct ast_channel_snapshot * parkee</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00060">parking.h:60</a></div></div>
<div class="ttc" id="parking__applications_8c_html_abbf68fb3b1ff0390d60d881816c544d4"><div class="ttname"><a href="../../da/ded/parking__applications_8c.html#abbf68fb3b1ff0390d60d881816c544d4">park_application_setup</a></div><div class="ttdeci">struct ast_bridge * park_application_setup(struct ast_channel *parkee, struct ast_channel *parker, const char *app_data, int *silence_announcements)</div><div class="ttdoc">Function to prepare a channel for parking by determining which parking bridge should be used...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ded/parking__applications_8c_source.html#l00526">parking_applications.c:526</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_abc3f9a5f644e15bcfae3f48af74bcf36"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#abc3f9a5f644e15bcfae3f48af74bcf36">load_parking_bridge_features</a></div><div class="ttdeci">int load_parking_bridge_features(void)</div><div class="ttdoc">Register bridge features for parking. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00802">parking_bridge_features.c:802</a></div></div>
<div class="ttc" id="structpbx__find__info_html_ae4950db1dbfff8459a712737063b61aa"><div class="ttname"><a href="../../db/d81/structpbx__find__info.html#ae4950db1dbfff8459a712737063b61aa">pbx_find_info::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00241">extconf.h:241</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="structparked__user_html_a05dc49917dafb37112f18d6e5d021a98"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a05dc49917dafb37112f18d6e5d021a98">parked_user::parker_dial_string</a></div><div class="ttdeci">char * parker_dial_string</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00109">res_parking.h:109</a></div></div>
<div class="ttc" id="structparked__subscription__data_html_a22abfff94132237b9bfefd9926961698"><div class="ttname"><a href="../../d4/d10/structparked__subscription__data.html#a22abfff94132237b9bfefd9926961698">parked_subscription_data::transfer_data</a></div><div class="ttdeci">struct transfer_channel_data * transfer_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00070">parking_bridge_features.c:70</a></div></div>
<div class="ttc" id="structast__custom__function_html"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html">ast_custom_function</a></div><div class="ttdoc">Data structure associated with a custom dialplan function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00118">pbx.h:118</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="structapp__data_html"><div class="ttname"><a href="../../da/d37/structapp__data.html">app_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/test__res__stasis_8c_source.html#l00062">test_res_stasis.c:62</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structparked__user_html_a7ae57549bf83cfe4727db8951ca8b74b"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a7ae57549bf83cfe4727db8951ca8b74b">parked_user::parking_space</a></div><div class="ttdeci">int parking_space</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00107">res_parking.h:107</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="conversions_8h_html"><div class="ttname"><a href="../../da/dd6/conversions_8h.html">conversions.h</a></div><div class="ttdoc">Conversion utility functions. </div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3e9bdb7b62b531f001b7dcb5c39b3551"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a></div><div class="ttdeci">int ast_bridge_interval_hook(struct ast_bridge_features *features, enum ast_bridge_hook_timer_option flags, unsigned int interval, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach an interval hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03382">bridge.c:3382</a></div></div>
<div class="ttc" id="structparked__user_html"><div class="ttname"><a href="../../dd/d7e/structparked__user.html">parked_user</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00103">res_parking.h:103</a></div></div>
<div class="ttc" id="parking_8h_html_afb30fd8e6fab7db7623e863a5e696f55"><div class="ttname"><a href="../../d2/d33/parking_8h.html#afb30fd8e6fab7db7623e863a5e696f55">PARKING_MODULE_VERSION</a></div><div class="ttdeci">#define PARKING_MODULE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00119">parking.h:119</a></div></div>
<div class="ttc" id="parking_8h_html_a782440ed70065eea7041451f18d49cc4"><div class="ttname"><a href="../../d2/d33/parking_8h.html#a782440ed70065eea7041451f18d49cc4">ast_parking_register_bridge_features</a></div><div class="ttdeci">int ast_parking_register_bridge_features(struct ast_parking_bridge_feature_fn_table *fn_table)</div><div class="ttdoc">Register a parking provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00196">parking.c:196</a></div></div>
<div class="ttc" id="channel_8h_html_a6f3f42365ac84d888b55e35e1309f067"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a></div><div class="ttdeci">void ast_channel_req_accountcodes(struct ast_channel *chan, const struct ast_channel *requestor, enum ast_channel_requestor_relationship relationship)</div><div class="ttdoc">Setup new channel accountcodes from the requestor channel after ast_request(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06526">channel.c:6526</a></div></div>
<div class="ttc" id="structparked__user_html_a43e677343eefcf2423eb85cc0987855f"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a43e677343eefcf2423eb85cc0987855f">parked_user::resolution</a></div><div class="ttdeci">enum park_call_resolution resolution</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00112">res_parking.h:112</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structast__parking__bridge__feature__fn__table_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">ast_parking_bridge_feature_fn_table::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdoc">The module info for the module registering this parking provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00202">parking.h:202</a></div></div>
<div class="ttc" id="structast__parking__bridge__feature__fn__table_html_a19dd3d3916fd1aa9a70c45c43d24b6f5"><div class="ttname"><a href="../../d1/d60/structast__parking__bridge__feature__fn__table.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">ast_parking_bridge_feature_fn_table::module_version</a></div><div class="ttdeci">unsigned int module_version</div><div class="ttdoc">The version of this function table. If the ABI for this table changes, the module version (/ref PARKI...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00134">parking.h:134</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_afa671889bd316c12a94ebf3a3b453cd8"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#afa671889bd316c12a94ebf3a3b453cd8">parking_is_exten_park</a></div><div class="ttdeci">static int parking_is_exten_park(const char *context, const char *exten)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00297">parking_bridge_features.c:297</a></div></div>
<div class="ttc" id="structparked__subscription__data_html"><div class="ttname"><a href="../../d4/d10/structparked__subscription__data.html">parked_subscription_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00069">parking_bridge_features.c:69</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="parking__controller_8c_html_ae9526eacf78ab9791e01adec1db2c451"><div class="ttname"><a href="../../db/d81/parking__controller_8c.html#ae9526eacf78ab9791e01adec1db2c451">comeback_goto</a></div><div class="ttdeci">int comeback_goto(struct parked_user *pu, struct parking_lot *lot)</div><div class="ttdoc">Set a channel&amp;#39;s position in the PBX after timeout using the parking lot settings. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d81/parking__controller_8c_source.html#l00261">parking_controller.c:261</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a8eccd88e14f462bcf88308a17d9573f4"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a8eccd88e14f462bcf88308a17d9573f4">parking_park_call</a></div><div class="ttdeci">static int parking_park_call(struct ast_bridge_channel *parker, char *exten, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00499">parking_bridge_features.c:499</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="structparked__user_html_a3c39c1a6b61f019c5b037679fba6d50b"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a3c39c1a6b61f019c5b037679fba6d50b">parked_user::comeback</a></div><div class="ttdeci">char comeback[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00108">res_parking.h:108</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a1ee7e74f57858646d8b040113768f65a"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a1ee7e74f57858646d8b040113768f65a">parker_parked_call_message_response</a></div><div class="ttdeci">static void parker_parked_call_message_response(struct ast_parked_call_payload *message, struct parked_subscription_data *data, struct stasis_subscription *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00105">parking_bridge_features.c:105</a></div></div>
<div class="ttc" id="time_8h_html_a904a6933b710e14c7fa2029a0f0cc91a"><div class="ttname"><a href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a></div><div class="ttdeci">int ast_remaining_ms(struct timeval start, int max_ms)</div><div class="ttdoc">Calculate remaining milliseconds given a starting timestamp and upper bound. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02033">main/utils.c:2033</a></div></div>
<div class="ttc" id="structast__parked__call__payload_html_a3c927af64370b9380770ec2ea0ed9a89"><div class="ttname"><a href="../../d0/d47/structast__parked__call__payload.html#a3c927af64370b9380770ec2ea0ed9a89">ast_parked_call_payload::parkingspace</a></div><div class="ttdeci">unsigned int parkingspace</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00065">parking.h:65</a></div></div>
<div class="ttc" id="bridge__channel_8h_html"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html">bridge_channel.h</a></div></div>
<div class="ttc" id="pbx_8h_html_ae517a87b356aec60d5de4591ef94581b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae517a87b356aec60d5de4591ef94581b">ast_unlock_contexts</a></div><div class="ttdeci">int ast_unlock_contexts(void)</div><div class="ttdoc">Unlocks contexts. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08512">pbx.c:8512</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a527a87b444846a534af2414c76eb65dc"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a527a87b444846a534af2414c76eb65dc">parking_provider</a></div><div class="ttdeci">struct ast_parking_bridge_feature_fn_table parking_provider</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00786">parking_bridge_features.c:786</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ae364d78e48f19a0d5ceedc6d18cda52d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a></div><div class="ttdeci">int ast_bridge_features_register(enum ast_bridge_builtin_feature feature, ast_bridge_hook_callback callback, const char *dtmf)</div><div class="ttdoc">Register a handler for a built in feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03123">bridge.c:3123</a></div></div>
<div class="ttc" id="stasis_8h_html_a597f7a30fe616c9f083a93ed168955ed"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a597f7a30fe616c9f083a93ed168955ed">stasis_subscribe_pool</a></div><div class="ttdeci">#define stasis_subscribe_pool(topic, callback, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00682">stasis.h:682</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_aaf6ca411e3e59bfaa3d218ef5849dce4"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#aaf6ca411e3e59bfaa3d218ef5849dce4">func_get_parkingslot_channel</a></div><div class="ttdeci">static int func_get_parkingslot_channel(struct ast_channel *chan, const char *function, char *data, char *buf, size_t len)</div><div class="ttdoc">Dial plan function to get the parking lot channel of an occupied parking lot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00733">parking_bridge_features.c:733</a></div></div>
<div class="ttc" id="stasis_8h_html_a3498301077e2005383f0d261c471388b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3498301077e2005383f0d261c471388b">stasis_unsubscribe</a></div><div class="ttdeci">struct stasis_subscription * stasis_unsubscribe(struct stasis_subscription *subscription)</div><div class="ttdoc">Cancel a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00973">stasis.c:973</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a99c6edcf3d9ec6dee14814a9b7503eb5"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a99c6edcf3d9ec6dee14814a9b7503eb5">say_parking_space</a></div><div class="ttdeci">void say_parking_space(struct ast_bridge_channel *bridge_channel, const char *payload)</div><div class="ttdoc">custom callback function for ast_bridge_channel_queue_playfile which plays a parking space and option...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00683">parking_bridge_features.c:683</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="pbx_8h_html_a2c961dcbdcade8fac28960ed67c89bd2"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a2c961dcbdcade8fac28960ed67c89bd2">ast_wrlock_context</a></div><div class="ttdeci">int ast_wrlock_context(struct ast_context *con)</div><div class="ttdoc">Write locks a given context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08520">pbx.c:8520</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="parking_8h_html_ae9948d6f3b81ba2a7b5b212a7b1068df"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ae9948d6f3b81ba2a7b5b212a7b1068df">PARK_APPLICATION</a></div><div class="ttdeci">#define PARK_APPLICATION</div><div class="ttdoc">The default parking application that Asterisk expects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00035">parking.h:35</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_af8ec17d93a760993a3d6d42c02318864"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#af8ec17d93a760993a3d6d42c02318864">create_parked_subscription_full</a></div><div class="ttdeci">static int create_parked_subscription_full(struct ast_channel *chan, const char *parkee_uuid, int hangup_after, struct transfer_channel_data *parked_channel_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00174">parking_bridge_features.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_a839350445aaa51cedf31f6daec933ee0"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a839350445aaa51cedf31f6daec933ee0">stasis_subscription_final_message</a></div><div class="ttdeci">int stasis_subscription_final_message(struct stasis_subscription *sub, struct stasis_message *msg)</div><div class="ttdoc">Determine whether a message is the final message to be received on a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01176">stasis.c:1176</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html">parking_lot_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00065">res_parking.h:65</a></div></div>
<div class="ttc" id="channel_8h_html_abcf1aea85b924e9cd605040b86241e2a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a></div><div class="ttdeci">#define AST_MAX_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00136">channel.h:136</a></div></div>
<div class="ttc" id="channel_8h_html_a892b6550a4f90b70ad92198c9d05cedc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a></div><div class="ttdeci">void ast_channel_inherit_variables(const struct ast_channel *parent, struct ast_channel *child)</div><div class="ttdoc">Inherits channel variable from parent to child channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06866">channel.c:6866</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_af0b6425453b659732eb7bfaedd9d9403"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#af0b6425453b659732eb7bfaedd9d9403">getparkingslotchannel_function</a></div><div class="ttdeci">static struct ast_custom_function getparkingslotchannel_function</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00781">parking_bridge_features.c:781</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structpbx__find__info_html_a31dd453024f17e9e35717368cf8c87fb"><div class="ttname"><a href="../../db/d81/structpbx__find__info.html#a31dd453024f17e9e35717368cf8c87fb">pbx_find_info::stacklen</a></div><div class="ttdeci">int stacklen</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddb/extconf_8h_source.html#l00238">extconf.h:238</a></div></div>
<div class="ttc" id="structparked__subscription__data_html_ae12bf774c806b6235eab707faf09af13"><div class="ttname"><a href="../../d4/d10/structparked__subscription__data.html#ae12bf774c806b6235eab707faf09af13">parked_subscription_data::parker_uuid</a></div><div class="ttdeci">char parker_uuid[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00073">parking_bridge_features.c:73</a></div></div>
<div class="ttc" id="bridge_8h_html_a8878fc7451a873f155aba20b0b31abbb"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a8878fc7451a873f155aba20b0b31abbb">ast_bridge_set_transfer_variables</a></div><div class="ttdeci">void ast_bridge_set_transfer_variables(struct ast_channel *chan, const char *value, int is_attended)</div><div class="ttdoc">Set the relevant transfer variables for a single channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04404">bridge.c:4404</a></div></div>
<div class="ttc" id="structparking__lot_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d4/de7/structparking__lot.html#ace9168767fc3707cf5f0a7d049682ba3">parking_lot::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00100">res_parking.h:100</a></div></div>
<div class="ttc" id="parking_8h_html_ad7f2cff41c0b5c4e0aa1e2de3ee71485acadf914c610b448ad9bca355439e28fa"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485acadf914c610b448ad9bca355439e28fa">PARKED_CALL_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00051">parking.h:51</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_ad8df5efc8c56a3ea31b81c89d5b0cf32"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#ad8df5efc8c56a3ea31b81c89d5b0cf32">feature_park_call</a></div><div class="ttdeci">static int feature_park_call(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00524">parking_bridge_features.c:524</a></div></div>
<div class="ttc" id="structparking__lot_html"><div class="ttname"><a href="../../d4/de7/structparking__lot.html">parking_lot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00092">res_parking.h:92</a></div></div>
<div class="ttc" id="module_8h_html_a0fb39465480454778b4b070505a4eabb"><div class="ttname"><a href="../../d5/d16/module_8h.html#a0fb39465480454778b4b070505a4eabb">SCOPED_MODULE_USE</a></div><div class="ttdeci">#define SCOPED_MODULE_USE(module)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00665">module.h:665</a></div></div>
<div class="ttc" id="conversions_8h_html_a9982602f3c9f6975b4689b0ac441efa9"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a9982602f3c9f6975b4689b0ac441efa9">ast_str_to_uint</a></div><div class="ttdeci">int ast_str_to_uint(const char *str, unsigned int *res)</div><div class="ttdoc">Convert the given string to an unsigned integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00056">conversions.c:56</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_a0e02756579d965599dee2698239a2e0b"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#a0e02756579d965599dee2698239a2e0b">parking_lot_cfg::parkedcallhangup</a></div><div class="ttdeci">int parkedcallhangup</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00078">res_parking.h:78</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a021206889c87dfe5e0d2b288969a167d"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a021206889c87dfe5e0d2b288969a167d">wipe_subscription_datastore</a></div><div class="ttdeci">static void wipe_subscription_datastore(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00091">parking_bridge_features.c:91</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_a1b7ebcd57a463747583fbdbe04659f87"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#a1b7ebcd57a463747583fbdbe04659f87">parking_lot_cfg::parkedcalltransfers</a></div><div class="ttdeci">int parkedcalltransfers</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00076">res_parking.h:76</a></div></div>
<div class="ttc" id="structparked__subscription__data_html_ad44a24cc3727979d224d2eacaab17b75"><div class="ttname"><a href="../../d4/d10/structparked__subscription__data.html#ad44a24cc3727979d224d2eacaab17b75">parked_subscription_data::parkee_uuid</a></div><div class="ttdeci">char * parkee_uuid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00071">parking_bridge_features.c:71</a></div></div>
<div class="ttc" id="logger_8h_html"><div class="ttname"><a href="../../d1/d8c/logger_8h.html">logger.h</a></div><div class="ttdoc">Support for logging to various files, console and syslog Configuration in file logger.conf. </div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00038">features.h:38</a></div></div>
<div class="ttc" id="pbx_8h_html_aa2caee9cd93973d6f2bc806b34f564d6"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa2caee9cd93973d6f2bc806b34f564d6">ast_async_parseable_goto</a></div><div class="ttdeci">int ast_async_parseable_goto(struct ast_channel *chan, const char *goto_string)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08864">pbx.c:8864</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab4e08da228493c3f9bfc6a2aed507cb4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab4e08da228493c3f9bfc6a2aed507cb4">ast_parking_topic</a></div><div class="ttdeci">struct stasis_topic * ast_parking_topic(void)</div><div class="ttdoc">accessor for the parking stasis topic </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00067">parking.c:67</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="bridge_8h_html_af0e3d51ad653134a92545dec4610b83a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#af0e3d51ad653134a92545dec4610b83a">ast_bridge_move</a></div><div class="ttdeci">int ast_bridge_move(struct ast_bridge *dst_bridge, struct ast_bridge *src_bridge, struct ast_channel *chan, struct ast_channel *swap, int attempt_recovery)</div><div class="ttdoc">Move a channel from one bridge to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l02508">bridge.c:2508</a></div></div>
<div class="ttc" id="structtransfer__channel__data_html_a4eff08519948266efdd345aabe6ecbbb"><div class="ttname"><a href="../../da/d84/structtransfer__channel__data.html#a4eff08519948266efdd345aabe6ecbbb">transfer_channel_data::completed</a></div><div class="ttdeci">int completed</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01141">bridge.h:1141</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="structparked__subscription__datastore_html"><div class="ttname"><a href="../../d5/db0/structparked__subscription__datastore.html">parked_subscription_datastore</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00065">parking_bridge_features.c:65</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_accf4e9753bd5d7316f4988e74486552b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a></div><div class="ttdeci">void ast_connected_line_copy_from_caller(struct ast_party_connected_line *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the caller information to the connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08389">channel.c:8389</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="parking_8h_html_ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ad7f2cff41c0b5c4e0aa1e2de3ee71485a56203dcf9e281e78d8fde96105f83ea7">PARKED_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d33/parking_8h_source.html#l00047">parking.h:47</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="structtransfer__channel__data_html"><div class="ttname"><a href="../../da/d84/structtransfer__channel__data.html">transfer_channel_data</a></div><div class="ttdoc">AO2 object that wraps data for transfer_channel_cb. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01136">bridge.h:1136</a></div></div>
<div class="ttc" id="stasis_8h_html_a4f248ee5f4791f05d0af8768aaab282b"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a4f248ee5f4791f05d0af8768aaab282b">stasis_subscription_accept_message_type</a></div><div class="ttdeci">int stasis_subscription_accept_message_type(struct stasis_subscription *subscription, const struct stasis_message_type *type)</div><div class="ttdoc">Indicate to a subscription that we are interested in a message type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01025">stasis.c:1025</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_afdd70572c127b18cec17efb3cb2515cb"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#afdd70572c127b18cec17efb3cb2515cb">parking_lot_cfg::parkedcallrecording</a></div><div class="ttdeci">int parkedcallrecording</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00079">res_parking.h:79</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="causes_8h_html"><div class="ttname"><a href="../../d4/da3/causes_8h.html">causes.h</a></div><div class="ttdoc">Internal Asterisk hangup causes. </div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="stasis_8h_html_a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a3804fa8ec76d77090d5cda80fc4ac891a0e40588366edb9a53e453d47ef26d567">STASIS_SUBSCRIPTION_FILTER_SELECTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l00300">stasis.h:300</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a30facc917cfcb5ece9061beae139fc73"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a30facc917cfcb5ece9061beae139fc73">park_local_transfer</a></div><div class="ttdeci">static struct ast_channel * park_local_transfer(struct ast_channel *parker, const char *context, const char *exten, struct transfer_channel_data *parked_channel_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00244">parking_bridge_features.c:244</a></div></div>
<div class="ttc" id="bridge_8h_html_a87ed18cc739a9635c4595cae783ab993"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a87ed18cc739a9635c4595cae783ab993">transfer_channel_cb</a></div><div class="ttdeci">void(* transfer_channel_cb)(struct ast_channel *chan, struct transfer_channel_data *user_data, enum ast_transfer_type transfer_type)</div><div class="ttdoc">Callback function type called during blind transfers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01160">bridge.h:1160</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafae630f05995b59b49dc523a5b9ce757"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafae630f05995b59b49dc523a5b9ce757">stasis_subscription_change_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_subscription_change_type(void)</div><div class="ttdoc">Gets the message type for subscription change notices. </div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="res__parking_8h_html_a229bf0f37506c31420fe0b6a9d8594b6"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a229bf0f37506c31420fe0b6a9d8594b6">parking_lot_find_by_name</a></div><div class="ttdeci">struct parking_lot * parking_lot_find_by_name(const char *lot_name)</div><div class="ttdoc">Find a parking lot based on its name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d45/res__parking_8c_source.html#l00601">res_parking.c:601</a></div></div>
<div class="ttc" id="res__parking_8h_html"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html">res_parking.h</a></div><div class="ttdoc">Call Parking Resource Internal API. </div></div>
<div class="ttc" id="bridge__internal_8h_html"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html">bridge_internal.h</a></div><div class="ttdoc">Private Bridging API. </div></div>
<div class="ttc" id="res__parking_8h_html_ad540c0ae257e5b7541b1bda040ccd1d0"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#ad540c0ae257e5b7541b1bda040ccd1d0">find_channel_parking_lot_name</a></div><div class="ttdeci">const char * find_channel_parking_lot_name(struct ast_channel *chan)</div><div class="ttdoc">Find parking lot name from channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d45/res__parking_8c_source.html#l00607">res_parking.c:607</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ac7787cec5827585d82ad62292744aeaf"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac7787cec5827585d82ad62292744aeaf">ast_bridge_channel_queue_playfile_sync</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile_sync(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Synchronously queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01410">bridge_channel.c:1410</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="features_8h_html"><div class="ttname"><a href="../../de/d47/features_8h.html">features.h</a></div><div class="ttdoc">Call Parking and Pickup API Includes code and algorithms from the Zapata library. ...</div></div>
<div class="ttc" id="pbx_8h_html_a8a07400b41b3302edf8aef9f53644698"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a></div><div class="ttdeci">struct ast_context * ast_context_find_or_create(struct ast_context **extcontexts, struct ast_hashtab *exttable, const char *name, const char *registrar)</div><div class="ttdoc">Register a new context or find an existing one. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06198">pbx.c:6198</a></div></div>
<div class="ttc" id="res__parking_8h_html_a0adf36a104bea7f61062029a9516ee15a69950c46adcd2d2e18d1bb261f7412d2"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15a69950c46adcd2d2e18d1bb261f7412d2">PARK_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00043">res_parking.h:43</a></div></div>
<div class="ttc" id="say_8h_html"><div class="ttname"><a href="../../db/dce/say_8h.html">say.h</a></div><div class="ttdoc">Say numbers and dates (maybe words one day too) </div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="bridge_8h_html"><div class="ttname"><a href="../../d4/d56/bridge_8h.html">bridge.h</a></div><div class="ttdoc">Bridging API. </div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="pbx_8h_html_ae12539be833fc552d4556c886605f17f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae12539be833fc552d4556c886605f17f">pbx_find_extension</a></div><div class="ttdeci">struct ast_exten * pbx_find_extension(struct ast_channel *chan, struct ast_context *bypass, struct pbx_find_info *q, const char *context, const char *exten, int priority, const char *label, const char *callerid, enum ext_match_t action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00152">ael_main.c:152</a></div></div>
<div class="ttc" id="channel_8h_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="structast__context_html"><div class="ttname"><a href="../../d6/d7c/structast__context.html">ast_context</a></div><div class="ttdoc">ast_context: An extension context - must remain in sync with fake_context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l00284">pbx.c:284</a></div></div>
<div class="ttc" id="structparked__user_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a84d1435c5b8d387806714ea7079304b7">parked_user::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00104">res_parking.h:104</a></div></div>
<div class="ttc" id="channel_8h_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
<div class="ttc" id="channel_8h_html_abdaf681794561f17c4598cb2f16f06b0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdaf681794561f17c4598cb2f16f06b0">ast_channel_parkinglot</a></div><div class="ttdeci">const char * ast_channel_parkinglot(const struct ast_channel *chan)</div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a95e29e145adf6b6e68a034887b923809"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a95e29e145adf6b6e68a034887b923809">parked_subscription_datastore_destroy</a></div><div class="ttdeci">static void parked_subscription_datastore_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00076">parking_bridge_features.c:76</a></div></div>
<div class="ttc" id="pbx_8h_html_ade1b9a3e676992cb13790cb068234f44"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ade1b9a3e676992cb13790cb068234f44">ast_add_extension2_nolock</a></div><div class="ttdeci">int ast_add_extension2_nolock(struct ast_context *con, int replace, const char *extension, int priority, const char *label, const char *callerid, const char *application, void *data, void(*datad)(void *), const char *registrar, const char *registrar_file, int registrar_line)</div><div class="ttdoc">Same as ast_add_extension2, but assumes you have already locked context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07308">pbx.c:7308</a></div></div>
<div class="ttc" id="bridge__features_8h_html"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html">bridge_features.h</a></div><div class="ttdoc">Channel Bridging API. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="parking__bridge__features_8c_html_a88326c901ae53e5ce78f1cfd9a57bab8"><div class="ttname"><a href="../../d1/db7/parking__bridge__features_8c.html#a88326c901ae53e5ce78f1cfd9a57bab8">create_parked_subscription</a></div><div class="ttdeci">int create_parked_subscription(struct ast_channel *chan, const char *parkee_uuid, int hangup_after)</div><div class="ttdoc">Create a parking announcement subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db7/parking__bridge__features_8c_source.html#l00233">parking_bridge_features.c:233</a></div></div>
<div class="ttc" id="structparking__lot_html_abc61ea46020e75f93d5d46df84b91fcc"><div class="ttname"><a href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">parking_lot::cfg</a></div><div class="ttdeci">struct parking_lot_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00096">res_parking.h:96</a></div></div>
<div class="ttc" id="parking_8h_html_a1379d483297fa97cde1dd402999c9cad"><div class="ttname"><a href="../../d2/d33/parking_8h.html#a1379d483297fa97cde1dd402999c9cad">ast_parking_unregister_bridge_features</a></div><div class="ttdeci">int ast_parking_unregister_bridge_features(const char *module_name)</div><div class="ttdoc">Unregister the current parking provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00223">parking.c:223</a></div></div>
<div class="ttc" id="bridge_8h_html_a865f7ef0f91885406ab746b23eb598cdaa85cad6eafcb0edc223c975e0cf3b296"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cdaa85cad6eafcb0edc223c975e0cf3b296">AST_BRIDGE_TRANSFER_MULTI_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01130">bridge.h:1130</a></div></div>
<div class="ttc" id="channel_8h_html_a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048">AST_CHANNEL_REQUESTOR_REPLACEMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01481">channel.h:1481</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
