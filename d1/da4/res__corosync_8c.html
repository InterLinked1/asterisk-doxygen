<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_corosync.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_corosync.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;corosync/cpg.h&gt;</code><br />
<code>#include &lt;corosync/cfg.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/dfb/poll-compat_8h_source.html">asterisk/poll-compat.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d20/event_8h_source.html">asterisk/event.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/da2/devicestate_8h_source.html">asterisk/devicestate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d33/mwi_8h_source.html">asterisk/mwi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d25/stasis__message__router_8h_source.html">asterisk/stasis_message_router.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/df0/stasis__system_8h_source.html">asterisk/stasis_system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_corosync.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d56/res__corosync_8c__incl.png" border="0" usemap="#res__corosync_8c" alt=""/></div>
<map name="res__corosync_8c" id="res__corosync_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1127,319,1211,345"/>
<area shape="rect" id="node24" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1576,162,1712,189"/>
<area shape="rect" id="node31" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1819,468,1946,495"/>
<area shape="rect" id="node35" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="654,244,818,271"/>
<area shape="rect" id="node38" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1977,244,2103,271"/>
<area shape="rect" id="node39" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2438,319,2562,345"/>
<area shape="rect" id="node41" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1467,244,1568,271"/>
<area shape="rect" id="node43" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1389,162,1552,189"/>
<area shape="rect" id="node45" href="../../dc/d33/mwi_8h.html" title="Asterisk MWI API. " alt="" coords="1649,80,1762,107"/>
<area shape="rect" id="node47" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2141,244,2267,271"/>
<area shape="rect" id="node48" href="../../d4/d25/stasis__message__router_8h.html" title="asterisk/stasis_message\l_router.h" alt="" coords="2128,155,2307,196"/>
<area shape="rect" id="node49" href="../../d3/df0/stasis__system_8h.html" title="asterisk/stasis_system.h" alt="" coords="2331,162,2509,189"/>
<area shape="rect" id="node50" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="2585,80,2762,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1453,543,1608,569"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="738,393,875,420"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1102,393,1237,420"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1457,617,1604,644"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1258,468,1401,495"/>
<area shape="rect" id="node25" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1617,319,1732,345"/>
<area shape="rect" id="node26" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1707,393,1845,420"/>
<area shape="rect" id="node27" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1569,468,1631,495"/>
<area shape="rect" id="node30" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1467,393,1581,420"/>
<area shape="rect" id="node32" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1920,393,2067,420"/>
<area shape="rect" id="node33" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2091,393,2248,420"/>
<area shape="rect" id="node34" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1261,393,1392,420"/>
<area shape="rect" id="node29" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1867,543,2013,569"/>
<area shape="rect" id="node36" href="../../d9/dab/select_8h.html" title="Bitfield expansions for ast_select. " alt="" coords="673,319,799,345"/>
<area shape="rect" id="node40" href="../../d6/d37/event__defs_8h.html" title="Generic event system. " alt="" coords="2421,393,2579,420"/>
<area shape="rect" id="node42" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1442,319,1593,345"/>
<area shape="rect" id="node44" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1272,244,1443,271"/>
<area shape="rect" id="node46" href="../../d1/d96/stasis__state_8h.html" title="Stasis State API. " alt="" coords="1837,162,2003,189"/>
</map>
</div>
</div>
<p><a href="../../d1/da4/res__corosync_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dcd/structcorosync__node.html">corosync_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A payload wrapper around a corosync ping event.  <a href="../../d1/d0e/structcorosync__ping__payload.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6fd5c58f3844d25432073535967f7609"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a6fd5c58f3844d25432073535967f7609">COROSYNC_IPC_BUFFER_SIZE</a>&#160;&#160;&#160;(8192 * 128)</td></tr>
<tr class="memdesc:a6fd5c58f3844d25432073535967f7609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Corosync ipc dispatch/request and reply size.  <a href="#a6fd5c58f3844d25432073535967f7609">More...</a><br /></td></tr>
<tr class="separator:a6fd5c58f3844d25432073535967f7609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8338beff945881da6648992c510ce0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a2b8338beff945881da6648992c510ce0">COROSYNC_POLL_TIMEOUT</a>&#160;&#160;&#160;(10 * 1000)</td></tr>
<tr class="memdesc:a2b8338beff945881da6648992c510ce0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout for Corosync's poll process.  <a href="#a2b8338beff945881da6648992c510ce0">More...</a><br /></td></tr>
<tr class="separator:a2b8338beff945881da6648992c510ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a496161007b0df370044eab0dfbeefb8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a496161007b0df370044eab0dfbeefb8d">corosync_pthread_create_background</a>(<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>,  <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>,  <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>,  <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>)</td></tr>
<tr class="memdesc:a496161007b0df370044eab0dfbeefb8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of pthread_create to ensure stack is large enough.  <a href="#a496161007b0df370044eab0dfbeefb8d">More...</a><br /></td></tr>
<tr class="separator:a496161007b0df370044eab0dfbeefb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a9bfa8c10a4adec48448b4c49ec5b3cb5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>, 
<a class="el" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a>
 }</td></tr>
<tr class="separator:a9bfa8c10a4adec48448b4c49ec5b3cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afa841eba34334f0f9f0a47377cda6af9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#afa841eba34334f0f9f0a47377cda6af9">AST_MODULE_INFO_STANDARD_EXTENDED</a> (<a class="el" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>, &quot;Corosync&quot;)</td></tr>
<tr class="separator:afa841eba34334f0f9f0a47377cda6af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a3bf558e82fd1dd0153ddcfa57d0698"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a1a3bf558e82fd1dd0153ddcfa57d0698">cfg_shutdown_cb</a> (corosync_cfg_handle_t <a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, corosync_cfg_shutdown_flags_t flags)</td></tr>
<tr class="separator:a1a3bf558e82fd1dd0153ddcfa57d0698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56064044d42fabf92e88abb2c4a61c79"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a56064044d42fabf92e88abb2c4a61c79">cleanup_module</a> (void)</td></tr>
<tr class="separator:a56064044d42fabf92e88abb2c4a61c79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a261d970bdf8c914f6c7e6e9d1482b139"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a261d970bdf8c914f6c7e6e9d1482b139">clear_node_cache</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a261d970bdf8c914f6c7e6e9d1482b139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94aeade47ce78a844f1616a8eb9ce9e9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a94aeade47ce78a844f1616a8eb9ce9e9">corosync_node_alloc</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="separator:a94aeade47ce78a844f1616a8eb9ce9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe8f3c002687ac75c6a0ad303b60a5b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#afe8f3c002687ac75c6a0ad303b60a5b7">corosync_node_cmp_fn</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:afe8f3c002687ac75c6a0ad303b60a5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887cd6d12b3ccc22f69b0767bb768f33"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a887cd6d12b3ccc22f69b0767bb768f33">corosync_node_hash_fn</a> (const void *obj, const int flags)</td></tr>
<tr class="separator:a887cd6d12b3ccc22f69b0767bb768f33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9328e8ba1fca3c27fb28c612f3878d9a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a9328e8ba1fca3c27fb28c612f3878d9a">corosync_ping</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a9328e8ba1fca3c27fb28c612f3878d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67cefc4a41280af0f6f1d215e9bf33e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a67cefc4a41280af0f6f1d215e9bf33e6">corosync_ping_payload_dtor</a> (void *obj)</td></tr>
<tr class="memdesc:a67cefc4a41280af0f6f1d215e9bf33e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for the <a class="el" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a> wrapper object.  <a href="#a67cefc4a41280af0f6f1d215e9bf33e6">More...</a><br /></td></tr>
<tr class="separator:a67cefc4a41280af0f6f1d215e9bf33e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a986e8aa9d44ae1311c9a9a88aca3c7f1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a986e8aa9d44ae1311c9a9a88aca3c7f1">corosync_ping_to_event</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="memdesc:a986e8aa9d44ae1311c9a9a88aca3c7f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a Corosync PING to a <a class="el" href="../../d5/d78/structast__event.html">ast_event</a>.  <a href="#a986e8aa9d44ae1311c9a9a88aca3c7f1">More...</a><br /></td></tr>
<tr class="separator:a986e8aa9d44ae1311c9a9a88aca3c7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b896d894a3a82b9b45093c362b5a016"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a4b896d894a3a82b9b45093c362b5a016">corosync_show_config</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a4b896d894a3a82b9b45093c362b5a016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74d5c36c4bca62648d2676f28564a1b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ae74d5c36c4bca62648d2676f28564a1b">corosync_show_members</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ae74d5c36c4bca62648d2676f28564a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35197c4919c3571d3274b2a5efd82be"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#af35197c4919c3571d3274b2a5efd82be">corosync_topic</a> (void)</td></tr>
<tr class="memdesc:af35197c4919c3571d3274b2a5efd82be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal accessor for our topic.  <a href="#af35197c4919c3571d3274b2a5efd82be">More...</a><br /></td></tr>
<tr class="separator:af35197c4919c3571d3274b2a5efd82be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac55ac8c3f69b903d154be343e4352bb4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ac55ac8c3f69b903d154be343e4352bb4">cpg_confchg_cb</a> (cpg_handle_t handle, const struct cpg_name *group_name, const struct cpg_address *member_list, size_t member_list_entries, const struct cpg_address *left_list, size_t left_list_entries, const struct cpg_address *joined_list, size_t joined_list_entries)</td></tr>
<tr class="separator:ac55ac8c3f69b903d154be343e4352bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034cf5915cfe7c8aab8b1247e2c9fa5a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a034cf5915cfe7c8aab8b1247e2c9fa5a">cpg_deliver_cb</a> (cpg_handle_t handle, const struct cpg_name *group_name, uint32_t nodeid, uint32_t pid, void *msg, size_t msg_len)</td></tr>
<tr class="separator:a034cf5915cfe7c8aab8b1247e2c9fa5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa3dff7e0bbd23d0ecd7583733a5de8"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#acaa3dff7e0bbd23d0ecd7583733a5de8">dispatch_thread_handler</a> (void *data)</td></tr>
<tr class="separator:acaa3dff7e0bbd23d0ecd7583733a5de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe66d84d6cf2a2825ca566539b959c02"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#afe66d84d6cf2a2825ca566539b959c02">dump_cache_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:afe66d84d6cf2a2825ca566539b959c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2260e705efddb84187baa0a834eb4c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#aec2260e705efddb84187baa0a834eb4c">load_config</a> (unsigned int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</td></tr>
<tr class="separator:aec2260e705efddb84187baa0a834eb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76475c45ad376eb4d91338dc1f03c6b1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a76475c45ad376eb4d91338dc1f03c6b1">load_general_config</a> (struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *cfg)</td></tr>
<tr class="separator:a76475c45ad376eb4d91338dc1f03c6b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb05bf7d9d21b39a16c8ef9c5ca2560e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#abb05bf7d9d21b39a16c8ef9c5ca2560e">publish_cluster_discovery_to_stasis</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="memdesc:abb05bf7d9d21b39a16c8ef9c5ca2560e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a received cluster discovery <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>.  <a href="#abb05bf7d9d21b39a16c8ef9c5ca2560e">More...</a><br /></td></tr>
<tr class="separator:abb05bf7d9d21b39a16c8ef9c5ca2560e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a54ed00d69c2801c8d1214e7d5b738e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a2a54ed00d69c2801c8d1214e7d5b738e">publish_cluster_discovery_to_stasis_full</a> (struct <a class="el" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *<a class="el" href="../../d5/da1/structnode.html">node</a>, int joined)</td></tr>
<tr class="memdesc:a2a54ed00d69c2801c8d1214e7d5b738e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish cluster discovery to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>.  <a href="#a2a54ed00d69c2801c8d1214e7d5b738e">More...</a><br /></td></tr>
<tr class="separator:a2a54ed00d69c2801c8d1214e7d5b738e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9f4a6300ec950e9efe11985f81ae9d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a2f9f4a6300ec950e9efe11985f81ae9d">publish_corosync_ping_to_stasis</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="memdesc:a2f9f4a6300ec950e9efe11985f81ae9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a Corosync ping to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>.  <a href="#a2f9f4a6300ec950e9efe11985f81ae9d">More...</a><br /></td></tr>
<tr class="separator:a2f9f4a6300ec950e9efe11985f81ae9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c009ae1af7e722965f7616b6ddfce4b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a7c009ae1af7e722965f7616b6ddfce4b">publish_device_state_to_stasis</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="memdesc:a7c009ae1af7e722965f7616b6ddfce4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a received device state <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>.  <a href="#a7c009ae1af7e722965f7616b6ddfce4b">More...</a><br /></td></tr>
<tr class="separator:a7c009ae1af7e722965f7616b6ddfce4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a070d5c094c48f371571ef286a6594e12"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a070d5c094c48f371571ef286a6594e12">publish_event_to_corosync</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="separator:a070d5c094c48f371571ef286a6594e12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9086f896a2530cfcd338646b7edc513"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#af9086f896a2530cfcd338646b7edc513">publish_mwi_to_stasis</a> (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="el" href="../../df/d7d/structevent.html">event</a>)</td></tr>
<tr class="memdesc:af9086f896a2530cfcd338646b7edc513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish a received MWI <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>.  <a href="#af9086f896a2530cfcd338646b7edc513">More...</a><br /></td></tr>
<tr class="separator:af9086f896a2530cfcd338646b7edc513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a23dde9e7ce6a76794da1e0a86ff9a6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a2a23dde9e7ce6a76794da1e0a86ff9a6">publish_to_corosync</a> (struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a2a23dde9e7ce6a76794da1e0a86ff9a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7546cbf83f68d818041b924793ccf2f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a> (void)</td></tr>
<tr class="memdesc:a7546cbf83f68d818041b924793ccf2f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs the cluster of our EID and our IP addresses.  <a href="#a7546cbf83f68d818041b924793ccf2f4">More...</a><br /></td></tr>
<tr class="separator:a7546cbf83f68d818041b924793ccf2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af50dd1b4e00c612211407e7de4591908"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#af50dd1b4e00c612211407e7de4591908">set_event</a> (const char *event_type, int pubsub)</td></tr>
<tr class="separator:af50dd1b4e00c612211407e7de4591908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad408dba1837441485eda168badb6b4e5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ad408dba1837441485eda168badb6b4e5">stasis_message_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:ad408dba1837441485eda168badb6b4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc7da203fefbdc221ad4ae2e8cae307"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#acbc7da203fefbdc221ad4ae2e8cae307">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a> (corosync_ping_message_type,.to_event=<a class="el" href="../../d1/da4/res__corosync_8c.html#a986e8aa9d44ae1311c9a9a88aca3c7f1">corosync_ping_to_event</a>,)</td></tr>
<tr class="separator:acbc7da203fefbdc221ad4ae2e8cae307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a706be3bdc15d2bbdf6fdda692110695a"><td class="memItemLeft" align="right" valign="top">static corosync_cfg_callbacks_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a706be3bdc15d2bbdf6fdda692110695a">cfg_callbacks</a></td></tr>
<tr class="separator:a706be3bdc15d2bbdf6fdda692110695a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace59e73cd525ae17e77397b0cc7f7302"><td class="memItemLeft" align="right" valign="top">static corosync_cfg_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></td></tr>
<tr class="separator:ace59e73cd525ae17e77397b0cc7f7302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fe8a3baa31ec0ce2babf80221c83af0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a></td></tr>
<tr class="memdesc:a9fe8a3baa31ec0ce2babf80221c83af0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The internal topic used for message forwarding and pings.  <a href="#a9fe8a3baa31ec0ce2babf80221c83af0">More...</a><br /></td></tr>
<tr class="separator:a9fe8a3baa31ec0ce2babf80221c83af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45aa28f4018bd7db0dd3ca62d0a8006a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a> []</td></tr>
<tr class="separator:a45aa28f4018bd7db0dd3ca62d0a8006a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6238fc4bdd5ba467892a17d4f3efdcd3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0</td></tr>
<tr class="memdesc:a6238fc4bdd5ba467892a17d4f3efdcd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Join to corosync.  <a href="#a6238fc4bdd5ba467892a17d4f3efdcd3">More...</a><br /></td></tr>
<tr class="separator:a6238fc4bdd5ba467892a17d4f3efdcd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28e053137a8d65ba892a4706c47dc901"><td class="memItemLeft" align="right" valign="top">static cpg_callbacks_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a28e053137a8d65ba892a4706c47dc901">cpg_callbacks</a></td></tr>
<tr class="separator:a28e053137a8d65ba892a4706c47dc901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdba8f2f543c90d8ac6c25ec200e8b4b"><td class="memItemLeft" align="right" valign="top">static cpg_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></td></tr>
<tr class="separator:afdba8f2f543c90d8ac6c25ec200e8b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d80b09d3bff65b5c0f15cfc170a1100"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a55935aecf1002b1dfa1324bc3799b67c"><td class="memItemLeft" >&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a> [2]</td></tr>
<tr class="separator:a55935aecf1002b1dfa1324bc3799b67c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2465fd4497a7402ad72da7d6e03f9934"><td class="memItemLeft" >&#160;&#160;&#160;pthread_t&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a></td></tr>
<tr class="separator:a2465fd4497a7402ad72da7d6e03f9934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a111277a0849f92b793ed6aa1efe54462"><td class="memItemLeft" >&#160;&#160;&#160;unsigned int&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>:1</td></tr>
<tr class="separator:a111277a0849f92b793ed6aa1efe54462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d80b09d3bff65b5c0f15cfc170a1100"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a></td></tr>
<tr class="separator:a9d80b09d3bff65b5c0f15cfc170a1100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39443c0266e47741a697b5361d4dd178"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:af14eb49a577cdd0a7bb655e04b24ff95"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a> *(*&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a> )(void)</td></tr>
<tr class="separator:af14eb49a577cdd0a7bb655e04b24ff95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad7311ccb92419767496229086727ab"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *(*&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a> )(void)</td></tr>
<tr class="separator:a8ad7311ccb92419767496229086727ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8f80d37794cde9472343e4487ba3eb"><td class="memItemLeft" >&#160;&#160;&#160;const char *&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></td></tr>
<tr class="separator:a8f8f80d37794cde9472343e4487ba3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4002959b64099e84d20e09e38c2e51e"><td class="memItemLeft" >&#160;&#160;&#160;unsigned char&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></td></tr>
<tr class="separator:aa4002959b64099e84d20e09e38c2e51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469eebfff8939f8bc8704c0bcae6e66c"><td class="memItemLeft" >&#160;&#160;&#160;unsigned char&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a469eebfff8939f8bc8704c0bcae6e66c">publish_default</a></td></tr>
<tr class="separator:a469eebfff8939f8bc8704c0bcae6e66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22b857eb319e178e1fa65c95359e6ea"><td class="memItemLeft" >&#160;&#160;&#160;void(*&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#ab22b857eb319e178e1fa65c95359e6ea">publish_to_stasis</a> )(struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *)</td></tr>
<tr class="separator:ab22b857eb319e178e1fa65c95359e6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e51289dd0fc7415cee40e7a57b49fdf"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a> *&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></td></tr>
<tr class="separator:a8e51289dd0fc7415cee40e7a57b49fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84fa7112345dca92d94860c1dcef8ba6"><td class="memItemLeft" >&#160;&#160;&#160;unsigned char&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a></td></tr>
<tr class="separator:a84fa7112345dca92d94860c1dcef8ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961983356dc2cf428ccf4be9974ef04d"><td class="memItemLeft" >&#160;&#160;&#160;unsigned char&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#a961983356dc2cf428ccf4be9974ef04d">subscribe_default</a></td></tr>
<tr class="separator:a961983356dc2cf428ccf4be9974ef04d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f6e8d39cd90b46e767e2b5bc57ee9c"><td class="memItemLeft" >&#160;&#160;&#160;struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *(*&#160;&#160;&#160;<a class="el" href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a> )(void)</td></tr>
<tr class="separator:ad2f6e8d39cd90b46e767e2b5bc57ee9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39443c0266e47741a697b5361d4dd178"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a> []</td></tr>
<tr class="separator:a39443c0266e47741a697b5361d4dd178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd18833e4fb06f806929bd6c7e85c86"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aabd18833e4fb06f806929bd6c7e85c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9634e6c1639fbb1a16ee2624101f490"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:af9634e6c1639fbb1a16ee2624101f490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8fad2480add5654ffb1fc4047c7940"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a></td></tr>
<tr class="memdesc:a2d8fad2480add5654ffb1fc4047c7940"><td class="mdescLeft">&#160;</td><td class="mdescRight">All the nodes that we're aware of.  <a href="#a2d8fad2480add5654ffb1fc4047c7940">More...</a><br /></td></tr>
<tr class="separator:a2d8fad2480add5654ffb1fc4047c7940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></td></tr>
<tr class="memdesc:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> message router.  <a href="#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">More...</a><br /></td></tr>
<tr class="separator:a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>module publishes <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> representations of information to other Asterisk instances in a cluster.</p><ul>
<li>Security event represent their event types and data using this system.</li>
<li>Theoretically, any <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> message can use this system to pass information around in a binary format.</li>
</ul>
<p>Events have an associated event type, as well as information elements. The information elements are the meta data that go along with each event. For example, in the case of message waiting indication, the event type is MWI, and each MWI event contains at least three information elements: the mailbox, the number of new messages, and the number of old messages.</p>
<dl class="section author"><dt>Author</dt><dd>Russell Bryant <a href="#" onclick="location.href='mai'+'lto:'+'rus'+'se'+'ll@'+'ru'+'sse'+'ll'+'bry'+'an'+'t.n'+'et'; return false;">russe<span style="display: none;">.nosp@m.</span>ll@r<span style="display: none;">.nosp@m.</span>ussel<span style="display: none;">.nosp@m.</span>lbry<span style="display: none;">.nosp@m.</span>ant.n<span style="display: none;">.nosp@m.</span>et</a></dd></dl>
<p>This module is based on and replaces the previous res_ais module. </p>

<p class="definition">Definition in file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6fd5c58f3844d25432073535967f7609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fd5c58f3844d25432073535967f7609">&#9670;&nbsp;</a></span>COROSYNC_IPC_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COROSYNC_IPC_BUFFER_SIZE&#160;&#160;&#160;(8192 * 128)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Corosync ipc dispatch/request and reply size. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00089">89</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="a2b8338beff945881da6648992c510ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b8338beff945881da6648992c510ce0">&#9670;&nbsp;</a></span>COROSYNC_POLL_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COROSYNC_POLL_TIMEOUT&#160;&#160;&#160;(10 * 1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timeout for Corosync's poll process. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00055">55</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>.</p>

</div>
</div>
<a id="a496161007b0df370044eab0dfbeefb8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a496161007b0df370044eab0dfbeefb8d">&#9670;&nbsp;</a></span>corosync_pthread_create_background</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define corosync_pthread_create_background</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="../../d5/d60/utils_8h.html#af740ee3fba7768010783e3faaf5aeb12">ast_pthread_create_stack</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>, <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>,               \</div><div class="line">      (<a class="code" href="../../d2/dae/ooh323cDriver_8c.html#a291a8182b1abda8d1df13469fe92ee13">AST_BACKGROUND_STACKSIZE</a> + (3 * <a class="code" href="../../d1/da4/res__corosync_8c.html#a6fd5c58f3844d25432073535967f7609">COROSYNC_IPC_BUFFER_SIZE</a>)),   \</div><div class="line">      __FILE__, __FUNCTION__, __LINE__, #<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>)</div><div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6fd5c58f3844d25432073535967f7609"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6fd5c58f3844d25432073535967f7609">COROSYNC_IPC_BUFFER_SIZE</a></div><div class="ttdeci">#define COROSYNC_IPC_BUFFER_SIZE</div><div class="ttdoc">Corosync ipc dispatch/request and reply size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00089">res_corosync.c:89</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="ooh323cDriver_8c_html_a291a8182b1abda8d1df13469fe92ee13"><div class="ttname"><a href="../../d2/dae/ooh323cDriver_8c.html#a291a8182b1abda8d1df13469fe92ee13">AST_BACKGROUND_STACKSIZE</a></div><div class="ttdeci">#define AST_BACKGROUND_STACKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dae/ooh323cDriver_8c_source.html#l00026">ooh323cDriver.c:26</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="utils_8h_html_af740ee3fba7768010783e3faaf5aeb12"><div class="ttname"><a href="../../d5/d60/utils_8h.html#af740ee3fba7768010783e3faaf5aeb12">ast_pthread_create_stack</a></div><div class="ttdeci">int ast_pthread_create_stack(pthread_t *thread, pthread_attr_t *attr, void *(*start_routine)(void *), void *data, size_t stacksize, const char *file, const char *caller, int line, const char *start_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01446">main/utils.c:1446</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
<p>Version of pthread_create to ensure stack is large enough. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00092">92</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a9bfa8c10a4adec48448b4c49ec5b3cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bfa8c10a4adec48448b4c49ec5b3cb5">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5"></a>PUBLISH&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832"></a>SUBSCRIBE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01148">1148</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;     {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>,</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a>,</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;};</div><div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01150">res_corosync.c:1150</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01149">res_corosync.c:1149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="afa841eba34334f0f9f0a47377cda6af9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa841eba34334f0f9f0a47377cda6af9">&#9670;&nbsp;</a></span>AST_MODULE_INFO_STANDARD_EXTENDED()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_MODULE_INFO_STANDARD_EXTENDED </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Corosync&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01433">unload_module()</a>.</p>

</div>
</div>
<a id="a1a3bf558e82fd1dd0153ddcfa57d0698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a3bf558e82fd1dd0153ddcfa57d0698">&#9670;&nbsp;</a></span>cfg_shutdown_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cfg_shutdown_cb </td>
          <td>(</td>
          <td class="paramtype">corosync_cfg_handle_t&#160;</td>
          <td class="paramname"><em>cfg_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">corosync_cfg_shutdown_flags_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00479">479</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a56064044d42fabf92e88abb2c4a61c79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56064044d42fabf92e88abb2c4a61c79">&#9670;&nbsp;</a></span>cleanup_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cleanup_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">1249</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01592">ast_carefulwrite()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00236">ast_rwlock_trywrlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00246">cache_fn</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00623">clear_node_cache()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00062">corosync_node_joined</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">cpg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">event_types_lock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00247">message_type_fn</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00239">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache_dump_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00358">stasis_message_router_remove()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router_unsubscribe_and_join()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00243">subscribe</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00245">topic_fn</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01433">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="comment">/* Unsubscribe all topic forwards and cancel all message routes */</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *messages = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;         <span class="keywordtype">int</span> messages_count;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a> = 0;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cleanup_module wrlock\n&quot;</span>);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;         subscribe = <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].subscribe;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a3c1f3127c63c6a46154167fbd2e50db9">stasis_message_router_remove</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>());</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].publish = 0;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].subscribe = 0;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cleanup_module unlock\n&quot;</span>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         <span class="keywordflow">if</span> (subscribe &amp;&amp; <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a> &amp;&amp; <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>) {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            messages = <a class="code" href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a>(), <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>());</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            messages_count = <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(messages);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Clearing %i events of type %s of other nodes from stasis cache.\n&quot;</span>, messages_count, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(messages, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a261d970bdf8c914f6c7e6e9d1482b139">clear_node_cache</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a>());</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Cleared events of type %s from stasis cache.\n&quot;</span>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(messages, -1, <span class="stringliteral">&quot;Dispose of flushed cache&quot;</span>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;         }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a>) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a>, -1, <span class="stringliteral">&quot;Dispose of topic on cleanup&quot;</span>);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(corosync_ping_message_type);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.id != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordtype">char</span> meepmeep = <span class="charliteral">&#39;x&#39;</span>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.stop = 1;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a38faf2987c375335b2773964aabf69b3">ast_carefulwrite</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[1], &amp;meepmeep, 1,</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;               5000) == -1) {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to write to pipe: %s (%d)\n&quot;</span>,</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;               strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>), <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      pthread_join(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.id, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[0] != -1) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      close(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[0]);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[0] = -1;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[1] != -1) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      close(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[1]);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[1] = -1;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cleanup_module wrlock\n&quot;</span>);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a> &amp;&amp; (cs_err = cpg_finalize(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>)) != CS_OK) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to finalize cpg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a> = 0;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a> &amp;&amp; (cs_err = corosync_cfg_finalize(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>)) != CS_OK) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to finalize cfg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      }</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a> = 0;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cleanup_module unlock\n&quot;</span>);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;}</div><div class="ttc" id="stasis_8h_html_ab54f6037e019ae477c15e90e52904d09"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ab54f6037e019ae477c15e90e52904d09">stasis_cache_dump_all</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump_all(struct stasis_cache *cache, struct stasis_message_type *type)</div><div class="ttdoc">Dump all entity items from the cache to a subscription. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00757">stasis_cache.c:757</a></div></div>
<div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afdba8f2f543c90d8ac6c25ec200e8b4b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></div><div class="ttdeci">static cpg_handle_t cpg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00283">res_corosync.c:283</a></div></div>
<div class="ttc" id="utils_8h_html_a38faf2987c375335b2773964aabf69b3"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a38faf2987c375335b2773964aabf69b3">ast_carefulwrite</a></div><div class="ttdeci">int ast_carefulwrite(int fd, char *s, int len, int timeoutms)</div><div class="ttdoc">Try to write string, but wait no more than ms milliseconds before timing out. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01592">main/utils.c:1592</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aabd18833e4fb06f806929bd6c7e85c86"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a></div><div class="ttdeci">static ast_rwlock_t event_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00051">res_corosync.c:51</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a261d970bdf8c914f6c7e6e9d1482b139"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a261d970bdf8c914f6c7e6e9d1482b139">clear_node_cache</a></div><div class="ttdeci">static int clear_node_cache(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00623">res_corosync.c:623</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a641f77c471ff127e8586247ff6c0d64c"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a641f77c471ff127e8586247ff6c0d64c">stasis_message_router_unsubscribe_and_join</a></div><div class="ttdeci">void stasis_message_router_unsubscribe_and_join(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic, blocking until the final message has been processed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00269">stasis_message_router.c:269</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00239">res_corosync.c:239</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="res__corosync_8c_html_a6238fc4bdd5ba467892a17d4f3efdcd3"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a></div><div class="ttdeci">static int corosync_node_joined</div><div class="ttdoc">Join to corosync. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00062">res_corosync.c:62</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a3c1f3127c63c6a46154167fbd2e50db9"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a3c1f3127c63c6a46154167fbd2e50db9">stasis_message_router_remove</a></div><div class="ttdeci">void stasis_message_router_remove(struct stasis_message_router *router, struct stasis_message_type *message_type)</div><div class="ttdoc">Remove a route from a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00358">stasis_message_router.c:358</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ad2f6e8d39cd90b46e767e2b5bc57ee9c"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a></div><div class="ttdeci">struct stasis_topic *(* topic_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00245">res_corosync.c:245</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a84fa7112345dca92d94860c1dcef8ba6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a></div><div class="ttdeci">unsigned char subscribe</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00243">res_corosync.c:243</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="lock_8h_html_ab8959e56195d995bea0ea495431179e4"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a></div><div class="ttdeci">#define ast_rwlock_trywrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00236">lock.h:236</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Our Stasis Message Bus API message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00071">res_corosync.c:71</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9fe8a3baa31ec0ce2babf80221c83af0"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a></div><div class="ttdeci">static struct stasis_topic * corosync_aggregate_topic</div><div class="ttdoc">The internal topic used for message forwarding and pings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00068">res_corosync.c:68</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8ad7311ccb92419767496229086727ab"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a></div><div class="ttdeci">struct stasis_message_type *(* message_type_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00247">res_corosync.c:247</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9d80b09d3bff65b5c0f15cfc170a1100"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a></div><div class="ttdeci">static struct @458 dispatch_thread</div></div>
<div class="ttc" id="res__corosync_8c_html_af14eb49a577cdd0a7bb655e04b24ff95"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a></div><div class="ttdeci">struct stasis_cache *(* cache_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00246">res_corosync.c:246</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2d8fad2480add5654ffb1fc4047c7940"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a></div><div class="ttdeci">static struct ao2_container * nodes</div><div class="ttdoc">All the nodes that we&amp;#39;re aware of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00065">res_corosync.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a261d970bdf8c914f6c7e6e9d1482b139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a261d970bdf8c914f6c7e6e9d1482b139">&#9670;&nbsp;</a></span>clear_node_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int clear_node_cache </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00623">623</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache_clear_create()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00179">stasis_message_eid()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *cached_msg = obj;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *topic = arg;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *msg_eid;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordflow">if</span> (!cached_msg) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   msg_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a>(cached_msg);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordflow">if</span>(msg_eid &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>, msg_eid))</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      msg = <a class="code" href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a>(cached_msg);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(topic, msg);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(msg);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div><div class="ttc" id="structstasis__topic_html"><div class="ttname"><a href="../../d9/d1d/structstasis__topic.html">stasis_topic</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00372">stasis.c:372</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="stasis_8h_html_a169e12055004ecf0ecc355b3e3e1f218"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a169e12055004ecf0ecc355b3e3e1f218">stasis_cache_clear_create</a></div><div class="ttdeci">struct stasis_message * stasis_cache_clear_create(struct stasis_message *message)</div><div class="ttdoc">A message which instructs the caching topic to remove an entry from its cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00778">stasis_cache.c:778</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="stasis_8h_html_ae5dc2372860d977cc3e2a8e9af24aeaf"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ae5dc2372860d977cc3e2a8e9af24aeaf">stasis_message_eid</a></div><div class="ttdeci">const struct ast_eid * stasis_message_eid(const struct stasis_message *msg)</div><div class="ttdoc">Get the entity id for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00179">stasis_message.c:179</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a94aeade47ce78a844f1616a8eb9ce9e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94aeade47ce78a844f1616a8eb9ce9e9">&#9670;&nbsp;</a></span>corosync_node_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/dcd/structcorosync__node.html">corosync_node</a>* corosync_node_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00097">97</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00085">corosync_node::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00302">ast_event_get_ie_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00293">ast_event_get_ie_uint()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00281">AST_EVENT_IE_LOCAL_ADDR</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00313">AST_EVENT_IE_NODE_ID</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00081">corosync_node::id</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">PARSE_PORT_IGNORE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00351">publish_cluster_discovery_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *<a class="code" href="../../d5/da1/structnode.html">node</a>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   node = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*node), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordflow">if</span> (!node) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   memcpy(&amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">eid</a>, (<span class="keyword">struct</span> <a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>), <span class="keyword">sizeof</span>(node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">eid</a>));</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(&amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a10838452c09fae7f0e3de86581d85379">addr</a>, <a class="code" href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e">AST_EVENT_IE_LOCAL_ADDR</a>), <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordflow">return</span> node;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">include/asterisk/config.h:1133</a></div></div>
<div class="ttc" id="structnode_html"><div class="ttname"><a href="../../d5/da1/structnode.html">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2b/test__heap_8c_source.html#l00038">test_heap.c:38</a></div></div>
<div class="ttc" id="structcorosync__node_html_aa1d7e6e6eb6d297e62f2d79dbdfaafb4"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">corosync_node::eid</a></div><div class="ttdeci">struct ast_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00083">res_corosync.c:83</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="structcorosync__node_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">corosync_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00081">res_corosync.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e">AST_EVENT_IE_LOCAL_ADDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00281">event_defs.h:281</a></div></div>
<div class="ttc" id="structcorosync__node_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a10838452c09fae7f0e3de86581d85379">corosync_node::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00085">res_corosync.c:85</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structcorosync__node_html"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html">corosync_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00079">res_corosync.c:79</a></div></div>
<div class="ttc" id="event_8h_html_a317f6947b933acd0da82df6e9a4672e5"><div class="ttname"><a href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a></div><div class="ttdeci">uint32_t ast_event_get_ie_uint(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has an integer payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00293">event.c:293</a></div></div>
<div class="ttc" id="event_8h_html_a0cfdd21162f4795714da583c31477151"><div class="ttname"><a href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a></div><div class="ttdeci">const char * ast_event_get_ie_str(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a string payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00302">event.c:302</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a></div><div class="ttdoc">Cluster node ID Used by: Corosync Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00313">event_defs.h:313</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe8f3c002687ac75c6a0ad303b60a5b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe8f3c002687ac75c6a0ad303b60a5b7">&#9670;&nbsp;</a></span>corosync_node_cmp_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int corosync_node_cmp_fn </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00133">133</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00081">corosync_node::id</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *left = obj;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *right = arg;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">int</span> *<span class="keywordtype">id</span> = arg;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordtype">id</span> = &amp;right-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      cmp = (left-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> == *<a class="code" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      cmp = (left-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> == right-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="comment">/* Sort can only work on something with a full or partial key. */</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      cmp = 1;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordflow">return</span> cmp ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> : 0;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcorosync__node_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">corosync_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00081">res_corosync.c:81</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2465fd4497a7402ad72da7d6e03f9934"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a></div><div class="ttdeci">pthread_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00275">res_corosync.c:275</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structcorosync__node_html"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html">corosync_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00079">res_corosync.c:79</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a887cd6d12b3ccc22f69b0767bb768f33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887cd6d12b3ccc22f69b0767bb768f33">&#9670;&nbsp;</a></span>corosync_node_hash_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int corosync_node_hash_fn </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00113">113</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00081">corosync_node::id</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *<a class="code" href="../../d5/da1/structnode.html">node</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">int</span> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordtype">id</span> = obj;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      node = obj;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordtype">id</span> = &amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordflow">return</span> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="ttc" id="structnode_html"><div class="ttname"><a href="../../d5/da1/structnode.html">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2b/test__heap_8c_source.html#l00038">test_heap.c:38</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structcorosync__node_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">corosync_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00081">res_corosync.c:81</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2465fd4497a7402ad72da7d6e03f9934"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a></div><div class="ttdeci">pthread_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00275">res_corosync.c:275</a></div></div>
<div class="ttc" id="structcorosync__node_html"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html">corosync_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00079">res_corosync.c:79</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9328e8ba1fca3c27fb28c612f3878d9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9328e8ba1fca3c27fb28c612f3878d9a">&#9670;&nbsp;</a></span>corosync_ping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* corosync_ping </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01059">1059</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00524">ast_event_destroy()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00070">AST_EVENT_IE_END</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00402">ast_event_new()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00060">AST_EVENT_PING</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;{</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;corosync ping&quot;</span>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;         <span class="stringliteral">&quot;Usage: corosync ping\n&quot;</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         <span class="stringliteral">&quot;       Send a test ping to the cluster.\n&quot;</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         <span class="stringliteral">&quot;A NOTICE will be in the log for every ping received\n&quot;</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <span class="stringliteral">&quot;on a server.\n  If you send a ping, you should see a NOTICE\n&quot;</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;         <span class="stringliteral">&quot;in the log for every server in the cluster.\n&quot;</span>;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;   <span class="comment">/* no completion */</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a>(<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a>);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">if</span> (!event) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>].publish_to_stasis(event);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <a class="code" href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a>(event);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;}</div><div class="ttc" id="structast__event_html"><div class="ttname"><a href="../../d5/d78/structast__event.html">ast_event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00081">event.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00060">event_defs.h:60</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="event_8h_html_a50b34e0161630dbbc0880a06eb78ad7a"><div class="ttname"><a href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a></div><div class="ttdeci">void ast_event_destroy(struct ast_event *event)</div><div class="ttdoc">Destroy an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00524">event.c:524</a></div></div>
<div class="ttc" id="event_8h_html_afb4a2a00de28bb0733037060da8c4bac"><div class="ttname"><a href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a></div><div class="ttdeci">struct ast_event * ast_event_new(enum ast_event_type event_type,...)</div><div class="ttdoc">Create a new event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00402">event.c:402</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00070">event_defs.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67cefc4a41280af0f6f1d215e9bf33e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67cefc4a41280af0f6f1d215e9bf33e6">&#9670;&nbsp;</a></span>corosync_ping_payload_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void corosync_ping_payload_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor for the <a class="el" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a> wrapper object. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00167">167</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00163">corosync_ping_payload::event</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00204">publish_corosync_ping_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a> *payload = obj;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(payload-&gt;<a class="code" href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">event</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="ttc" id="structcorosync__ping__payload_html_a29023d239b1af1921483e7904625ec48"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">corosync_ping_payload::event</a></div><div class="ttdeci">struct ast_event * event</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00163">res_corosync.c:163</a></div></div>
<div class="ttc" id="structcorosync__ping__payload_html"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a></div><div class="ttdoc">A payload wrapper around a corosync ping event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00161">res_corosync.c:161</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a986e8aa9d44ae1311c9a9a88aca3c7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a986e8aa9d44ae1311c9a9a88aca3c7f1">&#9670;&nbsp;</a></span>corosync_ping_to_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a>* corosync_ping_to_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a Corosync PING to a <a class="el" href="../../d5/d78/structast__event.html">ast_event</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00175">175</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00070">AST_EVENT_IE_END</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00330">AST_EVENT_IE_PLTYPE_RAW</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00402">ast_event_new()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00060">AST_EVENT_PING</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00163">corosync_ping_payload::event</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c.html#acbc7da203fefbdc221ad4ae2e8cae307">STASIS_MESSAGE_TYPE_DEFN_LOCAL()</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a> *payload;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   payload = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordflow">if</span> (!payload-&gt;<a class="code" href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">event</a>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(payload-&gt;<a class="code" href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">event</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a>(<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef">AST_EVENT_IE_PLTYPE_RAW</a>, event_eid, <span class="keyword">sizeof</span>(*event_eid),</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">return</span> event;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div><div class="ttc" id="structast__event_html"><div class="ttname"><a href="../../d5/d78/structast__event.html">ast_event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00081">event.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00060">event_defs.h:60</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="event__defs_8h_html_a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef">AST_EVENT_IE_PLTYPE_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00330">event_defs.h:330</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structcorosync__ping__payload_html_a29023d239b1af1921483e7904625ec48"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">corosync_ping_payload::event</a></div><div class="ttdeci">struct ast_event * event</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00163">res_corosync.c:163</a></div></div>
<div class="ttc" id="structcorosync__ping__payload_html"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a></div><div class="ttdoc">A payload wrapper around a corosync ping event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00161">res_corosync.c:161</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="event_8h_html_afb4a2a00de28bb0733037060da8c4bac"><div class="ttname"><a href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a></div><div class="ttdeci">struct ast_event * ast_event_new(enum ast_event_type event_type,...)</div><div class="ttdoc">Create a new event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00402">event.c:402</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00070">event_defs.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b896d894a3a82b9b45093c362b5a016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b896d894a3a82b9b45093c362b5a016">&#9670;&nbsp;</a></span>corosync_show_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* corosync_show_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01094">1094</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">event_types_lock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00243">subscribe</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;{</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;corosync show config&quot;</span>;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;         <span class="stringliteral">&quot;Usage: corosync show config\n&quot;</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         <span class="stringliteral">&quot;       Show configuration loaded from res_corosync.conf\n&quot;</span>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;   <span class="comment">/* no completion */</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;               <span class="stringliteral">&quot;=== res_corosync config =====================================\n&quot;</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;               <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;corosync_show_config rdlock\n&quot;</span>);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ==&gt; Publishing Event Type: %s\n&quot;</span>,</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;               <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].name);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a>) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ==&gt; Subscribing to Event Type: %s\n&quot;</span>,</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;               <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].name);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;corosync_show_config unlock\n&quot;</span>);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;===\n&quot;</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                  <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                  <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aabd18833e4fb06f806929bd6c7e85c86"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a></div><div class="ttdeci">static ast_rwlock_t event_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00051">res_corosync.c:51</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a84fa7112345dca92d94860c1dcef8ba6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a></div><div class="ttdeci">unsigned char subscribe</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00243">res_corosync.c:243</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae74d5c36c4bca62648d2676f28564a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74d5c36c4bca62648d2676f28564a1b">&#9670;&nbsp;</a></span>corosync_show_members()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* corosync_show_members </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00965">965</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00235">ast_rwlock_tryrdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">cpg_handle</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   cpg_iteration_handle_t cpg_iter;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keyword">struct </span>cpg_iteration_description_t cpg_desc;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;corosync show members&quot;</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         <span class="stringliteral">&quot;Usage: corosync show members\n&quot;</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;         <span class="stringliteral">&quot;       Show corosync cluster members\n&quot;</span>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;   <span class="comment">/* no completion */</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;corosync_show_members rdlock\n&quot;</span>);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      cs_err = cpg_iteration_initialize(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, CPG_ITERATION_ALL, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;cpg_iter);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">if</span> (cs_err != CS_OK) {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Failed to initialize CPG iterator: %u.\n&quot;</span>, cs_err);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;         cpg_iteration_finalize(cpg_iter);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;corosync_show_members unlock\n&quot;</span>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;               <span class="stringliteral">&quot;=== Cluster members =========================================\n&quot;</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;               <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">for</span> (i = 1, cs_err = cpg_iteration_next(cpg_iter, &amp;cpg_desc);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            cs_err == CS_OK;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            cs_err = cpg_iteration_next(cpg_iter, &amp;cpg_desc), i++) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="preprocessor">   #ifdef HAVE_COROSYNC_CFG_STATE_TRACK</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;         corosync_cfg_node_address_t addrs[8];</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;         <span class="keywordtype">int</span> num_addrs = 0;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="preprocessor">   #endif</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== Node %u\n&quot;</span>, i);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== --&gt; Group: %s\n&quot;</span>, cpg_desc.group.value);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">   #ifdef HAVE_COROSYNC_CFG_STATE_TRACK</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">         * Corosync 2.x cfg lib needs to allocate 1M on stack after calling</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">         * corosync_cfg_get_node_addrs. netconsole thread has allocated only 0.5M</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">         * resulting in crash.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;         cs_err = corosync_cfg_get_node_addrs(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, cpg_desc.nodeid,</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;               <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(addrs), &amp;num_addrs, addrs);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;         <span class="keywordflow">if</span> (cs_err != CS_OK) {</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get node addresses\n&quot;</span>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="keywordflow">for</span> (j = 0; j &lt; num_addrs; j++) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keyword">struct </span>sockaddr *sa = (<span class="keyword">struct </span>sockaddr *) addrs[j].<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            <span class="keywordtype">size_t</span> sa_len = (size_t) addrs[j].address_length;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128];</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            getnameinfo(sa, sa_len, buf, <span class="keyword">sizeof</span>(buf), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, NI_NUMERICHOST);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== --&gt; Address %u: %s\n&quot;</span>, j + 1, buf);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="preprocessor">   #else</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== --&gt; Nodeid: %&quot;</span>PRIu32<span class="stringliteral">&quot;\n&quot;</span>, cpg_desc.nodeid);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="preprocessor">   #endif</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;===\n&quot;</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;               <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      cpg_iteration_finalize(cpg_iter);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;corosync_show_members unlock\n&quot;</span>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Failed to initialize CPG iterator: initializing CPG.\n&quot;</span>);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afdba8f2f543c90d8ac6c25ec200e8b4b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></div><div class="ttdeci">static cpg_handle_t cpg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00283">res_corosync.c:283</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="lock_8h_html_af65c888941c741acb2e2078d5d078c49"><div class="ttname"><a href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a></div><div class="ttdeci">#define ast_rwlock_tryrdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00235">lock.h:235</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af35197c4919c3571d3274b2a5efd82be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35197c4919c3571d3274b2a5efd82be">&#9670;&nbsp;</a></span>corosync_topic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* corosync_topic </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal accessor for our topic. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00074">74</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00068">corosync_aggregate_topic</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00204">publish_corosync_ping_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;{</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_a9fe8a3baa31ec0ce2babf80221c83af0"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a></div><div class="ttdeci">static struct stasis_topic * corosync_aggregate_topic</div><div class="ttdoc">The internal topic used for message forwarding and pings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00068">res_corosync.c:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac55ac8c3f69b903d154be343e4352bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac55ac8c3f69b903d154be343e4352bb4">&#9670;&nbsp;</a></span>cpg_confchg_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cpg_confchg_cb </td>
          <td>(</td>
          <td class="paramtype">cpg_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpg_name *&#160;</td>
          <td class="paramname"><em>group_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpg_address *&#160;</td>
          <td class="paramname"><em>member_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>member_list_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpg_address *&#160;</td>
          <td class="paramname"><em>left_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>left_list_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpg_address *&#160;</td>
          <td class="paramname"><em>joined_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>joined_list_entries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">647</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00034">ao2_container_count()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00246">cache_fn</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00623">clear_node_cache()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00610">dump_cache_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">event_types_lock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00081">corosync_node::id</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00247">message_type_fn</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00239">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01048">OBJ_NODATA</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">publish_cluster_discovery_to_stasis_full()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00718">stasis_cache_dump_by_eid()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00243">subscribe</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00245">topic_fn</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00432">publish_device_state_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; left_list_entries; i++) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span>cpg_address *cpg_node = &amp;left_list[i];</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a>* <a class="code" href="../../d5/da1/structnode.html">node</a>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      node = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>, &amp;cpg_node-&gt;nodeid, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (!node) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); j++) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *messages;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         <span class="keywordtype">int</span> messages_count;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb rdlock\n&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a>) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a> || !<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;         }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         messages = <a class="code" href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a>(), <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>(), &amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">eid</a>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         messages_count = <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(messages);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Clearing %i events of type %s of node %i from stasis cache.\n&quot;</span>, messages_count, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(messages, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a261d970bdf8c914f6c7e6e9d1482b139">clear_node_cache</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a>());</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Cleared events of type %s from stasis cache.\n&quot;</span>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[j].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(messages, -1, <span class="stringliteral">&quot;Dispose of flushed cache&quot;</span>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a2a54ed00d69c2801c8d1214e7d5b738e">publish_cluster_discovery_to_stasis_full</a>(node, 0);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(node, -1);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="comment">/* If any new nodes have joined, dump our cache of events we are publishing</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">    * that originated from this server. */</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">if</span> (!joined_list_entries) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *messages;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordtype">int</span> messages_count;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb rdlock\n&quot;</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a>) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a> || !<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].message_type_fn) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_confchg_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      messages = <a class="code" href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a>(), <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>(), &amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      messages_count = <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(messages);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Sending %i events of type %s to corosync.\n&quot;</span>, messages_count, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(messages, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#afe66d84d6cf2a2825ca566539b959c02">dump_cache_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Sent events of type %s to corosync.\n&quot;</span>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(messages, -1, <span class="stringliteral">&quot;Dispose of dumped cache&quot;</span>);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="structnode_html"><div class="ttname"><a href="../../d5/da1/structnode.html">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2b/test__heap_8c_source.html#l00038">test_heap.c:38</a></div></div>
<div class="ttc" id="structcorosync__node_html_aa1d7e6e6eb6d297e62f2d79dbdfaafb4"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">corosync_node::eid</a></div><div class="ttdeci">struct ast_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00083">res_corosync.c:83</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afe66d84d6cf2a2825ca566539b959c02"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afe66d84d6cf2a2825ca566539b959c02">dump_cache_cb</a></div><div class="ttdeci">static int dump_cache_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00610">res_corosync.c:610</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aabd18833e4fb06f806929bd6c7e85c86"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a></div><div class="ttdeci">static ast_rwlock_t event_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00051">res_corosync.c:51</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a261d970bdf8c914f6c7e6e9d1482b139"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a261d970bdf8c914f6c7e6e9d1482b139">clear_node_cache</a></div><div class="ttdeci">static int clear_node_cache(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00623">res_corosync.c:623</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2a54ed00d69c2801c8d1214e7d5b738e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2a54ed00d69c2801c8d1214e7d5b738e">publish_cluster_discovery_to_stasis_full</a></div><div class="ttdeci">static void publish_cluster_discovery_to_stasis_full(struct corosync_node *node, int joined)</div><div class="ttdoc">Publish cluster discovery to Stasis Message Bus API. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00303">res_corosync.c:303</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="structcorosync__node_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">corosync_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00081">res_corosync.c:81</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00239">res_corosync.c:239</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="stasis_8h_html_a9a4de0928d2b230b1c3184ba506ecf26"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9a4de0928d2b230b1c3184ba506ecf26">stasis_cache_dump_by_eid</a></div><div class="ttdeci">struct ao2_container * stasis_cache_dump_by_eid(struct stasis_cache *cache, struct stasis_message_type *type, const struct ast_eid *eid)</div><div class="ttdoc">Dump cached items to a subscription for a specific entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/stasis__cache_8c_source.html#l00718">stasis_cache.c:718</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structcorosync__node_html"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html">corosync_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00079">res_corosync.c:79</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ad2f6e8d39cd90b46e767e2b5bc57ee9c"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a></div><div class="ttdeci">struct stasis_topic *(* topic_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00245">res_corosync.c:245</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a84fa7112345dca92d94860c1dcef8ba6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a></div><div class="ttdeci">unsigned char subscribe</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00243">res_corosync.c:243</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8ad7311ccb92419767496229086727ab"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a></div><div class="ttdeci">struct stasis_message_type *(* message_type_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00247">res_corosync.c:247</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af14eb49a577cdd0a7bb655e04b24ff95"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af14eb49a577cdd0a7bb655e04b24ff95">cache_fn</a></div><div class="ttdeci">struct stasis_cache *(* cache_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00246">res_corosync.c:246</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2d8fad2480add5654ffb1fc4047c7940"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a></div><div class="ttdeci">static struct ao2_container * nodes</div><div class="ttdoc">All the nodes that we&amp;#39;re aware of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00065">res_corosync.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a034cf5915cfe7c8aab8b1247e2c9fa5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a034cf5915cfe7c8aab8b1247e2c9fa5a">&#9670;&nbsp;</a></span>cpg_deliver_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cpg_deliver_cb </td>
          <td>(</td>
          <td class="paramtype">cpg_handle_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct cpg_name *&#160;</td>
          <td class="paramname"><em>group_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>msg_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">484</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00194">ast_event_get_type_name()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00529">ast_event_minimum_length()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00060">AST_EVENT_PING</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00064">AST_EVENT_TOTAL</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">event_types_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00243">subscribe</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00432">publish_device_state_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   void (*publish_handler)(<span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79f">ast_event_type</a> event_type;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keywordflow">if</span> (msg_len &lt; <a class="code" href="../../dd/d20/event_8h.html#a184406ba0f586277b0c99a1529824a7c">ast_event_minimum_length</a>()) {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ignoring event that&#39;s too small. %u &lt; %u\n&quot;</span>,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) msg_len,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;         (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="../../dd/d20/event_8h.html#a184406ba0f586277b0c99a1529824a7c">ast_event_minimum_length</a>());</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(msg, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">if</span> (!event_eid || !<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>, event_eid)) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">/* Don&#39;t feed events back in that originated locally. */</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   event_type = <a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(msg);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">if</span> (event_type &gt; <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa0b077dc8f7e01b4fd4fd8a54359f0268">AST_EVENT_TOTAL</a>) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="comment">/* Egads, we don&#39;t support this */</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_deliver_cb rdlock\n&quot;</span>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   publish_handler = <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[event_type].publish_to_stasis;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[event_type].<a class="code" href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a> || !publish_handler) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">/* We are not configured to subscribe to these events or</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">         we have no way to publish it internally. */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_deliver_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;cpg_deliver_cb unlock\n&quot;</span>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keywordflow">if</span> (!(event = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(msg_len))) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   memcpy(event, msg, msg_len);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (event_type == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *<a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(buf, <span class="keyword">sizeof</span>(buf), (<span class="keyword">struct</span> <a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *) eid);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Got event PING from server with EID: &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Publishing event %s (%u) to stasis\n&quot;</span>,</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a>(event), event_type);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   publish_handler(event);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(event);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="structast__event_html"><div class="ttname"><a href="../../d5/d78/structast__event.html">ast_event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00081">event.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00060">event_defs.h:60</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aabd18833e4fb06f806929bd6c7e85c86"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a></div><div class="ttdeci">static ast_rwlock_t event_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00051">res_corosync.c:51</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79f">ast_event_type</a></div><div class="ttdeci">ast_event_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00028">event_defs.h:28</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="event_8h_html_a184406ba0f586277b0c99a1529824a7c"><div class="ttname"><a href="../../dd/d20/event_8h.html#a184406ba0f586277b0c99a1529824a7c">ast_event_minimum_length</a></div><div class="ttdeci">size_t ast_event_minimum_length(void)</div><div class="ttdoc">Get the minimum length of an ast_event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00529">event.c:529</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a84fa7112345dca92d94860c1dcef8ba6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a84fa7112345dca92d94860c1dcef8ba6">subscribe</a></div><div class="ttdeci">unsigned char subscribe</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00243">res_corosync.c:243</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa0b077dc8f7e01b4fd4fd8a54359f0268"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa0b077dc8f7e01b4fd4fd8a54359f0268">AST_EVENT_TOTAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00064">event_defs.h:64</a></div></div>
<div class="ttc" id="event_8h_html_aba6bf9f8f4b152ebce6d07df92353909"><div class="ttname"><a href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a></div><div class="ttdeci">const char * ast_event_get_type_name(const struct ast_event *event)</div><div class="ttdoc">Get the string representation of the type of the given event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00194">event.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acaa3dff7e0bbd23d0ecd7583733a5de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa3dff7e0bbd23d0ecd7583733a5de8">&#9670;&nbsp;</a></span>dispatch_thread_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* dispatch_thread_handler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">782</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00235">ast_rwlock_tryrdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00236">ast_rwlock_trywrlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00295">cfg_callbacks</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00062">corosync_node_joined</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00055">COROSYNC_POLL_TIMEOUT</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00466">cpg_callbacks</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">cpg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keyword">struct </span>pollfd pfd[3] = {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      { .events = POLLIN, },</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      { .events = POLLIN, },</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      { .events = POLLIN, },</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   };</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler rdlock\n&quot;</span>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">if</span> ((cs_err = cpg_fd_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;pfd[0].fd)) != CS_OK) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get CPG fd.  This module is now broken.\n&quot;</span>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">if</span> ((cs_err = corosync_cfg_fd_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, &amp;pfd[1].fd)) != CS_OK) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get CFG fd.  This module is now broken.\n&quot;</span>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      pfd[2].fd = <a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe[0];</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get fd: initiliazing CPG.  This module is now broken.\n&quot;</span>);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a>();</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.stop) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      cs_err = CS_OK;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      pfd[0].revents = 0;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      pfd[1].revents = 0;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      pfd[2].revents = 0;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfd, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(pfd), <a class="code" href="../../d1/da4/res__corosync_8c.html#a2b8338beff945881da6648992c510ce0">COROSYNC_POLL_TIMEOUT</a>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span> (res == -1 &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;poll() error: %s (%d)\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>), <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;         cs_err = CS_ERR_BAD_HANDLE;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> local_nodeid;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler rdlock\n&quot;</span>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">if</span> ((cs_err = cpg_local_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;local_nodeid)) == CS_OK) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;               <span class="keyword">struct </span>cpg_name <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;               <span class="keyword">struct </span>cpg_address <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>[CPG_MEMBERS_MAX];</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;               <span class="keywordtype">int</span> entries = CPG_MEMBERS_MAX;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value, <span class="stringliteral">&quot;asterisk&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value));</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;               <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.length = strlen(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;               <span class="keywordflow">if</span> ((cs_err = cpg_membership_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>, &amp;entries)) == CS_OK) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                  <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                  <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;CPG group has %i node membership\n&quot;</span>, entries);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                  <span class="keywordflow">for</span> (i = 0; (i &lt; entries) &amp;&amp; !found; i++) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a>[i].nodeid == local_nodeid)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                        found = 1;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                  }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                  <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to check CPG node membership\n&quot;</span>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                     <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                     cs_err = CS_ERR_BAD_HANDLE;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                  }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get CPG node membership: %u\n&quot;</span>, cs_err);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                  <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                  cs_err = CS_ERR_BAD_HANDLE;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;               }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get CPG local node id: %u\n&quot;</span>, cs_err);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;               <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;               cs_err = CS_ERR_BAD_HANDLE;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to check CPG node membership: initializing CPG.\n&quot;</span>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            cs_err = CS_ERR_BAD_HANDLE;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;         }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler rdlock\n&quot;</span>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="keywordflow">if</span> (pfd[0].revents &amp; POLLIN) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;               <span class="keywordflow">if</span> ((cs_err = cpg_dispatch(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, CS_DISPATCH_ALL)) != CS_OK) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed CPG dispatch: %u\n&quot;</span>, cs_err);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;               }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            }</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">if</span> (pfd[1].revents &amp; POLLIN) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;               <span class="keywordflow">if</span> ((cs_err = corosync_cfg_dispatch(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, CS_DISPATCH_ALL)) != CS_OK) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed CFG dispatch: %u\n&quot;</span>, cs_err);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;               }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to dispatch: initializing CPG.\n&quot;</span>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;         }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keywordflow">if</span> (cs_err == CS_ERR_LIBRARY || cs_err == CS_ERR_BAD_HANDLE) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;         <span class="comment">/* If corosync gets restarted out from under Asterisk, try to recover. */</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Attempting to recover from corosync failure.\n&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keyword">struct </span>cpg_name <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler wrlock\n&quot;</span>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a> &amp;&amp; (cs_err = cpg_finalize(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>)) != CS_OK) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to finalize cpg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a> &amp;&amp; (cs_err = corosync_cfg_finalize(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>)) != CS_OK) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to finalize cfg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;            }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordflow">if</span> ((cs_err = corosync_cfg_initialize(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a706be3bdc15d2bbdf6fdda692110695a">cfg_callbacks</a>)) != CS_OK) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize cfg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;               sleep(5);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">if</span> ((cs_err = cpg_initialize(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a28e053137a8d65ba892a4706c47dc901">cpg_callbacks</a>) != CS_OK)) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize cpg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;               sleep(5);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            <span class="keywordflow">if</span> ((cs_err = cpg_fd_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;pfd[0].fd)) != CS_OK) {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get CPG fd.\n&quot;</span>);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;               sleep(5);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="keywordflow">if</span> ((cs_err = corosync_cfg_fd_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, &amp;pfd[1].fd)) != CS_OK) {</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to get CFG fd.\n&quot;</span>);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;               sleep(5);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value, <span class="stringliteral">&quot;asterisk&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value));</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.length = strlen(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">if</span> ((cs_err = cpg_join(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) != CS_OK) {</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to join cpg (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;               <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;               sleep(5);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 1;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;dispatch_thread_handler unlock\n&quot;</span>);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Corosync recovery complete.\n&quot;</span>);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a>();</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Failed to recover from corosync failure: initializing CPG.\n&quot;</span>);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;         }</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afdba8f2f543c90d8ac6c25ec200e8b4b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></div><div class="ttdeci">static cpg_handle_t cpg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00283">res_corosync.c:283</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2b8338beff945881da6648992c510ce0"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2b8338beff945881da6648992c510ce0">COROSYNC_POLL_TIMEOUT</a></div><div class="ttdeci">#define COROSYNC_POLL_TIMEOUT</div><div class="ttdoc">Timeout for Corosync&amp;#39;s poll process. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00055">res_corosync.c:55</a></div></div>
<div class="ttc" id="f2c_8h_html_a27c1bdb0cba23a9db2a51eed7b3b2ac1"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#a27c1bdb0cba23a9db2a51eed7b3b2ac1">address</a></div><div class="ttdeci">char * address</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00059">f2c.h:59</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a7546cbf83f68d818041b924793ccf2f4"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a></div><div class="ttdeci">static void send_cluster_notify(void)</div><div class="ttdoc">Informs the cluster of our EID and our IP addresses. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00737">res_corosync.c:737</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00239">res_corosync.c:239</a></div></div>
<div class="ttc" id="lock_8h_html_af65c888941c741acb2e2078d5d078c49"><div class="ttname"><a href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a></div><div class="ttdeci">#define ast_rwlock_tryrdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00235">lock.h:235</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6238fc4bdd5ba467892a17d4f3efdcd3"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a></div><div class="ttdeci">static int corosync_node_joined</div><div class="ttdoc">Join to corosync. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00062">res_corosync.c:62</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a28e053137a8d65ba892a4706c47dc901"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a28e053137a8d65ba892a4706c47dc901">cpg_callbacks</a></div><div class="ttdeci">static cpg_callbacks_t cpg_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00466">res_corosync.c:466</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a706be3bdc15d2bbdf6fdda692110695a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a706be3bdc15d2bbdf6fdda692110695a">cfg_callbacks</a></div><div class="ttdeci">static corosync_cfg_callbacks_t cfg_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00295">res_corosync.c:295</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="lock_8h_html_ab8959e56195d995bea0ea495431179e4"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a></div><div class="ttdeci">#define ast_rwlock_trywrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00236">lock.h:236</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9d80b09d3bff65b5c0f15cfc170a1100"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a></div><div class="ttdeci">static struct @458 dispatch_thread</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe66d84d6cf2a2825ca566539b959c02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe66d84d6cf2a2825ca566539b959c02">&#9670;&nbsp;</a></span>dump_cache_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dump_cache_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00610">610</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">publish_to_corosync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = obj;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a2a23dde9e7ce6a76794da1e0a86ff9a6">publish_to_corosync</a>(message);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div><div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2a23dde9e7ce6a76794da1e0a86ff9a6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2a23dde9e7ce6a76794da1e0a86ff9a6">publish_to_corosync</a></div><div class="ttdeci">static void publish_to_corosync(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00571">res_corosync.c:571</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec2260e705efddb84187baa0a834eb4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2260e705efddb84187baa0a834eb4c">&#9670;&nbsp;</a></span>load_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_config </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>reload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01222">1222</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03328">ast_category_browse()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">CONFIG_STATUS_FILEMISSING</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> filename[] = <span class="stringliteral">&quot;res_corosync.conf&quot;</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cat = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(filename, config_flags);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <span class="keywordflow">while</span> ((cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, cat))) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cat, <span class="stringliteral">&quot;general&quot;</span>)) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;         res = <a class="code" href="../../d1/da4/res__corosync_8c.html#a76475c45ad376eb4d91338dc1f03c6b1">load_general_config</a>(cfg);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown configuration section &#39;%s&#39;\n&quot;</span>, cat);</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a76475c45ad376eb4d91338dc1f03c6b1"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a76475c45ad376eb4d91338dc1f03c6b1">load_general_config</a></div><div class="ttdeci">static int load_general_config(struct ast_config *cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01177">res_corosync.c:1177</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76475c45ad376eb4d91338dc1f03c6b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76475c45ad376eb4d91338dc1f03c6b1">&#9670;&nbsp;</a></span>load_general_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_general_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">1177</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00074">corosync_topic()</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">event_types_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00247">message_type_fn</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">publish</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01149">PUBLISH</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01153">set_event()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01578">stasis_forward_all()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01548">stasis_forward_cancel()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00601">stasis_message_cb()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router_add()</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00358">stasis_message_router_remove()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01150">SUBSCRIBE</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00245">topic_fn</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01222">load_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;{</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *v;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_general_config wrlock\n&quot;</span>);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].publish = <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].publish_default;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].subscribe = <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].subscribe_default;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keywordflow">for</span> (v = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>); v &amp;&amp; !res; v = v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;publish_event&quot;</span>)) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         res = <a class="code" href="../../d1/da4/res__corosync_8c.html#af50dd1b4e00c612211407e7de4591908">set_event</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;subscribe_event&quot;</span>)) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;         res = <a class="code" href="../../d1/da4/res__corosync_8c.html#af50dd1b4e00c612211407e7de4591908">set_event</a>(v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown option &#39;%s&#39;\n&quot;</span>, v-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      }</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> &amp;&amp; !<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub = <a class="code" href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a>(),</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                                       <a class="code" href="../../d1/da4/res__corosync_8c.html#af35197c4919c3571d3274b2a5efd82be">corosync_topic</a>());</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;         <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>,</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                   <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>(),</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                   <a class="code" href="../../d1/da4/res__corosync_8c.html#ad408dba1837441485eda168badb6b4e5">stasis_message_cb</a>,</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                   <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a> &amp;&amp; <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub = <a class="code" href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].sub);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a3c1f3127c63c6a46154167fbd2e50db9">stasis_message_router_remove</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>,</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                      <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a>());</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a>);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_general_config unlock\n&quot;</span>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ad408dba1837441485eda168badb6b4e5"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ad408dba1837441485eda168badb6b4e5">stasis_message_cb</a></div><div class="ttdeci">static void stasis_message_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00601">res_corosync.c:601</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01150">res_corosync.c:1150</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aabd18833e4fb06f806929bd6c7e85c86"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aabd18833e4fb06f806929bd6c7e85c86">event_types_lock</a></div><div class="ttdeci">static ast_rwlock_t event_types_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00051">res_corosync.c:51</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aa4002959b64099e84d20e09e38c2e51e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aa4002959b64099e84d20e09e38c2e51e">publish</a></div><div class="ttdeci">unsigned char publish</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00241">res_corosync.c:241</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="stasis__message__router_8h_html_a3c1f3127c63c6a46154167fbd2e50db9"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a3c1f3127c63c6a46154167fbd2e50db9">stasis_message_router_remove</a></div><div class="ttdeci">void stasis_message_router_remove(struct stasis_message_router *router, struct stasis_message_type *message_type)</div><div class="ttdoc">Remove a route from a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00358">stasis_message_router.c:358</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ad2f6e8d39cd90b46e767e2b5bc57ee9c"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ad2f6e8d39cd90b46e767e2b5bc57ee9c">topic_fn</a></div><div class="ttdeci">struct stasis_topic *(* topic_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00245">res_corosync.c:245</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01149">res_corosync.c:1149</a></div></div>
<div class="ttc" id="stasis_8h_html_a5713715b0f26f4943d0af05363b07027"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a5713715b0f26f4943d0af05363b07027">stasis_forward_cancel</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_cancel(struct stasis_forward *forward)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01548">stasis.c:1548</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af50dd1b4e00c612211407e7de4591908"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af50dd1b4e00c612211407e7de4591908">set_event</a></div><div class="ttdeci">static int set_event(const char *event_type, int pubsub)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01153">res_corosync.c:1153</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Our Stasis Message Bus API message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00071">res_corosync.c:71</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="stasis_8h_html_a2513a93567ddc93510f7896b777da119"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a2513a93567ddc93510f7896b777da119">stasis_forward_all</a></div><div class="ttdeci">struct stasis_forward * stasis_forward_all(struct stasis_topic *from_topic, struct stasis_topic *to_topic)</div><div class="ttdoc">Create a subscription which forwards all messages from one topic to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01578">stasis.c:1578</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8ad7311ccb92419767496229086727ab"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8ad7311ccb92419767496229086727ab">message_type_fn</a></div><div class="ttdeci">struct stasis_message_type *(* message_type_fn)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00247">res_corosync.c:247</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af35197c4919c3571d3274b2a5efd82be"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af35197c4919c3571d3274b2a5efd82be">corosync_topic</a></div><div class="ttdeci">static struct stasis_topic * corosync_topic(void)</div><div class="ttdoc">Internal accessor for our topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00074">res_corosync.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">1336</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02847">ast_eid_is_empty()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00290">AST_LOG_ERROR</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00236">ast_rwlock_trywrlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00063">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00295">cfg_callbacks</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00133">corosync_node_cmp_fn()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00113">corosync_node_hash_fn()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00062">corosync_node_joined</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00092">corosync_pthread_create_background</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00466">cpg_callbacks</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">cpg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01222">load_config()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router_create</a>, <a class="el" href="../../d2/d78/stasis__message__router_8c_source.html#l00298">stasis_message_router_set_congestion_limits()</a>, <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;{</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <span class="keyword">struct </span>cpg_name <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a9052010ef014bd56be478fab26feb2e1">ast_eid_is_empty</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>)) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Entity ID is not set.\n&quot;</span>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, 23,</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a887cd6d12b3ccc22f69b0767bb768f33">corosync_node_hash_fn</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d1/da4/res__corosync_8c.html#afe8f3c002687ac75c6a0ad303b60a5b7">corosync_node_cmp_fn</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>) {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;corosync:aggregator&quot;</span>);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a>) {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create stasis topic for corosync\n&quot;</span>);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a> = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a>);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create message router for corosync topic\n&quot;</span>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   }</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1570c21a07d1309809ae61c723f28a1d">stasis_message_router_set_congestion_limits</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a>, -1,</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      10 * <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(corosync_ping_message_type) != 0) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize corosync ping message type\n&quot;</span>);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#aec2260e705efddb84187baa0a834eb4c">load_config</a>(0)) {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="comment">/* simply not configured is not a fatal error */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 0;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module wrlock\n&quot;</span>);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="keywordflow">if</span> ((cs_err = corosync_cfg_initialize(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a706be3bdc15d2bbdf6fdda692110695a">cfg_callbacks</a>)) != CS_OK) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize cfg: (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module unlock\n&quot;</span>);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;         <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">if</span> ((cs_err = cpg_initialize(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a28e053137a8d65ba892a4706c47dc901">cpg_callbacks</a>)) != CS_OK) {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize cpg: (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module unlock\n&quot;</span>);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;         <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value, <span class="stringliteral">&quot;asterisk&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value));</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.length = strlen(<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>.value);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">if</span> ((cs_err = cpg_join(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, &amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) != CS_OK) {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to join: (%d)\n&quot;</span>, (<span class="keywordtype">int</span>) cs_err);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module unlock\n&quot;</span>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;         <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      }</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">if</span> (pipe(<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.alert_pipe) == -1) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create alert pipe: %s (%d)\n&quot;</span>,</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;               strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>), <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module unlock\n&quot;</span>);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> = 1;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;load_module unlock\n&quot;</span>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a496161007b0df370044eab0dfbeefb8d">corosync_pthread_create_background</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a>.id, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <a class="code" href="../../d1/da4/res__corosync_8c.html#acaa3dff7e0bbd23d0ecd7583733a5de8">dispatch_thread_handler</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error starting CPG dispatch thread.\n&quot;</span>);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;         <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a>));</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="keywordflow">goto</span> failed;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;failed:</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a56064044d42fabf92e88abb2c4a61c79">cleanup_module</a>();</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_acaa3dff7e0bbd23d0ecd7583733a5de8"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#acaa3dff7e0bbd23d0ecd7583733a5de8">dispatch_thread_handler</a></div><div class="ttdeci">static void * dispatch_thread_handler(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00782">res_corosync.c:782</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afdba8f2f543c90d8ac6c25ec200e8b4b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></div><div class="ttdeci">static cpg_handle_t cpg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00283">res_corosync.c:283</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a45aa28f4018bd7db0dd3ca62d0a8006a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a></div><div class="ttdeci">static struct ast_cli_entry corosync_cli[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01142">res_corosync.c:1142</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ad4a3db2b08877779bd481a649318be7d"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_HIGH_WATER_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00063">taskprocessor.h:63</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00239">res_corosync.c:239</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a2fdd5bff193a29ec6c7278da2851ea56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2fdd5bff193a29ec6c7278da2851ea56">AST_LOG_ERROR</a></div><div class="ttdeci">#define AST_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00290">logger.h:290</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6238fc4bdd5ba467892a17d4f3efdcd3"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a></div><div class="ttdeci">static int corosync_node_joined</div><div class="ttdoc">Join to corosync. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00062">res_corosync.c:62</a></div></div>
<div class="ttc" id="res__corosync_8c_html_afe8f3c002687ac75c6a0ad303b60a5b7"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afe8f3c002687ac75c6a0ad303b60a5b7">corosync_node_cmp_fn</a></div><div class="ttdeci">static int corosync_node_cmp_fn(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00133">res_corosync.c:133</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a28e053137a8d65ba892a4706c47dc901"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a28e053137a8d65ba892a4706c47dc901">cpg_callbacks</a></div><div class="ttdeci">static cpg_callbacks_t cpg_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00466">res_corosync.c:466</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="res__corosync_8c_html_a496161007b0df370044eab0dfbeefb8d"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a496161007b0df370044eab0dfbeefb8d">corosync_pthread_create_background</a></div><div class="ttdeci">#define corosync_pthread_create_background(a, b, c, d)</div><div class="ttdoc">Version of pthread_create to ensure stack is large enough. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00092">res_corosync.c:92</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a56064044d42fabf92e88abb2c4a61c79"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a56064044d42fabf92e88abb2c4a61c79">cleanup_module</a></div><div class="ttdeci">static void cleanup_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01249">res_corosync.c:1249</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a706be3bdc15d2bbdf6fdda692110695a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a706be3bdc15d2bbdf6fdda692110695a">cfg_callbacks</a></div><div class="ttdeci">static corosync_cfg_callbacks_t cfg_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00295">res_corosync.c:295</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="lock_8h_html_ab8959e56195d995bea0ea495431179e4"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8959e56195d995bea0ea495431179e4">ast_rwlock_trywrlock</a></div><div class="ttdeci">#define ast_rwlock_trywrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00236">lock.h:236</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">stasis_router</a></div><div class="ttdeci">static struct stasis_message_router * stasis_router</div><div class="ttdoc">Our Stasis Message Bus API message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00071">res_corosync.c:71</a></div></div>
<div class="ttc" id="res__corosync_8c_html_aec2260e705efddb84187baa0a834eb4c"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#aec2260e705efddb84187baa0a834eb4c">load_config</a></div><div class="ttdeci">static int load_config(unsigned int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01222">res_corosync.c:1222</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9fe8a3baa31ec0ce2babf80221c83af0"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9fe8a3baa31ec0ce2babf80221c83af0">corosync_aggregate_topic</a></div><div class="ttdeci">static struct stasis_topic * corosync_aggregate_topic</div><div class="ttdoc">The internal topic used for message forwarding and pings. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00068">res_corosync.c:68</a></div></div>
<div class="ttc" id="utils_8h_html_a9052010ef014bd56be478fab26feb2e1"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a9052010ef014bd56be478fab26feb2e1">ast_eid_is_empty</a></div><div class="ttdeci">int ast_eid_is_empty(const struct ast_eid *eid)</div><div class="ttdoc">Check if EID is empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02847">main/utils.c:2847</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1570c21a07d1309809ae61c723f28a1d"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1570c21a07d1309809ae61c723f28a1d">stasis_message_router_set_congestion_limits</a></div><div class="ttdeci">int stasis_message_router_set_congestion_limits(struct stasis_message_router *router, long low_water, long high_water)</div><div class="ttdoc">Set the high and low alert water marks of the stasis message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00298">stasis_message_router.c:298</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a887cd6d12b3ccc22f69b0767bb768f33"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a887cd6d12b3ccc22f69b0767bb768f33">corosync_node_hash_fn</a></div><div class="ttdeci">static int corosync_node_hash_fn(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00113">res_corosync.c:113</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9d80b09d3bff65b5c0f15cfc170a1100"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9d80b09d3bff65b5c0f15cfc170a1100">dispatch_thread</a></div><div class="ttdeci">static struct @458 dispatch_thread</div></div>
<div class="ttc" id="res__corosync_8c_html_a2d8fad2480add5654ffb1fc4047c7940"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a></div><div class="ttdeci">static struct ao2_container * nodes</div><div class="ttdoc">All the nodes that we&amp;#39;re aware of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00065">res_corosync.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb05bf7d9d21b39a16c8ef9c5ca2560e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb05bf7d9d21b39a16c8ef9c5ca2560e">&#9670;&nbsp;</a></span>publish_cluster_discovery_to_stasis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_cluster_discovery_to_stasis </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish a received cluster discovery <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00351">351</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00062">AST_EVENT_CLUSTER_DISCOVERY</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00293">ast_event_get_ie_uint()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00313">AST_EVENT_IE_NODE_ID</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00097">corosync_node_alloc()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">publish_cluster_discovery_to_stasis_full()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *<a class="code" href="../../d5/da1/structnode.html">node</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event) == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803">AST_EVENT_CLUSTER_DISCOVERY</a>);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">if</span> (!event_eid || !<a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>, event_eid)) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="comment">/* Don&#39;t feed events back in that originated locally. */</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   node = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>, &amp;<span class="keywordtype">id</span>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">if</span> (node) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="comment">/* We already know about this node */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(node, -1);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   node = <a class="code" href="../../d1/da4/res__corosync_8c.html#a94aeade47ce78a844f1616a8eb9ce9e9">corosync_node_alloc</a>(event);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="keywordflow">if</span> (!node) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>, node, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a2a54ed00d69c2801c8d1214e7d5b738e">publish_cluster_discovery_to_stasis_full</a>(node, 1);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(node, -1);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">    * When we get news that someone else has joined, we need to let them</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">    * know we exist as well.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a>();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="ttc" id="structnode_html"><div class="ttname"><a href="../../d5/da1/structnode.html">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2b/test__heap_8c_source.html#l00038">test_heap.c:38</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a94aeade47ce78a844f1616a8eb9ce9e9"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a94aeade47ce78a844f1616a8eb9ce9e9">corosync_node_alloc</a></div><div class="ttdeci">static struct corosync_node * corosync_node_alloc(struct ast_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00097">res_corosync.c:97</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803">AST_EVENT_CLUSTER_DISCOVERY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00062">event_defs.h:62</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a7546cbf83f68d818041b924793ccf2f4"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a7546cbf83f68d818041b924793ccf2f4">send_cluster_notify</a></div><div class="ttdeci">static void send_cluster_notify(void)</div><div class="ttdoc">Informs the cluster of our EID and our IP addresses. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00737">res_corosync.c:737</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2a54ed00d69c2801c8d1214e7d5b738e"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2a54ed00d69c2801c8d1214e7d5b738e">publish_cluster_discovery_to_stasis_full</a></div><div class="ttdeci">static void publish_cluster_discovery_to_stasis_full(struct corosync_node *node, int joined)</div><div class="ttdoc">Publish cluster discovery to Stasis Message Bus API. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00303">res_corosync.c:303</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structcorosync__node_html"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html">corosync_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00079">res_corosync.c:79</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="event_8h_html_a317f6947b933acd0da82df6e9a4672e5"><div class="ttname"><a href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a></div><div class="ttdeci">uint32_t ast_event_get_ie_uint(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has an integer payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00293">event.c:293</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a></div><div class="ttdoc">Cluster node ID Used by: Corosync Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00313">event_defs.h:313</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a2d8fad2480add5654ffb1fc4047c7940"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2d8fad2480add5654ffb1fc4047c7940">nodes</a></div><div class="ttdeci">static struct ao2_container * nodes</div><div class="ttdoc">All the nodes that we&amp;#39;re aware of. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00065">res_corosync.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a54ed00d69c2801c8d1214e7d5b738e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a54ed00d69c2801c8d1214e7d5b738e">&#9670;&nbsp;</a></span>publish_cluster_discovery_to_stasis_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_cluster_discovery_to_stasis_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/dcd/structcorosync__node.html">corosync_node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>joined</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish cluster discovery to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">303</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00085">corosync_node::addr</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/df0/stasis__system_8h.html#aa89117a8c70b5dd7c813b4617a0f9b21">ast_cluster_discovery_type()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00735">ast_json_payload_create()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00268">AST_LOG_NOTICE</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../df/da0/stasis__system_8c_source.html#l00347">ast_system_topic()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00081">corosync_node::id</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00351">publish_cluster_discovery_to_stasis()</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/de9/structast__json__payload.html">ast_json_payload</a> *payload;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d55/structstasis__message.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">eid</a>[18];</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *addr;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid, <span class="keyword">sizeof</span>(eid), &amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">eid</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   addr = <a class="code" href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a>(&amp;node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a10838452c09fae7f0e3de86581d85379">addr</a>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad6810d73cb786e5e74c55c8bd8688e05">AST_LOG_NOTICE</a>, <span class="stringliteral">&quot;Node %u (%s) at %s %s the cluster\n&quot;</span>,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      eid,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      addr,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      joined ? <span class="stringliteral">&quot;joined&quot;</span> : <span class="stringliteral">&quot;left&quot;</span>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   json = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: i, s: s, s: i}&quot;</span>,</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="stringliteral">&quot;address&quot;</span>, addr,</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="stringliteral">&quot;node_id&quot;</span>, node-&gt;<a class="code" href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>,</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="stringliteral">&quot;eid&quot;</span>, eid,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="stringliteral">&quot;joined&quot;</span>, joined);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!json) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   payload = <a class="code" href="../../d4/d05/json_8h.html#a8ac267a28e7eddf5b10bbb65139406f2">ast_json_payload_create</a>(json);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d3/df0/stasis__system_8h.html#aa89117a8c70b5dd7c813b4617a0f9b21">ast_cluster_discovery_type</a>(), payload);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(payload, -1);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d3/df0/stasis__system_8h.html#a196188f45631aed77434c898ed322ce6">ast_system_topic</a>(), message);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(json);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(payload, -1);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(message, -1);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_a6bf0e68e74c0a9ca9d25251b22e4d64a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a6bf0e68e74c0a9ca9d25251b22e4d64a">ast_sockaddr_stringify_addr</a></div><div class="ttdeci">static char * ast_sockaddr_stringify_addr(const struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around ast_sockaddr_stringify_fmt() to return an address only. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00290">netsock2.h:290</a></div></div>
<div class="ttc" id="structcorosync__node_html_aa1d7e6e6eb6d297e62f2d79dbdfaafb4"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">corosync_node::eid</a></div><div class="ttdeci">struct ast_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00083">res_corosync.c:83</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="structstasis__message_html_aa1d7e6e6eb6d297e62f2d79dbdfaafb4"><div class="ttname"><a href="../../d7/d55/structstasis__message.html#aa1d7e6e6eb6d297e62f2d79dbdfaafb4">stasis_message::eid</a></div><div class="ttdeci">struct ast_eid eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00131">stasis_message.c:131</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="json_8h_html_a8ac267a28e7eddf5b10bbb65139406f2"><div class="ttname"><a href="../../d4/d05/json_8h.html#a8ac267a28e7eddf5b10bbb65139406f2">ast_json_payload_create</a></div><div class="ttdeci">struct ast_json_payload * ast_json_payload_create(struct ast_json *json)</div><div class="ttdoc">Create an ao2 object to pass json blobs as data payloads for stasis. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00735">json.c:735</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__json__payload_html"><div class="ttname"><a href="../../d9/de9/structast__json__payload.html">ast_json_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l01024">json.h:1024</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="structcorosync__node_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a7441ef0865bcb3db9b8064dd7375c1ea">corosync_node::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00081">res_corosync.c:81</a></div></div>
<div class="ttc" id="logger_8h_html_ad6810d73cb786e5e74c55c8bd8688e05"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad6810d73cb786e5e74c55c8bd8688e05">AST_LOG_NOTICE</a></div><div class="ttdeci">#define AST_LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00268">logger.h:268</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structcorosync__node_html_a10838452c09fae7f0e3de86581d85379"><div class="ttname"><a href="../../df/dcd/structcorosync__node.html#a10838452c09fae7f0e3de86581d85379">corosync_node::addr</a></div><div class="ttdeci">struct ast_sockaddr addr</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00085">res_corosync.c:85</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis__system_8h_html_a196188f45631aed77434c898ed322ce6"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html#a196188f45631aed77434c898ed322ce6">ast_system_topic</a></div><div class="ttdeci">struct stasis_topic * ast_system_topic(void)</div><div class="ttdoc">A Stasis Message Bus API topic which publishes messages regarding system changes. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da0/stasis__system_8c_source.html#l00347">stasis_system.c:347</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="stasis__system_8h_html_aa89117a8c70b5dd7c813b4617a0f9b21"><div class="ttname"><a href="../../d3/df0/stasis__system_8h.html#aa89117a8c70b5dd7c813b4617a0f9b21">ast_cluster_discovery_type</a></div><div class="ttdeci">struct stasis_message_type * ast_cluster_discovery_type(void)</div><div class="ttdoc">A stasis_message_type for Cluster discovery. </div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f9f4a6300ec950e9efe11985f81ae9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f9f4a6300ec950e9efe11985f81ae9d">&#9670;&nbsp;</a></span>publish_corosync_ping_to_stasis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_corosync_ping_to_stasis </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish a Corosync ping to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00204">204</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00409">ao2_t_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00070">AST_EVENT_IE_END</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00330">AST_EVENT_IE_PLTYPE_RAW</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00402">ast_event_new()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00060">AST_EVENT_PING</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00167">corosync_ping_payload_dtor()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00074">corosync_topic()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00163">corosync_ping_payload::event</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>.</p>
<div class="fragment"><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a> *payload;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event) == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(event != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">if</span> (!corosync_ping_message_type()) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   payload = <a class="code" href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a>(<span class="keyword">sizeof</span>(*payload), <a class="code" href="../../d1/da4/res__corosync_8c.html#a67cefc4a41280af0f6f1d215e9bf33e6">corosync_ping_payload_dtor</a>, <span class="stringliteral">&quot;Create ping payload&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   payload-&gt;<a class="code" href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">event</a> = <a class="code" href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a>(<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>,</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef">AST_EVENT_IE_PLTYPE_RAW</a>, event_eid, <span class="keyword">sizeof</span>(*event_eid),</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   message = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(corosync_ping_message_type(), payload);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(payload, -1, <span class="stringliteral">&quot;Destroy payload on off nominal&quot;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#af35197c4919c3571d3274b2a5efd82be">corosync_topic</a>(), message);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(payload, -1, <span class="stringliteral">&quot;Hand ref to stasis&quot;</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(message, -1, <span class="stringliteral">&quot;Hand ref to stasis&quot;</span>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00060">event_defs.h:60</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad57326008c326db88dc36779741622b8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57326008c326db88dc36779741622b8">ao2_t_alloc</a></div><div class="ttdeci">#define ao2_t_alloc(data_size, destructor_fn, debug_msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00409">astobj2.h:409</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a67cefc4a41280af0f6f1d215e9bf33e6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a67cefc4a41280af0f6f1d215e9bf33e6">corosync_ping_payload_dtor</a></div><div class="ttdeci">static void corosync_ping_payload_dtor(void *obj)</div><div class="ttdoc">Destructor for the corosync_ping_payload wrapper object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00167">res_corosync.c:167</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="event__defs_8h_html_a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a394379875c9a348a39019c67d9a294ef">AST_EVENT_IE_PLTYPE_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00330">event_defs.h:330</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structcorosync__ping__payload_html_a29023d239b1af1921483e7904625ec48"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html#a29023d239b1af1921483e7904625ec48">corosync_ping_payload::event</a></div><div class="ttdeci">struct ast_event * event</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00163">res_corosync.c:163</a></div></div>
<div class="ttc" id="structcorosync__ping__payload_html"><div class="ttname"><a href="../../d1/d0e/structcorosync__ping__payload.html">corosync_ping_payload</a></div><div class="ttdoc">A payload wrapper around a corosync ping event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00161">res_corosync.c:161</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="event_8h_html_afb4a2a00de28bb0733037060da8c4bac"><div class="ttname"><a href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a></div><div class="ttdeci">struct ast_event * ast_event_new(enum ast_event_type event_type,...)</div><div class="ttdoc">Create a new event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00402">event.c:402</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00070">event_defs.h:70</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af35197c4919c3571d3274b2a5efd82be"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af35197c4919c3571d3274b2a5efd82be">corosync_topic</a></div><div class="ttdeci">static struct stasis_topic * corosync_topic(void)</div><div class="ttdoc">Internal accessor for our topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00074">res_corosync.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c009ae1af7e722965f7616b6ddfce4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c009ae1af7e722965f7616b6ddfce4b">&#9670;&nbsp;</a></span>publish_device_state_to_stasis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_device_state_to_stasis </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish a received device state <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00432">432</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00048">AST_EVENT_DEVICE_STATE_CHANGE</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00302">ast_event_get_ie_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00293">ast_event_get_ie_uint()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00306">AST_EVENT_IE_CACHABLE</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00113">AST_EVENT_IE_DEVICE</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00121">AST_EVENT_IE_STATE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00709">ast_publish_device_state_full()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *device;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cachable;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event) == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa641bc805cee9b8829fa265e566df9d58">AST_EVENT_DEVICE_STATE_CHANGE</a>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   device = <a class="code" href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a675632af9f21fe7696772885593140e3">AST_EVENT_IE_DEVICE</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   state = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a17f475640d923666e2c755e4985b61f8">AST_EVENT_IE_STATE</a>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   cachable = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ac5b819583f1ddf97635f64477a27877d">AST_EVENT_IE_CACHABLE</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(device)) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a>(device, state, cachable, event_eid)) {</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>[18];</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid, <span class="keyword">sizeof</span>(eid), event_eid);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to publish device state message for %s from %s\n&quot;</span>,</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;         device, eid);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa641bc805cee9b8829fa265e566df9d58"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa641bc805cee9b8829fa265e566df9d58">AST_EVENT_DEVICE_STATE_CHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00048">event_defs.h:48</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491ac5b819583f1ddf97635f64477a27877d"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ac5b819583f1ddf97635f64477a27877d">AST_EVENT_IE_CACHABLE</a></div><div class="ttdoc">Event non-cachability flag Used by: All events Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00306">event_defs.h:306</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
<div class="ttc" id="devicestate_8h_html_afe9dc809c9ea4d32dfb4abd5fd92dfb2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#afe9dc809c9ea4d32dfb4abd5fd92dfb2">ast_publish_device_state_full</a></div><div class="ttdeci">int ast_publish_device_state_full(const char *device, enum ast_device_state state, enum ast_devstate_cache cachable, struct ast_eid *eid)</div><div class="ttdoc">Publish a device state update with EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00709">devicestate.c:709</a></div></div>
<div class="ttc" id="event_8h_html_a317f6947b933acd0da82df6e9a4672e5"><div class="ttname"><a href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a></div><div class="ttdeci">uint32_t ast_event_get_ie_uint(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has an integer payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00293">event.c:293</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a17f475640d923666e2c755e4985b61f8"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a17f475640d923666e2c755e4985b61f8">AST_EVENT_IE_STATE</a></div><div class="ttdoc">Generic State IE Used by AST_EVENT_DEVICE_STATE_CHANGE Payload type: UINT The actual state values dep...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00121">event_defs.h:121</a></div></div>
<div class="ttc" id="event_8h_html_a0cfdd21162f4795714da583c31477151"><div class="ttname"><a href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a></div><div class="ttdeci">const char * ast_event_get_ie_str(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a string payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00302">event.c:302</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a675632af9f21fe7696772885593140e3"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a675632af9f21fe7696772885593140e3">AST_EVENT_IE_DEVICE</a></div><div class="ttdoc">Device Name Used by AST_EVENT_DEVICE_STATE_CHANGE Payload type: STR. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00113">event_defs.h:113</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a070d5c094c48f371571ef286a6594e12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a070d5c094c48f371571ef286a6594e12">&#9670;&nbsp;</a></span>publish_event_to_corosync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_event_to_corosync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">544</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00228">ast_event_get_size()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00194">ast_event_get_type_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00235">ast_rwlock_tryrdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00062">corosync_node_joined</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">cpg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">publish_to_corosync()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keyword">struct </span>iovec iov;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   iov.iov_base = (<span class="keywordtype">void</span> *)event;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   iov.iov_len = <a class="code" href="../../dd/d20/event_8h.html#a225c7a00f535f291cf0394f609ee9189">ast_event_get_size</a>(event);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Publishing event %s (%u) to corosync\n&quot;</span>,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a>(event), <a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event));</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="comment">/* The stasis subscription will only exist if we are configured to publish</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">    * these events, so just send away. */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a> &amp;&amp; !<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;publish_event_to_corosync rdlock\n&quot;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> ((cs_err = cpg_mcast_joined(<a class="code" href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a>, CPG_TYPE_FIFO, &amp;iov, 1)) != CS_OK) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;CPG mcast failed (%u) for event %s (%u)\n&quot;</span>,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            cs_err, <a class="code" href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a>(event), <a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event));</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;publish_event_to_corosync unlock\n&quot;</span>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;CPG mcast not executed for event %s (%u): initializing CPG.\n&quot;</span>,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <a class="code" href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a>(event), <a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event));</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_afdba8f2f543c90d8ac6c25ec200e8b4b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#afdba8f2f543c90d8ac6c25ec200e8b4b">cpg_handle</a></div><div class="ttdeci">static cpg_handle_t cpg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00283">res_corosync.c:283</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="lock_8h_html_af65c888941c741acb2e2078d5d078c49"><div class="ttname"><a href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a></div><div class="ttdeci">#define ast_rwlock_tryrdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00235">lock.h:235</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a6238fc4bdd5ba467892a17d4f3efdcd3"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a6238fc4bdd5ba467892a17d4f3efdcd3">corosync_node_joined</a></div><div class="ttdeci">static int corosync_node_joined</div><div class="ttdoc">Join to corosync. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00062">res_corosync.c:62</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="event_8h_html_a225c7a00f535f291cf0394f609ee9189"><div class="ttname"><a href="../../dd/d20/event_8h.html#a225c7a00f535f291cf0394f609ee9189">ast_event_get_size</a></div><div class="ttdeci">size_t ast_event_get_size(const struct ast_event *event)</div><div class="ttdoc">Get the size of an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00228">event.c:228</a></div></div>
<div class="ttc" id="event_8h_html_aba6bf9f8f4b152ebce6d07df92353909"><div class="ttname"><a href="../../dd/d20/event_8h.html#aba6bf9f8f4b152ebce6d07df92353909">ast_event_get_type_name</a></div><div class="ttdeci">const char * ast_event_get_type_name(const struct ast_event *event)</div><div class="ttdoc">Get the string representation of the type of the given event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00194">event.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9086f896a2530cfcd338646b7edc513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9086f896a2530cfcd338646b7edc513">&#9670;&nbsp;</a></span>publish_mwi_to_stasis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_mwi_to_stasis </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publish a received MWI <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> to <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00394">394</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00302">ast_event_get_ie_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00293">ast_event_get_ie_uint()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00127">AST_EVENT_IE_CONTEXT</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00089">AST_EVENT_IE_MAILBOX</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00077">AST_EVENT_IE_NEWMSGS</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00083">AST_EVENT_IE_OLDMSGS</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00038">AST_EVENT_MWI</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00388">ast_publish_mwi_state_full()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">mailbox</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;{</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_msgs;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> old_msgs;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event) == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa9a217b1f500680b3e458d62b048c0892">AST_EVENT_MWI</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   mailbox = <a class="code" href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aae6c80d8f4c6ab3cee006ed57d874710">AST_EVENT_IE_MAILBOX</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   context = <a class="code" href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a25764e2fb734ccb3ee1f6f41caba5318">AST_EVENT_IE_CONTEXT</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   new_msgs = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aff40847f0450f17c96e94e721aee38f2">AST_EVENT_IE_NEWMSGS</a>);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   old_msgs = <a class="code" href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aeda30786b0dfece37a9a06b84a653fd9">AST_EVENT_IE_OLDMSGS</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(mailbox) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> (new_msgs &gt; INT_MAX) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      new_msgs = INT_MAX;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">if</span> (old_msgs &gt; INT_MAX) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      old_msgs = INT_MAX;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d33/mwi_8h.html#a889083170a9d78ccdbfbcb75406ed98d">ast_publish_mwi_state_full</a>(mailbox, context, (<span class="keywordtype">int</span>)new_msgs,</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                  (<span class="keywordtype">int</span>)old_msgs, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, event_eid)) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>[18];</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid, <span class="keyword">sizeof</span>(eid), event_eid);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to publish MWI message for %s@%s from %s\n&quot;</span>,</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;         mailbox, context, eid);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491aff40847f0450f17c96e94e721aee38f2"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aff40847f0450f17c96e94e721aee38f2">AST_EVENT_IE_NEWMSGS</a></div><div class="ttdoc">Number of new messages Used by: AST_EVENT_MWI Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00077">event_defs.h:77</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491aeda30786b0dfece37a9a06b84a653fd9"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aeda30786b0dfece37a9a06b84a653fd9">AST_EVENT_IE_OLDMSGS</a></div><div class="ttdoc">Number of Used by: AST_EVENT_MWI Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00083">event_defs.h:83</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a25764e2fb734ccb3ee1f6f41caba5318"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a25764e2fb734ccb3ee1f6f41caba5318">AST_EVENT_IE_CONTEXT</a></div><div class="ttdoc">Context IE Used by AST_EVENT_MWI Payload type: str. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00127">event_defs.h:127</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa9a217b1f500680b3e458d62b048c0892"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa9a217b1f500680b3e458d62b048c0892">AST_EVENT_MWI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00038">event_defs.h:38</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="mwi_8h_html_a889083170a9d78ccdbfbcb75406ed98d"><div class="ttname"><a href="../../dc/d33/mwi_8h.html#a889083170a9d78ccdbfbcb75406ed98d">ast_publish_mwi_state_full</a></div><div class="ttdeci">int ast_publish_mwi_state_full(const char *mailbox, const char *context, int new_msgs, int old_msgs, const char *channel_id, struct ast_eid *eid)</div><div class="ttdoc">Publish a MWI state update via stasis with all parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/db4/mwi_8c_source.html#l00388">mwi.c:388</a></div></div>
<div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
<div class="ttc" id="event_8h_html_a317f6947b933acd0da82df6e9a4672e5"><div class="ttname"><a href="../../dd/d20/event_8h.html#a317f6947b933acd0da82df6e9a4672e5">ast_event_get_ie_uint</a></div><div class="ttdeci">uint32_t ast_event_get_ie_uint(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has an integer payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00293">event.c:293</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="event_8h_html_a0cfdd21162f4795714da583c31477151"><div class="ttname"><a href="../../dd/d20/event_8h.html#a0cfdd21162f4795714da583c31477151">ast_event_get_ie_str</a></div><div class="ttdeci">const char * ast_event_get_ie_str(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a string payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00302">event.c:302</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491aae6c80d8f4c6ab3cee006ed57d874710"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491aae6c80d8f4c6ab3cee006ed57d874710">AST_EVENT_IE_MAILBOX</a></div><div class="ttdoc">Mailbox name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00089">event_defs.h:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a23dde9e7ce6a76794da1e0a86ff9a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a23dde9e7ce6a76794da1e0a86ff9a6">&#9670;&nbsp;</a></span>publish_to_corosync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void publish_to_corosync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">571</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">ast_eid_cmp()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00093">ast_eid_default</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00524">ast_event_destroy()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00311">ast_event_get_ie_raw()</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00288">ast_event_get_type()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00272">AST_EVENT_IE_EID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00060">AST_EVENT_PING</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00083">corosync_node::eid</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">publish_event_to_corosync()</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00236">stasis_message_to_event()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00610">dump_cache_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00601">stasis_message_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *event_eid;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../dd/d79/stasis_8h.html#aa90ab45287904a603efb31319aaf8b91">stasis_message_to_event</a>(message);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">if</span> (!event) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   event_eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">if</span> (!event_eid || <a class="code" href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a>(&amp;<a class="code" href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a>, event_eid)) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">/* If the event didn&#39;t originate from this server, don&#39;t send it back out. */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <a class="code" href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a>(event);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a>(event) == <a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a>) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *<a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      eid = (<span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *)<a class="code" href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a>(event, <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(buf, <span class="keyword">sizeof</span>(buf), (<span class="keyword">struct</span> <a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> *) eid);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Sending event PING from this server with EID: &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a070d5c094c48f371571ef286a6594e12">publish_event_to_corosync</a>(event);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <a class="code" href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a>(event);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div><div class="ttc" id="structast__event_html"><div class="ttname"><a href="../../d5/d78/structast__event.html">ast_event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00081">event.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79fa36b236ee1196b14043aded344020aa1b">AST_EVENT_PING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00060">event_defs.h:60</a></div></div>
<div class="ttc" id="event_8h_html_ab3055e3d85399352f0a4ca7404549d4b"><div class="ttname"><a href="../../dd/d20/event_8h.html#ab3055e3d85399352f0a4ca7404549d4b">ast_event_get_type</a></div><div class="ttdeci">enum ast_event_type ast_event_get_type(const struct ast_event *event)</div><div class="ttdoc">Get the type for an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00288">event.c:288</a></div></div>
<div class="ttc" id="utils_8h_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a8e38c9805132c95123e80568ba508b17">AST_EVENT_IE_EID</a></div><div class="ttdoc">Entity ID Used by All events Payload type: RAW This IE indicates which server the event originated fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00272">event_defs.h:272</a></div></div>
<div class="ttc" id="utils_8h_html_a4e9f7c7ca75b0ff48b60b136e3961b61"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a></div><div class="ttdeci">int ast_eid_cmp(const struct ast_eid *eid1, const struct ast_eid *eid2)</div><div class="ttdoc">Compare two EIDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02842">main/utils.c:2842</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="event_8h_html_acaf805e5e914c76e884a5722efd2c0da"><div class="ttname"><a href="../../dd/d20/event_8h.html#acaf805e5e914c76e884a5722efd2c0da">ast_event_get_ie_raw</a></div><div class="ttdeci">const void * ast_event_get_ie_raw(const struct ast_event *event, enum ast_event_ie_type ie_type)</div><div class="ttdoc">Get the value of an information element that has a raw payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00311">event.c:311</a></div></div>
<div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="stasis_8h_html_aa90ab45287904a603efb31319aaf8b91"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aa90ab45287904a603efb31319aaf8b91">stasis_message_to_event</a></div><div class="ttdeci">struct ast_event * stasis_message_to_event(struct stasis_message *msg)</div><div class="ttdoc">Build the Generic event system representation of the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00236">stasis_message.c:236</a></div></div>
<div class="ttc" id="utils_8h_html_ad5db11fa27352e2b9a3c669adc76955f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ad5db11fa27352e2b9a3c669adc76955f">ast_eid_default</a></div><div class="ttdeci">struct ast_eid ast_eid_default</div><div class="ttdoc">Global EID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00093">options.c:93</a></div></div>
<div class="ttc" id="event_8h_html_a50b34e0161630dbbc0880a06eb78ad7a"><div class="ttname"><a href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a></div><div class="ttdeci">void ast_event_destroy(struct ast_event *event)</div><div class="ttdoc">Destroy an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00524">event.c:524</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a070d5c094c48f371571ef286a6594e12"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a070d5c094c48f371571ef286a6594e12">publish_event_to_corosync</a></div><div class="ttdeci">static void publish_event_to_corosync(struct ast_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00544">res_corosync.c:544</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7546cbf83f68d818041b924793ccf2f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7546cbf83f68d818041b924793ccf2f4">&#9670;&nbsp;</a></span>send_cluster_notify()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_cluster_notify </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Informs the cluster of our EID and our IP addresses. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">737</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00062">AST_EVENT_CLUSTER_DISCOVERY</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00524">ast_event_destroy()</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00070">AST_EVENT_IE_END</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00281">AST_EVENT_IE_LOCAL_ADDR</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00313">AST_EVENT_IE_NODE_ID</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00328">AST_EVENT_IE_PLTYPE_STR</a>, <a class="el" href="../../d6/d37/event__defs_8h_source.html#l00326">AST_EVENT_IE_PLTYPE_UINT</a>, <a class="el" href="../../d0/deb/event_8c_source.html#l00402">ast_event_new()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00235">ast_rwlock_tryrdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">init_cpg_lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">publish_event_to_corosync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00351">publish_cluster_discovery_to_stasis()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">publish_cluster_discovery_to_stasis_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;{</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d78/structast__event.html">ast_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> node_id;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   cs_error_t cs_err;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   corosync_cfg_node_address_t corosync_addr;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordtype">int</span> num_addrs = 0;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keyword">struct </span>sockaddr *sa;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordtype">size_t</span> sa_len;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[128];</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>)) {</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;send_cluster_notify rdlock\n&quot;</span>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">if</span> ((cs_err = corosync_cfg_local_get(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, &amp;node_id)) != CS_OK) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to extract Corosync node ID for this node. Not informing cluster of existance.\n&quot;</span>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">if</span> (((cs_err = corosync_cfg_get_node_addrs(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, node_id, 1, &amp;num_addrs, &amp;corosync_addr)) != CS_OK) || (num_addrs &lt; 1)) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get local Corosync address. Not informing cluster of existance.\n&quot;</span>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;send_cluster_notify unlock\n&quot;</span>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   sa = (<span class="keyword">struct </span>sockaddr *)corosync_addr.address;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   sa_len = (<span class="keywordtype">size_t</span>)corosync_addr.address_length;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">if</span> ((res = getnameinfo(sa, sa_len, buf, <span class="keyword">sizeof</span>(buf), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, NI_NUMERICHOST))) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to determine name of local Corosync address: %s (%d). Not informing cluster of existance.\n&quot;</span>,</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;         gai_strerror(res), res);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keyword">event</span> = <a class="code" href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a>(<a class="code" href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803">AST_EVENT_CLUSTER_DISCOVERY</a>,</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a4647cbfacd475cb5067f9f9906107641">AST_EVENT_IE_PLTYPE_UINT</a>, node_id,</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e">AST_EVENT_IE_LOCAL_ADDR</a>, <a class="code" href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be">AST_EVENT_IE_PLTYPE_STR</a>, buf,</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <a class="code" href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a070d5c094c48f371571ef286a6594e12">publish_event_to_corosync</a>(event);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a>(event);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div><div class="ttc" id="structast__event_html"><div class="ttname"><a href="../../d5/d78/structast__event.html">ast_event</a></div><div class="ttdoc">An event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00081">event.c:81</a></div></div>
<div class="ttc" id="event__defs_8h_html_a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a6fa079412d9d9c1cc539f6d71f37f79faa55a609df0019b9e1daae9d8bff1e803">AST_EVENT_CLUSTER_DISCOVERY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00062">event_defs.h:62</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="event__defs_8h_html_a73dadfa1128d5e75107536e132e758c6a4647cbfacd475cb5067f9f9906107641"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6a4647cbfacd475cb5067f9f9906107641">AST_EVENT_IE_PLTYPE_UINT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00326">event_defs.h:326</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="lock_8h_html_af65c888941c741acb2e2078d5d078c49"><div class="ttname"><a href="../../dd/d42/lock_8h.html#af65c888941c741acb2e2078d5d078c49">ast_rwlock_tryrdlock</a></div><div class="ttdeci">#define ast_rwlock_tryrdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00235">lock.h:235</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a5e8c5b9dc6ba68e04fed59b87b6a473e">AST_EVENT_IE_LOCAL_ADDR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00281">event_defs.h:281</a></div></div>
<div class="ttc" id="event__defs_8h_html_a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a73dadfa1128d5e75107536e132e758c6ab82ac16f0791be2f8f918429a73430be">AST_EVENT_IE_PLTYPE_STR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00328">event_defs.h:328</a></div></div>
<div class="ttc" id="res__corosync_8c_html_af9634e6c1639fbb1a16ee2624101f490"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#af9634e6c1639fbb1a16ee2624101f490">init_cpg_lock</a></div><div class="ttdeci">static ast_rwlock_t init_cpg_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00052">res_corosync.c:52</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="event_8h_html_a50b34e0161630dbbc0880a06eb78ad7a"><div class="ttname"><a href="../../dd/d20/event_8h.html#a50b34e0161630dbbc0880a06eb78ad7a">ast_event_destroy</a></div><div class="ttdeci">void ast_event_destroy(struct ast_event *event)</div><div class="ttdoc">Destroy an event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00524">event.c:524</a></div></div>
<div class="ttc" id="event_8h_html_afb4a2a00de28bb0733037060da8c4bac"><div class="ttname"><a href="../../dd/d20/event_8h.html#afb4a2a00de28bb0733037060da8c4bac">ast_event_new</a></div><div class="ttdeci">struct ast_event * ast_event_new(enum ast_event_type event_type,...)</div><div class="ttdoc">Create a new event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/deb/event_8c_source.html#l00402">event.c:402</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a070d5c094c48f371571ef286a6594e12"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a070d5c094c48f371571ef286a6594e12">publish_event_to_corosync</a></div><div class="ttdeci">static void publish_event_to_corosync(struct ast_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00544">res_corosync.c:544</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491a04c78c1362e97d548344c354001c151f">AST_EVENT_IE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00070">event_defs.h:70</a></div></div>
<div class="ttc" id="event__defs_8h_html_a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c"><div class="ttname"><a href="../../d6/d37/event__defs_8h.html#a003673523d7fe265c6738a5a9e49c491ae9c5cbb927bc8b66ab62ba4bb0db478c">AST_EVENT_IE_NODE_ID</a></div><div class="ttdoc">Cluster node ID Used by: Corosync Payload type: UINT. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d37/event__defs_8h_source.html#l00313">event_defs.h:313</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af50dd1b4e00c612211407e7de4591908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af50dd1b4e00c612211407e7de4591908">&#9670;&nbsp;</a></span>set_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_event </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pubsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01153">1153</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00239">name</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01149">PUBLISH</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01150">SUBSCRIBE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;{</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>); i++) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> || strcasecmp(event_type, <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].<a class="code" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="keywordflow">switch</span> (pubsub) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>:</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].publish = 1;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a>:</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;         <a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>[i].subscribe = 1;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordflow">return</span> (i == <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a>)) ? -1 : 0;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01150">res_corosync.c:1150</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00239">res_corosync.c:239</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a39443c0266e47741a697b5361d4dd178"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a39443c0266e47741a697b5361d4dd178">event_types</a></div><div class="ttdeci">static struct @457 event_types[]</div></div>
<div class="ttc" id="res__corosync_8c_html_a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9bfa8c10a4adec48448b4c49ec5b3cb5abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01149">res_corosync.c:1149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad408dba1837441485eda168badb6b4e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad408dba1837441485eda168badb6b4e5">&#9670;&nbsp;</a></span>stasis_message_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stasis_message_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00601">601</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">publish_to_corosync()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">if</span> (!message) {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a2a23dde9e7ce6a76794da1e0a86ff9a6">publish_to_corosync</a>(message);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="ttc" id="res__corosync_8c_html_a2a23dde9e7ce6a76794da1e0a86ff9a6"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a2a23dde9e7ce6a76794da1e0a86ff9a6">publish_to_corosync</a></div><div class="ttdeci">static void publish_to_corosync(struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00571">res_corosync.c:571</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acbc7da203fefbdc221ad4ae2e8cae307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc7da203fefbdc221ad4ae2e8cae307">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN_LOCAL()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN_LOCAL </td>
          <td>(</td>
          <td class="paramtype">corosync_ping_message_type&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>to_event</em> = <code><a class="el" href="../../d1/da4/res__corosync_8c.html#a986e8aa9d44ae1311c9a9a88aca3c7f1">corosync_ping_to_event</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00175">corosync_ping_to_event()</a>.</p>

</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01433">1433</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d1/da4/res__corosync_8c.html#afa841eba34334f0f9f0a47377cda6af9">AST_MODULE_INFO_STANDARD_EXTENDED()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;{</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a>));</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <a class="code" href="../../d1/da4/res__corosync_8c.html#a56064044d42fabf92e88abb2c4a61c79">cleanup_module</a>();</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a45aa28f4018bd7db0dd3ca62d0a8006a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a45aa28f4018bd7db0dd3ca62d0a8006a">corosync_cli</a></div><div class="ttdeci">static struct ast_cli_entry corosync_cli[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01142">res_corosync.c:1142</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a56064044d42fabf92e88abb2c4a61c79"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a56064044d42fabf92e88abb2c4a61c79">cleanup_module</a></div><div class="ttdeci">static void cleanup_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01249">res_corosync.c:1249</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a55935aecf1002b1dfa1324bc3799b67c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55935aecf1002b1dfa1324bc3799b67c">&#9670;&nbsp;</a></span>alert_pipe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int alert_pipe[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00276">276</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="af14eb49a577cdd0a7bb655e04b24ff95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14eb49a577cdd0a7bb655e04b24ff95">&#9670;&nbsp;</a></span>cache_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d25/structstasis__cache.html">stasis_cache</a>*(*  cache_fn) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00246">246</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>.</p>

</div>
</div>
<a id="a706be3bdc15d2bbdf6fdda692110695a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a706be3bdc15d2bbdf6fdda692110695a">&#9670;&nbsp;</a></span>cfg_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">corosync_cfg_callbacks_t cfg_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00295">295</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>

</div>
</div>
<a id="ace59e73cd525ae17e77397b0cc7f7302"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace59e73cd525ae17e77397b0cc7f7302">&#9670;&nbsp;</a></span>cfg_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">corosync_cfg_handle_t cfg_handle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">284</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">agents_cfg_alloc()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01626">complete_bridge_profile_name()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01858">complete_menu_name()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01463">complete_user_profile_name()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02694">conf_destroy_config()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02539">conf_find_bridge_profile()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02486">conf_find_user_profile()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02656">conf_set_menu_to_user()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00965">corosync_show_members()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00537">destroy_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01653">handle_cli_confbridge_show_bridge_profiles()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01918">handle_cli_confbridge_show_menu()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01885">handle_cli_confbridge_show_menus()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l01490">handle_cli_confbridge_show_user_profiles()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02303">menu_template_handler()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>.</p>

</div>
</div>
<a id="a9fe8a3baa31ec0ce2babf80221c83af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fe8a3baa31ec0ce2babf80221c83af0">&#9670;&nbsp;</a></span>corosync_aggregate_topic</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* corosync_aggregate_topic</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The internal topic used for message forwarding and pings. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00068">68</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00074">corosync_topic()</a>.</p>

</div>
</div>
<a id="a45aa28f4018bd7db0dd3ca62d0a8006a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45aa28f4018bd7db0dd3ca62d0a8006a">&#9670;&nbsp;</a></span>corosync_cli</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> corosync_cli[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../d1/da4/res__corosync_8c.html#a4b896d894a3a82b9b45093c362b5a016">corosync_show_config</a> , .summary =  <span class="stringliteral">&quot;Show configuration&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d1/da4/res__corosync_8c.html#ae74d5c36c4bca62648d2676f28564a1b">corosync_show_members</a> , .summary =  <span class="stringliteral">&quot;Show cluster members&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d1/da4/res__corosync_8c.html#a9328e8ba1fca3c27fb28c612f3878d9a">corosync_ping</a> , .summary =  <span class="stringliteral">&quot;Send a test ping to the cluster&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="res__corosync_8c_html_a4b896d894a3a82b9b45093c362b5a016"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a4b896d894a3a82b9b45093c362b5a016">corosync_show_config</a></div><div class="ttdeci">static char * corosync_show_config(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01094">res_corosync.c:1094</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a9328e8ba1fca3c27fb28c612f3878d9a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a9328e8ba1fca3c27fb28c612f3878d9a">corosync_ping</a></div><div class="ttdeci">static char * corosync_ping(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l01059">res_corosync.c:1059</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ae74d5c36c4bca62648d2676f28564a1b"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ae74d5c36c4bca62648d2676f28564a1b">corosync_show_members</a></div><div class="ttdeci">static char * corosync_show_members(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00965">res_corosync.c:965</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01142">1142</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="a6238fc4bdd5ba467892a17d4f3efdcd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6238fc4bdd5ba467892a17d4f3efdcd3">&#9670;&nbsp;</a></span>corosync_node_joined</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int corosync_node_joined = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Join to corosync. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00062">62</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">publish_event_to_corosync()</a>.</p>

</div>
</div>
<a id="a28e053137a8d65ba892a4706c47dc901"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e053137a8d65ba892a4706c47dc901">&#9670;&nbsp;</a></span>cpg_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cpg_callbacks_t cpg_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .cpg_deliver_fn = <a class="code" href="../../d1/da4/res__corosync_8c.html#a034cf5915cfe7c8aab8b1247e2c9fa5a">cpg_deliver_cb</a>,</div><div class="line">   .cpg_confchg_fn = <a class="code" href="../../d1/da4/res__corosync_8c.html#ac55ac8c3f69b903d154be343e4352bb4">cpg_confchg_cb</a>,</div><div class="line">}</div><div class="ttc" id="res__corosync_8c_html_ac55ac8c3f69b903d154be343e4352bb4"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ac55ac8c3f69b903d154be343e4352bb4">cpg_confchg_cb</a></div><div class="ttdeci">static void cpg_confchg_cb(cpg_handle_t handle, const struct cpg_name *group_name, const struct cpg_address *member_list, size_t member_list_entries, const struct cpg_address *left_list, size_t left_list_entries, const struct cpg_address *joined_list, size_t joined_list_entries)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00647">res_corosync.c:647</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a034cf5915cfe7c8aab8b1247e2c9fa5a"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a034cf5915cfe7c8aab8b1247e2c9fa5a">cpg_deliver_cb</a></div><div class="ttdeci">static void cpg_deliver_cb(cpg_handle_t handle, const struct cpg_name *group_name, uint32_t nodeid, uint32_t pid, void *msg, size_t msg_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00484">res_corosync.c:484</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00466">466</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>

</div>
</div>
<a id="afdba8f2f543c90d8ac6c25ec200e8b4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdba8f2f543c90d8ac6c25ec200e8b4b">&#9670;&nbsp;</a></span>cpg_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cpg_handle_t cpg_handle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00283">283</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00965">corosync_show_members()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">publish_event_to_corosync()</a>.</p>

</div>
</div>
<a id="a9d80b09d3bff65b5c0f15cfc170a1100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d80b09d3bff65b5c0f15cfc170a1100">&#9670;&nbsp;</a></span>dispatch_thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   dispatch_thread</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .id = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>,</div><div class="line">   .alert_pipe = { -1, -1 },</div><div class="line">}</div><div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>.</p>

</div>
</div>
<a id="a39443c0266e47741a697b5361d4dd178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39443c0266e47741a697b5361d4dd178">&#9670;&nbsp;</a></span>event_types</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   event_types[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01059">corosync_ping()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01094">corosync_show_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01153">set_event()</a>.</p>

</div>
</div>
<a id="aabd18833e4fb06f806929bd6c7e85c86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabd18833e4fb06f806929bd6c7e85c86">&#9670;&nbsp;</a></span>event_types_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> event_types_lock = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00051">51</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01094">corosync_show_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>.</p>

</div>
</div>
<a id="a2465fd4497a7402ad72da7d6e03f9934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2465fd4497a7402ad72da7d6e03f9934">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00275">275</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="af9634e6c1639fbb1a16ee2624101f490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9634e6c1639fbb1a16ee2624101f490">&#9670;&nbsp;</a></span>init_cpg_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> init_cpg_lock = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00052">52</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00965">corosync_show_members()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00782">dispatch_thread_handler()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00544">publish_event_to_corosync()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00737">send_cluster_notify()</a>.</p>

</div>
</div>
<a id="a8ad7311ccb92419767496229086727ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad7311ccb92419767496229086727ab">&#9670;&nbsp;</a></span>message_type_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>*(*  message_type_fn) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00247">247</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>.</p>

</div>
</div>
<a id="a8f8f80d37794cde9472343e4487ba3eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f8f80d37794cde9472343e4487ba3eb">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00239">239</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01153">set_event()</a>.</p>

</div>
</div>
<a id="a2d8fad2480add5654ffb1fc4047c7940"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d8fad2480add5654ffb1fc4047c7940">&#9670;&nbsp;</a></span>nodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* nodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>All the nodes that we're aware of. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00065">65</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d2b/test__heap_8c_source.html#l00117">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="aa4002959b64099e84d20e09e38c2e51e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4002959b64099e84d20e09e38c2e51e">&#9670;&nbsp;</a></span>publish</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char publish</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00241">241</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00541">ast_sip_publish_client_get_from_uri()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00591">ast_sip_publish_client_get_to_uri()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01094">corosync_show_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01492">current_state_reusable()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02468">load_module()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01614">outbound_auth_handler()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">schedule_publish_refresh()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00667">sip_outbound_publish_alloc()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00657">sip_outbound_publish_destroy()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00470">sip_outbound_publish_synchronize()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00889">sip_outbound_publisher_set_uris()</a>, <a class="el" href="../../db/d00/test__stasis_8c_source.html#l02436">unload_module()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01071">xmpp_pubsub_build_publish_skeleton()</a>.</p>

</div>
</div>
<a id="a469eebfff8939f8bc8704c0bcae6e66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469eebfff8939f8bc8704c0bcae6e66c">&#9670;&nbsp;</a></span>publish_default</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char publish_default</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00242">242</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="ab22b857eb319e178e1fa65c95359e6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22b857eb319e178e1fa65c95359e6ea">&#9670;&nbsp;</a></span>publish_to_stasis</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(*  publish_to_stasis) (struct <a class="el" href="../../d5/d78/structast__event.html">ast_event</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00248">248</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="a6d6d7bdd31cb1b6f84f2e447a7a2c6c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d6d7bdd31cb1b6f84f2e447a7a2c6c2">&#9670;&nbsp;</a></span>stasis_router</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a>* stasis_router</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> message router. </p>

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00071">71</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="a111277a0849f92b793ed6aa1efe54462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a111277a0849f92b793ed6aa1efe54462">&#9670;&nbsp;</a></span>stop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int stop</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00277">277</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="a8e51289dd0fc7415cee40e7a57b49fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e51289dd0fc7415cee40e7a57b49fdf">&#9670;&nbsp;</a></span>sub</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d54/structstasis__forward.html">stasis_forward</a>* sub</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">240</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04324">_skinny_show_lines()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04519">acf_channel_read()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06049">activatesub()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00640">add_mwi_datastore()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01233">allocate_subscription()</a>, <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l00454">analog_new_ast_channel()</a>, <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l00979">analog_set_inthreeway()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00931">ao2_weakproxy_subscribe()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00970">ao2_weakproxy_unsubscribe()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00585">append_sub()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10539">ast_channel_connected_line_sub()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10584">ast_channel_redirecting_sub()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00230">ast_mwi_subscribe_pool()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01868">ast_sip_create_subscription()</a>, <a class="el" href="../../d6/dd1/test__devicestate_8c_source.html#l00666">AST_TEST_DEFINE()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03281">attempt_transfer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04794">channel_to_session()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02599">close_call()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01470">close_client()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08350">config_device()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01188">create_unsolicited_mwi_subscriptions()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01286">create_virtual_subscriptions()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06422">delete_device()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00565">delete_sub()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04539">destroy_endpoint()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02647">discard_call()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00170">exten_state_subscription_destructor()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02685">find_rtp_port()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02039">find_subchannel_by_instance_reference()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05421">find_subchannel_by_name()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02066">find_subchannel_by_reference()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01396">generic_monitor_instance_list_destructor()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05154">get_devicestate()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00459">get_or_create_subscription()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02493">get_sub()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02511">get_sub_holding()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00394">get_subscription()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03262">handle_call_incoming()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03111">handle_call_outgoing()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06160">handle_callforward_button()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06942">handle_enbloc_call_message()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03380">handle_key_fav()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06220">handle_keypad_button_message()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00306">handle_msg_cb()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06546">handle_offhook_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06609">handle_onhook_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06865">handle_open_receive_channel_ack_message()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06974">handle_soft_key_event_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06316">handle_stimulus_message()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06109">handle_transfer_button()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00213">has_destination_cb()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01232">jb_debug_output()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03435">key_call()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03561">key_dial_page()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01553">load_module()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00123">message_subscription_alloc()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00109">message_subscription_dtor()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00138">message_subscription_hash_cb()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00493">messaging_app_subscribe_endpoint()</a>, <a class="el" href="../../db/d21/messaging_8c_source.html#l00423">messaging_app_unsubscribe_endpoint()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02448">mgcp_alloc_pktcgate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01156">mgcp_answer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00826">mgcp_call()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01282">mgcp_fixup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04503">mgcp_get_codec()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04475">mgcp_get_rtp_peer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00902">mgcp_hangup()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01438">mgcp_indicate()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02435">mgcp_pktcgate_open()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02412">mgcp_pktcgate_remove()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00699">mgcp_postrequest()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03760">mgcp_prune_realtime_gateway()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01230">mgcp_read()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03965">mgcp_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01298">mgcp_senddigit_begin()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01319">mgcp_senddigit_end()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04491">mgcp_set_rtp_peer()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03000">mgcp_ss()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01240">mgcp_write()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00920">mwi_create_subscription()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00629">mwi_ds_destroy()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00889">mwi_on_aor()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00960">mwi_subscribe_all()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00939">mwi_subscribe_single()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00231">mwi_subscription_alloc()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00219">mwi_subscription_destructor()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01005">mwi_subscription_established()</a>, <a class="el" href="../../db/d62/app__adsiprog_8c_source.html#l00823">onevent()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00413">proxy_dtor()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03956">pubsub_on_rx_notify()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02071">rcv_mac_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03453">rtp_learning_start()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00490">send_unsolicited_mwi_notify()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05560">setsubstate()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05010">skinny_answer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04897">skinny_autoanswer_cb()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04918">skinny_call()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04907">skinny_cfwd_cb()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04888">skinny_dialer_cb()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05123">skinny_fixup()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03607">skinny_get_rtp_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03594">skinny_get_vrtp_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04987">skinny_hangup()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05297">skinny_indicate()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05371">skinny_new()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04823">skinny_newcall()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05081">skinny_read()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07717">skinny_request()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05140">skinny_senddigit_end()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03641">skinny_set_rtp_peer()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05249">skinny_transfer_attended()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l05091">skinny_write()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00412">stasis_state_add_subscriber()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00446">stasis_state_subscribe_pool()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01152">stasis_subscription_is_subscribed()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00823">stasis_subscription_statistics_create()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00391">subscriber_dtor()</a>, <a class="el" href="../../db/d62/app__adsiprog_8c_source.html#l00798">subscript()</a>, <a class="el" href="../../dd/de5/test__mwi_8c_source.html#l00143">subscriptions_create()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03056">transfer_call_step1()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03080">transfer_cancel_step2()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01988">unistim_alloc_sub()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05054">unistim_answer()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04867">unistim_call()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l03356">unistim_do_senddigit()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l07030">unistim_get_rtp_peer()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04945">unistim_hangup()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05333">unistim_indicate()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05204">unistim_read()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05956">unistim_request()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l07047">unistim_set_rtp_peer()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06035">unistim_show_info()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06150">unistim_sp()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02659">unistim_ss()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05216">unistim_write()</a>, and <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08748">unload_module()</a>.</p>

</div>
</div>
<a id="a84fa7112345dca92d94860c1dcef8ba6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84fa7112345dca92d94860c1dcef8ba6">&#9670;&nbsp;</a></span>subscribe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char subscribe</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00243">243</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01094">corosync_show_config()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01414">xmpp_pubsub_subscribe()</a>.</p>

</div>
</div>
<a id="a961983356dc2cf428ccf4be9974ef04d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a961983356dc2cf428ccf4be9974ef04d">&#9670;&nbsp;</a></span>subscribe_default</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char subscribe_default</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00244">244</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

</div>
</div>
<a id="ad2f6e8d39cd90b46e767e2b5bc57ee9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2f6e8d39cd90b46e767e2b5bc57ee9c">&#9670;&nbsp;</a></span>topic_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>*(*  topic_fn) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00245">245</a> of file <a class="el" href="../../d1/da4/res__corosync_8c_source.html">res_corosync.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00647">cpg_confchg_cb()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01177">load_general_config()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:23 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
