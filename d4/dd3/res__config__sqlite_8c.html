<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_config_sqlite.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_config_sqlite.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>res_config_sqlite module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sqlite.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/cdr_8h_source.html">asterisk/cdr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_config_sqlite.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d95/res__config__sqlite_8c__incl.png" border="0" usemap="#res__config__sqlite_8c" alt=""/></div>
<map name="res__config__sqlite_8c" id="res__config__sqlite_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="82,304,166,331"/>
<area shape="rect" id="node23" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="299,677,426,704"/>
<area shape="rect" id="node25" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="1309,155,1421,181"/>
<area shape="rect" id="node29" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1658,603,1771,629"/>
<area shape="rect" id="node35" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="946,379,1097,405"/>
<area shape="rect" id="node38" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1787,80,1898,107"/>
<area shape="rect" id="node41" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2117,304,2243,331"/>
<area shape="rect" id="node42" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="2268,304,2375,331"/>
<area shape="rect" id="node49" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1069,155,1171,181"/>
<area shape="rect" id="node50" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1437,80,1573,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="64,827,219,853"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="582,379,719,405"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="43,379,178,405"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="68,901,215,928"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1347,677,1490,704"/>
<area shape="rect" id="node24" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="211,752,346,779"/>
<area shape="rect" id="node26" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1940,453,2097,480"/>
<area shape="rect" id="node30" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1055,229,1185,256"/>
<area shape="rect" id="node32" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1651,379,1765,405"/>
<area shape="rect" id="node33" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1188,304,1367,331"/>
<area shape="rect" id="node36" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="1209,229,1316,256"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1815,304,1940,331"/>
<area shape="rect" id="node27" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1895,677,2041,704"/>
<area shape="rect" id="node28" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="1803,528,1930,555"/>
<area shape="rect" id="node34" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="954,304,1089,331"/>
<area shape="rect" id="node39" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1908,229,2047,256"/>
<area shape="rect" id="node40" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1543,304,1689,331"/>
<area shape="rect" id="node43" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1906,155,2033,181"/>
<area shape="rect" id="node44" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1665,229,1828,256"/>
<area shape="rect" id="node45" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="2057,155,2237,181"/>
<area shape="rect" id="node46" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="2129,528,2269,555"/>
<area shape="rect" id="node47" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="1594,155,1729,181"/>
<area shape="rect" id="node48" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2261,155,2392,181"/>
</map>
</div>
</div>
<p><a href="../../d4/dd3/res__config__sqlite_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dcb/structsqlite__cache__tables_1_1__columns.html">sqlite_cache_tables::_columns</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6ea20bb10289e56e9a2af562401dad73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a6ea20bb10289e56e9a2af562401dad73">MACRO_BEGIN</a>&#160;&#160;&#160;do {</td></tr>
<tr class="separator:a6ea20bb10289e56e9a2af562401dad73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24d643fdd618bef1cd183c98cc2e8201"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a24d643fdd618bef1cd183c98cc2e8201">MACRO_END</a>&#160;&#160;&#160;} <a class="el" href="../../d2/d7e/ael__lex_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a> (0)</td></tr>
<tr class="separator:a24d643fdd618bef1cd183c98cc2e8201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792da613ea8b323dedd14a35d0b367a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a792da613ea8b323dedd14a35d0b367a2">release_table</a>(<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;((<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)-&gt;<a class="el" href="../../d7/dec/structcolumns.html">columns</a>))</td></tr>
<tr class="separator:a792da613ea8b323dedd14a35d0b367a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad68868f34232bc245b29318442eff1ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></td></tr>
<tr class="separator:ad68868f34232bc245b29318442eff1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac391d995daec836742fde68abf645f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a4ac391d995daec836742fde68abf645f">RES_CONFIG_SQLITE_CONF_FILE</a>&#160;&#160;&#160;&quot;res_config_sqlite.conf&quot;</td></tr>
<tr class="separator:a4ac391d995daec836742fde68abf645f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f82b578cab098832c975e3f4237ce12"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2f82b578cab098832c975e3f4237ce12">RES_CONFIG_SQLITE_DESCRIPTION</a>&#160;&#160;&#160;&quot;Resource Module for SQLite 2&quot;</td></tr>
<tr class="separator:a2f82b578cab098832c975e3f4237ce12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af904e6a4f8bb70e7fabc40848744941f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#af904e6a4f8bb70e7fabc40848744941f">RES_CONFIG_SQLITE_DRIVER</a>&#160;&#160;&#160;&quot;sqlite&quot;</td></tr>
<tr class="separator:af904e6a4f8bb70e7fabc40848744941f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a273fbdbcd4491234b3c4dcfe5b5c5d52"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(<a class="el" href="../../da/d7c/utils_2frame_8h.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>)</td></tr>
<tr class="separator:a273fbdbcd4491234b3c4dcfe5b5c5d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685bbd45a4811eb231e0066852c31c94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a685bbd45a4811eb231e0066852c31c94">RES_CONFIG_SQLITE_MAX_LOOPS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a685bbd45a4811eb231e0066852c31c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd22ddbb653b6555ab5bc619780efc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#acbd22ddbb653b6555ab5bc619780efc0">RES_CONFIG_SQLITE_NAME</a>&#160;&#160;&#160;&quot;res_config_sqlite&quot;</td></tr>
<tr class="separator:acbd22ddbb653b6555ab5bc619780efc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5414f66b45fde76fd377295dfdbe45"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#abb5414f66b45fde76fd377295dfdbe45">SET_VAR</a>(<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>,  to,  from)</td></tr>
<tr class="separator:abb5414f66b45fde76fd377295dfdbe45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca80598759ece103ebaf5cc9aae308a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5ca80598759ece103ebaf5cc9aae308a">sql_get_config_table</a></td></tr>
<tr class="separator:a5ca80598759ece103ebaf5cc9aae308a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea0cb44ed8d5fc52fcee6ae61e40561"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#afea0cb44ed8d5fc52fcee6ae61e40561">sql_table_structure</a>&#160;&#160;&#160;&quot;SELECT sql FROM sqlite_master WHERE <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>='<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>' AND tbl_name='%s'&quot;</td></tr>
<tr class="separator:afea0cb44ed8d5fc52fcee6ae61e40561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa6330de06cf867727bd76475403c83f8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0629a788663cc64450958532c515165a">RES_CONFIG_SQLITE_CONFIG_ID</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a061efed6883712a4338a7b70873aa268">RES_CONFIG_SQLITE_CONFIG_CAT_METRIC</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a793f0b280859ad957e1f2930a849208e">RES_CONFIG_SQLITE_CONFIG_VAR_METRIC</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a9734ede0883dda220fb6ba2a98d7085e">RES_CONFIG_SQLITE_CONFIG_COMMENTED</a>, 
<br />
&#160;&#160;<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0b6ea6b0fddd2be25e1559cf4a49efae">RES_CONFIG_SQLITE_CONFIG_FILENAME</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a>, 
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a>, 
<br />
&#160;&#160;<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a>
<br />
 }</td></tr>
<tr class="separator:aa6330de06cf867727bd76475403c83f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ff160eb8cc768ef928c90bb61ded670"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> (void)</td></tr>
<tr class="separator:a2ff160eb8cc768ef928c90bb61ded670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f1f17b984a00ca0d3e210095ca5f2f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ae4f1f17b984a00ca0d3e210095ca5f2f">__init_where_buf</a> (void)</td></tr>
<tr class="separator:ae4f1f17b984a00ca0d3e210095ca5f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0550541665aab14df8f089397bba5ae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ab0550541665aab14df8f089397bba5ae">add_cfg_entry</a> (void *arg, int argc, char **argv, char **columnNames)</td></tr>
<tr class="memdesc:ab0550541665aab14df8f089397bba5ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLite callback function for static configuration.  <a href="#ab0550541665aab14df8f089397bba5ae">More...</a><br /></td></tr>
<tr class="separator:ab0550541665aab14df8f089397bba5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1acd2046121f2656b6e35ec0d5650913"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1acd2046121f2656b6e35ec0d5650913">add_rt_cfg_entry</a> (void *arg, int argc, char **argv, char **columnNames)</td></tr>
<tr class="memdesc:a1acd2046121f2656b6e35ec0d5650913"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLite callback function for RealTime configuration.  <a href="#a1acd2046121f2656b6e35ec0d5650913">More...</a><br /></td></tr>
<tr class="separator:a1acd2046121f2656b6e35ec0d5650913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b5ad55ba185061850f5d682c397a98"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a17b5ad55ba185061850f5d682c397a98">add_rt_multi_cfg_entry</a> (void *arg, int argc, char **argv, char **columnNames)</td></tr>
<tr class="memdesc:a17b5ad55ba185061850f5d682c397a98"><td class="mdescLeft">&#160;</td><td class="mdescRight">SQLite callback function for RealTime configuration.  <a href="#a17b5ad55ba185061850f5d682c397a98">More...</a><br /></td></tr>
<tr class="separator:a17b5ad55ba185061850f5d682c397a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b959d97c623a073d5562c5921b0635a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a9b959d97c623a073d5562c5921b0635a">cdr_handler</a> (struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *cdr)</td></tr>
<tr class="memdesc:a9b959d97c623a073d5562c5921b0635a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for CDR support.  <a href="#a9b959d97c623a073d5562c5921b0635a">More...</a><br /></td></tr>
<tr class="separator:a9b959d97c623a073d5562c5921b0635a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12194f6de6564ba57f2639c27bf3530"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa12194f6de6564ba57f2639c27bf3530">check_vars</a> (void)</td></tr>
<tr class="separator:aa12194f6de6564ba57f2639c27bf3530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c363143661597b8480ef856c1acad80"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a7c363143661597b8480ef856c1acad80">config_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *file, struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> flags, const char *suggested_incl, const char *who_asked)</td></tr>
<tr class="memdesc:a7c363143661597b8480ef856c1acad80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for static configuration.  <a href="#a7c363143661597b8480ef856c1acad80">More...</a><br /></td></tr>
<tr class="separator:a7c363143661597b8480ef856c1acad80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990147aa70d656ae71a98b581e05d7cd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a990147aa70d656ae71a98b581e05d7cd">find_table</a> (const char *tablename)</td></tr>
<tr class="separator:a990147aa70d656ae71a98b581e05d7cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31acdca539faef9b6707d7f930903657"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a31acdca539faef9b6707d7f930903657">find_table_cb</a> (void *vtblptr, int argc, char **argv, char **columnNames)</td></tr>
<tr class="separator:a31acdca539faef9b6707d7f930903657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5784f210e0f5472a18ecd99d64ffec9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a> (struct <a class="el" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tblptr)</td></tr>
<tr class="separator:a5784f210e0f5472a18ecd99d64ffec9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09349f29c2d83b9c82873b6b30d960f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ac09349f29c2d83b9c82873b6b30d960f">handle_cli_show_sqlite_status</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:ac09349f29c2d83b9c82873b6b30d960f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for the CLI status command.  <a href="#ac09349f29c2d83b9c82873b6b30d960f">More...</a><br /></td></tr>
<tr class="separator:ac09349f29c2d83b9c82873b6b30d960f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae4390cbd19f3cbb3b5f51b6488decb"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a3ae4390cbd19f3cbb3b5f51b6488decb">handle_cli_sqlite_show_tables</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a3ae4390cbd19f3cbb3b5f51b6488decb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed5779f84d4ebb67745d801d3ebede43"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a> (void)</td></tr>
<tr class="memdesc:aed5779f84d4ebb67745d801d3ebede43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the configuration file.  <a href="#aed5779f84d4ebb67745d801d3ebede43">More...</a><br /></td></tr>
<tr class="separator:aed5779f84d4ebb67745d801d3ebede43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="memdesc:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the module.  <a href="#ac3382bf6da54c56b37069bd76bbdf4f9">More...</a><br /></td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3f66258435b404a8ae297c077a572d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a6a3f66258435b404a8ae297c077a572d">realtime_destroy_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a6a3f66258435b404a8ae297c077a572d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for RealTime configuration (destroys variable).  <a href="#a6a3f66258435b404a8ae297c077a572d">More...</a><br /></td></tr>
<tr class="separator:a6a3f66258435b404a8ae297c077a572d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1468a11f36fa0ddbf6e07f2fd42c8e50"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1468a11f36fa0ddbf6e07f2fd42c8e50">realtime_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a1468a11f36fa0ddbf6e07f2fd42c8e50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for RealTime configuration.  <a href="#a1468a11f36fa0ddbf6e07f2fd42c8e50">More...</a><br /></td></tr>
<tr class="separator:a1468a11f36fa0ddbf6e07f2fd42c8e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a612faaaddc0075e3ba690e2299e8b8f8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a612faaaddc0075e3ba690e2299e8b8f8">realtime_multi_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a612faaaddc0075e3ba690e2299e8b8f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for RealTime configuration.  <a href="#a612faaaddc0075e3ba690e2299e8b8f8">More...</a><br /></td></tr>
<tr class="separator:a612faaaddc0075e3ba690e2299e8b8f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286f8ad5d7b6c69af0ca40c7fb799012"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a286f8ad5d7b6c69af0ca40c7fb799012">realtime_require_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, va_list ap)</td></tr>
<tr class="separator:a286f8ad5d7b6c69af0ca40c7fb799012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f236ac509fad9b8e6b741f438aac70"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a67f236ac509fad9b8e6b741f438aac70">realtime_store_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a67f236ac509fad9b8e6b741f438aac70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for RealTime configuration (variable create/store).  <a href="#a67f236ac509fad9b8e6b741f438aac70">More...</a><br /></td></tr>
<tr class="separator:a67f236ac509fad9b8e6b741f438aac70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4554cd4e901164ef2da59b8398d56d8f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a4554cd4e901164ef2da59b8398d56d8f">realtime_unload_handler</a> (const char *unused, const char *tablename)</td></tr>
<tr class="separator:a4554cd4e901164ef2da59b8398d56d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa72a6659e8feb3c58964b727dee267b0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa72a6659e8feb3c58964b727dee267b0">realtime_update2_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *lookup_fields, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *update_fields)</td></tr>
<tr class="separator:aa72a6659e8feb3c58964b727dee267b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b655916b15e90dd7bd220863e6e54ef"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5b655916b15e90dd7bd220863e6e54ef">realtime_update_handler</a> (const char *database, const char *<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>, const char *keyfield, const char *<a class="el" href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>, const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *fields)</td></tr>
<tr class="memdesc:a5b655916b15e90dd7bd220863e6e54ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asterisk callback function for RealTime configuration (variable update).  <a href="#a5b655916b15e90dd7bd220863e6e54ef">More...</a><br /></td></tr>
<tr class="separator:a5b655916b15e90dd7bd220863e6e54ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9493baa3343654ae2828e06ad1ace967"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a9493baa3343654ae2828e06ad1ace967">set_var</a> (char **<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:a9493baa3343654ae2828e06ad1ace967"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a variable.  <a href="#a9493baa3343654ae2828e06ad1ace967">More...</a><br /></td></tr>
<tr class="separator:a9493baa3343654ae2828e06ad1ace967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f99a227dc7bc5522ba90399070f385"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385">unload_config</a> (void)</td></tr>
<tr class="memdesc:a72f99a227dc7bc5522ba90399070f385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free resources related to configuration.  <a href="#a72f99a227dc7bc5522ba90399070f385">More...</a><br /></td></tr>
<tr class="separator:a72f99a227dc7bc5522ba90399070f385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Realtime SQLite configuration&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_REALTIME_DRIVER, .requires = &quot;extconfig&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2e93e1c4b3210b679a29b71df49c21"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a></td></tr>
<tr class="separator:a4d2e93e1c4b3210b679a29b71df49c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5684b2e0f909bbe1870dcdfce38e9b6a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></td></tr>
<tr class="separator:a5684b2e0f909bbe1870dcdfce38e9b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b6b9c6ba9ec579e0cc93d497500db8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a> []</td></tr>
<tr class="separator:a47b6b9c6ba9ec579e0cc93d497500db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8501d6d552484744440e2ded409689"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a></td></tr>
<tr class="separator:a5b8501d6d552484744440e2ded409689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a726fbbc714a0071010def61248cd0416"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></td></tr>
<tr class="separator:a726fbbc714a0071010def61248cd0416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082868565d651c0da1d2f0c194cb3248"><td class="memItemLeft" align="right" valign="top">static sqlite *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></td></tr>
<tr class="separator:a082868565d651c0da1d2f0c194cb3248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a723e9edf0fe1cdfa024e00803401e74e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></td></tr>
<tr class="separator:a723e9edf0fe1cdfa024e00803401e74e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf414f64e7e755faa275f1c6383a9cc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:a1cf414f64e7e755faa275f1c6383a9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4bfa5a94710e6f323a1033f82425b3"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:afc4bfa5a94710e6f323a1033f82425b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6feefd120eabf04edc898d1430fd9f0"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ae6feefd120eabf04edc898d1430fd9f0">sql_create_cdr_table</a></td></tr>
<tr class="separator:ae6feefd120eabf04edc898d1430fd9f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b48efb1da6b47259373e75543e0e320"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d26/structast__config__engine.html">ast_config_engine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a7b48efb1da6b47259373e75543e0e320">sqlite_engine</a></td></tr>
<tr class="separator:a7b48efb1da6b47259373e75543e0e320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaee7dc3f4053cefb8d7efed65f42d30"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#adaee7dc3f4053cefb8d7efed65f42d30">sqlite_tables</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:adaee7dc3f4053cefb8d7efed65f42d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d89dee97961b1992b5213744a59120"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a50d89dee97961b1992b5213744a59120">use_cdr</a></td></tr>
<tr class="separator:a50d89dee97961b1992b5213744a59120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b636f309367e4fa49ffb2c0a55e5bdd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2b636f309367e4fa49ffb2c0a55e5bdd">where_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ae4f1f17b984a00ca0d3e210095ca5f2f">__init_where_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a2b636f309367e4fa49ffb2c0a55e5bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>res_config_sqlite module. </p>

<p class="definition">Definition in file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6ea20bb10289e56e9a2af562401dad73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea20bb10289e56e9a2af562401dad73">&#9670;&nbsp;</a></span>MACRO_BEGIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MACRO_BEGIN&#160;&#160;&#160;do {</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00102">102</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a24d643fdd618bef1cd183c98cc2e8201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24d643fdd618bef1cd183c98cc2e8201">&#9670;&nbsp;</a></span>MACRO_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MACRO_END&#160;&#160;&#160;} <a class="el" href="../../d2/d7e/ael__lex_8c.html#a8fdafe3be7e00ce3d4f0cb50a9a5eb39">while</a> (0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00103">103</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a792da613ea8b323dedd14a35d0b367a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a792da613ea8b323dedd14a35d0b367a2">&#9670;&nbsp;</a></span>release_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define release_table</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d4/dc5/extconf_8c.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;((<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)-&gt;<a class="el" href="../../d7/dec/structcolumns.html">columns</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00693">693</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>.</p>

</div>
</div>
<a id="ad68868f34232bc245b29318442eff1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad68868f34232bc245b29318442eff1ce">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_BEGIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_BEGIN</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">MACRO_BEGIN                      \</div><div class="line">   int __i;                   \</div><div class="line">                           \</div><div class="line">   for (__i = 0; __i &lt; <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a685bbd45a4811eb231e0066852c31c94">RES_CONFIG_SQLITE_MAX_LOOPS</a>; __i++)  {</div><div class="ttc" id="res__config__sqlite_8c_html_a685bbd45a4811eb231e0066852c31c94"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a685bbd45a4811eb231e0066852c31c94">RES_CONFIG_SQLITE_MAX_LOOPS</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_MAX_LOOPS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00154">res_config_sqlite.c:154</a></div></div>
</div><!-- fragment --><p>Macro used before executing a query.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a685bbd45a4811eb231e0066852c31c94">RES_CONFIG_SQLITE_MAX_LOOPS</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">161</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01443">realtime_destroy_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01357">realtime_store_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01214">realtime_update_handler()</a>.</p>

</div>
</div>
<a id="a4ac391d995daec836742fde68abf645f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ac391d995daec836742fde68abf645f">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_CONF_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_CONF_FILE&#160;&#160;&#160;&quot;res_config_sqlite.conf&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00108">108</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>.</p>

</div>
</div>
<a id="a2f82b578cab098832c975e3f4237ce12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f82b578cab098832c975e3f4237ce12">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_DESCRIPTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_DESCRIPTION&#160;&#160;&#160;&quot;Resource Module for SQLite 2&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00107">107</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>

</div>
</div>
<a id="af904e6a4f8bb70e7fabc40848744941f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af904e6a4f8bb70e7fabc40848744941f">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_DRIVER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_DRIVER&#160;&#160;&#160;&quot;sqlite&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00106">106</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a273fbdbcd4491234b3c4dcfe5b5c5d52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a273fbdbcd4491234b3c4dcfe5b5c5d52">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_END</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../da/d7c/utils_2frame_8h.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a> != SQLITE_BUSY)  \</div><div class="line">         break;                  \</div><div class="line">      usleep(1000);                 \</div><div class="line">   }                       \</div><div class="line">MACRO_END;</div><div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
</div><!-- fragment --><p>Macro used after executing a query.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a685bbd45a4811eb231e0066852c31c94">RES_CONFIG_SQLITE_MAX_LOOPS</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">172</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01443">realtime_destroy_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01357">realtime_store_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01214">realtime_update_handler()</a>.</p>

</div>
</div>
<a id="a685bbd45a4811eb231e0066852c31c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685bbd45a4811eb231e0066852c31c94">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_MAX_LOOPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_MAX_LOOPS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum number of loops before giving up executing a query. Calls to sqlite_xxx() functions which can return SQLITE_BUSY are enclosed by RES_CONFIG_SQLITE_BEGIN and RES_CONFIG_SQLITE_END, e.g. </p><pre>
char *errormsg;
int error;</pre><pre>RES_CONFIG_SQLITE_BEGIN
 error = sqlite_exec(db, query, NULL, NULL, &amp;errormsg);
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END(error)</a></pre><pre>if (error)
 ...;
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00154">154</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="acbd22ddbb653b6555ab5bc619780efc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbd22ddbb653b6555ab5bc619780efc0">&#9670;&nbsp;</a></span>RES_CONFIG_SQLITE_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_CONFIG_SQLITE_NAME&#160;&#160;&#160;&quot;res_config_sqlite&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00105">105</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>.</p>

</div>
</div>
<a id="abb5414f66b45fde76fd377295dfdbe45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5414f66b45fde76fd377295dfdbe45">&#9670;&nbsp;</a></span>SET_VAR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_VAR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">to, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">from&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00122">122</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>.</p>

</div>
</div>
<a id="a5ca80598759ece103ebaf5cc9aae308a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ca80598759ece103ebaf5cc9aae308a">&#9670;&nbsp;</a></span>sql_get_config_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sql_get_config_table</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="stringliteral">&quot;SELECT *&quot;</span> \</div><div class="line">   <span class="stringliteral">&quot;  FROM &#39;%q&#39;&quot;</span> \</div><div class="line">   <span class="stringliteral">&quot;  WHERE filename = &#39;%q&#39; AND commented = 0&quot;</span> \</div><div class="line">   <span class="stringliteral">&quot;  ORDER BY cat_metric ASC, var_metric ASC;&quot;</span></div></div><!-- fragment --><p>SQL query format to fetch the static configuration of a file. Rows must be sorted by category.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ab0550541665aab14df8f089397bba5ae" title="SQLite callback function for static configuration. ">add_cfg_entry()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00551">551</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>.</p>

</div>
</div>
<a id="afea0cb44ed8d5fc52fcee6ae61e40561"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea0cb44ed8d5fc52fcee6ae61e40561">&#9670;&nbsp;</a></span>sql_table_structure</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sql_table_structure&#160;&#160;&#160;&quot;SELECT sql FROM sqlite_master WHERE <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>='<a class="el" href="../../db/d94/cel__sqlite3__custom_8c.html#aa334abe35e252ebf7a2c7c29572bc60f">table</a>' AND tbl_name='%s'&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SQL query format to describe the table structure </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00543">543</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa6330de06cf867727bd76475403c83f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6330de06cf867727bd76475403c83f8">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a0629a788663cc64450958532c515165a"></a>RES_CONFIG_SQLITE_CONFIG_ID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a061efed6883712a4338a7b70873aa268"></a>RES_CONFIG_SQLITE_CONFIG_CAT_METRIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a793f0b280859ad957e1f2930a849208e"></a>RES_CONFIG_SQLITE_CONFIG_VAR_METRIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a9734ede0883dda220fb6ba2a98d7085e"></a>RES_CONFIG_SQLITE_CONFIG_COMMENTED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a0b6ea6b0fddd2be25e1559cf4a49efae"></a>RES_CONFIG_SQLITE_CONFIG_FILENAME&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e"></a>RES_CONFIG_SQLITE_CONFIG_CATEGORY&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5"></a>RES_CONFIG_SQLITE_CONFIG_VAR_NAME&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f"></a>RES_CONFIG_SQLITE_CONFIG_VAR_VAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d"></a>RES_CONFIG_SQLITE_CONFIG_COLUMNS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00110">110</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;     {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0629a788663cc64450958532c515165a">RES_CONFIG_SQLITE_CONFIG_ID</a>,</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a061efed6883712a4338a7b70873aa268">RES_CONFIG_SQLITE_CONFIG_CAT_METRIC</a>,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a793f0b280859ad957e1f2930a849208e">RES_CONFIG_SQLITE_CONFIG_VAR_METRIC</a>,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a9734ede0883dda220fb6ba2a98d7085e">RES_CONFIG_SQLITE_CONFIG_COMMENTED</a>,</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0b6ea6b0fddd2be25e1559cf4a49efae">RES_CONFIG_SQLITE_CONFIG_FILENAME</a>,</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a>,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a>,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a>,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;};</div><div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00117">res_config_sqlite.c:117</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a793f0b280859ad957e1f2930a849208e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a793f0b280859ad957e1f2930a849208e">RES_CONFIG_SQLITE_CONFIG_VAR_METRIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00113">res_config_sqlite.c:113</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00118">res_config_sqlite.c:118</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a9734ede0883dda220fb6ba2a98d7085e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a9734ede0883dda220fb6ba2a98d7085e">RES_CONFIG_SQLITE_CONFIG_COMMENTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00114">res_config_sqlite.c:114</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a0629a788663cc64450958532c515165a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0629a788663cc64450958532c515165a">RES_CONFIG_SQLITE_CONFIG_ID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00111">res_config_sqlite.c:111</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a061efed6883712a4338a7b70873aa268"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a061efed6883712a4338a7b70873aa268">RES_CONFIG_SQLITE_CONFIG_CAT_METRIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00112">res_config_sqlite.c:112</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00116">res_config_sqlite.c:116</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a0b6ea6b0fddd2be25e1559cf4a49efae"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0b6ea6b0fddd2be25e1559cf4a49efae">RES_CONFIG_SQLITE_CONFIG_FILENAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00115">res_config_sqlite.c:115</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00119">res_config_sqlite.c:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2ff160eb8cc768ef928c90bb61ded670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff160eb8cc768ef928c90bb61ded670">&#9670;&nbsp;</a></span>__init_sql_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_sql_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00135">135</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="ae4f1f17b984a00ca0d3e210095ca5f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4f1f17b984a00ca0d3e210095ca5f2f">&#9670;&nbsp;</a></span>__init_where_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_where_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00136">136</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01787">1787</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01787">1787</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="ab0550541665aab14df8f089397bba5ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0550541665aab14df8f089397bba5ae">&#9670;&nbsp;</a></span>add_cfg_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_cfg_entry </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>columnNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SQLite callback function for static configuration. </p>
<p>This function is passed to the SQLite engine as a callback function to parse a row and store it in a struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> object. It relies on resulting rows being sorted by category.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>a pointer to a struct <a class="el" href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a> object </td></tr>
    <tr><td class="paramname">argc</td><td>number of columns </td></tr>
    <tr><td class="paramname">argv</td><td>values in the row </td></tr>
    <tr><td class="paramname">columnNames</td><td>names and types of the columns </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a> </dd>
<dd>
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a5ca80598759ece103ebaf5cc9aae308a">sql_get_config_table</a> </dd>
<dd>
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a7c363143661597b8480ef856c1acad80" title="Asterisk callback function for static configuration. ">config_handler()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00848">848</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02835">ast_category_append()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02847">ast_category_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">ast_category_new_dynamic</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03112">ast_config_internal_load()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01178">ast_variable_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00186">cfg_entry_args::cat</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00187">cfg_entry_args::cat_name</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00185">cfg_entry_args::cfg</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00188">cfg_entry_args::flags</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00116">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00119">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00117">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00118">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00189">cfg_entry_args::who_asked</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;{</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keywordflow">if</span> (argc != <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a>) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Corrupt table\n&quot;</span>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   args = arg;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <span class="keywordflow">if</span> (!strcmp(argv[<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a>], <span class="stringliteral">&quot;#include&quot;</span>)) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      val = argv[<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a>];</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a>(val, args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg</a>, args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aec78000b2897c094f68ed72559e18acd">flags</a>, <span class="stringliteral">&quot;&quot;</span>, args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#adf7e984f042083a8f38fc26293cbdb0b">who_asked</a>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to include %s\n&quot;</span>, val);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;         args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg</a> = cfg;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">if</span> (!args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cat_name</a> || strcmp(args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cat_name</a>, argv[<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a>])) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cat</a> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a>(argv[RES_CONFIG_SQLITE_CONFIG_CATEGORY]);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">if</span> (!args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cat</a>) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cat_name</a>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cat_name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(argv[RES_CONFIG_SQLITE_CONFIG_CATEGORY]);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">if</span> (!args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cat_name</a>) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a>(args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cat</a>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a>(args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg</a>, args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cat</a>);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(argv[RES_CONFIG_SQLITE_CONFIG_VAR_NAME], argv[<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a>], <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate variable\n&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(args-&gt;<a class="code" href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cat</a>, var);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#aec78000b2897c094f68ed72559e18acd">cfg_entry_args::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00188">res_config_sqlite.c:188</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a0a6b34fcd5c07ea3e84b0727e33efdd5">RES_CONFIG_SQLITE_CONFIG_VAR_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00117">res_config_sqlite.c:117</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_aed07742ca473475e764f354e18f785d7"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg_entry_args::cfg</a></div><div class="ttdeci">struct ast_config * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00185">res_config_sqlite.c:185</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_ac609ac3bda8695af295e0e0abfd3934f"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#ac609ac3bda8695af295e0e0abfd3934f">cfg_entry_args::cat_name</a></div><div class="ttdeci">char * cat_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00187">res_config_sqlite.c:187</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a94ba5ab9fffe6dd755ee95db7ff2432f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a94ba5ab9fffe6dd755ee95db7ff2432f">ast_category_destroy</a></div><div class="ttdeci">void ast_category_destroy(struct ast_category *cat)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02847">extconf.c:2847</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a721d5cd60abda2bdd96838336dc09669"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a721d5cd60abda2bdd96838336dc09669">ast_config_internal_load</a></div><div class="ttdeci">struct ast_config * ast_config_internal_load(const char *configfile, struct ast_config *cfg, struct ast_flags flags, const char *suggested_incl_file, const char *who_asked)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03112">main/config.c:3112</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_aefd64b78e9c3c182e9aba1a1bac01a33"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#aefd64b78e9c3c182e9aba1a1bac01a33">cfg_entry_args::cat</a></div><div class="ttdeci">struct ast_category * cat</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00186">res_config_sqlite.c:186</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_adf7e984f042083a8f38fc26293cbdb0b"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#adf7e984f042083a8f38fc26293cbdb0b">cfg_entry_args::who_asked</a></div><div class="ttdeci">const char * who_asked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00189">res_config_sqlite.c:189</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a7ade715af5daf3ff81f2326e4c24f48f">RES_CONFIG_SQLITE_CONFIG_VAR_VAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00118">res_config_sqlite.c:118</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="structcfg__entry__args_html"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00184">res_config_sqlite.c:184</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ae5deebf8bc8c13fdd4a4dad0110d8b9b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a></div><div class="ttdeci">#define ast_category_new_dynamic(name)</div><div class="ttdoc">Create a category that is not backed by a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">include/asterisk/config.h:832</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a57a3200e5b440d7135eaf0450ea559fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a></div><div class="ttdeci">void ast_variable_append(struct ast_category *category, struct ast_variable *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01178">extconf.c:1178</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa422e1cc73c1ac4db7ed8cd1a0e36e1a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a></div><div class="ttdeci">void ast_category_append(struct ast_config *config, struct ast_category *cat)</div><div class="ttdoc">Appends a category to a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02835">extconf.c:2835</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8ae873cc53ea86027d191a69cabe26846e">RES_CONFIG_SQLITE_CONFIG_CATEGORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00116">res_config_sqlite.c:116</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa6330de06cf867727bd76475403c83f8a60b88f192e5aaf532b024bfd3195083d">RES_CONFIG_SQLITE_CONFIG_COLUMNS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00119">res_config_sqlite.c:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1acd2046121f2656b6e35ec0d5650913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1acd2046121f2656b6e35ec0d5650913">&#9670;&nbsp;</a></span>add_rt_cfg_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_rt_cfg_entry </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>columnNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SQLite callback function for RealTime configuration. </p>
<p>This function is passed to the SQLite engine as a callback function to parse a row and store it in a linked list of struct <a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> objects.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>a pointer to a struct <a class="el" href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a> object </td></tr>
    <tr><td class="paramname">argc</td><td>number of columns </td></tr>
    <tr><td class="paramname">argv</td><td>values in the row </td></tr>
    <tr><td class="paramname">columnNames</td><td>names and types of the columns </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">1</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a> </dd>
<dd>
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1468a11f36fa0ddbf6e07f2fd42c8e50" title="Asterisk callback function for RealTime configuration. ">realtime_handler()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00955">955</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00199">rt_cfg_entry_args::last</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00198">rt_cfg_entry_args::var</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   args = arg;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; argc; i++) {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">if</span> (!argv[i])</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">if</span> (!(var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(columnNames[i], argv[i], <span class="stringliteral">&quot;&quot;</span>)))</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">if</span> (!args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#abdd578cbdfc77b2ee01a545c8e2bffc8">var</a>)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#abdd578cbdfc77b2ee01a545c8e2bffc8">var</a> = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">if</span> (!args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#ac6bc41916ca996a56407db9d13e2e734">last</a>)</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;         args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#ac6bc41916ca996a56407db9d13e2e734">last</a>-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a> = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;         args-&gt;<a class="code" href="../../df/dd7/structrt__cfg__entry__args.html#ac6bc41916ca996a56407db9d13e2e734">last</a> = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="structrt__cfg__entry__args_html_abdd578cbdfc77b2ee01a545c8e2bffc8"><div class="ttname"><a href="../../df/dd7/structrt__cfg__entry__args.html#abdd578cbdfc77b2ee01a545c8e2bffc8">rt_cfg_entry_args::var</a></div><div class="ttdeci">struct ast_variable * var</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00198">res_config_sqlite.c:198</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="structrt__cfg__entry__args_html"><div class="ttname"><a href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00197">res_config_sqlite.c:197</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="structrt__cfg__entry__args_html_ac6bc41916ca996a56407db9d13e2e734"><div class="ttname"><a href="../../df/dd7/structrt__cfg__entry__args.html#ac6bc41916ca996a56407db9d13e2e734">rt_cfg_entry_args::last</a></div><div class="ttdeci">struct ast_variable * last</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00199">res_config_sqlite.c:199</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a17b5ad55ba185061850f5d682c397a98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b5ad55ba185061850f5d682c397a98">&#9670;&nbsp;</a></span>add_rt_multi_cfg_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_rt_multi_cfg_entry </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>columnNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SQLite callback function for RealTime configuration. </p>
<p>This function performs the same actions as <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1acd2046121f2656b6e35ec0d5650913" title="SQLite callback function for RealTime configuration. ">add_rt_cfg_entry()</a> except that the <a class="el" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a> structure is designed to store categories in addition to variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>a pointer to a struct <a class="el" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a> object </td></tr>
    <tr><td class="paramname">argc</td><td>number of columns </td></tr>
    <tr><td class="paramname">argv</td><td>values in the row </td></tr>
    <tr><td class="paramname">columnNames</td><td>names and types of the columns </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">1</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a> </dd>
<dd>
<a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a612faaaddc0075e3ba690e2299e8b8f8" title="Asterisk callback function for RealTime configuration. ">realtime_multi_handler()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01061">1061</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02835">ast_category_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">ast_category_new_dynamic</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01178">ast_variable_append()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00186">cfg_entry_args::cat</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00187">cfg_entry_args::cat_name</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00209">rt_multi_cfg_entry_args::cfg</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00210">rt_multi_cfg_entry_args::initfield</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/db2/structast__category.html">ast_category</a> *cat;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordtype">char</span> *cat_name;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   args = arg;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   cat_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">    * cat_name should always be set here, since initfield is forged from</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">    * params[0] in realtime_multi_handler(), which is a search parameter</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">    * of the SQL query.</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; argc; i++) {</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">if</span> (!strcmp(args-&gt;<a class="code" href="../../d9/dc6/structrt__multi__cfg__entry__args.html#a9d097a0647a837d2fab0d6355278480a">initfield</a>, columnNames[i]))</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         cat_name = argv[i];</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <span class="keywordflow">if</span> (!cat_name) {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Bogus SQL results, cat_name is NULL !\n&quot;</span>);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a>(cat_name);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keywordflow">if</span> (!cat) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a>(args-&gt;<a class="code" href="../../d9/dc6/structrt__multi__cfg__entry__args.html#a282e93e50b0029b0e52977a85b96aab7">cfg</a>, cat);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; argc; i++) {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">if</span> (!argv[i]) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (!(var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(columnNames[i], argv[i], <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate variable\n&quot;</span>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a>(cat, var);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;}</div><div class="ttc" id="structrt__multi__cfg__entry__args_html_a9d097a0647a837d2fab0d6355278480a"><div class="ttname"><a href="../../d9/dc6/structrt__multi__cfg__entry__args.html#a9d097a0647a837d2fab0d6355278480a">rt_multi_cfg_entry_args::initfield</a></div><div class="ttdeci">char * initfield</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00210">res_config_sqlite.c:210</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__category_html"><div class="ttname"><a href="../../d7/db2/structast__category.html">ast_category</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00225">main/config.c:225</a></div></div>
<div class="ttc" id="structrt__multi__cfg__entry__args_html_a282e93e50b0029b0e52977a85b96aab7"><div class="ttname"><a href="../../d9/dc6/structrt__multi__cfg__entry__args.html#a282e93e50b0029b0e52977a85b96aab7">rt_multi_cfg_entry_args::cfg</a></div><div class="ttdeci">struct ast_config * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00209">res_config_sqlite.c:209</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ae5deebf8bc8c13fdd4a4dad0110d8b9b"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ae5deebf8bc8c13fdd4a4dad0110d8b9b">ast_category_new_dynamic</a></div><div class="ttdeci">#define ast_category_new_dynamic(name)</div><div class="ttdoc">Create a category that is not backed by a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00832">include/asterisk/config.h:832</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a57a3200e5b440d7135eaf0450ea559fe"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a57a3200e5b440d7135eaf0450ea559fe">ast_variable_append</a></div><div class="ttdeci">void ast_variable_append(struct ast_category *category, struct ast_variable *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01178">extconf.c:1178</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aa422e1cc73c1ac4db7ed8cd1a0e36e1a"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aa422e1cc73c1ac4db7ed8cd1a0e36e1a">ast_category_append</a></div><div class="ttdeci">void ast_category_append(struct ast_config *config, struct ast_category *cat)</div><div class="ttdoc">Appends a category to a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02835">extconf.c:2835</a></div></div>
<div class="ttc" id="structrt__multi__cfg__entry__args_html"><div class="ttname"><a href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00208">res_config_sqlite.c:208</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01787">1787</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a9b959d97c623a073d5562c5921b0635a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b959d97c623a073d5562c5921b0635a">&#9670;&nbsp;</a></span>cdr_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cdr_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d5d/structast__cdr.html">ast_cdr</a> *&#160;</td>
          <td class="paramname"><em>cdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for CDR support. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cdr</td><td>the CDR entry Asterisk sends us.</td></tr>
  </table>
  </dd>
</dl>
<p>Asterisk will call this function each time a CDR entry must be logged if CDR support is enabled.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">774</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df2/cdr_8c_source.html#l03050">ast_cdr_format_var()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">first</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">sqlite_cache_columns::isint</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">sqlite_cache_columns::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00693">release_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;{</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordtype">char</span> *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, workspace[500];</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, scannum;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tbl = <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a990147aa70d656ae71a98b581e05d7cd">find_table</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a> *col;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql1 = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(160), *sql2 = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordflow">if</span> (!sql1 || !sql2) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql1);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql2);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">if</span> (!tbl) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No such table: %s\n&quot;</span>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql1);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql2);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql1, 0, <span class="stringliteral">&quot;INSERT INTO %s (&quot;</span>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql2, 0, <span class="stringliteral">&quot;) VALUES (&quot;</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;(tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>), col, list) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">if</span> (col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">isint</a>) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         <a class="code" href="../../dc/d07/cdr_8h.html#a4ce5d9fd0bec829301262576b9afdaf5">ast_cdr_format_var</a>(cdr, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, &amp;tmp, workspace, <span class="keyword">sizeof</span>(workspace), 1);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;         <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;         <span class="keywordflow">if</span> (sscanf(tmp, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;scannum) == 1) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql1, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;,&quot;</span>, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql2, 0, <span class="stringliteral">&quot;%s%d&quot;</span>, first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;,&quot;</span>, scannum);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;         <a class="code" href="../../dc/d07/cdr_8h.html#a4ce5d9fd0bec829301262576b9afdaf5">ast_cdr_format_var</a>(cdr, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, &amp;tmp, workspace, <span class="keyword">sizeof</span>(workspace), 0);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql1, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;,&quot;</span>, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         tmp = sqlite_mprintf(<span class="stringliteral">&quot;%Q&quot;</span>, tmp);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql2, 0, <span class="stringliteral">&quot;%s%s&quot;</span>, first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;,&quot;</span>, tmp);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         sqlite_freemem(tmp);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      first = 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a792da613ea8b323dedd14a35d0b367a2">release_table</a>(tbl);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql1, 0, <span class="stringliteral">&quot;%s)&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql2));</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql2);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql1));</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql1), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql1);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_a990147aa70d656ae71a98b581e05d7cd"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a990147aa70d656ae71a98b581e05d7cd">find_table</a></div><div class="ttdeci">static struct sqlite_cache_tables * find_table(const char *tablename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">res_config_sqlite.c:626</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a792da613ea8b323dedd14a35d0b367a2"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a792da613ea8b323dedd14a35d0b367a2">release_table</a></div><div class="ttdeci">#define release_table(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00693">res_config_sqlite.c:693</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr_8h_html_a4ce5d9fd0bec829301262576b9afdaf5"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a4ce5d9fd0bec829301262576b9afdaf5">ast_cdr_format_var</a></div><div class="ttdeci">void ast_cdr_format_var(struct ast_cdr *cdr, const char *name, char **ret, char *workspace, int workspacelen, int raw)</div><div class="ttdoc">Format a CDR variable from an already posted CDR. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03050">cdr.c:3050</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="structsqlite__cache__columns_html"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00496">res_config_sqlite.c:496</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a751d974203a2f02b0ccf870012d13ee9"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">sqlite_cache_columns::isint</a></div><div class="ttdeci">unsigned char isint</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">res_config_sqlite.c:499</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_columns::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">res_config_sqlite.c:497</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa12194f6de6564ba57f2639c27bf3530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12194f6de6564ba57f2639c27bf3530">&#9670;&nbsp;</a></span>check_vars()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_vars </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">710</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">dbfile</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00447">use_cdr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a>) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Required parameter undefined: dbfile\n&quot;</span>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a50d89dee97961b1992b5213744a59120">use_cdr</a> = (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_a50d89dee97961b1992b5213744a59120"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a50d89dee97961b1992b5213744a59120">use_cdr</a></div><div class="ttdeci">static int use_cdr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00447">res_config_sqlite.c:447</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a723e9edf0fe1cdfa024e00803401e74e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></div><div class="ttdeci">static char * dbfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">res_config_sqlite.c:456</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c363143661597b8480ef856c1acad80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c363143661597b8480ef856c1acad80">&#9670;&nbsp;</a></span>config_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> * config_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suggested_incl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>who_asked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for static configuration. </p>
<p>Asterisk will call this function when it loads its static configuration, which usually happens at startup and reload.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">file</td><td>the file to load from the database </td></tr>
    <tr><td class="paramname">cfg</td><td>the struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> object to use when storing variables </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags. Not used. </td></tr>
    <tr><td class="paramname">suggested_incl</td><td>suggest include. </td></tr>
    <tr><td class="paramname">who_asked</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">cfg</td><td>object </td></tr>
    <tr><td class="paramname">NULL</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ab0550541665aab14df8f089397bba5ae" title="SQLite callback function for static configuration. ">add_cfg_entry()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">905</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00848">add_cfg_entry()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00186">cfg_entry_args::cat</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00187">cfg_entry_args::cat_name</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00185">cfg_entry_args::cfg</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00188">cfg_entry_args::flags</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00551">sql_get_config_table</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00189">cfg_entry_args::who_asked</a>.</p>
<div class="fragment"><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a> <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordtype">char</span> *query, *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   query = sqlite_mprintf(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5ca80598759ece103ebaf5cc9aae308a">sql_get_config_table</a>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.cfg = <a class="code" href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg</a>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.cat = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.cat_name = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.flags = <a class="code" href="../../de/d37/structcfg__entry__args.html#aec78000b2897c094f68ed72559e18acd">flags</a>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.who_asked = <a class="code" href="../../de/d37/structcfg__entry__args.html#adf7e984f042083a8f38fc26293cbdb0b">who_asked</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ab0550541665aab14df8f089397bba5ae">add_cfg_entry</a>, &amp;<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, &amp;errormsg);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.cat_name);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   }</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_aec78000b2897c094f68ed72559e18acd"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#aec78000b2897c094f68ed72559e18acd">cfg_entry_args::flags</a></div><div class="ttdeci">struct ast_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00188">res_config_sqlite.c:188</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5ca80598759ece103ebaf5cc9aae308a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5ca80598759ece103ebaf5cc9aae308a">sql_get_config_table</a></div><div class="ttdeci">#define sql_get_config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00551">res_config_sqlite.c:551</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_aed07742ca473475e764f354e18f785d7"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#aed07742ca473475e764f354e18f785d7">cfg_entry_args::cfg</a></div><div class="ttdeci">struct ast_config * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00185">res_config_sqlite.c:185</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="structcfg__entry__args_html_adf7e984f042083a8f38fc26293cbdb0b"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html#adf7e984f042083a8f38fc26293cbdb0b">cfg_entry_args::who_asked</a></div><div class="ttdeci">const char * who_asked</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00189">res_config_sqlite.c:189</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ab0550541665aab14df8f089397bba5ae"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ab0550541665aab14df8f089397bba5ae">add_cfg_entry</a></div><div class="ttdeci">static int add_cfg_entry(void *arg, int argc, char **argv, char **columnNames)</div><div class="ttdoc">SQLite callback function for static configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00848">res_config_sqlite.c:848</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structcfg__entry__args_html"><div class="ttname"><a href="../../de/d37/structcfg__entry__args.html">cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00184">res_config_sqlite.c:184</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a990147aa70d656ae71a98b581e05d7cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a990147aa70d656ae71a98b581e05d7cd">&#9670;&nbsp;</a></span>find_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a>* find_table </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tablename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">626</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00638">AST_RWLIST_HEAD_INIT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00571">find_table_cb()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">free_table()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">sqlite_cache_tables::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00543">sql_table_structure</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01510">realtime_require_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;{</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tblptr;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordtype">int</span> i, err;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keywordtype">char</span> *sql, *errstr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>, tblptr, list) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <span class="keywordflow">if</span> (strcmp(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">name</a>, tablename) == 0) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">if</span> (tblptr) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         <span class="keywordflow">return</span> tblptr;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">if</span> (i == 0) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="comment">/* Table structure not cached; build the structure now */</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;sql, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#afea0cb44ed8d5fc52fcee6ae61e40561">sql_table_structure</a>, tablename) &lt; 0) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      sql = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">if</span> (!(tblptr = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*tblptr) + strlen(tablename) + 1))) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Memory error.  Cannot cache table &#39;%s&#39;\n&quot;</span>, tablename);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">name</a> = (<span class="keywordtype">char</span> *)tblptr + <span class="keyword">sizeof</span>(*tblptr);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   strcpy(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">name</a>, tablename); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a389aaa73318087dfed0cdd11e1d3090b">AST_RWLIST_HEAD_INIT</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;About to query table structure: %s\n&quot;</span>, sql);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">if</span> ((err = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, sql, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a31acdca539faef9b6707d7f930903657">find_table_cb</a>, tblptr, &amp;errstr))) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;SQLite error %d: %s\n&quot;</span>, err, errstr);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(errstr);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a>(tblptr);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(sql);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>))) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a>(tblptr);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>, tblptr, list);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">return</span> tblptr;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_a31acdca539faef9b6707d7f930903657"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a31acdca539faef9b6707d7f930903657">find_table_cb</a></div><div class="ttdeci">static int find_table_cb(void *vtblptr, int argc, char **argv, char **columnNames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00571">res_config_sqlite.c:571</a></div></div>
<div class="ttc" id="structsqlite__tables_html"><div class="ttname"><a href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00509">res_config_sqlite.c:509</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5784f210e0f5472a18ecd99d64ffec9e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a></div><div class="ttdeci">static void free_table(struct sqlite_cache_tables *tblptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">res_config_sqlite.c:557</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a389aaa73318087dfed0cdd11e1d3090b"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a389aaa73318087dfed0cdd11e1d3090b">AST_RWLIST_HEAD_INIT</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_INIT(head)</div><div class="ttdoc">Initializes an rwlist head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00638">linkedlists.h:638</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_afea0cb44ed8d5fc52fcee6ae61e40561"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#afea0cb44ed8d5fc52fcee6ae61e40561">sql_table_structure</a></div><div class="ttdeci">#define sql_table_structure</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00543">res_config_sqlite.c:543</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_tables::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">res_config_sqlite.c:504</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31acdca539faef9b6707d7f930903657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31acdca539faef9b6707d7f930903657">&#9670;&nbsp;</a></span>find_table_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_table_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vtblptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>columnNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00571">571</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">sqlite_cache_columns::isint</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">sqlite_cache_columns::name</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00498">sqlite_cache_columns::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tblptr = vtblptr;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordtype">char</span> *sql = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(argv[0]), *start, *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, *remainder;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(fie,</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(ld)[100]; <span class="comment">/* This means we support up to 100 columns per table */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   );</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a> *col;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="comment">/* This is really fun.  We get to parse an SQL statement to figure out</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">    * what columns are in the table.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span> ((start = strchr(sql, <span class="charliteral">&#39;(&#39;</span>)) &amp;&amp; (end = strrchr(sql, <span class="charliteral">&#39;)&#39;</span>))) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      start++;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      *end = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="comment">/* Abort */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(fie, start);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; fie.argc; i++) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      fie.ld[i] = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(fie.ld[i]);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Found field: %s\n&quot;</span>, fie.ld[i]);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">if</span> (strncasecmp(fie.ld[i], <span class="stringliteral">&quot;PRIMARY KEY&quot;</span>, 11) == 0 &amp;&amp; (start = strchr(fie.ld[i], <span class="charliteral">&#39;(&#39;</span>)) &amp;&amp; (end = strchr(fie.ld[i], <span class="charliteral">&#39;)&#39;</span>))) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;         *end = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>), col, list) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (strcasecmp(start + 1, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>) == 0 &amp;&amp; <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a>, <span class="stringliteral">&quot;INTEGER&quot;</span>)) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;               col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">isint</a> = 1;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">/* type delimiter could be any space character */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">for</span> (type = fie.ld[i]; *type &gt; 32; type++);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      *type++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      type = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(type);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">for</span> (remainder = type; *remainder &gt; 32; remainder++);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      *remainder = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">if</span> (!(col = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*col) + strlen(fie.ld[i]) + strlen(type) + 2))) {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a> = (<span class="keywordtype">char</span> *)col + <span class="keyword">sizeof</span>(*col);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a> = (<span class="keywordtype">char</span> *)col + <span class="keyword">sizeof</span>(*col) + strlen(fie.ld[i]) + 1;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      strcpy(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, fie.ld[i]); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      strcpy(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a>, type); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a>, <span class="stringliteral">&quot;INTEGER&quot;</span>) &amp;&amp; <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a>, <span class="stringliteral">&quot;PRIMARY KEY&quot;</span>)) {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;         col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">isint</a> = 1;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>), col, list);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a23506fc4821ab6d9671f3e6222591a96"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">sqlite_cache_columns::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00498">res_config_sqlite.c:498</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="structsqlite__cache__columns_html"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00496">res_config_sqlite.c:496</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a751d974203a2f02b0ccf870012d13ee9"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">sqlite_cache_columns::isint</a></div><div class="ttdeci">unsigned char isint</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">res_config_sqlite.c:499</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_columns::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">res_config_sqlite.c:497</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5784f210e0f5472a18ecd99d64ffec9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5784f210e0f5472a18ecd99d64ffec9e">&#9670;&nbsp;</a></span>free_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_table </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *&#160;</td>
          <td class="paramname"><em>tblptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">557</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00666">AST_RWLIST_HEAD_DESTROY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01546">realtime_unload_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;{</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a> *col;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="comment">/* Obtain a write lock to ensure there are no read locks outstanding */</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">while</span> ((col = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>), list))) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(col);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#acc3deb56109ed902edf384070e3f8f42">AST_RWLIST_HEAD_DESTROY</a>(&amp;(tblptr-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tblptr);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_acc3deb56109ed902edf384070e3f8f42"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acc3deb56109ed902edf384070e3f8f42">AST_RWLIST_HEAD_DESTROY</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_DESTROY(head)</div><div class="ttdoc">Destroys an rwlist head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00666">linkedlists.h:666</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="structsqlite__cache__columns_html"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00496">res_config_sqlite.c:496</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac09349f29c2d83b9c82873b6b30d960f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09349f29c2d83b9c82873b6b30d960f">&#9670;&nbsp;</a></span>handle_cli_show_sqlite_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * handle_cli_show_sqlite_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for the CLI status command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>CLI command </td></tr>
    <tr><td class="paramname">cmd</td><td></td></tr>
    <tr><td class="paramname">a</td><td>CLI argument list </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>RESULT_SUCCESS </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01561">1561</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">dbfile</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;sqlite show status&quot;</span>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         <span class="stringliteral">&quot;Usage: sqlite show status\n&quot;</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;         <span class="stringliteral">&quot;       Show status information about the SQLite 2 driver\n&quot;</span>;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3)</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;SQLite database path: %s\n&quot;</span>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a>);</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;config_table: &quot;</span>);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>)</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;unspecified, must be present in extconfig.conf\n&quot;</span>);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;cdr_table: &quot;</span>);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>)</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;unspecified, CDR support disabled\n&quot;</span>);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a723e9edf0fe1cdfa024e00803401e74e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></div><div class="ttdeci">static char * dbfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">res_config_sqlite.c:456</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ae4390cbd19f3cbb3b5f51b6488decb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ae4390cbd19f3cbb3b5f51b6488decb">&#9670;&nbsp;</a></span>handle_cli_sqlite_show_tables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * handle_cli_sqlite_show_tables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01595">1595</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">sqlite_cache_columns::name</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">sqlite_cache_tables::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00498">sqlite_cache_columns::type</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;{</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tbl;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a> *col;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;sqlite show tables&quot;</span>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;         <span class="stringliteral">&quot;Usage: sqlite show tables\n&quot;</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;         <span class="stringliteral">&quot;       Show table information about the SQLite 2 driver\n&quot;</span>;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   }</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3)</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>, tbl, list) {</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      found++;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Table %s:\n&quot;</span>, tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;(tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>), col, list) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;  %20.20s  %-30.30s\n&quot;</span>, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">type</a>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   }</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No tables currently in cache\n&quot;</span>);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div><div class="ttc" id="structsqlite__tables_html"><div class="ttname"><a href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00509">res_config_sqlite.c:509</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a23506fc4821ab6d9671f3e6222591a96"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a23506fc4821ab6d9671f3e6222591a96">sqlite_cache_columns::type</a></div><div class="ttdeci">char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00498">res_config_sqlite.c:498</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="structsqlite__cache__columns_html"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00496">res_config_sqlite.c:496</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_columns::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">res_config_sqlite.c:497</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_tables::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">res_config_sqlite.c:504</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed5779f84d4ebb67745d801d3ebede43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed5779f84d4ebb67745d801d3ebede43">&#9670;&nbsp;</a></span>load_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the configuration file. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385" title="Free resources related to configuration. ">unload_config()</a></dd></dl>
<p>This function sets dbfile, config_table, and cdr_table. It calls <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aa12194f6de6564ba57f2639c27bf3530">check_vars()</a> before returning, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385" title="Free resources related to configuration. ">unload_config()</a> if an error occurred.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">722</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">ast_config_load</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01216">ast_variable_browse()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">check_vars()</a>, <a class="el" href="../../de/dcc/conf2ael_8c_source.html#l00066">config</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">CONFIG_STATUS_FILEMISSING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">dbfile</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00108">RES_CONFIG_SQLITE_CONF_FILE</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00122">SET_VAR</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>, and <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *<a class="code" href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   config = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a4ac391d995daec836742fde68abf645f">RES_CONFIG_SQLITE_CONF_FILE</a>, config_flags);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">if</span> (config == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a> || config == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to load &quot;</span> <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a4ac391d995daec836742fde68abf645f">RES_CONFIG_SQLITE_CONF_FILE</a> <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(config, <span class="stringliteral">&quot;general&quot;</span>); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;dbfile&quot;</span>))</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#abb5414f66b45fde76fd377295dfdbe45">SET_VAR</a>(config, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a>, var);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;config_table&quot;</span>))</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#abb5414f66b45fde76fd377295dfdbe45">SET_VAR</a>(config, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>, var);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;cdr_table&quot;</span>)) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#abb5414f66b45fde76fd377295dfdbe45">SET_VAR</a>(config, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>, var);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown parameter : %s\n&quot;</span>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(config);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   error = <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aa12194f6de6564ba57f2639c27bf3530">check_vars</a>();</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385">unload_config</a>();</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_a4ac391d995daec836742fde68abf645f"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a4ac391d995daec836742fde68abf645f">RES_CONFIG_SQLITE_CONF_FILE</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_CONF_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00108">res_config_sqlite.c:108</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="conf2ael_8c_html_a74bb62276efdf39dd94048e007fca05b"><div class="ttname"><a href="../../de/dcc/conf2ael_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a></div><div class="ttdeci">char * config</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00066">conf2ael.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a72f99a227dc7bc5522ba90399070f385"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385">unload_config</a></div><div class="ttdeci">static void unload_config(void)</div><div class="ttdoc">Free resources related to configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">res_config_sqlite.c:758</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a723e9edf0fe1cdfa024e00803401e74e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></div><div class="ttdeci">static char * dbfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">res_config_sqlite.c:456</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aa12194f6de6564ba57f2639c27bf3530"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aa12194f6de6564ba57f2639c27bf3530">check_vars</a></div><div class="ttdeci">static int check_vars(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">res_config_sqlite.c:710</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_abb5414f66b45fde76fd377295dfdbe45"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#abb5414f66b45fde76fd377295dfdbe45">SET_VAR</a></div><div class="ttdeci">#define SET_VAR(config, to, from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00122">res_config_sqlite.c:122</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Load the module. </p>
<p>Module loading including tests for configuration or dependencies. This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE, or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails tests return AST_MODULE_LOAD_FAILURE. If the module can not load the configuration file or other non-critical problem return AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">1663</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02943">ast_cdr_register()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l02990">ast_config_engine_register()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00323">AST_MODPRI_REALTIME_DRIVER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00123">AST_MODULE_SUPPORT_DEPRECATED</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00450">cdr_registered</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00453">cli_status_registered</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">dbfile</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00107">RES_CONFIG_SQLITE_DESCRIPTION</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00105">RES_CONFIG_SQLITE_NAME</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00516">sql_create_cdr_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00447">use_cdr</a>.</p>
<div class="fragment"><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;{</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   <span class="keywordtype">char</span> *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a> = 0;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a> = 0;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   error = <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a>();</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <span class="keywordflow">if</span> (error)</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a> = sqlite_open(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a>, 0660, &amp;errormsg))) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#af15c271e1708b251fc938b30baba18f1">ast_config_engine_register</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a7b48efb1da6b47259373e75543e0e320">sqlite_engine</a>);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a50d89dee97961b1992b5213744a59120">use_cdr</a>) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordtype">char</span> *query;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="preprocessor">#define QUERY &quot;SELECT COUNT(id) FROM %Q;&quot;</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      query = sqlite_mprintf(QUERY, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;         error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">          * Unexpected error.</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;         <span class="keywordflow">if</span> (error != SQLITE_ERROR) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            sqlite_freemem(errormsg);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;         }</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;         sqlite_freemem(errormsg);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;         errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         query = sqlite_mprintf(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ae6feefd120eabf04edc898d1430fd9f0">sql_create_cdr_table</a>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;         <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;         }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;         sqlite_freemem(query);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;         <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            sqlite_freemem(errormsg);</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;         }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      error = <a class="code" href="../../dc/d07/cdr_8h.html#abdbcf7f728cbacea0b28bf9c51f99b92">ast_cdr_register</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#acbd22ddbb653b6555ab5bc619780efc0">RES_CONFIG_SQLITE_NAME</a>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a2f82b578cab098832c975e3f4237ce12">RES_CONFIG_SQLITE_DESCRIPTION</a>, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a9b959d97c623a073d5562c5921b0635a">cdr_handler</a>);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      }</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a> = 1;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   error = <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a>));</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a> = 1;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;}</div><div class="ttc" id="res__config__sqlite_8c_html_acbd22ddbb653b6555ab5bc619780efc0"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#acbd22ddbb653b6555ab5bc619780efc0">RES_CONFIG_SQLITE_NAME</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00105">res_config_sqlite.c:105</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">res_config_sqlite.c:1633</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_af15c271e1708b251fc938b30baba18f1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#af15c271e1708b251fc938b30baba18f1">ast_config_engine_register</a></div><div class="ttdeci">int ast_config_engine_register(struct ast_config_engine *newconfig)</div><div class="ttdoc">Register config engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l02990">main/config.c:2990</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a50d89dee97961b1992b5213744a59120"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a50d89dee97961b1992b5213744a59120">use_cdr</a></div><div class="ttdeci">static int use_cdr</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00447">res_config_sqlite.c:447</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a7b48efb1da6b47259373e75543e0e320"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a7b48efb1da6b47259373e75543e0e320">sqlite_engine</a></div><div class="ttdeci">static struct ast_config_engine sqlite_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00468">res_config_sqlite.c:468</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a723e9edf0fe1cdfa024e00803401e74e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></div><div class="ttdeci">static char * dbfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">res_config_sqlite.c:456</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr_8h_html_abdbcf7f728cbacea0b28bf9c51f99b92"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#abdbcf7f728cbacea0b28bf9c51f99b92">ast_cdr_register</a></div><div class="ttdeci">int ast_cdr_register(const char *name, const char *desc, ast_cdrbe be)</div><div class="ttdoc">Register a CDR handling engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02943">cdr.c:2943</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5b8501d6d552484744440e2ded409689"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a></div><div class="ttdeci">static int cli_status_registered</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00453">res_config_sqlite.c:453</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a47b6b9c6ba9ec579e0cc93d497500db8"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a></div><div class="ttdeci">static struct ast_cli_entry cli_status[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00491">res_config_sqlite.c:491</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a4d2e93e1c4b3210b679a29b71df49c21"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a></div><div class="ttdeci">static int cdr_registered</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00450">res_config_sqlite.c:450</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ae6feefd120eabf04edc898d1430fd9f0"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ae6feefd120eabf04edc898d1430fd9f0">sql_create_cdr_table</a></div><div class="ttdeci">static char * sql_create_cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00516">res_config_sqlite.c:516</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a2f82b578cab098832c975e3f4237ce12"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a2f82b578cab098832c975e3f4237ce12">RES_CONFIG_SQLITE_DESCRIPTION</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_DESCRIPTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00107">res_config_sqlite.c:107</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_aed5779f84d4ebb67745d801d3ebede43"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a></div><div class="ttdeci">static int load_config(void)</div><div class="ttdoc">Load the configuration file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">res_config_sqlite.c:722</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a9b959d97c623a073d5562c5921b0635a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a9b959d97c623a073d5562c5921b0635a">cdr_handler</a></div><div class="ttdeci">static int cdr_handler(struct ast_cdr *cdr)</div><div class="ttdoc">Asterisk callback function for CDR support. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">res_config_sqlite.c:774</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a3f66258435b404a8ae297c077a572d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3f66258435b404a8ae297c077a572d">&#9670;&nbsp;</a></span>realtime_destroy_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_destroy_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for RealTime configuration (destroys variable). </p>
<p>Asterisk will call this function each time a variable has been destroyed internally and must be removed from the backend engine. keyfield and entity are used to find the row to delete, e.g. <code>DELETE FROM table WHERE keyfield = 'entity';</code>. ap is a list of parameters and values with the same format as the other realtime functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">keyfield</td><td>the column of the matching cell </td></tr>
    <tr><td class="paramname">entity</td><td>the value of the matching cell </td></tr>
    <tr><td class="paramname">fields</td><td>list of additional parameters for cell matching </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>number of affected rows. </td></tr>
    <tr><td class="paramname">-1</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01443">1443</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;{</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   <span class="keywordtype">char</span> *query, *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_str;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, rows_num;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;   }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="preprocessor">#define QUERY &quot;DELETE FROM &#39;%q&#39; WHERE&quot;</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <span class="keywordflow">if</span> (!(query = sqlite_mprintf(QUERY, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>))) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">for</span> (field = fields; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s %q = &#39;%q&#39; AND&quot;</span>, query, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="keywordflow">if</span> (!tmp_str) {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      query = tmp_str;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   }</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">if</span> (!(tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s %q = &#39;%q&#39;;&quot;</span>, query, keyfield, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>))) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   }</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   query = tmp_str;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   <span class="keywordflow">if</span> (!error) {</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      rows_num = sqlite_changes(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      rows_num = -1;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   }</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <span class="keywordflow">return</span> rows_num;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ad4e4601988acb4a95ecd1ec380359ae5"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a></div><div class="ttdeci">static int entity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00259">isdn_lib.c:259</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1468a11f36fa0ddbf6e07f2fd42c8e50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1468a11f36fa0ddbf6e07f2fd42c8e50">&#9670;&nbsp;</a></span>realtime_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> * realtime_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for RealTime configuration. </p>
<p>Asterisk will call this function each time it requires a variable through the RealTime architecture. ap is a list of parameters and values used to find a specific row, e.g one parameter "name" and one value "123" so that the SQL query becomes <code>SELECT * FROM table WHERE name = '123';</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">fields</td><td>list of parameters and values to match</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>linked list of struct <a class="el" href="../../dd/d02/structast__variable.html" title="Structure for variables, used for configurations and for channel variables. ">ast_variable</a> objects </td></tr>
    <tr><td class="paramname">NULL</td><td>if an error occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1acd2046121f2656b6e35ec0d5650913" title="SQLite callback function for RealTime configuration. ">add_rt_cfg_entry()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">984</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00955">add_rt_cfg_entry()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01263">ast_variables_destroy()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00199">rt_cfg_entry_args::last</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00198">rt_cfg_entry_args::var</a>.</p>
<div class="fragment"><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;{</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordtype">char</span> *query, *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *op, *tmp_str;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a> <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <span class="keywordflow">if</span> (!fields) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   }</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   op = (strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="preprocessor">#define QUERY &quot;SELECT * FROM &#39;%q&#39; WHERE%s %q%s &#39;%q&#39;&quot;</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   query = sqlite_mprintf(QUERY, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a> &amp;&amp; !strcmp(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>)) ? <span class="stringliteral">&quot; commented = 0 AND&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keywordflow">if</span> (!query) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      op = (strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s AND %q%s &#39;%q&#39;&quot;</span>, query, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">if</span> (!tmp_str) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      query = tmp_str;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s LIMIT 1;&quot;</span>, query);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keywordflow">if</span> (!tmp_str) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   query = tmp_str;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.var = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.last = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1acd2046121f2656b6e35ec0d5650913">add_rt_cfg_entry</a>, &amp;<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, &amp;errormsg);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.var);</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.var;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1acd2046121f2656b6e35ec0d5650913"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1acd2046121f2656b6e35ec0d5650913">add_rt_cfg_entry</a></div><div class="ttdeci">static int add_rt_cfg_entry(void *arg, int argc, char **argv, char **columnNames)</div><div class="ttdoc">SQLite callback function for RealTime configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00955">res_config_sqlite.c:955</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structrt__cfg__entry__args_html"><div class="ttname"><a href="../../df/dd7/structrt__cfg__entry__args.html">rt_cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00197">res_config_sqlite.c:197</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a612faaaddc0075e3ba690e2299e8b8f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a612faaaddc0075e3ba690e2299e8b8f8">&#9670;&nbsp;</a></span>realtime_multi_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> * realtime_multi_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for RealTime configuration. </p>
<p>This function performs the same actions as <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a1468a11f36fa0ddbf6e07f2fd42c8e50" title="Asterisk callback function for RealTime configuration. ">realtime_handler()</a> except that it can store variables per category, and can return several categories.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">fields</td><td>list of parameters and values to match </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>struct <a class="el" href="../../dd/d18/structast__config.html">ast_config</a> object storing categories and variables. </td></tr>
    <tr><td class="paramname">NULL</td><td>if an error occurred.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a17b5ad55ba185061850f5d682c397a98" title="SQLite callback function for RealTime configuration. ">add_rt_multi_cfg_entry()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">1110</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01061">add_rt_multi_cfg_entry()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l03276">ast_config_new()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00185">cfg_entry_args::cfg</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00209">rt_multi_cfg_entry_args::cfg</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00210">rt_multi_cfg_entry_args::initfield</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;{</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <span class="keywordtype">char</span> *query, *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *op, *tmp_str, *initfield;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a> <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <span class="keywordflow">if</span> (!fields) {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a3aac6b809a257df6ea7c3d2a9d22b9f5">ast_config_new</a>())) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate configuration structure\n&quot;</span>);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   }</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <span class="keywordflow">if</span> (!(initfield = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>))) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   tmp_str = strchr(initfield, <span class="charliteral">&#39; &#39;</span>);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <span class="keywordflow">if</span> (tmp_str)</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      *tmp_str = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   op = (!strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>)) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">    * Asterisk sends us an already escaped string when searching for</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">    * &quot;exten LIKE&quot; (uh!). Handle it separately.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   tmp_str = (!strcmp(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;\\_%&quot;</span>)) ? <span class="stringliteral">&quot;_%&quot;</span> : (<span class="keywordtype">char</span> *)field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="preprocessor">#define QUERY &quot;SELECT * FROM &#39;%q&#39; WHERE%s %q%s &#39;%q&#39;&quot;</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordflow">if</span> (!(query = sqlite_mprintf(QUERY, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a> &amp;&amp; !strcmp(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>)) ? <span class="stringliteral">&quot; commented = 0 AND&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op, tmp_str))) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(initfield);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      op = (!strchr(field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="charliteral">&#39; &#39;</span>)) ? <span class="stringliteral">&quot; =&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s AND %q%s &#39;%q&#39;&quot;</span>, query, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, op, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">if</span> (!tmp_str) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(initfield);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      query = tmp_str;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keywordflow">if</span> (!(tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s ORDER BY %q;&quot;</span>, query, initfield))) {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(initfield);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   query = tmp_str;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.cfg = cfg;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.initfield = initfield;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a17b5ad55ba185061850f5d682c397a98">add_rt_multi_cfg_entry</a>, &amp;<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, &amp;errormsg);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(initfield);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      sqlite_freemem(errormsg);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a3aac6b809a257df6ea7c3d2a9d22b9f5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a3aac6b809a257df6ea7c3d2a9d22b9f5">ast_config_new</a></div><div class="ttdeci">struct ast_config * ast_config_new(void)</div><div class="ttdoc">Create a new base configuration structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03276">extconf.c:3276</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structrt__multi__cfg__entry__args_html"><div class="ttname"><a href="../../d9/dc6/structrt__multi__cfg__entry__args.html">rt_multi_cfg_entry_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00208">res_config_sqlite.c:208</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a17b5ad55ba185061850f5d682c397a98"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a17b5ad55ba185061850f5d682c397a98">add_rt_multi_cfg_entry</a></div><div class="ttdeci">static int add_rt_multi_cfg_entry(void *arg, int argc, char **argv, char **columnNames)</div><div class="ttdoc">SQLite callback function for RealTime configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l01061">res_config_sqlite.c:1061</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a286f8ad5d7b6c69af0ca40c7fb799012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a286f8ad5d7b6c69af0ca40c7fb799012">&#9670;&nbsp;</a></span>realtime_require_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_require_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01510">1510</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01240">ast_rq_is_int()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">sqlite_cache_columns::isint</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">sqlite_cache_columns::name</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>
<div class="fragment"><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;{</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tbl = <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a990147aa70d656ae71a98b581e05d7cd">find_table</a>(tablename);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a> *col;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keywordtype">char</span> *elm;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, res = 0;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <span class="keywordflow">if</span> (!tbl) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <span class="keywordflow">while</span> ((elm = va_arg(ap, <span class="keywordtype">char</span> *))) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      type = va_arg(ap, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a>);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      va_arg(ap, <span class="keywordtype">int</span>);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="comment">/* Check if the field matches the criteria */</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>, col, list) {</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;         <span class="keywordflow">if</span> (strcmp(col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>, elm) == 0) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            <span class="comment">/* SQLite only has two types - the 32-bit integer field that</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">             * is the key column, and everything else (everything else</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">             * being a string).</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <span class="keywordflow">if</span> (col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">isint</a> &amp;&amp; !<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a>(type)) {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Realtime table %s: column &#39;%s&#39; is an integer field, but Asterisk requires that it not be!\n&quot;</span>, tablename, col-&gt;<a class="code" href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;               res = -1;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;         }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <span class="keywordflow">if</span> (!col) {</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Realtime table %s requires column &#39;%s&#39;, but that column does not exist!\n&quot;</span>, tablename, elm);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;(tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">columns</a>));</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3">require_type</a></div><div class="ttdeci">require_type</div><div class="ttdoc">Types used in ast_realtime_require_field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00065">include/asterisk/config.h:65</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a990147aa70d656ae71a98b581e05d7cd"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a990147aa70d656ae71a98b581e05d7cd">find_table</a></div><div class="ttdeci">static struct sqlite_cache_tables * find_table(const char *tablename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">res_config_sqlite.c:626</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_ace37f2e206feb41915a65dad68c3100c"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#ace37f2e206feb41915a65dad68c3100c">sqlite_cache_tables::columns</a></div><div class="ttdeci">struct sqlite_cache_tables::_columns columns</div></div>
<div class="ttc" id="structsqlite__cache__columns_html"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html">sqlite_cache_columns</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00496">res_config_sqlite.c:496</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a751d974203a2f02b0ccf870012d13ee9"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a751d974203a2f02b0ccf870012d13ee9">sqlite_cache_columns::isint</a></div><div class="ttdeci">unsigned char isint</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00499">res_config_sqlite.c:499</a></div></div>
<div class="ttc" id="structsqlite__cache__columns_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d4/d09/structsqlite__cache__columns.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_columns::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00497">res_config_sqlite.c:497</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ab5697a07c1985cb66b0c2f1090e48631"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ab5697a07c1985cb66b0c2f1090e48631">ast_rq_is_int</a></div><div class="ttdeci">int ast_rq_is_int(require_type type)</div><div class="ttdoc">Check if require type is an integer type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01240">include/asterisk/config.h:1240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67f236ac509fad9b8e6b741f438aac70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f236ac509fad9b8e6b741f438aac70">&#9670;&nbsp;</a></span>realtime_store_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_store_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for RealTime configuration (variable create/store). </p>
<p>Asterisk will call this function each time a variable has been created internally and must be stored in the backend engine. are used to find the row to update, e.g. ap is a list of parameters and values with the same format as the other realtime functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">fields</td><td>list of parameters and new values to insert into the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>rowid of inserted row. </td></tr>
    <tr><td class="paramname">-1</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01357">1357</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;{</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keywordtype">char</span> *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_str, *tmp_keys = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_keys2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_vals = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_vals2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, rows_id;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="keywordflow">if</span> (!fields) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="preprocessor">#define QUERY &quot;INSERT into &#39;%q&#39; (%s) VALUES (%s);&quot;</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="keywordflow">if</span> ( tmp_keys2 ) {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;         tmp_keys = sqlite_mprintf(<span class="stringliteral">&quot;%s, %q&quot;</span>, tmp_keys2, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;         sqlite_freemem(tmp_keys2);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;         tmp_keys = sqlite_mprintf(<span class="stringliteral">&quot;%q&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">if</span> (!tmp_keys) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;         sqlite_freemem(tmp_vals);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <span class="keywordflow">if</span> ( tmp_vals2 ) {</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;         tmp_vals = sqlite_mprintf(<span class="stringliteral">&quot;%s, &#39;%q&#39;&quot;</span>, tmp_vals2, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;         sqlite_freemem(tmp_vals2);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;         tmp_vals = sqlite_mprintf(<span class="stringliteral">&quot;&#39;%q&#39;&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">if</span> (!tmp_vals) {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;         sqlite_freemem(tmp_keys);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      tmp_keys2 = tmp_keys;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      tmp_vals2 = tmp_vals;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   } <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>));</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">if</span> (!(tmp_str = sqlite_mprintf(QUERY, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, tmp_keys, tmp_vals))) {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      sqlite_freemem(tmp_keys);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      sqlite_freemem(tmp_vals);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   sqlite_freemem(tmp_keys);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   sqlite_freemem(tmp_vals);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, tmp_str);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, tmp_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">if</span> (!error) {</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      rows_id = sqlite_last_insert_rowid(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      rows_id = -1;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   sqlite_freemem(tmp_str);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   }</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keywordflow">return</span> rows_id;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4554cd4e901164ef2da59b8398d56d8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4554cd4e901164ef2da59b8398d56d8f">&#9670;&nbsp;</a></span>realtime_unload_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_unload_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>unused</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tablename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01546">1546</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">free_table()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">sqlite_cache_tables::name</a>.</p>
<div class="fragment"><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;{</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tbl;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>, tbl, list) {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(tbl-&gt;<a class="code" href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">name</a>, tablename)) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;         <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a>(tbl);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;}</div><div class="ttc" id="structsqlite__tables_html"><div class="ttname"><a href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00509">res_config_sqlite.c:509</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5784f210e0f5472a18ecd99d64ffec9e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a></div><div class="ttdeci">static void free_table(struct sqlite_cache_tables *tblptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">res_config_sqlite.c:557</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html#a5ac083a645d964373f022d03df4849c8">sqlite_cache_tables::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00504">res_config_sqlite.c:504</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa72a6659e8feb3c58964b727dee267b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa72a6659e8feb3c58964b727dee267b0">&#9670;&nbsp;</a></span>realtime_update2_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_update2_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>lookup_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>update_fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">1285</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">first</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00135">sql_buf</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00136">where_buf</a>.</p>
<div class="fragment"><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;{</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keywordtype">char</span> *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp1, *tmp2;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, rows_num, <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *sql = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a>, 100);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *where = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a2b636f309367e4fa49ffb2c0a55e5bdd">where_buf</a>, 100);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   <span class="keywordflow">if</span> (!sql) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;sql, 0, <span class="stringliteral">&quot;UPDATE %s SET&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;where, 0, <span class="stringliteral">&quot; WHERE&quot;</span>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="keywordflow">for</span> (field = lookup_fields; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;where, 0, <span class="stringliteral">&quot;%s %s = %s&quot;</span>,</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;         first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; AND&quot;</span>,</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;         tmp1 = sqlite_mprintf(<span class="stringliteral">&quot;%q&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>),</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;         tmp2 = sqlite_mprintf(<span class="stringliteral">&quot;%Q&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>));</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      sqlite_freemem(tmp1);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      sqlite_freemem(tmp2);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      first = 0;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="keywordflow">if</span> (first) {</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;No criteria specified on update to &#39;%s@%s&#39;!\n&quot;</span>, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, database);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   }</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   first = 1;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="keywordflow">for</span> (field = update_fields; field; field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot;%s %s = %s&quot;</span>,</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;         first ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;,&quot;</span>,</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         tmp1 = sqlite_mprintf(<span class="stringliteral">&quot;%q&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>),</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;         tmp2 = sqlite_mprintf(<span class="stringliteral">&quot;%Q&quot;</span>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>));</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      sqlite_freemem(tmp1);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      sqlite_freemem(tmp2);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      first = 0;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;sql, 0, <span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(where));</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql));</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(sql), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keywordflow">if</span> (!error) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      rows_num = sqlite_changes(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      rows_num = -1;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <span class="keywordflow">return</span> rows_num;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a2b636f309367e4fa49ffb2c0a55e5bdd"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a2b636f309367e4fa49ffb2c0a55e5bdd">where_buf</a></div><div class="ttdeci">static struct ast_threadstorage where_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00136">res_config_sqlite.c:136</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_afc4bfa5a94710e6f323a1033f82425b3"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#afc4bfa5a94710e6f323a1033f82425b3">sql_buf</a></div><div class="ttdeci">static struct ast_threadstorage sql_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00135">res_config_sqlite.c:135</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b655916b15e90dd7bd220863e6e54ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b655916b15e90dd7bd220863e6e54ef">&#9670;&nbsp;</a></span>realtime_update_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int realtime_update_handler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>database</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfield</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname"><em>fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asterisk callback function for RealTime configuration (variable update). </p>
<p>Asterisk will call this function each time a variable has been modified internally and must be updated in the backend engine. keyfield and entity are used to find the row to update, e.g. <code>UPDATE table SET ... WHERE keyfield = 'entity';</code>. ap is a list of parameters and values with the same format as the other realtime functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">database</td><td>the database to use (ignored) </td></tr>
    <tr><td class="paramname">table</td><td>the table to use </td></tr>
    <tr><td class="paramname">keyfield</td><td>the column of the matching cell </td></tr>
    <tr><td class="paramname">entity</td><td>the value of the matching cell </td></tr>
    <tr><td class="paramname">fields</td><td>list of parameters and new values to update in the database </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>number of affected rows. </td></tr>
    <tr><td class="paramname">-1</td><td>if an error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01214">1214</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">mutex</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">RES_CONFIG_SQLITE_BEGIN</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">RES_CONFIG_SQLITE_END</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>
<div class="fragment"><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   <span class="keywordtype">char</span> *query, *errormsg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tmp_str;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *field = fields;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>, rows_num;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table name unspecified\n&quot;</span>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   }</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keywordflow">if</span> (!field) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">/* \cond DOXYGEN_CAN_PARSE_THIS */</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="preprocessor">#undef QUERY</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="preprocessor">#define QUERY &quot;UPDATE &#39;%q&#39; SET %q = &#39;%q&#39;&quot;</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">/* \endcond */</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">if</span> (!(query = sqlite_mprintf(QUERY, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>))) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">while</span> ((field = field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s, %q = &#39;%q&#39;&quot;</span>, query, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, field-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">if</span> (!tmp_str) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      query = tmp_str;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keywordflow">if</span> (!(tmp_str = sqlite_mprintf(<span class="stringliteral">&quot;%s WHERE %q = &#39;%q&#39;;&quot;</span>, query, keyfield, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a>))) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to reallocate SQL query\n&quot;</span>);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      sqlite_freemem(query);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   query = tmp_str;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;SQL query: %s\n&quot;</span>, query);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      error = sqlite_exec(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>, query, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;errormsg);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a>(error)</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <span class="keywordflow">if</span> (!error)</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      rows_num = sqlite_changes(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      rows_num = -1;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   sqlite_freemem(query);</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(errormsg, sqlite_error_string(error)));</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   sqlite_freemem(errormsg);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   <span class="keywordflow">return</span> rows_num;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_ad68868f34232bc245b29318442eff1ce"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ad68868f34232bc245b29318442eff1ce">RES_CONFIG_SQLITE_BEGIN</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00161">res_config_sqlite.c:161</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ad4e4601988acb4a95ecd1ec380359ae5"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a></div><div class="ttdeci">static int entity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00259">isdn_lib.c:259</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a273fbdbcd4491234b3c4dcfe5b5c5d52"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a273fbdbcd4491234b3c4dcfe5b5c5d52">RES_CONFIG_SQLITE_END</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_END(error)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00172">res_config_sqlite.c:172</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a1cf414f64e7e755faa275f1c6383a9cc"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a1cf414f64e7e755faa275f1c6383a9cc">mutex</a></div><div class="ttdeci">static ast_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">res_config_sqlite.c:485</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9493baa3343654ae2828e06ad1ace967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9493baa3343654ae2828e06ad1ace967">&#9670;&nbsp;</a></span>set_var()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_var </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>the address of the variable to set (it will be allocated) </td></tr>
    <tr><td class="paramname">name</td><td>the name of the variable (for error handling) </td></tr>
    <tr><td class="paramname">value</td><td>the value to store in var </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">1</td><td>if an allocation error occurred </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00695">695</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>
<div class="fragment"><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordflow">if</span> (*<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(*<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">if</span> (!*<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate variable %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72f99a227dc7bc5522ba90399070f385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f99a227dc7bc5522ba90399070f385">&#9670;&nbsp;</a></span>unload_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unload_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free resources related to configuration. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#aed5779f84d4ebb67745d801d3ebede43" title="Load the configuration file. ">load_config()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">758</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00843">AST_RWLIST_REMOVE_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">cdr_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">config_table</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">dbfile</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">free_table()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;{</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a> *tbl;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a>);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">while</span> ((tbl = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>, list))) {</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a>(tbl);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div><div class="ttc" id="structsqlite__tables_html"><div class="ttname"><a href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00509">res_config_sqlite.c:509</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5784f210e0f5472a18ecd99d64ffec9e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5784f210e0f5472a18ecd99d64ffec9e">free_table</a></div><div class="ttdeci">static void free_table(struct sqlite_cache_tables *tblptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00557">res_config_sqlite.c:557</a></div></div>
<div class="ttc" id="structsqlite__cache__tables_html"><div class="ttname"><a href="../../d7/d48/structsqlite__cache__tables.html">sqlite_cache_tables</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00503">res_config_sqlite.c:503</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a723e9edf0fe1cdfa024e00803401e74e"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a723e9edf0fe1cdfa024e00803401e74e">dbfile</a></div><div class="ttdeci">static char * dbfile</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">res_config_sqlite.c:456</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a726fbbc714a0071010def61248cd0416"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a726fbbc714a0071010def61248cd0416">config_table</a></div><div class="ttdeci">static char * config_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">res_config_sqlite.c:459</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5684b2e0f909bbe1870dcdfce38e9b6a"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5684b2e0f909bbe1870dcdfce38e9b6a">cdr_table</a></div><div class="ttdeci">static char * cdr_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">res_config_sqlite.c:462</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">1633</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l02988">ast_cdr_unregister()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03006">ast_config_engine_deregister()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00450">cdr_registered</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00453">cli_status_registered</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">db</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00105">RES_CONFIG_SQLITE_NAME</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;{</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a> &amp;&amp; <a class="code" href="../../dc/d07/cdr_8h.html#a915cbbaeaf06834cc96f4b8e3c224251">ast_cdr_unregister</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#acbd22ddbb653b6555ab5bc619780efc0">RES_CONFIG_SQLITE_NAME</a>)) {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a>) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a>));</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7028ff4b11d7167ee4030b4d3e123d76">ast_config_engine_deregister</a>(&amp;<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a7b48efb1da6b47259373e75543e0e320">sqlite_engine</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      sqlite_close(<a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a>);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385">unload_config</a>();</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;}</div><div class="ttc" id="cdr_8h_html_a915cbbaeaf06834cc96f4b8e3c224251"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a915cbbaeaf06834cc96f4b8e3c224251">ast_cdr_unregister</a></div><div class="ttdeci">int ast_cdr_unregister(const char *name)</div><div class="ttdoc">Unregister a CDR handling engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l02988">cdr.c:2988</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_acbd22ddbb653b6555ab5bc619780efc0"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#acbd22ddbb653b6555ab5bc619780efc0">RES_CONFIG_SQLITE_NAME</a></div><div class="ttdeci">#define RES_CONFIG_SQLITE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00105">res_config_sqlite.c:105</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a72f99a227dc7bc5522ba90399070f385"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a72f99a227dc7bc5522ba90399070f385">unload_config</a></div><div class="ttdeci">static void unload_config(void)</div><div class="ttdoc">Free resources related to configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">res_config_sqlite.c:758</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7028ff4b11d7167ee4030b4d3e123d76"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7028ff4b11d7167ee4030b4d3e123d76">ast_config_engine_deregister</a></div><div class="ttdeci">int ast_config_engine_deregister(struct ast_config_engine *del)</div><div class="ttdoc">Deregister config engine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03006">main/config.c:3006</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a7b48efb1da6b47259373e75543e0e320"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a7b48efb1da6b47259373e75543e0e320">sqlite_engine</a></div><div class="ttdeci">static struct ast_config_engine sqlite_engine</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00468">res_config_sqlite.c:468</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a5b8501d6d552484744440e2ded409689"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a5b8501d6d552484744440e2ded409689">cli_status_registered</a></div><div class="ttdeci">static int cli_status_registered</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00453">res_config_sqlite.c:453</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a47b6b9c6ba9ec579e0cc93d497500db8"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a47b6b9c6ba9ec579e0cc93d497500db8">cli_status</a></div><div class="ttdeci">static struct ast_cli_entry cli_status[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00491">res_config_sqlite.c:491</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a4d2e93e1c4b3210b679a29b71df49c21"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a4d2e93e1c4b3210b679a29b71df49c21">cdr_registered</a></div><div class="ttdeci">static int cdr_registered</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00450">res_config_sqlite.c:450</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a082868565d651c0da1d2f0c194cb3248"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a082868565d651c0da1d2f0c194cb3248">db</a></div><div class="ttdeci">static sqlite * db</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">res_config_sqlite.c:444</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Realtime SQLite configuration&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_REALTIME_DRIVER, .requires = &quot;extconfig&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01787">1787</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01787">1787</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a4d2e93e1c4b3210b679a29b71df49c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2e93e1c4b3210b679a29b71df49c21">&#9670;&nbsp;</a></span>cdr_registered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cdr_registered</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set to 1 if the CDR callback function was registered. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00450">450</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>.</p>

</div>
</div>
<a id="a5684b2e0f909bbe1870dcdfce38e9b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5684b2e0f909bbe1870dcdfce38e9b6a">&#9670;&nbsp;</a></span>cdr_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* cdr_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The name of the table used to store CDR entries. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00462">462</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">check_vars()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01561">handle_cli_show_sqlite_status()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>.</p>

</div>
</div>
<a id="a47b6b9c6ba9ec579e0cc93d497500db8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47b6b9c6ba9ec579e0cc93d497500db8">&#9670;&nbsp;</a></span>cli_status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_status[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#ac09349f29c2d83b9c82873b6b30d960f">handle_cli_show_sqlite_status</a> , .summary =  <span class="stringliteral">&quot;Show status information about the SQLite 2 driver&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d4/dd3/res__config__sqlite_8c.html#a3ae4390cbd19f3cbb3b5f51b6488decb">handle_cli_sqlite_show_tables</a> , .summary =  <span class="stringliteral">&quot;Cached table information about the SQLite 2 driver&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="res__config__sqlite_8c_html_ac09349f29c2d83b9c82873b6b30d960f"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#ac09349f29c2d83b9c82873b6b30d960f">handle_cli_show_sqlite_status</a></div><div class="ttdeci">static char * handle_cli_show_sqlite_status(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">Asterisk callback function for the CLI status command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l01561">res_config_sqlite.c:1561</a></div></div>
<div class="ttc" id="res__config__sqlite_8c_html_a3ae4390cbd19f3cbb3b5f51b6488decb"><div class="ttname"><a href="../../d4/dd3/res__config__sqlite_8c.html#a3ae4390cbd19f3cbb3b5f51b6488decb">handle_cli_sqlite_show_tables</a></div><div class="ttdeci">static char * handle_cli_sqlite_show_tables(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd3/res__config__sqlite_8c_source.html#l01595">res_config_sqlite.c:1595</a></div></div>
</div><!-- fragment --><p>Structure containing details and callback functions for the CLI status command. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00491">491</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="a5b8501d6d552484744440e2ded409689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b8501d6d552484744440e2ded409689">&#9670;&nbsp;</a></span>cli_status_registered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cli_status_registered</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set to 1 if the CLI status command callback function was registered. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00453">453</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>.</p>

</div>
</div>
<a id="a726fbbc714a0071010def61248cd0416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726fbbc714a0071010def61248cd0416">&#9670;&nbsp;</a></span>config_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* config_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The name of the static configuration table. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00459">459</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01561">handle_cli_show_sqlite_status()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>.</p>

</div>
</div>
<a id="a082868565d651c0da1d2f0c194cb3248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a082868565d651c0da1d2f0c194cb3248">&#9670;&nbsp;</a></span>db</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sqlite* db</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The SQLite database object. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00444">444</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01443">realtime_destroy_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01357">realtime_store_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01214">realtime_update_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01633">unload_module()</a>.</p>

</div>
</div>
<a id="a723e9edf0fe1cdfa024e00803401e74e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a723e9edf0fe1cdfa024e00803401e74e">&#9670;&nbsp;</a></span>dbfile</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* dbfile</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The path of the database file. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00456">456</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">check_vars()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01561">handle_cli_show_sqlite_status()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00722">load_config()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00758">unload_config()</a>.</p>

</div>
</div>
<a id="a1cf414f64e7e755faa275f1c6383a9cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cf414f64e7e755faa275f1c6383a9cc">&#9670;&nbsp;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> mutex = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The mutex used to prevent simultaneous access to the SQLite database. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00485">485</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00774">cdr_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00905">config_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00626">find_table()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01443">realtime_destroy_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00984">realtime_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01110">realtime_multi_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01357">realtime_store_handler()</a>, <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01214">realtime_update_handler()</a>.</p>

</div>
</div>
<a id="afc4bfa5a94710e6f323a1033f82425b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4bfa5a94710e6f323a1033f82425b3">&#9670;&nbsp;</a></span>sql_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> sql_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#a2ff160eb8cc768ef928c90bb61ded670">__init_sql_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00135">135</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>.</p>

</div>
</div>
<a id="ae6feefd120eabf04edc898d1430fd9f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6feefd120eabf04edc898d1430fd9f0">&#9670;&nbsp;</a></span>sql_create_cdr_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* sql_create_cdr_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SQL query format to create the CDR table if non existent. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00516">516</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>

</div>
</div>
<a id="a7b48efb1da6b47259373e75543e0e320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b48efb1da6b47259373e75543e0e320">&#9670;&nbsp;</a></span>sqlite_engine</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d26/structast__config__engine.html">ast_config_engine</a> sqlite_engine</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The structure specifying all callback functions used by Asterisk for static and RealTime configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00468">468</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

</div>
</div>
<a id="adaee7dc3f4053cefb8d7efed65f42d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaee7dc3f4053cefb8d7efed65f42d30">&#9670;&nbsp;</a></span>sqlite_tables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a>   <a class="el" href="../../d0/ddc/structsqlite__tables.html">sqlite_tables</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a50d89dee97961b1992b5213744a59120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d89dee97961b1992b5213744a59120">&#9670;&nbsp;</a></span>use_cdr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int use_cdr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set to 1 if CDR support is enabled. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00447">447</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00710">check_vars()</a>, and <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01663">load_module()</a>.</p>

</div>
</div>
<a id="a2b636f309367e4fa49ffb2c0a55e5bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b636f309367e4fa49ffb2c0a55e5bdd">&#9670;&nbsp;</a></span>where_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> where_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/dd3/res__config__sqlite_8c.html#ae4f1f17b984a00ca0d3e210095ca5f2f">__init_where_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l00136">136</a> of file <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html">res_config_sqlite.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/dd3/res__config__sqlite_8c_source.html#l01285">realtime_update2_handler()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:22 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
